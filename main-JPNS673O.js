import{a as A,b as Z,c as wx,d as Pi,e as Ex,f as Cx,g as ki,h as _,j as Cy,k as Sy,n as Sx,o as Dy}from"./chunk-7F6XFQYV.js";var Vi={};Ex(Vi,{__addDisposableResource:()=>u_,__assign:()=>jc,__asyncDelegator:()=>r_,__asyncGenerator:()=>Bc,__asyncValues:()=>zc,__await:()=>tr,__awaiter:()=>j,__classPrivateFieldGet:()=>a_,__classPrivateFieldIn:()=>c_,__classPrivateFieldSet:()=>l_,__createBinding:()=>Uc,__decorate:()=>Gy,__disposeResources:()=>d_,__esDecorate:()=>qy,__exportStar:()=>Xy,__extends:()=>Hy,__generator:()=>Jy,__importDefault:()=>s_,__importStar:()=>o_,__makeTemplateObject:()=>i_,__metadata:()=>Qy,__param:()=>Wy,__propKey:()=>Ky,__read:()=>ah,__rest:()=>Mr,__rewriteRelativeImportExtension:()=>f_,__runInitializers:()=>Yy,__setFunctionName:()=>Zy,__spread:()=>e_,__spreadArray:()=>n_,__spreadArrays:()=>t_,__values:()=>Vc,default:()=>Vx});function Hy(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");oh(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Mr(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e}function Gy(n,t,e,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}function Wy(n,t){return function(e,r){t(e,r,n)}}function qy(n,t,e,r,i,o){function s(D){if(D!==void 0&&typeof D!="function")throw new TypeError("Function expected");return D}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",f=!t&&n?r.static?n:n.prototype:null,p=t||(f?Object.getOwnPropertyDescriptor(f,r.name):{}),m,v=!1,g=e.length-1;g>=0;g--){var w={};for(var S in r)w[S]=S==="access"?{}:r[S];for(var S in r.access)w.access[S]=r.access[S];w.addInitializer=function(D){if(v)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(D||null))};var E=(0,e[g])(a==="accessor"?{get:p.get,set:p.set}:p[l],w);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(m=s(E.get))&&(p.get=m),(m=s(E.set))&&(p.set=m),(m=s(E.init))&&i.unshift(m)}else(m=s(E))&&(a==="field"?i.unshift(m):p[l]=m)}f&&Object.defineProperty(f,r.name,p),v=!0}function Yy(n,t,e){for(var r=arguments.length>2,i=0;i<t.length;i++)e=r?t[i].call(n,e):t[i].call(n);return r?e:void 0}function Ky(n){return typeof n=="symbol"?n:"".concat(n)}function Zy(n,t,e){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:e?"".concat(e," ",t):t})}function Qy(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function j(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{f(r.next(p))}catch(m){s(m)}}function l(p){try{f(r.throw(p))}catch(m){s(m)}}function f(p){p.done?o(p.value):i(p.value).then(a,l)}f((r=r.apply(n,t||[])).next())})}function Jy(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(p){return l([f,p])}}function l(f){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(e=0)),e;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,i=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){e.label=f[1];break}if(f[0]===6&&e.label<o[1]){e.label=o[1],o=f;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(f);break}o[2]&&e.ops.pop(),e.trys.pop();continue}f=t.call(n,e)}catch(p){f=[6,p],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Xy(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&Uc(t,n,e)}function Vc(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ah(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return o}function e_(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(ah(arguments[t]));return n}function t_(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var r=Array(n),i=0,t=0;t<e;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function n_(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))}function tr(n){return this instanceof tr?(this.v=n,this):new tr(n)}function Bc(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(w){return Promise.resolve(w).then(g,m)}}function a(g,w){r[g]&&(i[g]=function(S){return new Promise(function(E,D){o.push([g,S,E,D])>1||l(g,S)})},w&&(i[g]=w(i[g])))}function l(g,w){try{f(r[g](w))}catch(S){v(o[0][3],S)}}function f(g){g.value instanceof tr?Promise.resolve(g.value.v).then(p,m):v(o[0][2],g)}function p(g){l("next",g)}function m(g){l("throw",g)}function v(g,w){g(w),o.shift(),o.length&&l(o[0][0],o[0][1])}}function r_(n){var t,e;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=n[i]?function(s){return(e=!e)?{value:tr(n[i](s)),done:!1}:o?o(s):s}:o}}function zc(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof Vc=="function"?Vc(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(f){o({value:f,done:a})},s)}}function i_(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}function o_(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e=sh(n),r=0;r<e.length;r++)e[r]!=="default"&&Uc(t,n,e[r]);return Lx(t,n),t}function s_(n){return n&&n.__esModule?n:{default:n}}function a_(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)}function l_(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e}function c_(n,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?t===n:n.has(t)}function u_(n,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],e&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:t,dispose:r,async:e})}else e&&n.stack.push({async:!0});return t}function d_(n){function t(o){n.error=n.hasError?new jx(o,n.error,"An error was suppressed during disposal."):o,n.hasError=!0}var e,r=0;function i(){for(;e=n.stack.pop();)try{if(!e.async&&r===1)return r=0,n.stack.push(e),Promise.resolve().then(i);if(e.dispose){var o=e.dispose.call(e.value);if(e.async)return r|=2,Promise.resolve(o).then(i,function(s){return t(s),i()})}else r|=1}catch(s){t(s)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function f_(n,t){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,i,o,s){return r?t?".jsx":".js":i&&(!o||!s)?e:i+o+"."+s.toLowerCase()+"js"}):n}var oh,jc,Uc,Lx,sh,jx,Vx,ke=wx(()=>{"use strict";oh=function(n,t){return oh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},oh(n,t)};jc=function(){return jc=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},jc.apply(this,arguments)};Uc=Object.create?function(n,t,e,r){r===void 0&&(r=e);var i=Object.getOwnPropertyDescriptor(t,e);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,r,i)}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]};Lx=Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t},sh=function(n){return sh=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},sh(n)};jx=typeof SuppressedError=="function"?SuppressedError:function(n,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=n,r.suppressed=t,r};Vx={__extends:Hy,__assign:jc,__rest:Mr,__decorate:Gy,__param:Wy,__esDecorate:qy,__runInitializers:Yy,__propKey:Ky,__setFunctionName:Zy,__metadata:Qy,__awaiter:j,__generator:Jy,__createBinding:Uc,__exportStar:Xy,__values:Vc,__read:ah,__spread:e_,__spreadArrays:t_,__spreadArray:n_,__await:tr,__asyncGenerator:Bc,__asyncDelegator:r_,__asyncValues:zc,__makeTemplateObject:i_,__importStar:o_,__importDefault:s_,__classPrivateFieldGet:a_,__classPrivateFieldSet:l_,__classPrivateFieldIn:c_,__addDisposableResource:u_,__disposeResources:d_,__rewriteRelativeImportExtension:f_}});var Nv=Pi(Rv=>{"use strict";Object.defineProperty(Rv,"__esModule",{value:!0});var Ov=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Rv.default=Ov});var Fv=Pi(kv=>{"use strict";Object.defineProperty(kv,"__esModule",{value:!0});var DS=(ke(),ki(Vi)),Nk=DS.__importDefault((Dy(),ki(Sx))),Pk=DS.__importDefault(Nv()),Pv=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Nk.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(o=>_(this,null,function*(){var s,a,l,f;let p=null,m=null,v=null,g=o.status,w=o.statusText;if(o.ok){if(this.method!=="HEAD"){let G=yield o.text();G===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((s=this.headers.get("Accept"))===null||s===void 0)&&s.includes("application/vnd.pgrst.plan+text"))?m=G:m=JSON.parse(G))}let E=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),D=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");E&&D&&D.length>1&&(v=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(p={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,v=null,g=406,w="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{let E=yield o.text();try{p=JSON.parse(E),Array.isArray(p)&&o.status===404&&(m=[],p=null,g=200,w="OK")}catch{o.status===404&&E===""?(g=204,w="No Content"):p={message:E}}if(p&&this.isMaybeSingle&&(!((f=p?.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,g=200,w="OK"),p&&this.shouldThrowOnError)throw new Pk.default(p)}return{error:p,data:m,count:v,status:g,statusText:w}}));return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,l;return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:`${(a=o?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}};kv.default=Pv});var Vv=Pi(jv=>{"use strict";Object.defineProperty(jv,"__esModule",{value:!0});var kk=(ke(),ki(Vi)),Fk=kk.__importDefault(Fv()),Lv=class extends Fk.default{select(t){let e=!1,r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;let l=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),f=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${f}"; options=${l};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};jv.default=Lv});var Lf=Pi(Bv=>{"use strict";Object.defineProperty(Bv,"__esModule",{value:!0});var Lk=(ke(),ki(Vi)),jk=Lk.__importDefault(Vv()),Vk=new RegExp("[,()]"),Uv=class extends jk.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(i=>typeof i=="string"&&Vk.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};Bv.default=Uv});var Hv=Pi($v=>{"use strict";Object.defineProperty($v,"__esModule",{value:!0});var Uk=(ke(),ki(Vi)),ec=Uk.__importDefault(Lf()),zv=class{constructor(t,{headers:e={},schema:r,fetch:i}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=i}select(t,e){let{head:r=!1,count:i}=e??{},o=r?"HEAD":"GET",s=!1,a=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",a),i&&this.headers.append("Prefer",`count=${i}`),new ec.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var i;let o="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let s=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){let a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ec.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){var s;let a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let l=t.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(l.length>0){let f=[...new Set(l)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new ec.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var r;let i="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new ec.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;let r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new ec.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}};$v.default=zv});var IS=Pi(Wv=>{"use strict";Object.defineProperty(Wv,"__esModule",{value:!0});var xS=(ke(),ki(Vi)),Bk=xS.__importDefault(Hv()),zk=xS.__importDefault(Lf()),Gv=class n{constructor(t,{headers:e={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(e),this.schemaName=r,this.fetch=i}from(t){let e=new URL(`${this.url}/${t}`);return new Bk.default(e,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,l=new URL(`${this.url}/rpc/${t}`),f;r||i?(a=r?"HEAD":"GET",Object.entries(e).filter(([m,v])=>v!==void 0).map(([m,v])=>[m,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([m,v])=>{l.searchParams.append(m,v)})):(a="POST",f=e);let p=new Headers(this.headers);return o&&p.set("Prefer",`count=${o}`),new zk.default({method:a,url:l,headers:p,schema:this.schemaName,body:f,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Wv.default=Gv});var PS=Pi(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.PostgrestError=Qt.PostgrestBuilder=Qt.PostgrestTransformBuilder=Qt.PostgrestFilterBuilder=Qt.PostgrestQueryBuilder=Qt.PostgrestClient=void 0;var qs=(ke(),ki(Vi)),TS=qs.__importDefault(IS());Qt.PostgrestClient=TS.default;var MS=qs.__importDefault(Hv());Qt.PostgrestQueryBuilder=MS.default;var AS=qs.__importDefault(Lf());Qt.PostgrestFilterBuilder=AS.default;var OS=qs.__importDefault(Vv());Qt.PostgrestTransformBuilder=OS.default;var RS=qs.__importDefault(Fv());Qt.PostgrestBuilder=RS.default;var NS=qs.__importDefault(Nv());Qt.PostgrestError=NS.default;Qt.default={PostgrestClient:TS.default,PostgrestQueryBuilder:MS.default,PostgrestFilterBuilder:AS.default,PostgrestTransformBuilder:OS.default,PostgrestBuilder:RS.default,PostgrestError:NS.default}});var Bp;function yc(){return Bp}function er(n){let t=Bp;return Bp=n,t}var xy=Symbol("NotFound");function Fo(n){return n===xy||n?.name==="\u0275NotFound"}var Mt=null,_c=!1,zp=1,Dx=null,At=Symbol("SIGNAL");function ee(n){let t=Mt;return Mt=n,t}function Cc(){return Mt}var Lo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function jo(n){if(_c)throw new Error("");if(Mt===null)return;Mt.consumerOnSignalRead(n);let t=Mt.producersTail;if(t!==void 0&&t.producer===n)return;let e,r=Mt.recomputing;if(r&&(e=t!==void 0?t.nextProducer:Mt.producers,e!==void 0&&e.producer===n)){Mt.producersTail=e,e.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Mt&&(!r||Ix(i,Mt)))return;let o=Uo(Mt),s={producer:n,consumer:Mt,nextProducer:e,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Mt.producersTail=s,t!==void 0?t.nextProducer=s:Mt.producers=s,o&&Ay(n,s)}function Iy(){zp++}function Sc(n){if(!(Uo(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===zp)){if(!n.producerMustRecompute(n)&&!ga(n)){Ec(n);return}n.producerRecomputeValue(n),Ec(n)}}function $p(n){if(n.consumers===void 0)return;let t=_c;_c=!0;try{for(let e=n.consumers;e!==void 0;e=e.nextConsumer){let r=e.consumer;r.dirty||xx(r)}}finally{_c=t}}function Hp(){return Mt?.consumerAllowSignalWrites!==!1}function xx(n){n.dirty=!0,$p(n),n.consumerMarkedDirty?.(n)}function Ec(n){n.dirty=!1,n.lastCleanEpoch=zp}function Vo(n){return n&&Ty(n),ee(n)}function Ty(n){n.producersTail=void 0,n.recomputing=!0}function ma(n,t){ee(t),n&&My(n)}function My(n){n.recomputing=!1;let t=n.producersTail,e=t!==void 0?t.nextProducer:n.producers;if(e!==void 0){if(Uo(n))do e=Gp(e);while(e!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function ga(n){for(let t=n.producers;t!==void 0;t=t.nextProducer){let e=t.producer,r=t.lastReadVersion;if(r!==e.version||(Sc(e),r!==e.version))return!0}return!1}function va(n){if(Uo(n)){let t=n.producers;for(;t!==void 0;)t=Gp(t)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Ay(n,t){let e=n.consumersTail,r=Uo(n);if(e!==void 0?(t.nextConsumer=e.nextConsumer,e.nextConsumer=t):(t.nextConsumer=void 0,n.consumers=t),t.prevConsumer=e,n.consumersTail=t,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)Ay(i.producer,i)}function Gp(n){let t=n.producer,e=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!Uo(t)){let o=t.producers;for(;o!==void 0;)o=Gp(o)}return e}function Uo(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Dc(n){Dx?.(n)}function Ix(n,t){let e=t.producersTail;if(e!==void 0){let r=t.producers;do{if(r===n)return!0;if(r===e)break;r=r.nextProducer}while(r!==void 0)}return!1}function xc(n,t){return Object.is(n,t)}function Ic(n,t){let e=Object.create(Tx);e.computation=n,t!==void 0&&(e.equal=t);let r=()=>{if(Sc(e),jo(e),e.value===ha)throw e.error;return e.value};return r[At]=e,Dc(e),r}var bc=Symbol("UNSET"),wc=Symbol("COMPUTING"),ha=Symbol("ERRORED"),Tx=Z(A({},Lo),{value:bc,dirty:!0,error:null,equal:xc,kind:"computed",producerMustRecompute(n){return n.value===bc||n.value===wc},producerRecomputeValue(n){if(n.value===wc)throw new Error("");let t=n.value;n.value=wc;let e=Vo(n),r,i=!1;try{r=n.computation(),ee(null),i=t!==bc&&t!==ha&&r!==ha&&n.equal(t,r)}catch(o){r=ha,n.error=o}finally{ma(n,e)}if(i){n.value=t;return}n.value=r,n.version++}});function Mx(){throw new Error}var Oy=Mx;function Ry(n){Oy(n)}function Wp(n){Oy=n}var Ax=null;function qp(n,t){let e=Object.create(Tc);e.value=n,t!==void 0&&(e.equal=t);let r=()=>Ny(e);return r[At]=e,Dc(e),[r,s=>Bo(e,s),s=>Yp(e,s)]}function Ny(n){return jo(n),n.value}function Bo(n,t){Hp()||Ry(n),n.equal(n.value,t)||(n.value=t,Ox(n))}function Yp(n,t){Hp()||Ry(n),Bo(n,t(n.value))}var Tc=Z(A({},Lo),{equal:xc,value:void 0,kind:"signal"});function Ox(n){n.version++,Iy(),$p(n),Ax?.(n)}function se(n){return typeof n=="function"}function zo(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Mc=zo(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Fi(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var He=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(o){t=o instanceof Mc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Py(o)}catch(s){t=t??[],s instanceof Mc?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Mc(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Py(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Fi(e,t)}remove(t){let{_finalizers:e}=this;e&&Fi(e,t),t instanceof n&&t._removeParent(this)}};He.EMPTY=(()=>{let n=new He;return n.closed=!0,n})();var Kp=He.EMPTY;function Ac(n){return n instanceof He||n&&"closed"in n&&se(n.remove)&&se(n.add)&&se(n.unsubscribe)}function Py(n){se(n)?n():n.unsubscribe()}var Ln={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $o={setTimeout(n,t,...e){let{delegate:r}=$o;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=$o;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Oc(n){$o.setTimeout(()=>{let{onUnhandledError:t}=Ln;if(t)t(n);else throw n})}function ya(){}var ky=Zp("C",void 0,void 0);function Fy(n){return Zp("E",void 0,n)}function Ly(n){return Zp("N",n,void 0)}function Zp(n,t,e){return{kind:n,value:t,error:e}}var Li=null;function Ho(n){if(Ln.useDeprecatedSynchronousErrorHandling){let t=!Li;if(t&&(Li={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=Li;if(Li=null,e)throw r}}else n()}function jy(n){Ln.useDeprecatedSynchronousErrorHandling&&Li&&(Li.errorThrown=!0,Li.error=n)}var ji=class extends He{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ac(t)&&t.add(this)):this.destination=Px}static create(t,e,r){return new oi(t,e,r)}next(t){this.isStopped?Jp(Ly(t),this):this._next(t)}error(t){this.isStopped?Jp(Fy(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Jp(ky,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Rx=Function.prototype.bind;function Qp(n,t){return Rx.call(n,t)}var Xp=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){Rc(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){Rc(r)}else Rc(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Rc(e)}}},oi=class extends ji{constructor(t,e,r){super();let i;if(se(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&Ln.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Qp(t.next,o),error:t.error&&Qp(t.error,o),complete:t.complete&&Qp(t.complete,o)}):i=t}this.destination=new Xp(i)}};function Rc(n){Ln.useDeprecatedSynchronousErrorHandling?jy(n):Oc(n)}function Nx(n){throw n}function Jp(n,t){let{onStoppedNotification:e}=Ln;e&&$o.setTimeout(()=>e(n,t))}var Px={closed:!0,next:ya,error:Nx,complete:ya};var Go=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ut(n){return n}function eh(...n){return th(n)}function th(n){return n.length===0?Ut:n.length===1?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}var he=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){let o=Fx(e)?e:new oi(e,r,i);return Ho(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=Vy(r),new r((i,o)=>{let s=new oi({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[Go](){return this}pipe(...e){return th(e)(this)}toPromise(e){return e=Vy(e),new e((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function Vy(n){var t;return(t=n??Ln.Promise)!==null&&t!==void 0?t:Promise}function kx(n){return n&&se(n.next)&&se(n.error)&&se(n.complete)}function Fx(n){return n&&n instanceof ji||kx(n)&&Ac(n)}function nh(n){return se(n?.lift)}function pe(n){return t=>{if(nh(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,t,e,r,i){return new rh(n,t,e,r,i)}var rh=class extends ji{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Wo(){return pe((n,t)=>{let e=null;n._refCount++;let r=ue(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}var qo=class extends he{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,nh(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new He;let e=this.getSubject();t.add(this.source.subscribe(ue(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=He.EMPTY)}return t}refCount(){return Wo()(this)}};var Uy=zo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Be=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new Nc(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new Uy}next(e){Ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){Ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){Ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Kp:(this.currentObservers=null,o.push(e),new He(()=>{this.currentObservers=null,Fi(o,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){let e=new he;return e.source=this,e}}return n.create=(t,e)=>new Nc(t,e),n})(),Nc=class extends Be{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:Kp}};var at=class extends Be{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var ih={now(){return(ih.delegate||Date).now()},delegate:void 0};var Pc=class extends He{constructor(t,e){super()}schedule(t,e=0){return this}};var _a={setInterval(n,t,...e){let{delegate:r}=_a;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=_a;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var kc=class extends Pc{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,r=0){return _a.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&_a.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Fi(r,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var Yo=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}};Yo.now=ih.now;var Fc=class extends Yo{constructor(t,e=Yo.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}};var By=new Fc(kc);var Ot=new he(n=>n.complete());function zy(n){return n&&se(n.schedule)}function $y(n){return n[n.length-1]}function Lc(n){return se($y(n))?n.pop():void 0}function si(n){return zy($y(n))?n.pop():void 0}ke();var $c=n=>n&&typeof n.length=="number"&&typeof n!="function";function Hc(n){return se(n?.then)}function Gc(n){return se(n[Go])}function Wc(n){return Symbol.asyncIterator&&se(n?.[Symbol.asyncIterator])}function qc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Ux(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yc=Ux();function Kc(n){return se(n?.[Yc])}ke();function Zc(n){return Bc(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:i}=yield tr(e.read());if(i)return yield tr(void 0);yield yield tr(r)}}finally{e.releaseLock()}})}function Qc(n){return se(n?.getReader)}function tt(n){if(n instanceof he)return n;if(n!=null){if(Gc(n))return Bx(n);if($c(n))return zx(n);if(Hc(n))return $x(n);if(Wc(n))return p_(n);if(Kc(n))return Hx(n);if(Qc(n))return Gx(n)}throw qc(n)}function Bx(n){return new he(t=>{let e=n[Go]();if(se(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function zx(n){return new he(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function $x(n){return new he(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Oc)})}function Hx(n){return new he(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function p_(n){return new he(t=>{Wx(n,t).catch(e=>t.error(e))})}function Gx(n){return p_(Zc(n))}function Wx(n,t){var e,r,i,o;return j(this,void 0,void 0,function*(){try{for(e=zc(n);r=yield e.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})}function Xt(n,t,e,r=0,i=!1){let o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Jc(n,t=0){return pe((e,r)=>{e.subscribe(ue(r,i=>Xt(r,n,()=>r.next(i),t),()=>Xt(r,n,()=>r.complete(),t),i=>Xt(r,n,()=>r.error(i),t)))})}function Xc(n,t=0){return pe((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function h_(n,t){return tt(n).pipe(Xc(t),Jc(t))}function m_(n,t){return tt(n).pipe(Xc(t),Jc(t))}function g_(n,t){return new he(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function v_(n,t){return new he(e=>{let r;return Xt(e,t,()=>{r=n[Yc](),Xt(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){e.error(s);return}o?e.complete():e.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function eu(n,t){if(!n)throw new Error("Iterable cannot be null");return new he(e=>{Xt(e,t,()=>{let r=n[Symbol.asyncIterator]();Xt(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function y_(n,t){return eu(Zc(n),t)}function __(n,t){if(n!=null){if(Gc(n))return h_(n,t);if($c(n))return g_(n,t);if(Hc(n))return m_(n,t);if(Wc(n))return eu(n,t);if(Kc(n))return v_(n,t);if(Qc(n))return y_(n,t)}throw qc(n)}function Q(n,t){return t?__(n,t):tt(n)}function $(...n){let t=si(n);return Q(n,t)}function Ko(n,t){let e=se(n)?n:()=>n,r=i=>i.error(e());return new he(t?i=>t.schedule(r,0,i):r)}function lh(n){return!!n&&(n instanceof he||se(n.lift)&&se(n.subscribe))}var dn=zo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ch(n,t){let e=typeof t=="object";return new Promise((r,i)=>{let o=!1,s;n.subscribe({next:a=>{s=a,o=!0},error:i,complete:()=>{o?r(s):e?r(t.defaultValue):i(new dn)}})})}function nr(n,t){let e=typeof t=="object";return new Promise((r,i)=>{let o=new oi({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{e?r(t.defaultValue):i(new dn)}});n.subscribe(o)})}function ae(n,t){return pe((e,r)=>{let i=0;e.subscribe(ue(r,o=>{r.next(n.call(t,o,i++))}))})}var{isArray:qx}=Array;function Yx(n,t){return qx(t)?n(...t):n(t)}function tu(n){return ae(t=>Yx(n,t))}var{isArray:Kx}=Array,{getPrototypeOf:Zx,prototype:Qx,keys:Jx}=Object;function nu(n){if(n.length===1){let t=n[0];if(Kx(t))return{args:t,keys:null};if(Xx(t)){let e=Jx(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function Xx(n){return n&&typeof n=="object"&&Zx(n)===Qx}function ru(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function ba(...n){let t=si(n),e=Lc(n),{args:r,keys:i}=nu(n);if(r.length===0)return Q([],t);let o=new he(eI(r,t,i?s=>ru(i,s):Ut));return e?o.pipe(tu(e)):o}function eI(n,t,e=Ut){return r=>{b_(t,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)b_(t,()=>{let f=Q(n[l],t),p=!1;f.subscribe(ue(r,m=>{o[l]=m,p||(p=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function b_(n,t,e){n?Xt(e,n,t):t()}function w_(n,t,e,r,i,o,s,a){let l=[],f=0,p=0,m=!1,v=()=>{m&&!l.length&&!f&&t.complete()},g=S=>f<r?w(S):l.push(S),w=S=>{o&&t.next(S),f++;let E=!1;tt(e(S,p++)).subscribe(ue(t,D=>{i?.(D),o?g(D):t.next(D)},()=>{E=!0},void 0,()=>{if(E)try{for(f--;l.length&&f<r;){let D=l.shift();s?Xt(t,s,()=>w(D)):w(D)}v()}catch(D){t.error(D)}}))};return n.subscribe(ue(t,g,()=>{m=!0,v()})),()=>{a?.()}}function Qe(n,t,e=1/0){return se(t)?Qe((r,i)=>ae((o,s)=>t(r,o,i,s))(tt(n(r,i))),e):(typeof t=="number"&&(e=t),pe((r,i)=>w_(r,i,n,e)))}function ai(n=1/0){return Qe(Ut,n)}function E_(){return ai(1)}function Zo(...n){return E_()(Q(n,si(n)))}function wa(n){return new he(t=>{tt(n()).subscribe(t)})}function uh(...n){let t=Lc(n),{args:e,keys:r}=nu(n),i=new he(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,f=s;for(let p=0;p<s;p++){let m=!1;tt(e[p]).subscribe(ue(o,v=>{m||(m=!0,f--),a[p]=v},()=>l--,void 0,()=>{(!l||!m)&&(f||o.next(r?ru(r,a):a),o.complete())}))}});return t?i.pipe(tu(t)):i}function lt(n,t){return pe((e,r)=>{let i=0;e.subscribe(ue(r,o=>n.call(t,o,i++)&&r.next(o)))})}function Ar(n){return pe((t,e)=>{let r=null,i=!1,o;r=t.subscribe(ue(e,void 0,void 0,s=>{o=tt(n(s,Ar(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function C_(n,t,e,r,i){return(o,s)=>{let a=e,l=t,f=0;o.subscribe(ue(s,p=>{let m=f++;l=a?n(l,p,m):(a=!0,p),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function rr(n,t){return se(t)?Qe(n,t,1):Qe(n,1)}function dh(n,t=By){return pe((e,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let f=o;o=null,r.next(f)}};function l(){let f=s+n,p=t.now();if(p<f){i=this.schedule(void 0,f-p),r.add(i);return}a()}e.subscribe(ue(r,f=>{o=f,s=t.now(),i||(i=t.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function li(n){return pe((t,e)=>{let r=!1;t.subscribe(ue(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function Et(n){return n<=0?()=>Ot:pe((t,e)=>{let r=0;t.subscribe(ue(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function fh(n,t=Ut){return n=n??tI,pe((e,r)=>{let i,o=!0;e.subscribe(ue(r,s=>{let a=t(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function tI(n,t){return n===t}function iu(n=nI){return pe((t,e)=>{let r=!1;t.subscribe(ue(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function nI(){return new dn}function Ui(n){return pe((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function Or(n,t){let e=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):Ut,Et(1),e?li(t):iu(()=>new dn))}function Qo(n){return n<=0?()=>Ot:pe((t,e)=>{let r=[];t.subscribe(ue(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function ph(n,t){let e=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):Ut,Qo(1),e?li(t):iu(()=>new dn))}function hh(n,t){return pe(C_(n,t,arguments.length>=2,!0))}function mh(...n){let t=si(n);return pe((e,r)=>{(t?Zo(n,e,t):Zo(n,e)).subscribe(r)})}function Ve(n,t){return pe((e,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();e.subscribe(ue(r,l=>{i?.unsubscribe();let f=0,p=o++;tt(n(l,p)).subscribe(i=ue(r,m=>r.next(t?t(l,m,p,f++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function jn(n){return pe((t,e)=>{tt(n).subscribe(ue(e,()=>e.complete(),ya)),!e.closed&&t.subscribe(e)})}function mt(n,t,e){let r=se(n)||t||e?{next:n,error:t,complete:e}:n;return r?pe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,l=>{var f;(f=r.next)===null||f===void 0||f.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var f;a=!1,(f=r.error)===null||f===void 0||f.call(r,l),o.error(l)},()=>{var l,f;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):Ut}function S_(n){let t=ee(null);try{return n()}finally{ee(t)}}var lu="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",k=class extends Error{code;constructor(t,e){super(kr(t,e)),this.code=t}};function rI(n){return`NG0${Math.abs(n)}`}function kr(n,t){return`${rI(n)}${t?": "+t:""}`}var Fr=globalThis;function Ce(n){for(let t in n)if(n[t]===Ce)return t;throw Error("")}function I_(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Nr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Nr).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r>=0?e.slice(0,r):e}function cu(n,t){return n?t?`${n} ${t}`:n:t||""}var iI=Ce({__forward_ref__:Ce});function gt(n){return n.__forward_ref__=gt,n.toString=function(){return Nr(this())},n}function Ct(n){return Ih(n)?n():n}function Ih(n){return typeof n=="function"&&n.hasOwnProperty(iI)&&n.__forward_ref__===gt}function F(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function fn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Da(n){return oI(n,uu)}function Th(n){return Da(n)!==null}function oI(n,t){return n.hasOwnProperty(t)&&n[t]||null}function sI(n){let t=n?.[uu]??null;return t||null}function vh(n){return n&&n.hasOwnProperty(su)?n[su]:null}var uu=Ce({\u0275prov:Ce}),su=Ce({\u0275inj:Ce}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=F({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Mh(n){return n&&!!n.\u0275providers}var Ah=Ce({\u0275cmp:Ce}),Oh=Ce({\u0275dir:Ce}),Rh=Ce({\u0275pipe:Ce}),Nh=Ce({\u0275mod:Ce}),Ca=Ce({\u0275fac:Ce}),Gi=Ce({__NG_ELEMENT_ID__:Ce}),D_=Ce({__NG_ENV_ID__:Ce});function ir(n){return typeof n=="string"?n:n==null?"":String(n)}function T_(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ir(n)}var M_=Ce({ngErrorCode:Ce}),aI=Ce({ngErrorMessage:Ce}),lI=Ce({ngTokenPath:Ce});function Ph(n,t){return A_("",-200,t)}function du(n,t){throw new k(-201,!1)}function A_(n,t,e){let r=new k(t,n);return r[M_]=t,r[aI]=n,e&&(r[lI]=e),r}function cI(n){return n[M_]}var yh;function O_(){return yh}function Bt(n){let t=yh;return yh=n,t}function kh(n,t,e){let r=Da(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&8)return null;if(t!==void 0)return t;du(n,"Injector")}var uI={},Bi=uI,dI="__NG_DI_FLAG__",_h=class{injector;constructor(t){this.injector=t}retrieve(t,e){let r=zi(e)||0;try{return this.injector.get(t,r&8?null:Bi,r)}catch(i){if(Fo(i))return i;throw i}}};function fI(n,t=0){let e=yc();if(e===void 0)throw new k(-203,!1);if(e===null)return kh(n,void 0,t);{let r=pI(t),i=e.retrieve(n,r);if(Fo(i)){if(r.optional)return null;throw i}return i}}function V(n,t=0){return(O_()||fI)(Ct(n),t)}function I(n,t){return V(n,zi(t))}function zi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function pI(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function bh(n){let t=[];for(let e=0;e<n.length;e++){let r=Ct(n[e]);if(Array.isArray(r)){if(r.length===0)throw new k(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=hI(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}t.push(V(i,o))}else t.push(V(r))}return t}function hI(n){return n[dI]}function ci(n,t){let e=n.hasOwnProperty(Ca);return e?n[Ca]:null}function R_(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function N_(n){return n.flat(Number.POSITIVE_INFINITY)}function fu(n,t){n.forEach(e=>Array.isArray(e)?fu(e,t):t(e))}function Fh(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function xa(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function P_(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(i===1)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;){let o=i-2;n[i]=n[o],i--}n[t]=e,n[t+1]=r}}function pu(n,t,e){let r=Xo(n,t);return r>=0?n[r|1]=e:(r=~r,P_(n,r,t,e)),r}function hu(n,t){let e=Xo(n,t);if(e>=0)return n[e|1]}function Xo(n,t){return mI(n,t,1)}function mI(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}var di={},zt=[],Lr=new U(""),Lh=new U("",-1),jh=new U(""),Sa=class{get(t,e=Bi){if(e===Bi){let i=A_("",-201);throw i.name="\u0275NotFound",i}return e}};function Vh(n){return n[Nh]||null}function jr(n){return n[Ah]||null}function Uh(n){return n[Oh]||null}function k_(n){return n[Rh]||null}function or(n){return{\u0275providers:n}}function F_(n){return or([{provide:Lr,multi:!0,useValue:n}])}function L_(...n){return{\u0275providers:Bh(!0,n),\u0275fromNgModule:!0}}function Bh(n,...t){let e=[],r=new Set,i,o=s=>{e.push(s)};return fu(t,s=>{let a=s;au(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&j_(i,o),e}function j_(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:i}=n[e];zh(i,o=>{t(o,r)})}}function au(n,t,e,r){if(n=Ct(n),!n)return!1;let i=null,o=vh(n),s=!o&&jr(n);if(!o&&!s){let l=n.ngModule;if(o=vh(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let f of l)au(f,t,e,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let f;try{fu(o.imports,p=>{au(p,t,e,r)&&(f||=[],f.push(p))})}finally{}f!==void 0&&j_(f,t)}if(!a){let f=ci(i)||(()=>new i);t({provide:i,useFactory:f,deps:zt},i),t({provide:jh,useValue:i,multi:!0},i),t({provide:Lr,useValue:()=>V(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let f=n;zh(l,p=>{t(p,f)})}}else return!1;return i!==n&&n.providers!==void 0}function zh(n,t){for(let e of n)Mh(e)&&(e=e.\u0275providers),Array.isArray(e)?zh(e,t):t(e)}var gI=Ce({provide:String,useValue:Ce});function V_(n){return n!==null&&typeof n=="object"&&gI in n}function vI(n){return!!(n&&n.useExisting)}function yI(n){return!!(n&&n.useFactory)}function $i(n){return typeof n=="function"}function U_(n){return!!n.useClass}var Ia=new U(""),ou={},x_={},gh;function Ta(){return gh===void 0&&(gh=new Sa),gh}var Je=class{},Hi=class extends Je{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,Eh(t,s=>this.processProvider(s)),this.records.set(Lh,Jo(void 0,this)),i.has("environment")&&this.records.set(Je,Jo(void 0,this));let o=this.records.get(Ia);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(jh,zt,{self:!0}))}retrieve(t,e){let r=zi(e)||0;try{return this.get(t,Bi,r)}catch(i){if(Fo(i))return i;throw i}}destroy(){Ea(this),this._destroyed=!0;let t=ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ee(t)}}onDestroy(t){return Ea(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Ea(this);let e=er(this),r=Bt(void 0),i;try{return t()}finally{er(e),Bt(r)}}get(t,e=Bi,r){if(Ea(this),t.hasOwnProperty(D_))return t[D_](this);let i=zi(r),o,s=er(this),a=Bt(void 0);try{if(!(i&4)){let f=this.records.get(t);if(f===void 0){let p=CI(t)&&Da(t);p&&this.injectableDefInScope(p)?f=Jo(wh(t),ou):f=null,this.records.set(t,f)}if(f!=null)return this.hydrate(t,f,i)}let l=i&2?Ta():this.parent;return e=i&8&&e===Bi?null:e,l.get(t,e)}catch(l){let f=cI(l);throw f===-200||f===-201?new k(f,null):l}finally{Bt(a),er(s)}}resolveInjectorInitializers(){let t=ee(null),e=er(this),r=Bt(void 0),i;try{let o=this.get(Lr,zt,{self:!0});for(let s of o)s()}finally{er(e),Bt(r),ee(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(Nr(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Ct(t);let e=$i(t)?t:Ct(t&&t.provide),r=bI(t);if(!$i(t)&&t.multi===!0){let i=this.records.get(e);i||(i=Jo(void 0,ou,!0),i.factory=()=>bh(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e,r){let i=ee(null);try{if(e.value===x_)throw Ph(Nr(t));return e.value===ou&&(e.value=x_,e.value=e.factory(void 0,r)),typeof e.value=="object"&&e.value&&EI(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{ee(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Ct(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function wh(n){let t=Da(n),e=t!==null?t.factory:ci(n);if(e!==null)return e;if(n instanceof U)throw new k(204,!1);if(n instanceof Function)return _I(n);throw new k(204,!1)}function _I(n){if(n.length>0)throw new k(204,!1);let e=sI(n);return e!==null?()=>e.factory(n):()=>new n}function bI(n){if(V_(n))return Jo(void 0,n.useValue);{let t=$h(n);return Jo(t,ou)}}function $h(n,t,e){let r;if($i(n)){let i=Ct(n);return ci(i)||wh(i)}else if(V_(n))r=()=>Ct(n.useValue);else if(yI(n))r=()=>n.useFactory(...bh(n.deps||[]));else if(vI(n))r=(i,o)=>V(Ct(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ct(n&&(n.useClass||n.provide));if(wI(n))r=()=>new i(...bh(n.deps));else return ci(i)||wh(i)}return r}function Ea(n){if(n.destroyed)throw new k(205,!1)}function Jo(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function wI(n){return!!n.deps}function EI(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function CI(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Eh(n,t){for(let e of n)Array.isArray(e)?Eh(e,t):e&&Mh(e)?Eh(e.\u0275providers,t):t(e)}function vt(n,t){let e;n instanceof Hi?(Ea(n),e=n):e=new _h(n);let r,i=er(e),o=Bt(void 0);try{return t()}finally{er(i),Bt(o)}}function B_(){return O_()!==void 0||yc()!=null}var Un=0,Y=1,te=2,ct=3,bn=4,wn=5,es=6,ts=7,Xe=8,fi=9,sr=10,Me=11,ns=12,Hh=13,Wi=14,pn=15,pi=16,qi=17,ar=18,Ma=19,Gh=20,Rr=21,mu=22,Aa=23,hn=24,Yi=25,Ki=26,Ue=27,z_=1,Wh=6,hi=7,Oa=8,Zi=9,nt=10;function lr(n){return Array.isArray(n)&&typeof n[z_]=="object"}function Bn(n){return Array.isArray(n)&&n[z_]===!0}function qh(n){return(n.flags&4)!==0}function Vr(n){return n.componentOffset>-1}function rs(n){return(n.flags&1)===1}function cr(n){return!!n.template}function is(n){return(n[te]&512)!==0}function Qi(n){return(n[te]&256)===256}var $_="svg",H_="math";function En(n){for(;Array.isArray(n);)n=n[Un];return n}function Yh(n,t){return En(t[n])}function Cn(n,t){return En(t[n.index])}function Ra(n,t){return n.data[t]}function Na(n,t){return n[t]}function Kh(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}function Sn(n,t){let e=t[n];return lr(e)?e:e[Un]}function G_(n){return(n[te]&4)===4}function gu(n){return(n[te]&128)===128}function W_(n){return Bn(n[ct])}function Dn(n,t){return t==null?null:n[t]}function Zh(n){n[qi]=0}function Qh(n){n[te]&1024||(n[te]|=1024,gu(n)&&os(n))}function q_(n,t){for(;n>0;)t=t[Wi],n--;return t}function Pa(n){return!!(n[te]&9216||n[hn]?.dirty)}function vu(n){n[sr].changeDetectionScheduler?.notify(8),n[te]&64&&(n[te]|=1024),Pa(n)&&os(n)}function os(n){n[sr].changeDetectionScheduler?.notify(0);let t=ui(n);for(;t!==null&&!(t[te]&8192||(t[te]|=8192,!gu(t)));)t=ui(t)}function Jh(n,t){if(Qi(n))throw new k(911,!1);n[Rr]===null&&(n[Rr]=[]),n[Rr].push(t)}function Y_(n,t){if(n[Rr]===null)return;let e=n[Rr].indexOf(t);e!==-1&&n[Rr].splice(e,1)}function ui(n){let t=n[ct];return Bn(t)?t[ct]:t}function Xh(n){return n[ts]??=[]}function em(n){return n.cleanup??=[]}function K_(n,t,e,r){let i=Xh(t);i.push(e),n.firstCreatePass&&em(n).push(r,i.length-1)}var de={lFrame:lb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ch=!1;function Z_(){return de.lFrame.elementDepthCount}function Q_(){de.lFrame.elementDepthCount++}function tm(){de.lFrame.elementDepthCount--}function yu(){return de.bindingsEnabled}function J_(){return de.skipHydrationRootTNode!==null}function nm(n){return de.skipHydrationRootTNode===n}function rm(){de.skipHydrationRootTNode=null}function K(){return de.lFrame.lView}function Fe(){return de.lFrame.tView}function N(n){return de.lFrame.contextLView=n,n[Xe]}function P(n){return de.lFrame.contextLView=null,n}function rt(){let n=im();for(;n!==null&&n.type===64;)n=n.parent;return n}function im(){return de.lFrame.currentTNode}function X_(){let n=de.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function ss(n,t){let e=de.lFrame;e.currentTNode=n,e.isParent=t}function om(){return de.lFrame.isParent}function eb(){de.lFrame.isParent=!1}function tb(){return de.lFrame.contextLView}function sm(){return Ch}function am(n){let t=Ch;return Ch=n,t}function Ji(){let n=de.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function lm(){return de.lFrame.bindingIndex}function nb(n){return de.lFrame.bindingIndex=n}function Ur(){return de.lFrame.bindingIndex++}function ka(n){let t=de.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function rb(){return de.lFrame.inI18n}function ib(n,t){let e=de.lFrame;e.bindingIndex=e.bindingRootIndex=n,_u(t)}function ob(){return de.lFrame.currentDirectiveIndex}function _u(n){de.lFrame.currentDirectiveIndex=n}function sb(n){let t=de.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function cm(){return de.lFrame.currentQueryIndex}function bu(n){de.lFrame.currentQueryIndex=n}function SI(n){let t=n[Y];return t.type===2?t.declTNode:t.type===1?n[wn]:null}function um(n,t,e){if(e&4){let i=t,o=n;for(;i=i.parent,i===null&&!(e&1);)if(i=SI(o),i===null||(o=o[Wi],i.type&10))break;if(i===null)return!1;t=i,n=o}let r=de.lFrame=ab();return r.currentTNode=t,r.lView=n,!0}function wu(n){let t=ab(),e=n[Y];de.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function ab(){let n=de.lFrame,t=n===null?null:n.child;return t===null?lb(n):t}function lb(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function cb(){let n=de.lFrame;return de.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var dm=cb;function Eu(){let n=cb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ub(n){return(de.lFrame.contextLView=q_(n,de.lFrame.contextLView))[Xe]}function zn(){return de.lFrame.selectedIndex}function mi(n){de.lFrame.selectedIndex=n}function as(){let n=de.lFrame;return Ra(n.tView,n.selectedIndex)}function db(){return de.lFrame.currentNamespace}var fb=!0;function Cu(){return fb}function Fa(n){fb=n}function Sh(n,t=null,e=null,r){let i=fm(n,t,e,r);return i.resolveInjectorInitializers(),i}function fm(n,t=null,e=null,r,i=new Set){let o=[e||zt,L_(n)];return r=r||(typeof n=="object"?void 0:Nr(n)),new Hi(o,t||Ta(),r||null,i)}var $t=class n{static THROW_IF_NOT_FOUND=Bi;static NULL=new Sa;static create(t,e){if(Array.isArray(t))return Sh({name:""},e,t,"");{let r=t.name??"";return Sh({name:r},t.parent,t.providers,r)}}static \u0275prov=F({token:n,providedIn:"any",factory:()=>V(Lh)});static __NG_ELEMENT_ID__=-1},ze=new U(""),$n=(()=>{class n{static __NG_ELEMENT_ID__=DI;static __NG_ENV_ID__=e=>e}return n})(),Dh=class extends $n{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Qi(this._lView)}onDestroy(t){let e=this._lView;return Jh(e,t),()=>Y_(e,t)}};function DI(){return new Dh(K())}var Vn=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Ht=new U("",{providedIn:"root",factory:()=>{let n=I(Je),t;return e=>{n.destroyed&&!t?setTimeout(()=>{throw e}):(t??=n.get(Vn),t.handleError(e))}}}),pb={provide:Lr,useValue:()=>void I(Vn),multi:!0},xI=new U("",{providedIn:"root",factory:()=>{let n=I(ze).defaultView;if(!n)return;let t=I(Ht),e=o=>{t(o.reason),o.preventDefault()},r=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",e),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),I($n).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",e)})}});function pm(){return or([F_(()=>void I(xI))])}function hm(n){return typeof n=="function"&&n[At]!==void 0}function et(n,t){let[e,r,i]=qp(n,t?.equal),o=e,s=o[At];return o.set=r,o.update=i,o.asReadonly=hb.bind(o),o}function hb(){let n=this[At];if(n.readonlyFn===void 0){let t=()=>this();t[At]=n,n.readonlyFn=t}return n.readonlyFn}function mm(n){return hm(n)&&typeof n.set=="function"}var Su=(()=>{class n{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=II}return n})();function II(){return new Su(K(),rt())}var Pr=class{},La=new U("",{providedIn:"root",factory:()=>!1});var gm=new U(""),vm=new U(""),ur=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new at(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new he(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),Du=(()=>{class n{internalPendingTasks=I(ur);scheduler=I(Pr);errorHandler=I(Ht);add(){let e=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(e)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(e))}}run(e){let r=this.add();e().catch(this.errorHandler).finally(r)}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})();function ja(...n){}var ym=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:()=>new xh})}return n})(),xh=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let e=t.zone,r=this.queues.get(e);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[e,r]of this.queues)e===null?t||=this.flushQueue(r):t||=e.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let e=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,e=!0,r.run());return e}};function qa(n){return{toString:n}.toString()}function kI(n){return typeof n=="function"}var Pu=class{previousValue;currentValue;firstChange;constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function Gb(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}var mn=(()=>{let n=()=>Wb;return n.ngInherit=!0,n})();function Wb(n){return n.type.prototype.ngOnChanges&&(n.setInput=LI),FI}function FI(){let n=Yb(this),t=n?.current;if(t){let e=n.previous;if(e===di)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function LI(n,t,e,r,i){let o=this.declaredInputs[r],s=Yb(n)||jI(n,{previous:di,current:null}),a=s.current||(s.current={}),l=s.previous,f=l[o];a[o]=new Pu(f&&f.currentValue,e,l===di),Gb(n,t,i,e)}var qb="__ngSimpleChanges__";function Yb(n){return n[qb]||null}function jI(n,t){return n[qb]=t}var mb=[];var De=function(n,t=null,e){for(let r=0;r<mb.length;r++){let i=mb[r];i(n,t,e)}};function VI(n,t,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=Wb(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}i&&(e.preOrderHooks??=[]).push(0-n,i),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function Kb(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:f,ngOnDestroy:p}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),f&&((n.viewHooks??=[]).push(e,f),(n.viewCheckHooks??=[]).push(e,f)),p!=null&&(n.destroyHooks??=[]).push(e,p)}}function Mu(n,t,e){Zb(n,t,3,e)}function Au(n,t,e,r){(n[te]&3)===e&&Zb(n,t,e,r)}function _m(n,t){let e=n[te];(e&3)===t&&(e&=16383,e+=1,n[te]=e)}function Zb(n,t,e,r){let i=r!==void 0?n[qi]&65535:0,o=r??-1,s=t.length-1,a=0;for(let l=i;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],r!=null&&a>=r)break}else t[l]<0&&(n[qi]+=65536),(a<o||o==-1)&&(UI(n,e,t,l),n[qi]=(n[qi]&4294901760)+l+2),l++}function gb(n,t){De(4,n,t);let e=ee(null);try{t.call(n)}finally{ee(e),De(5,n,t)}}function UI(n,t,e,r){let i=e[r]<0,o=e[r+1],s=i?-e[r]:e[r],a=n[s];i?n[te]>>14<n[qi]>>16&&(n[te]&3)===t&&(n[te]+=16384,gb(a,o)):gb(a,o)}var cs=-1,eo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=e,this.injectImpl=r}};function BI(n){return(n.flags&8)!==0}function zI(n){return(n.flags&16)!==0}function $I(n,t,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{let o=i,s=e[++r];HI(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function Qb(n){return n===3||n===4||n===6}function HI(n){return n.charCodeAt(0)===64}function us(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?vb(n,e,i,null,t[++r]):vb(n,e,i,null,null))}}return n}function vb(n,t,e,r,i){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i)}function Jb(n){return n!==cs}function ku(n){return n&32767}function GI(n){return n>>16}function Fu(n,t){let e=GI(n),r=t;for(;e>0;)r=r[Wi],e--;return r}var Am=!0;function Lu(n){let t=Am;return Am=n,t}var WI=256,Xb=WI-1,ew=5,qI=0,dr={};function YI(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(Gi)&&(r=e[Gi]),r==null&&(r=e[Gi]=qI++);let i=r&Xb,o=1<<i;t.data[n+(i>>ew)]|=o}function ju(n,t){let e=tw(n,t);if(e!==-1)return e;let r=t[Y];r.firstCreatePass&&(n.injectorIndex=t.length,bm(r.data,n),bm(t,null),bm(r.blueprint,null));let i=ag(n,t),o=n.injectorIndex;if(Jb(i)){let s=ku(i),a=Fu(i,t),l=a[Y].data;for(let f=0;f<8;f++)t[o+f]=a[s+f]|l[s+f]}return t[o+8]=i,o}function bm(n,t){n.push(0,0,0,0,0,0,0,0,t)}function tw(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function ag(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;i!==null;){if(r=sw(i),r===null)return cs;if(e++,i=i[Wi],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return cs}function Om(n,t,e){YI(n,t,e)}function KI(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let r=e.length,i=0;for(;i<r;){let o=e[i];if(Qb(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof e[i]=="string";)i++;else{if(o===t)return e[i+1];i=i+2}}}return null}function nw(n,t,e){if(e&8||n!==void 0)return n;du(t,"NodeInjector")}function rw(n,t,e,r){if(e&8&&r===void 0&&(r=null),(e&3)===0){let i=n[fi],o=Bt(void 0);try{return i?i.get(t,r,e&8):kh(t,r,e&8)}finally{Bt(o)}}return nw(r,t,e)}function iw(n,t,e,r=0,i){if(n!==null){if(t[te]&2048&&!(r&2)){let s=XI(n,t,e,r,dr);if(s!==dr)return s}let o=ow(n,t,e,r,dr);if(o!==dr)return o}return rw(t,e,r,i)}function ow(n,t,e,r,i){let o=QI(e);if(typeof o=="function"){if(!um(t,n,r))return r&1?nw(i,e,r):rw(t,e,r,i);try{let s;if(s=o(r),s==null&&!(r&8))du(e);else return s}finally{dm()}}else if(typeof o=="number"){let s=null,a=tw(n,t),l=cs,f=r&1?t[pn][wn]:null;for((a===-1||r&4)&&(l=a===-1?ag(n,t):t[a+8],l===cs||!_b(r,!1)?a=-1:(s=t[Y],a=ku(l),t=Fu(l,t)));a!==-1;){let p=t[Y];if(yb(o,a,p.data)){let m=ZI(a,t,e,s,r,f);if(m!==dr)return m}l=t[a+8],l!==cs&&_b(r,t[Y].data[a+8]===f)&&yb(o,a,t)?(s=p,a=ku(l),t=Fu(l,t)):a=-1}}return i}function ZI(n,t,e,r,i,o){let s=t[Y],a=s.data[n+8],l=r==null?Vr(a)&&Am:r!=s&&(a.type&3)!==0,f=i&1&&o===a,p=Ou(a,s,e,l,f);return p!==null?Ba(t,s,p,a,i):dr}function Ou(n,t,e,r,i){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,f=n.directiveEnd,p=o>>20,m=r?a:a+p,v=i?a+p:f;for(let g=m;g<v;g++){let w=s[g];if(g<l&&e===w||g>=l&&w.type===e)return g}if(i){let g=s[l];if(g&&cr(g)&&g.type===e)return l}return null}function Ba(n,t,e,r,i){let o=n[e],s=t.data;if(o instanceof eo){let a=o;if(a.resolving){let g=T_(s[e]);throw Ph(g)}let l=Lu(a.canSeeViewProviders);a.resolving=!0;let f=s[e].type||s[e],p,m=a.injectImpl?Bt(a.injectImpl):null,v=um(n,r,0);try{o=n[e]=a.factory(void 0,i,s,n,r),t.firstCreatePass&&e>=r.directiveStart&&VI(e,s[e],t)}finally{m!==null&&Bt(m),Lu(l),a.resolving=!1,dm()}}return o}function QI(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Gi)?n[Gi]:void 0;return typeof t=="number"?t>=0?t&Xb:JI:t}function yb(n,t,e){let r=1<<n;return!!(e[t+(n>>ew)]&r)}function _b(n,t){return!(n&2)&&!(n&1&&t)}var Xi=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return iw(this._tNode,this._lView,t,zi(r),e)}};function JI(){return new Xi(rt(),K())}function xn(n){return qa(()=>{let t=n.prototype.constructor,e=t[Ca]||Rm(t),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ca]||Rm(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rm(n){return Ih(n)?()=>{let t=Rm(Ct(n));return t&&t()}:ci(n)}function XI(n,t,e,r,i){let o=n,s=t;for(;o!==null&&s!==null&&s[te]&2048&&!is(s);){let a=ow(o,s,e,r|2,dr);if(a!==dr)return a;let l=o.parent;if(!l){let f=s[Gh];if(f){let p=f.get(e,dr,r);if(p!==dr)return p}l=sw(s),s=s[Wi]}o=l}return i}function sw(n){let t=n[Y],e=t.type;return e===2?t.declTNode:e===1?n[wn]:null}function Ya(n){return KI(rt(),n)}function eT(){return hs(rt(),K())}function hs(n,t){return new yt(Cn(n,t))}var yt=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=eT}return n})();function tT(n){return n instanceof yt?n.nativeElement:n}function nT(){return this._results[Symbol.iterator]()}var Vu=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Be}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let r=N_(t);(this._changesDetected=!R_(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=nT};function aw(n){return(n.flags&128)===128}var lg=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(lg||{}),lw=new Map,rT=0;function iT(){return rT++}function oT(n){lw.set(n[Ma],n)}function Nm(n){lw.delete(n[Ma])}var bb="__ngContext__";function ds(n,t){lr(t)?(n[bb]=t[Ma],oT(t)):n[bb]=t}function cw(n){return dw(n[ns])}function uw(n){return dw(n[bn])}function dw(n){for(;n!==null&&!Bn(n);)n=n[bn];return n}var Pm;function cg(n){Pm=n}function fw(){if(Pm!==void 0)return Pm;if(typeof document<"u")return document;throw new k(210,!1)}var nd=new U("",{providedIn:"root",factory:()=>sT}),sT="ng",rd=new U(""),ms=new U("",{providedIn:"platform",factory:()=>"unknown"});var id=new U("",{providedIn:"root",factory:()=>fw().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var aT="h",lT="b";var pw="r";var hw="di";var mw=!1,gw=new U("",{providedIn:"root",factory:()=>mw});var ug=new U("");var cT=(n,t,e,r)=>{};function uT(n,t,e,r){cT(n,t,e,r)}function dg(n){return(n.flags&32)===32}var dT=()=>null;function vw(n,t,e=!1){return dT(n,t,e)}function yw(n,t){let e=n.contentQueries;if(e!==null){let r=ee(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s!==-1){let a=n.data[s];bu(o),a.contentQueries(2,t[s],s)}}}finally{ee(r)}}}function km(n,t,e){bu(0);let r=ee(null);try{t(n,e)}finally{ee(r)}}function fg(n,t,e){if(qh(t)){let r=ee(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{ee(r)}}}var Br=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Br||{});var xu;function fT(){if(xu===void 0&&(xu=null,Fr.trustedTypes))try{xu=Fr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return xu}function wb(n){return fT()?.createScriptURL(n)||n}var Uu=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lu})`}};function gs(n){return n instanceof Uu?n.changingThisBreaksApplicationSecurity:n}function pg(n,t){let e=_w(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${lu})`)}return e===t}function _w(n){return n instanceof Uu&&n.getTypeName()||null}var pT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function bw(n){return n=String(n),n.match(pT)?n:"unsafe:"+n}var od=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(od||{});function sd(n){let t=Ew();return t?t.sanitize(od.URL,n)||"":pg(n,"URL")?gs(n):bw(ir(n))}function ww(n){let t=Ew();if(t)return wb(t.sanitize(od.RESOURCE_URL,n)||"");if(pg(n,"ResourceURL"))return wb(gs(n));throw new k(904,!1)}function hT(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?ww:sd}function hg(n,t,e){return hT(t,e)(n)}function Ew(){let n=K();return n&&n[sr].sanitizer}var mT=/^>|^->|<!--|-->|--!>|<!-$/g,gT=/(<|>)/g,vT="\u200B$1\u200B";function yT(n){return n.replace(mT,t=>t.replace(gT,vT))}function mg(n){return n.ownerDocument.defaultView}function gg(n){return n.ownerDocument}function Cw(n){return n instanceof Function?n():n}function _T(n,t,e){let r=n.length;for(;;){let i=n.indexOf(t,e);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}var Sw="ng-template";function bT(n,t,e,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&_T(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(vg(n))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function vg(n){return n.type===4&&n.value!==Sw}function wT(n,t,e){let r=n.type===4&&!e?Sw:n.value;return t===r}function ET(n,t,e){let r=4,i=n.attrs,o=i!==null?DT(i):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!Hn(r)&&!Hn(l))return!1;if(s&&Hn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!wT(n,l,e)||l===""&&t.length===1){if(Hn(r))return!1;s=!0}}else if(r&8){if(i===null||!bT(n,i,l,e)){if(Hn(r))return!1;s=!0}}else{let f=t[++a],p=CT(l,i,vg(n),e);if(p===-1){if(Hn(r))return!1;s=!0;continue}if(f!==""){let m;if(p>o?m="":m=i[p+1].toLowerCase(),r&2&&f!==m){if(Hn(r))return!1;s=!0}}}}return Hn(r)||s}function Hn(n){return(n&1)===0}function CT(n,t,e,r){if(t===null)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){let s=t[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return xT(t,n)}function ST(n,t,e=!1){for(let r=0;r<t.length;r++)if(ET(n,t[r],e))return!0;return!1}function DT(n){for(let t=0;t<n.length;t++){let e=n[t];if(Qb(e))return t}return n.length}function xT(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function Eb(n,t){return n?":not("+t.trim()+")":t}function IT(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(r&2){let a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Hn(s)&&(t+=Eb(o,i),i=""),r=s,o=o||!Hn(r);e++}return i!==""&&(t+=Eb(o,i)),t}function TT(n){return n.map(IT).join(",")}function MT(n){let t=[],e=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&t.push(o,n[++r]):i===8&&e.push(o);else{if(!Hn(i))break;i=o}r++}return e.length&&t.push(1,...e),t}var St={};function AT(n,t){return n.createText(t)}function OT(n,t,e){n.setValue(t,e)}function RT(n,t){return n.createComment(yT(t))}function Dw(n,t,e){return n.createElement(t,e)}function Bu(n,t,e,r,i){n.insertBefore(t,e,r,i)}function xw(n,t,e){n.appendChild(t,e)}function Cb(n,t,e,r,i){r!==null?Bu(n,t,e,r,i):xw(n,t,e)}function Iw(n,t,e,r){n.removeChild(null,t,e,r)}function NT(n,t,e){n.setAttribute(t,"style",e)}function PT(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Tw(n,t,e){let{mergedAttrs:r,classes:i,styles:o}=e;r!==null&&$I(n,t,r),i!==null&&PT(n,t,i),o!==null&&NT(n,t,o)}function yg(n,t,e,r,i,o,s,a,l,f,p){let m=Ue+r,v=m+i,g=kT(m,v),w=typeof f=="function"?f():f;return g[Y]={type:n,blueprint:g,template:e,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:p}}function kT(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:St);return e}function FT(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=yg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function _g(n,t,e,r,i,o,s,a,l,f,p){let m=t.blueprint.slice();return m[Un]=i,m[te]=r|4|128|8|64|1024,(f!==null||n&&n[te]&2048)&&(m[te]|=2048),Zh(m),m[ct]=m[Wi]=n,m[Xe]=e,m[sr]=s||n&&n[sr],m[Me]=a||n&&n[Me],m[fi]=l||n&&n[fi]||null,m[wn]=o,m[Ma]=iT(),m[es]=p,m[Gh]=f,m[pn]=t.type==2?n[pn]:m,m}function LT(n,t,e){let r=Cn(t,n),i=FT(e),o=n[sr].rendererFactory,s=bg(n,_g(n,i,null,Mw(e),r,t,null,o.createRenderer(r,e),null,null,null));return n[t.index]=s}function Mw(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function Aw(n,t,e,r){if(e===0)return-1;let i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function bg(n,t){return n[ns]?n[Hh][bn]=t:n[ns]=t,n[Hh]=t,t}function h(n=1){Ow(Fe(),K(),zn()+n,!1)}function Ow(n,t,e,r){if(!r)if((t[te]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Mu(t,o,e)}else{let o=n.preOrderHooks;o!==null&&Au(t,o,0,e)}mi(e)}var ad=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(ad||{});function Fm(n,t,e,r){let i=ee(null);try{let[o,s,a]=n.inputs[e],l=null;(s&ad.SignalBased)!==0&&(l=t[o][At]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(t,r)),n.setInput!==null?n.setInput(t,l,r,e,o):Gb(t,l,o,r)}finally{ee(i)}}var Wn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Wn||{}),jT;function wg(n,t){return jT(n,t)}var fs=new Set,ld=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(ld||{}),oo=new U(""),Sb=new Set;function qn(n){Sb.has(n)||(Sb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Rw=!1,Lm=class extends Be{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,B_()&&(this.destroyRef=I($n,{optional:!0})??void 0,this.pendingTasks=I(ur,{optional:!0})??void 0)}emit(t){let e=ee(null);try{super.next(t)}finally{ee(e)}}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&typeof t=="object"){let l=t;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof He&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Le=Lm;function Nw(n){let t,e;function r(){n=ja;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Db(n){return queueMicrotask(()=>n()),()=>{n=ja}}var Eg="isAngularZone",zu=Eg+"_ID",VT=0,Ge=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Le(!1);onMicrotaskEmpty=new Le(!1);onStable=new Le(!1);onError=new Le(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Rw}=t;if(typeof Zone>"u")throw new k(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,zT(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Eg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new k(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new k(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,UT,ja,ja);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},UT={};function Cg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function BT(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){Nw(()=>{n.callbackScheduled=!1,jm(n),n.isCheckStableRunning=!0,Cg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),jm(n)}function zT(n){let t=()=>{BT(n)},e=VT++;n._inner=n._inner.fork({name:"angular",properties:{[Eg]:!0,[zu]:e,[zu+e]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if($T(l))return r.invokeTask(o,s,a,l);try{return xb(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),Ib(n)}},onInvoke:(r,i,o,s,a,l,f)=>{try{return xb(n),r.invoke(o,s,a,l,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!HT(l)&&t(),Ib(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,jm(n),Cg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function jm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function xb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Ib(n){n._nesting--,Cg(n)}var $u=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Le;onMicrotaskEmpty=new Le;onStable=new Le;onError=new Le;run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function $T(n){return Pw(n,"__ignore_ng_zone__")}function HT(n){return Pw(n,"__scheduler_tick__")}function Pw(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var Sg=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),kw=[0,1,2,3],Fw=(()=>{class n{ngZone=I(Ge);scheduler=I(Pr);errorHandler=I(Vn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){I(oo,{optional:!0})}execute(){let e=this.sequences.size>0;e&&De(16),this.executing=!0;for(let r of kw)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&De(17)}register(e){let{view:r}=e;r!==void 0?((r[Yi]??=[]).push(e),os(r),r[te]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,r){return r?r.run(ld.AFTER_NEXT_RENDER,e):e()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),Hu=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,r,i,o,s=null){this.impl=t,this.hooks=e,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[Yi];t&&(this.view[Yi]=t.filter(e=>e!==this))}};function Ka(n,t){let e=t?.injector??I($t);return qn("NgAfterNextRender"),WT(n,e,t,!0)}function GT(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function WT(n,t,e,r){let i=t.get(Sg);i.impl??=t.get(Fw);let o=t.get(oo,null,{optional:!0}),s=e?.manualCleanup!==!0?t.get($n):null,a=t.get(Su,null,{optional:!0}),l=new Hu(i.impl,GT(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var qT=new U("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Lw(n,t){let e=n.get(qT);if(Array.isArray(t))for(let r of t)e.queue.add(r);else e.queue.add(t);e.scheduler&&e.scheduler(n)}function YT(n,t){for(let[e,r]of t)Lw(n,r.animateFns)}function Tb(n,t,e,r){let i=n?.[Ki]?.enter;t!==null&&i&&i.has(e.index)&&YT(r,i)}function ls(n,t,e,r,i,o,s,a){if(i!=null){let l,f=!1;Bn(i)?l=i:lr(i)&&(f=!0,i=i[Un]);let p=En(i);n===0&&r!==null?(Tb(a,r,o,e),s==null?xw(t,r,p):Bu(t,r,p,s||null,!0)):n===1&&r!==null?(Tb(a,r,o,e),Bu(t,r,p,s||null,!0)):n===2?Mb(a,o,e,m=>{Iw(t,p,f,m)}):n===3&&Mb(a,o,e,()=>{t.destroyNode(p)}),l!=null&&aM(t,n,e,l,o,r,s)}}function KT(n,t){jw(n,t),t[Un]=null,t[wn]=null}function ZT(n,t,e,r,i,o){r[Un]=i,r[wn]=t,ud(n,r,e,1,i,o)}function jw(n,t){t[sr].changeDetectionScheduler?.notify(9),ud(n,t,t[Me],2,null,null)}function QT(n){let t=n[ns];if(!t)return wm(n[Y],n);for(;t;){let e=null;if(lr(t))e=t[ns];else{let r=t[nt];r&&(e=r)}if(!e){for(;t&&!t[bn]&&t!==n;)lr(t)&&wm(t[Y],t),t=t[ct];t===null&&(t=n),lr(t)&&wm(t[Y],t),e=t&&t[bn]}t=e}}function Dg(n,t){let e=n[Zi],r=e.indexOf(t);e.splice(r,1)}function cd(n,t){if(Qi(t))return;let e=t[Me];e.destroyNode&&ud(n,t,e,3,null,null),QT(t)}function wm(n,t){if(Qi(t))return;let e=ee(null);try{t[te]&=-129,t[te]|=256,t[hn]&&va(t[hn]),eM(n,t),XT(n,t),t[Y].type===1&&t[Me].destroy();let r=t[pi];if(r!==null&&Bn(t[ct])){r!==t[ct]&&Dg(r,t);let i=t[ar];i!==null&&i.detachView(n)}Nm(t)}finally{ee(e)}}function Mb(n,t,e,r){let i=n?.[Ki];if(i==null||i.leave==null||!i.leave.has(t.index))return r(!1);if(i.skipLeaveAnimations)return i.skipLeaveAnimations=!1,r(!1);n&&fs.add(n),Lw(e,()=>{if(i.leave&&i.leave.has(t.index)){let s=i.leave.get(t.index),a=[];if(s)for(let l=0;l<s.animateFns.length;l++){let f=s.animateFns[l],{promise:p}=f();a.push(p)}i.running=Promise.allSettled(a),JT(n,r)}else n&&fs.delete(n),r(!1)})}function JT(n,t){let e=n[Ki]?.running;if(e){e.then(()=>{n[Ki].running=void 0,fs.delete(n),t(!0)});return}t(!1)}function XT(n,t){let e=n.cleanup,r=t[ts];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(t[ts]=null);let i=t[Rr];if(i!==null){t[Rr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Aa];if(o!==null){t[Aa]=null;for(let s of o)s.destroy()}}function eM(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=t[e[r]];if(!(i instanceof eo)){let o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];De(4,a,l);try{l.call(a)}finally{De(5,a,l)}}else{De(4,i,o);try{o.call(i)}finally{De(5,i,o)}}}}}function tM(n,t,e){return nM(n,t.parent,e)}function nM(n,t,e){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return e[Un];if(Vr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Br.None||i===Br.Emulated)return null}return Cn(r,e)}function rM(n,t,e){return oM(n,t,e)}function iM(n,t,e){return n.type&40?Cn(n,e):null}var oM=iM,Ab;function xg(n,t,e,r){let i=tM(n,r,t),o=t[Me],s=r.parent||t[wn],a=rM(s,r,t);if(i!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)Cb(o,i,e[l],a,!1);else Cb(o,i,e,a,!1);Ab!==void 0&&Ab(o,r,t,e,i)}function Va(n,t){if(t!==null){let e=t.type;if(e&3)return Cn(t,n);if(e&4)return Vm(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return Va(n,r);{let i=n[t.index];return Bn(i)?Vm(-1,i):En(i)}}else{if(e&128)return Va(n,t.next);if(e&32)return wg(t,n)()||En(n[t.index]);{let r=Vw(n,t);if(r!==null){if(Array.isArray(r))return r[0];let i=ui(n[pn]);return Va(i,r)}else return Va(n,t.next)}}}return null}function Vw(n,t){if(t!==null){let r=n[pn][wn],i=t.projection;return r.projection[i]}return null}function Vm(n,t){let e=nt+n+1;if(e<t.length){let r=t[e],i=r[Y].firstChild;if(i!==null)return Va(r,i)}return t[hi]}function Ig(n,t,e,r,i,o,s){for(;e!=null;){let a=r[fi];if(e.type===128){e=e.next;continue}let l=r[e.index],f=e.type;if(s&&t===0&&(l&&ds(En(l),r),e.flags|=2),!dg(e))if(f&8)Ig(n,t,e.child,r,i,o,!1),ls(t,n,a,i,l,e,o,r);else if(f&32){let p=wg(e,r),m;for(;m=p();)ls(t,n,a,i,m,e,o,r);ls(t,n,a,i,l,e,o,r)}else f&16?sM(n,t,r,e,i,o):ls(t,n,a,i,l,e,o,r);e=s?e.projectionNext:e.next}}function ud(n,t,e,r,i,o){Ig(e,r,n.firstChild,t,i,o,!1)}function sM(n,t,e,r,i,o){let s=e[pn],l=s[wn].projection[r.projection];if(Array.isArray(l))for(let f=0;f<l.length;f++){let p=l[f];ls(t,n,e[fi],i,p,r,o,e)}else{let f=l,p=s[ct];aw(r)&&(f.flags|=128),Ig(n,t,f,p,i,o,!0)}}function aM(n,t,e,r,i,o,s){let a=r[hi],l=En(r);a!==l&&ls(t,n,e,o,a,i,s);for(let f=nt;f<r.length;f++){let p=r[f];ud(p[Y],p,n,t,o,a)}}function lM(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=r.indexOf("-")===-1?void 0:Wn.DashCase;i==null?n.removeStyle(e,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Wn.Important),n.setStyle(e,r,i,o))}}function Uw(n,t,e,r,i){let o=zn(),s=r&2;try{mi(-1),s&&t.length>Ue&&Ow(n,t,Ue,!1),De(s?2:0,i,e),e(r,i)}finally{mi(o),De(s?3:1,i,e)}}function dd(n,t,e){pM(n,t,e),(e.flags&64)===64&&hM(n,t,e)}function Za(n,t,e=Cn){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?e(t,n):n[s];n[i++]=a}}}function cM(n,t,e,r){let o=r.get(gw,mw)||e===Br.ShadowDom,s=n.selectRootElement(t,o);return uM(s),s}function uM(n){dM(n)}var dM=()=>null;function fM(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Bw(n,t,e,r,i,o){let s=t[Y];if(fd(n,s,t,e,r)){Vr(n)&&$w(t,n.index);return}n.type&3&&(e=fM(e)),zw(n,t,e,r,i,o)}function zw(n,t,e,r,i,o){if(n.type&3){let s=Cn(n,t);r=o!=null?o(r,n.value||"",e):r,i.setProperty(s,e,r)}else n.type&12}function $w(n,t){let e=Sn(t,n);e[te]&16||(e[te]|=64)}function pM(n,t,e){let r=e.directiveStart,i=e.directiveEnd;Vr(e)&&LT(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||ju(e,t);let o=e.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=Ba(t,n,s,e);if(ds(l,t),o!==null&&vM(t,s-r,l,a,e,o),cr(a)){let f=Sn(e.index,t);f[Xe]=Ba(t,n,s,e)}}}function hM(n,t,e){let r=e.directiveStart,i=e.directiveEnd,o=e.index,s=ob();try{mi(o);for(let a=r;a<i;a++){let l=n.data[a],f=t[a];_u(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&mM(l,f)}}finally{mi(-1),_u(s)}}function mM(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function Tg(n,t){let e=n.directiveRegistry,r=null;if(e)for(let i=0;i<e.length;i++){let o=e[i];ST(t,o.selectors,!1)&&(r??=[],cr(o)?r.unshift(o):r.push(o))}return r}function gM(n,t,e,r,i,o){let s=Cn(n,t);Hw(t[Me],s,o,n.value,e,r,i)}function Hw(n,t,e,r,i,o,s){if(o==null)n.removeAttribute(t,i,e);else{let a=s==null?ir(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}function vM(n,t,e,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],f=s[a+1];Fm(r,e,l,f)}}function Mg(n,t,e,r,i){let o=Ue+e,s=t[Y],a=i(s,t,n,r,e);t[o]=a,ss(n,!0);let l=n.type===2;return l?(Tw(t[Me],a,n),(Z_()===0||rs(n))&&ds(a,t),Q_()):ds(a,t),Cu()&&(!l||!dg(n))&&xg(s,t,a,n),n}function Ag(n){let t=n;return om()?eb():(t=t.parent,ss(t,!1)),t}function yM(n,t){let e=n[fi];if(!e)return;let r;try{r=e.get(Ht,null)}catch{r=null}r?.(t)}function fd(n,t,e,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let f=s[l],p=s[l+1],m=t.data[f];Fm(m,e[f],p,i),a=!0}if(o)for(let l of o){let f=e[l],p=t.data[l];Fm(p,f,r,i),a=!0}return a}function _M(n,t){let e=Sn(t,n),r=e[Y];bM(r,e);let i=e[Un];i!==null&&e[es]===null&&(e[es]=vw(i,e[fi])),De(18),Og(r,e,e[Xe]),De(19,e[Xe])}function bM(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function Og(n,t,e){wu(t);try{let r=n.viewQuery;r!==null&&km(1,r,e);let i=n.template;i!==null&&Uw(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[ar]?.finishViewCreation(n),n.staticContentQueries&&yw(n,t),n.staticViewQueries&&km(2,n.viewQuery,e);let o=n.components;o!==null&&wM(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[te]&=-5,Eu()}}function wM(n,t){for(let e=0;e<t.length;e++)_M(n,t[e])}function pd(n,t,e,r){let i=ee(null);try{let o=t.tView,a=n[te]&4096?4096:16,l=_g(n,o,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),f=n[t.index];l[pi]=f;let p=n[ar];return p!==null&&(l[ar]=p.createEmbeddedView(o)),Og(o,l,e),l}finally{ee(i)}}function za(n,t){return!t||t.firstChild===null||aw(n)}function $a(n,t,e,r,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&r.push(En(o)),Bn(o)&&Gw(o,r);let s=e.type;if(s&8)$a(n,t,e.child,r);else if(s&32){let a=wg(e,t),l;for(;l=a();)r.push(l)}else if(s&16){let a=Vw(t,e);if(Array.isArray(a))r.push(...a);else{let l=ui(t[pn]);$a(l[Y],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function Gw(n,t){for(let e=nt;e<n.length;e++){let r=n[e],i=r[Y].firstChild;i!==null&&$a(r[Y],r,i,t)}n[hi]!==n[Un]&&t.push(n[hi])}function Ww(n){if(n[Yi]!==null){for(let t of n[Yi])t.impl.addSequence(t);n[Yi].length=0}}var qw=[];function EM(n){return n[hn]??CM(n)}function CM(n){let t=qw.pop()??Object.create(DM);return t.lView=n,t}function SM(n){n.lView[hn]!==n&&(n.lView=null,qw.push(n))}var DM=Z(A({},Lo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{os(n.lView)},consumerOnSignalRead(){this.lView[hn]=this}});function xM(n){let t=n[hn]??Object.create(IM);return t.lView=n,t}var IM=Z(A({},Lo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=ui(n.lView);for(;t&&!Yw(t[Y]);)t=ui(t);t&&Qh(t)},consumerOnSignalRead(){this.lView[hn]=this}});function Yw(n){return n.type!==2}function Kw(n){if(n[Aa]===null)return;let t=!0;for(;t;){let e=!1;for(let r of n[Aa])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=e&&!!(n[te]&8192)}}var TM=100;function Zw(n,t=0){let r=n[sr].rendererFactory,i=!1;i||r.begin?.();try{MM(n,t)}finally{i||r.end?.()}}function MM(n,t){let e=sm();try{am(!0),Um(n,t);let r=0;for(;Pa(n);){if(r===TM)throw new k(103,!1);r++,Um(n,1)}}finally{am(e)}}function AM(n,t,e,r){if(Qi(t))return;let i=t[te],o=!1,s=!1;wu(t);let a=!0,l=null,f=null;o||(Yw(n)?(f=EM(t),l=Vo(f)):Cc()===null?(a=!1,f=xM(t),l=Vo(f)):t[hn]&&(va(t[hn]),t[hn]=null));try{Zh(t),nb(n.bindingStartIndex),e!==null&&Uw(n,t,e,2,r);let p=(i&3)===3;if(!o)if(p){let g=n.preOrderCheckHooks;g!==null&&Mu(t,g,null)}else{let g=n.preOrderHooks;g!==null&&Au(t,g,0,null),_m(t,0)}if(s||OM(t),Kw(t),Qw(t,0),n.contentQueries!==null&&yw(n,t),!o)if(p){let g=n.contentCheckHooks;g!==null&&Mu(t,g)}else{let g=n.contentHooks;g!==null&&Au(t,g,1),_m(t,1)}NM(n,t);let m=n.components;m!==null&&Xw(t,m,0);let v=n.viewQuery;if(v!==null&&km(2,v,r),!o)if(p){let g=n.viewCheckHooks;g!==null&&Mu(t,g)}else{let g=n.viewHooks;g!==null&&Au(t,g,2),_m(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[mu]){for(let g of t[mu])g();t[mu]=null}o||(Ww(t),t[te]&=-73)}catch(p){throw o||os(t),p}finally{f!==null&&(ma(f,l),a&&SM(f)),Eu()}}function Qw(n,t){for(let e=cw(n);e!==null;e=uw(e))for(let r=nt;r<e.length;r++){let i=e[r];Jw(i,t)}}function OM(n){for(let t=cw(n);t!==null;t=uw(t)){if(!(t[te]&2))continue;let e=t[Zi];for(let r=0;r<e.length;r++){let i=e[r];Qh(i)}}}function RM(n,t,e){De(18);let r=Sn(t,n);Jw(r,e),De(19,r[Xe])}function Jw(n,t){gu(n)&&Um(n,t)}function Um(n,t){let r=n[Y],i=n[te],o=n[hn],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&ga(o)),s||=!1,o&&(o.dirty=!1),n[te]&=-9217,s)AM(r,n,r.template,n[Xe]);else if(i&8192){let a=ee(null);try{Kw(n),Qw(n,1);let l=r.components;l!==null&&Xw(n,l,1),Ww(n)}finally{ee(a)}}}function Xw(n,t,e){for(let r=0;r<t.length;r++)RM(n,t[r],e)}function NM(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)mi(~i);else{let o=i,s=e[++r],a=e[++r];ib(s,o);let l=t[o];De(24,l),a(2,l),De(25,l)}}}finally{mi(-1)}}function Rg(n,t){let e=sm()?64:1088;for(n[sr].changeDetectionScheduler?.notify(t);n;){n[te]|=e;let r=ui(n);if(is(n)&&!r)return n;n=r}return null}function eE(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function tE(n,t){let e=nt+t;if(e<n.length)return n[e]}function hd(n,t,e,r=!0){let i=t[Y];if(PM(i,t,n,e),r){let s=Vm(e,n),a=t[Me],l=a.parentNode(n[hi]);l!==null&&ZT(i,n[wn],a,t,l,s)}let o=t[es];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function nE(n,t){let e=Ha(n,t);return e!==void 0&&cd(e[Y],e),e}function Ha(n,t){if(n.length<=nt)return;let e=nt+t,r=n[e];if(r){let i=r[pi];i!==null&&i!==n&&Dg(i,r),t>0&&(n[e-1][bn]=r[bn]);let o=xa(n,nt+t);KT(r[Y],r);let s=o[ar];s!==null&&s.detachView(o[Y]),r[ct]=null,r[bn]=null,r[te]&=-129}return r}function PM(n,t,e,r){let i=nt+r,o=e.length;r>0&&(e[i-1][bn]=t),r<o-nt?(t[bn]=e[i],Fh(e,nt+r,t)):(e.push(t),t[bn]=null),t[ct]=e;let s=t[pi];s!==null&&e!==s&&rE(s,t);let a=t[ar];a!==null&&a.insertView(n),vu(t),t[te]|=128}function rE(n,t){let e=n[Zi],r=t[ct];if(lr(r))n[te]|=2;else{let i=r[ct][pn];t[pn]!==i&&(n[te]|=2)}e===null?n[Zi]=[t]:e.push(t)}var gi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,e=t[Y];return $a(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e}get context(){return this._lView[Xe]}set context(t){this._lView[Xe]=t}get destroyed(){return Qi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ct];if(Bn(t)){let e=t[Oa],r=e?e.indexOf(this):-1;r>-1&&(Ha(t,r),xa(e,r))}this._attachedToViewContainer=!1}cd(this._lView[Y],this._lView)}onDestroy(t){Jh(this._lView,t)}markForCheck(){Rg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){vu(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,Zw(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new k(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=is(this._lView),e=this._lView[pi];e!==null&&!t&&Dg(e,this._lView),jw(this._lView[Y],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new k(902,!1);this._appRef=t;let e=is(this._lView),r=this._lView[pi];r!==null&&!e&&rE(r,this._lView),vu(this._lView)}};var vi=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=kM;constructor(e,r,i){this._declarationLView=e,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,r){return this.createEmbeddedViewImpl(e,r)}createEmbeddedViewImpl(e,r,i){let o=pd(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:r,dehydratedView:i});return new gi(o)}}return n})();function kM(){return md(rt(),K())}function md(n,t){return n.type&4?new vi(t,n,hs(n,t)):null}function Qa(n,t,e,r,i){let o=n.data[t];if(o===null)o=FM(n,t,e,r,i),rb()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=r,o.attrs=i;let s=X_();o.injectorIndex=s===null?-1:s.injectorIndex}return ss(o,!0),o}function FM(n,t,e,r,i){let o=im(),s=om(),a=s?o:o&&o.parent,l=n.data[t]=jM(n,a,e,t,r,i);return LM(n,l,o,s),l}function LM(n,t,e,r){n.firstChild===null&&(n.firstChild=t),e!==null&&(r?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function jM(n,t,e,r,i,o){let s=t?t.injectorIndex:-1,a=0;return J_()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var T8=new RegExp(`^(\\d+)*(${lT}|${aT})*(.*)`);function VM(n){let t=n[Wh]??[],r=n[ct][Me],i=[];for(let o of t)o.data[hw]!==void 0?i.push(o):UM(o,r);n[Wh]=i}function UM(n,t){let e=0,r=n.firstChild;if(r){let i=n.data[pw];for(;e<i;){let o=r.nextSibling;Iw(t,r,!1),r=o,e++}}}var BM=()=>null,zM=()=>null;function Bm(n,t){return BM(n,t)}function iE(n,t,e){return zM(n,t,e)}var oE=class{},gd=class{},zm=class{resolveComponentFactory(t){throw new k(917,!1)}},Ja=class{static NULL=new zm},to=class{},tn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>$M()}return n})();function $M(){let n=K(),t=rt(),e=Sn(t.index,n);return(lr(e)?e:n)[Me]}var sE=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:()=>null})}return n})();var Ru={},$m=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){let i=this.injector.get(t,Ru,r);return i!==Ru||e===Ru?i:this.parentInjector.get(t,e,r)}};function Gu(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=cu(i,a);else if(o==2){let l=a,f=t[++s];r=cu(r,l+": "+f+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}function C(n,t=0){let e=K();if(e===null)return V(n,t);let r=rt();return iw(r,e,Ct(n),t)}function Ng(){let n="invalid";throw new Error(n)}function aE(n,t,e,r,i){let o=r===null?null:{"":-1},s=i(n,e);if(s!==null){let a=s,l=null,f=null;for(let p of s)if(p.resolveHostDirectives!==null){[a,l,f]=p.resolveHostDirectives(s);break}WM(n,t,e,a,o,l,f)}o!==null&&r!==null&&HM(e,r,o)}function HM(n,t,e){let r=n.localNames=[];for(let i=0;i<t.length;i+=2){let o=e[t[i+1]];if(o==null)throw new k(-301,!1);r.push(t[i],o)}}function GM(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function WM(n,t,e,r,i,o,s){let a=r.length,l=!1;for(let v=0;v<a;v++){let g=r[v];!l&&cr(g)&&(l=!0,GM(n,e,v)),Om(ju(e,t),n,g.type)}JM(e,n.data.length,a);for(let v=0;v<a;v++){let g=r[v];g.providersResolver&&g.providersResolver(g)}let f=!1,p=!1,m=Aw(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let v=0;v<a;v++){let g=r[v];if(e.mergedAttrs=us(e.mergedAttrs,g.hostAttrs),YM(n,e,t,m,g),QM(m,g,i),s!==null&&s.has(g)){let[S,E]=s.get(g);e.directiveToIndex.set(g.type,[m,S+e.directiveStart,E+e.directiveStart])}else(o===null||!o.has(g))&&e.directiveToIndex.set(g.type,m);g.contentQueries!==null&&(e.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(e.flags|=64);let w=g.type.prototype;!f&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),f=!0),!p&&(w.ngOnChanges||w.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),p=!0),m++}qM(n,e,o)}function qM(n,t,e){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=n.data[r];if(e===null||!e.has(i))Ob(0,t,i,r),Ob(1,t,i,r),Nb(t,r,!1);else{let o=e.get(i);Rb(0,t,o,r),Rb(1,t,o,r),Nb(t,r,!0)}}}function Ob(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),lE(t,o)}}function Rb(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),lE(t,s)}}function lE(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function Nb(n,t,e){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!e&&i===null||e&&o===null||vg(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&i.hasOwnProperty(l)){let f=i[l];for(let p of f)if(p===t){s??=[],s.push(l,r[a+1]);break}}else if(e&&o.hasOwnProperty(l)){let f=o[l];for(let p=0;p<f.length;p+=2)if(f[p]===t){s??=[],s.push(f[p+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function YM(n,t,e,r,i){n.data[r]=i;let o=i.factory||(i.factory=ci(i.type,!0)),s=new eo(o,cr(i),C,null);n.blueprint[r]=s,e[r]=s,KM(n,t,r,Aw(n,e,i.hostVars,St),i)}function KM(n,t,e,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;ZM(s)!=a&&s.push(a),s.push(e,r,o)}}function ZM(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function QM(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;cr(t)&&(e[""]=n)}}function JM(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function Pg(n,t,e,r,i,o,s,a){let l=t[Y],f=l.consts,p=Dn(f,s),m=Qa(l,n,e,r,p);return o&&aE(l,t,m,Dn(f,a),i),m.mergedAttrs=us(m.mergedAttrs,m.attrs),m.attrs!==null&&Gu(m,m.attrs,!1),m.mergedAttrs!==null&&Gu(m,m.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,m),m}function kg(n,t){Kb(n,t),qh(t)&&n.queries.elementEnd(t)}function XM(n,t,e,r,i,o){let s=t.consts,a=Dn(s,i),l=Qa(t,n,e,r,a);if(l.mergedAttrs=us(l.mergedAttrs,l.attrs),o!=null){let f=Dn(s,o);l.localNames=[];for(let p=0;p<f.length;p+=2)l.localNames.push(f[p],-1)}return l.attrs!==null&&Gu(l,l.attrs,!1),l.mergedAttrs!==null&&Gu(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function Fg(n){return vd(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function cE(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),r;for(;!(r=e.next()).done;)t(r.value)}}function vd(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function yd(n,t,e){return n[t]=e}function eA(n,t){return n[t]}function en(n,t,e){if(e===St)return!1;let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function Lg(n,t,e,r){let i=en(n,t,e);return en(n,t+1,r)||i}function uE(n,t,e,r,i){let o=Lg(n,t,e,r);return en(n,t+2,i)||o}function Nu(n,t,e){return function r(i){let o=Vr(n)?Sn(n.index,t):t;Rg(o,5);let s=t[Xe],a=Pb(t,s,e,i),l=r.__ngNextListenerFn__;for(;l;)a=Pb(t,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function Pb(n,t,e,r){let i=ee(null);try{return De(6,t,e),e(r)!==!1}catch(o){return yM(n,o),!1}finally{De(7,t,e),ee(i)}}function dE(n,t,e,r,i,o,s,a){let l=rs(n),f=!1,p=null;if(!r&&l&&(p=nA(t,e,o,n.index)),p!==null){let m=p.__ngLastListenerFn__||p;m.__ngNextListenerFn__=s,p.__ngLastListenerFn__=s,f=!0}else{let m=Cn(n,e),v=r?r(m):m;uT(e,v,o,a);let g=i.listen(v,o,a);if(!tA(o)){let w=r?S=>r(En(S[n.index])):n.index;fE(w,t,e,o,a,g,!1)}}return f}function tA(n){return n.startsWith("animation")||n.startsWith("transition")}function nA(n,t,e,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===e&&i[o+1]===r){let a=t[ts],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function fE(n,t,e,r,i,o,s){let a=t.firstCreatePass?em(t):null,l=Xh(e),f=l.length;l.push(i,o),a&&a.push(r,n,f,(f+1)*(s?-1:1))}function kb(n,t,e,r,i,o){let s=t[e],a=t[Y],f=a.data[e].outputs[r],m=s[f].subscribe(o);fE(n.index,a,t,i,o,m,!0)}var Hm=Symbol("BINDING");var Wu=class extends Ja{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=jr(t);return new no(e,this.ngModule)}};function rA(n){return Object.keys(n).map(t=>{let[e,r,i]=n[t],o={propName:e,templateName:t,isSignal:(r&ad.SignalBased)!==0};return i&&(o.transform=i),o})}function iA(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function oA(n,t,e){let r=t instanceof Je?t:t?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new $m(e,r):e}function sA(n){let t=n.get(to,null);if(t===null)throw new k(407,!1);let e=n.get(sE,null),r=n.get(Pr,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:r,ngReflect:!1}}function aA(n,t){let e=pE(n);return Dw(t,e,e==="svg"?$_:e==="math"?H_:null)}function pE(n){return(n.selectors[0][0]||"div").toLowerCase()}var no=class extends gd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=rA(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=iA(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=TT(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,r,i,o,s){De(22);let a=ee(null);try{let l=this.componentDef,f=lA(r,l,s,o),p=oA(l,i||this.ngModule,t),m=sA(p),v=m.rendererFactory.createRenderer(null,l),g=r?cM(v,r,l.encapsulation,p):aA(l,v),w=s?.some(Fb)||o?.some(D=>typeof D!="function"&&D.bindings.some(Fb)),S=_g(null,f,null,512|Mw(l),null,null,m,v,p,null,vw(g,p,!0));S[Ue]=g,wu(S);let E=null;try{let D=Pg(Ue,S,2,"#host",()=>f.directiveRegistry,!0,0);Tw(v,g,D),ds(g,S),dd(f,S,D),fg(f,D,S),kg(f,D),e!==void 0&&uA(D,this.ngContentSelectors,e),E=Sn(D.index,S),S[Xe]=E[Xe],Og(f,S,null)}catch(D){throw E!==null&&Nm(E),Nm(S),D}finally{De(23),Eu()}return new qu(this.componentType,S,!!w)}finally{ee(a)}}};function lA(n,t,e,r){let i=n?["ng-version","20.3.7"]:MT(t.selectors[0]),o=null,s=null,a=0;if(e)for(let p of e)a+=p[Hm].requiredVars,p.create&&(p.targetIdx=0,(o??=[]).push(p)),p.update&&(p.targetIdx=0,(s??=[]).push(p));if(r)for(let p=0;p<r.length;p++){let m=r[p];if(typeof m!="function")for(let v of m.bindings){a+=v[Hm].requiredVars;let g=p+1;v.create&&(v.targetIdx=g,(o??=[]).push(v)),v.update&&(v.targetIdx=g,(s??=[]).push(v))}}let l=[t];if(r)for(let p of r){let m=typeof p=="function"?p:p.type,v=Uh(m);l.push(v)}return yg(0,null,cA(o,s),1,a,l,null,null,null,[i],null)}function cA(n,t){return!n&&!t?null:e=>{if(e&1&&n)for(let r of n)r.create();if(e&2&&t)for(let r of t)r.update()}}function Fb(n){let t=n[Hm].kind;return t==="input"||t==="twoWay"}var qu=class extends oE{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e,r){super(),this._rootLView=e,this._hasInputBindings=r,this._tNode=Ra(e[Y],Ue),this.location=hs(this._tNode,e),this.instance=Sn(this._tNode.index,e)[Xe],this.hostView=this.changeDetectorRef=new gi(e,void 0),this.componentType=t}setInput(t,e){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let i=this._rootLView,o=fd(r,i[Y],i,t,e);this.previousInputValues.set(t,e);let s=Sn(r.index,i);Rg(s,1)}get injector(){return new Xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function uA(n,t,e){let r=n.projection=[];for(let i=0;i<t.length;i++){let o=e[i];r.push(o!=null&&o.length?Array.from(o):null)}}var zr=(()=>{class n{static __NG_ELEMENT_ID__=dA}return n})();function dA(){let n=rt();return mE(n,K())}var fA=zr,hE=class extends fA{_lContainer;_hostTNode;_hostLView;constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return hs(this._hostTNode,this._hostLView)}get injector(){return new Xi(this._hostTNode,this._hostLView)}get parentInjector(){let t=ag(this._hostTNode,this._hostLView);if(Jb(t)){let e=Fu(t,this._hostLView),r=ku(t),i=e[Y].data[r+8];return new Xi(i,e)}else return new Xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=Lb(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-nt}createEmbeddedView(t,e,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Bm(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,i,za(this._hostTNode,s)),a}createComponent(t,e,r,i,o,s,a){let l=t&&!kI(t),f;if(l)f=e;else{let E=e||{};f=E.index,r=E.injector,i=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef,s=E.directives,a=E.bindings}let p=l?t:new no(jr(t)),m=r||this.parentInjector;if(!o&&p.ngModule==null){let D=(l?m:this.parentInjector).get(Je,null);D&&(o=D)}let v=jr(p.componentType??{}),g=Bm(this._lContainer,v?.id??null),w=g?.firstChild??null,S=p.create(m,i,w,o,s,a);return this.insertImpl(S.hostView,f,za(this._hostTNode,g)),S}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(W_(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=i[ct],f=new hE(l,l[wn],l[ct]);f.detach(f.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return hd(s,i,o,r),t.attachToViewContainerRef(),Fh(Em(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=Lb(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=Ha(this._lContainer,e);r&&(xa(Em(this._lContainer),e),cd(r[Y],r))}detach(t){let e=this._adjustIndex(t,-1),r=Ha(this._lContainer,e);return r&&xa(Em(this._lContainer),e)!=null?new gi(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function Lb(n){return n[Oa]}function Em(n){return n[Oa]||(n[Oa]=[])}function mE(n,t){let e,r=t[n.index];return Bn(r)?e=r:(e=eE(r,t,null,n),t[n.index]=e,bg(t,e)),hA(e,t,n,r),new hE(e,n,t)}function pA(n,t){let e=n[Me],r=e.createComment(""),i=Cn(t,n),o=e.parentNode(i);return Bu(e,o,r,e.nextSibling(i),!1),r}var hA=vA,mA=()=>!1;function gA(n,t,e){return mA(n,t,e)}function vA(n,t,e,r){if(n[hi])return;let i;e.type&8?i=En(r):i=pA(t,e),n[hi]=i}var Gm=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Wm=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let r=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)jg(t,e).matches!==null&&this.queries[e].setDirty()}},Yu=class{flags;read;predicate;constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=DA(t):this.predicate=t}},qm=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){let i=e!==null?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Ym=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,e,yA(e,o)),this.matchTNodeWithReadOption(t,e,Ou(e,t,o,!1,!1))}else r===vi?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ou(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===yt||i===zr||i===vi&&e.type&4)this.addMatch(e.index,-2);else{let o=Ou(e,t,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function yA(n,t){let e=n.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1]}return null}function _A(n,t){return n.type&11?hs(n,t):n.type&4?md(n,t):null}function bA(n,t,e,r){return e===-1?_A(t,n):e===-2?wA(n,t,r):Ba(n,n[Y],e,t)}function wA(n,t,e){if(e===yt)return hs(t,n);if(e===vi)return md(t,n);if(e===zr)return mE(t,n)}function gE(n,t,e,r){let i=t[ar].queries[r];if(i.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let f=s[l];if(f<0)a.push(null);else{let p=o[f];a.push(bA(t,p,s[l+1],e.metadata.read))}}i.matches=a}return i.matches}function Km(n,t,e,r){let i=n.queries.getByIndex(e),o=i.matches;if(o!==null){let s=gE(n,t,i,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let f=o[a+1],p=t[-l];for(let m=nt;m<p.length;m++){let v=p[m];v[pi]===v[ct]&&Km(v[Y],v,f,r)}if(p[Zi]!==null){let m=p[Zi];for(let v=0;v<m.length;v++){let g=m[v];Km(g[Y],g,f,r)}}}}}return r}function EA(n,t){return n[ar].queries[t].queryList}function vE(n,t,e){let r=new Vu((e&4)===4);return K_(n,t,r,r.destroy),(t[ar]??=new Wm).queries.push(new Gm(r))-1}function CA(n,t,e){let r=Fe();return r.firstCreatePass&&(yE(r,new Yu(n,t,e),-1),(t&2)===2&&(r.staticViewQueries=!0)),vE(r,K(),t)}function SA(n,t,e,r){let i=Fe();if(i.firstCreatePass){let o=rt();yE(i,new Yu(t,e,r),o.index),xA(i,n),(e&2)===2&&(i.staticContentQueries=!0)}return vE(i,K(),e)}function DA(n){return n.split(",").map(t=>t.trim())}function yE(n,t,e){n.queries===null&&(n.queries=new qm),n.queries.track(new Ym(t,e))}function xA(n,t){let e=n.contentQueries||(n.contentQueries=[]),r=e.length?e[e.length-1]:-1;t!==r&&e.push(n.queries.length-1,t)}function jg(n,t){return n.queries.getByIndex(t)}function IA(n,t){let e=n[Y],r=jg(e,t);return r.crossesNgTemplate?Km(e,n,t,[]):gE(e,n,r,t)}var ro=class{},_d=class{};var Ku=class extends ro{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Wu(this);constructor(t,e,r,i=!0){super(),this.ngModuleType=t,this._parent=e;let o=Vh(t);this._bootstrapComponents=Cw(o.bootstrap),this._r3Injector=fm(t,e,[{provide:ro,useValue:this},{provide:Ja,useValue:this.componentFactoryResolver},...r],Nr(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Zu=class extends _d{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Ku(this.moduleType,t,[])}};var Ga=class extends ro{injector;componentFactoryResolver=new Wu(this);instance=null;constructor(t){super();let e=new Hi([...t.providers,{provide:ro,useValue:this},{provide:Ja,useValue:this.componentFactoryResolver}],t.parent||Ta(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function vs(n,t,e=null){return new Ga({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var TA=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=Bh(!1,e.type),i=r.length>0?vs([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:n,providedIn:"environment",factory:()=>new n(V(Je))})}return n})();function me(n){return qa(()=>{let t=_E(n),e=Z(A({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===lg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(TA).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Br.Emulated,styles:n.styles||zt,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&qn("NgStandalone"),bE(e);let r=n.dependencies;return e.directiveDefs=jb(r,MA),e.pipeDefs=jb(r,k_),e.id=RA(e),e})}function MA(n){return jr(n)||Uh(n)}function In(n){return qa(()=>({type:n.type,bootstrap:n.bootstrap||zt,declarations:n.declarations||zt,imports:n.imports||zt,exports:n.exports||zt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function AA(n,t){if(n==null)return di;let e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=ad.None,l=null),e[o]=[r,a,l],t[o]=s}return e}function OA(n){if(n==null)return di;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function ye(n){return qa(()=>{let t=_E(n);return bE(t),t})}function ys(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function _E(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||di,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||zt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:AA(n.inputs,t),outputs:OA(n.outputs),debugInfo:null}}function bE(n){n.features?.forEach(t=>t(n))}function jb(n,t){return n?()=>{let e=typeof n=="function"?n():n,r=[];for(let i of e){let o=t(i);o!==null&&r.push(o)}return r}:null}function RA(n){let t=0,e=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function NA(n){return Object.getPrototypeOf(n.prototype).constructor}function it(n){let t=NA(n.type),e=!0,r=[n];for(;t;){let i;if(cr(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new k(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);let s=n;s.inputs=Cm(n.inputs),s.declaredInputs=Cm(n.declaredInputs),s.outputs=Cm(n.outputs);let a=i.hostBindings;a&&jA(n,a);let l=i.viewQuery,f=i.contentQueries;if(l&&FA(n,l),f&&LA(n,f),PA(n,i),I_(n.outputs,i.outputs),cr(i)&&i.data.animation){let p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===it&&(e=!1)}}t=Object.getPrototypeOf(t)}kA(r)}function PA(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let r=t.inputs[e];r!==void 0&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e])}}function kA(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=us(i.hostAttrs,e=us(e,i.hostAttrs))}}function Cm(n){return n===di?{}:n===zt?[]:n}function FA(n,t){let e=n.viewQuery;e?n.viewQuery=(r,i)=>{t(r,i),e(r,i)}:n.viewQuery=t}function LA(n,t){let e=n.contentQueries;e?n.contentQueries=(r,i,o)=>{t(r,i,o),e(r,i,o)}:n.contentQueries=t}function jA(n,t){let e=n.hostBindings;e?n.hostBindings=(r,i)=>{t(r,i),e(r,i)}:n.hostBindings=t}function wE(n,t,e,r,i,o,s,a){if(e.firstCreatePass){n.mergedAttrs=us(n.mergedAttrs,n.attrs);let p=n.tView=yg(2,n,i,o,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,n),p.queries=e.queries.embeddedTView(n))}a&&(n.flags|=a),ss(n,!1);let l=UA(e,t,n,r);Cu()&&xg(e,t,l,n),ds(l,t);let f=eE(l,t,l,n);t[r+Ue]=f,bg(t,f),gA(f,n,t)}function VA(n,t,e,r,i,o,s,a,l,f,p){let m=e+Ue,v;return t.firstCreatePass?(v=Qa(t,m,4,s||null,a||null),yu()&&aE(t,n,v,Dn(t.consts,f),Tg),Kb(t,v)):v=t.data[m],wE(v,n,t,e,r,i,o,l),rs(v)&&dd(t,n,v),f!=null&&Za(n,v,p),v}function Qu(n,t,e,r,i,o,s,a,l,f,p){let m=e+Ue,v;if(t.firstCreatePass){if(v=Qa(t,m,4,s||null,a||null),f!=null){let g=Dn(t.consts,f);v.localNames=[];for(let w=0;w<g.length;w+=2)v.localNames.push(g[w],-1)}}else v=t.data[m];return wE(v,n,t,e,r,i,o,l),f!=null&&Za(n,v,p),v}function x(n,t,e,r,i,o,s,a){let l=K(),f=Fe(),p=Dn(f.consts,o);return VA(l,f,n,t,e,r,i,p,void 0,s,a),x}var UA=BA;function BA(n,t,e,r){return Fa(!0),t[Me].createComment("")}var Vg=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Ug=new U("");function yi(n){return!!n&&typeof n.then=="function"}function Bg(n){return!!n&&typeof n.subscribe=="function"}var zg=new U("");function bd(n){return or([{provide:zg,multi:!0,useValue:n}])}var $g=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=I(zg,{optional:!0})??[];injector=I($t);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=vt(this.injector,i);if(yi(o))e.push(o);else if(Bg(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xa=new U("");function EE(){Wp(()=>{let n="";throw new k(600,n)})}function CE(n){return n.isBoundToModule}var zA=10;var $r=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=I(Ht);afterRenderManager=I(Sg);zonelessEnabled=I(La);rootEffectScheduler=I(ym);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Be;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=I(ur);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ae(e=>!e))}constructor(){I(oo,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=I(Je);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){return this.bootstrapImpl(e,r)}bootstrapImpl(e,r,i=$t.NULL){return this._injector.get(Ge).run(()=>{De(10);let s=e instanceof gd;if(!this._injector.get($g).done){let w="";throw new k(405,w)}let l;s?l=e:l=this._injector.get(Ja).resolveComponentFactory(e),this.componentTypes.push(l.componentType);let f=CE(l)?void 0:this._injector.get(ro),p=r||l.selector,m=l.create(i,[],p,f),v=m.location.nativeElement,g=m.injector.get(Ug,null);return g?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),Ua(this.components,m),g?.unregisterApplication(v)}),this._loadComponent(m),De(11,m),m})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){De(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ld.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new k(101,!1);let e=ee(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ee(e),this.afterTick.next(),De(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(to,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<zA;)De(14),this.synchronizeOnce(),De(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Pa(i))continue;let o=r&&!this.zonelessEnabled?0:1;Zw(i,o),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Pa(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;Ua(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(e),this._injector.get(Xa,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Ua(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new k(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ua(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function _s(n,t){let e=K(),r=Ur();if(en(e,r,t)){let i=Fe(),o=as();if(fd(o,i,e,n,t))Vr(o)&&$w(e,o.index);else{let a=Cn(o,e);Hw(e[Me],a,null,o.value,n,t,null)}}return _s}function bs(n,t,e,r){let i=K(),o=Ur();if(en(i,o,t)){let s=Fe(),a=as();gM(a,i,n,t,e,r)}return bs}var k8=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Zm=class{destroy(t){}updateValue(t,e){}swap(t,e){let r=Math.min(t,e),i=Math.max(t,e),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(t,e){this.attach(e,this.detach(t,!0))}};function Sm(n,t,e,r,i){return n===e&&Object.is(t,r)?1:Object.is(i(n,t),i(e,r))?-1:0}function $A(n,t,e){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(t)){let l=t.length-1;for(;o<=s&&o<=l;){let f=n.at(o),p=t[o],m=Sm(o,f,o,p,e);if(m!==0){m<0&&n.updateValue(o,p),o++;continue}let v=n.at(s),g=t[l],w=Sm(s,v,l,g,e);if(w!==0){w<0&&n.updateValue(s,g),s--,l--;continue}let S=e(o,f),E=e(s,v),D=e(o,p);if(Object.is(D,E)){let G=e(l,g);Object.is(G,S)?(n.swap(o,s),n.updateValue(s,g),l--,s--):n.move(s,o),n.updateValue(o,p),o++;continue}if(r??=new Ju,i??=Ub(n,o,s,e),Qm(n,r,o,D))n.updateValue(o,p),o++,s++;else if(i.has(D))r.set(S,n.detach(o)),s--;else{let G=n.create(o,t[o]);n.attach(o,G),o++,s++}}for(;o<=l;)Vb(n,r,e,o,t[o]),o++}else if(t!=null){let l=t[Symbol.iterator](),f=l.next();for(;!f.done&&o<=s;){let p=n.at(o),m=f.value,v=Sm(o,p,o,m,e);if(v!==0)v<0&&n.updateValue(o,m),o++,f=l.next();else{r??=new Ju,i??=Ub(n,o,s,e);let g=e(o,m);if(Qm(n,r,o,g))n.updateValue(o,m),o++,s++,f=l.next();else if(!i.has(g))n.attach(o,n.create(o,m)),o++,s++,f=l.next();else{let w=e(o,p);r.set(w,n.detach(o)),s--}}}for(;!f.done;)Vb(n,r,e,n.length,f.value),f=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function Qm(n,t,e,r){return t!==void 0&&t.has(r)?(n.attach(e,t.get(r)),t.delete(r),!0):!1}function Vb(n,t,e,r,i){if(Qm(n,t,r,e(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function Ub(n,t,e,r){let i=new Set;for(let o=t;o<=e;o++)i.add(r(o,n.at(o)));return i}var Ju=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,r]of this.kvMap)if(t(r,e),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,e)}}};function ne(n,t,e,r,i,o,s,a){qn("NgControlFlow");let l=K(),f=Fe(),p=Dn(f.consts,o);return Qu(l,f,n,t,e,r,i,p,256,s,a),Hg}function Hg(n,t,e,r,i,o,s,a){qn("NgControlFlow");let l=K(),f=Fe(),p=Dn(f.consts,o);return Qu(l,f,n,t,e,r,i,p,512,s,a),Hg}function re(n,t){qn("NgControlFlow");let e=K(),r=Ur(),i=e[r]!==St?e[r]:-1,o=i!==-1?Xu(e,Ue+i):void 0,s=0;if(en(e,r,n)){let a=ee(null);try{if(o!==void 0&&nE(o,s),n!==-1){let l=Ue+n,f=Xu(e,l),p=tg(e[Y],l),m=iE(f,p,e),v=pd(e,p,t,{dehydratedView:m});hd(f,v,s,za(p,m))}}finally{ee(a)}}else if(o!==void 0){let a=tE(o,s);a!==void 0&&(a[Xe]=t)}}var Jm=class{lContainer;$implicit;$index;constructor(t,e,r){this.lContainer=t,this.$implicit=e,this.$index=r}get $count(){return this.lContainer.length-nt}};function Gg(n){return n}function _i(n,t){return t}var Xm=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,e,r){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=r}};function Dt(n,t,e,r,i,o,s,a,l,f,p,m,v){qn("NgControlFlow");let g=K(),w=Fe(),S=l!==void 0,E=K(),D=a?s.bind(E[pn][Xe]):s,G=new Xm(S,D);E[Ue+n]=G,Qu(g,w,n+1,t,e,r,i,Dn(w.consts,o),256),S&&Qu(g,w,n+2,l,f,p,m,Dn(w.consts,v),512)}var eg=class extends Zm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,e,r){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=r}get length(){return this.lContainer.length-nt}at(t){return this.getLView(t)[Xe].$implicit}attach(t,e){let r=e[es];this.needsIndexUpdate||=t!==this.length,hd(this.lContainer,e,t,za(this.templateTNode,r))}detach(t,e){return this.needsIndexUpdate||=t!==this.length-1,e&&HA(this.lContainer,t),GA(this.lContainer,t)}create(t,e){let r=Bm(this.lContainer,this.templateTNode.tView.ssrId),i=pd(this.hostLView,this.templateTNode,new Jm(this.lContainer,e,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){cd(t[Y],t),this.operationsCounter?.recordDestroy()}updateValue(t,e){this.getLView(t)[Xe].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Xe].$index=t}getLView(t){return WA(this.lContainer,t)}};function xt(n){let t=ee(null),e=zn();try{let r=K(),i=r[Y],o=r[e],s=e+1,a=Xu(r,s);if(o.liveCollection===void 0){let f=tg(i,s);o.liveCollection=new eg(a,r,f)}else o.liveCollection.reset();let l=o.liveCollection;if($A(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let f=Ur(),p=l.length===0;if(en(r,f,p)){let m=e+2,v=Xu(r,m);if(p){let g=tg(i,m),w=iE(v,g,r),S=pd(r,g,void 0,{dehydratedView:w});hd(v,S,0,za(g,w))}else i.firstUpdatePass&&VM(v),nE(v,0)}}}finally{ee(t)}}function Xu(n,t){return n[t]}function HA(n,t){if(n.length<=nt)return;let e=nt+t,r=n[e];r&&r[Ki]&&(r[Ki].skipLeaveAnimations=!0)}function GA(n,t){return Ha(n,t)}function WA(n,t){return tE(n,t)}function tg(n,t){return Ra(n,t)}function y(n,t,e){let r=K(),i=Ur();if(en(r,i,t)){let o=Fe(),s=as();Bw(s,r,n,t,r[Me],e)}return y}function ng(n,t,e,r,i){fd(t,n,e,i?"class":"style",r)}function u(n,t,e,r){let i=K(),o=i[Y],s=n+Ue,a=o.firstCreatePass?Pg(s,i,2,t,Tg,yu(),e,r):o.data[s];if(Mg(a,i,n,t,SE),rs(a)){let l=i[Y];dd(l,i,a),fg(l,a,i)}return r!=null&&Za(i,a),u}function c(){let n=Fe(),t=rt(),e=Ag(t);return n.firstCreatePass&&kg(n,e),nm(e)&&rm(),tm(),e.classesWithoutHost!=null&&BI(e)&&ng(n,e,K(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&zI(e)&&ng(n,e,K(),e.stylesWithoutHost,!1),c}function O(n,t,e,r){return u(n,t,e,r),c(),O}function Ae(n,t,e,r){let i=K(),o=i[Y],s=n+Ue,a=o.firstCreatePass?XM(s,o,2,t,e,r):o.data[s];return Mg(a,i,n,t,SE),r!=null&&Za(i,a),Ae}function We(){let n=rt(),t=Ag(n);return nm(t)&&rm(),tm(),We}function ws(n,t,e,r){return Ae(n,t,e,r),We(),ws}var SE=(n,t,e,r,i)=>(Fa(!0),Dw(t[Me],r,db()));function Hr(n,t,e){let r=K(),i=r[Y],o=n+Ue,s=i.firstCreatePass?Pg(o,r,8,"ng-container",Tg,yu(),t,e):i.data[o];if(Mg(s,r,n,"ng-container",qA),rs(s)){let a=r[Y];dd(a,r,s),fg(a,s,r)}return e!=null&&Za(r,s),Hr}function Gr(){let n=Fe(),t=rt(),e=Ag(t);return n.firstCreatePass&&kg(n,e),Gr}var qA=(n,t,e,r,i)=>(Fa(!0),RT(t[Me],""));function J(){return K()}function wd(n,t,e){let r=K(),i=Ur();if(en(r,i,t)){let o=Fe(),s=as();zw(s,r,n,t,r[Me],e)}return wd}var Iu=void 0;function YA(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var KA=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Iu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Iu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Iu,"{1} 'at' {0}",Iu],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",YA],Dm={};function nn(n){let t=ZA(n),e=Bb(t);if(e)return e;let r=t.split("-")[0];if(e=Bb(r),e)return e;if(r==="en")return KA;throw new k(701,!1)}function Bb(n){return n in Dm||(Dm[n]=Fr.ng&&Fr.ng.common&&Fr.ng.common.locales&&Fr.ng.common.locales[n]),Dm[n]}var qe=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(qe||{});function ZA(n){return n.toLowerCase().replace(/_/g,"-")}var el="en-US";var QA=el;function DE(n){typeof n=="string"&&(QA=n.toLowerCase().replace(/_/g,"-"))}function T(n,t,e){let r=K(),i=Fe(),o=rt();return xE(i,r,r[Me],o,n,t,e),T}function so(n,t,e){let r=K(),i=Fe(),o=rt();return(o.type&3||e)&&dE(o,i,r,e,r[Me],n,t,Nu(o,r,t)),so}function xE(n,t,e,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=Nu(r,t,o),dE(r,n,t,s,e,i,o,l)&&(a=!1)),a){let f=r.outputs?.[i],p=r.hostDirectiveOutputs?.[i];if(p&&p.length)for(let m=0;m<p.length;m+=2){let v=p[m],g=p[m+1];l??=Nu(r,t,o),kb(r,t,v,g,i,l)}if(f&&f.length)for(let m of f)l??=Nu(r,t,o),kb(r,t,m,i,i,l)}}function b(n=1){return ub(n)}function Wg(n,t,e,r){SA(n,t,e,r)}function qg(n,t,e){CA(n,t,e)}function tl(n){let t=K(),e=Fe(),r=cm();bu(r+1);let i=jg(e,r);if(n.dirty&&G_(t)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=IA(t,r);n.reset(o,tT),n.notifyOnChanges()}return!0}return!1}function nl(){return EA(K(),cm())}function ao(n){let t=tb();return Na(t,Ue+n)}function Tu(n,t){return n<<17|t<<2}function io(n){return n>>17&32767}function JA(n){return(n&2)==2}function XA(n,t){return n&131071|t<<17}function rg(n){return n|2}function ps(n){return(n&131068)>>2}function xm(n,t){return n&-131069|t<<2}function eO(n){return(n&1)===1}function ig(n){return n|1}function tO(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=io(s),l=ps(s);n[r]=e;let f=!1,p;if(Array.isArray(e)){let m=e;p=m[1],(p===null||Xo(m,p)>0)&&(f=!0)}else p=e;if(i)if(l!==0){let v=io(n[a+1]);n[r+1]=Tu(v,a),v!==0&&(n[v+1]=xm(n[v+1],r)),n[a+1]=XA(n[a+1],r)}else n[r+1]=Tu(a,0),a!==0&&(n[a+1]=xm(n[a+1],r)),a=r;else n[r+1]=Tu(l,0),a===0?a=r:n[l+1]=xm(n[l+1],r),l=r;f&&(n[r+1]=rg(n[r+1])),zb(n,p,r,!0),zb(n,p,r,!1),nO(t,p,n,r,o),s=Tu(a,l),o?t.classBindings=s:t.styleBindings=s}function nO(n,t,e,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&Xo(o,t)>=0&&(e[r+1]=ig(e[r+1]))}function zb(n,t,e,r){let i=n[e+1],o=t===null,s=r?io(i):ps(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],f=n[s+1];rO(l,t)&&(a=!0,n[s+1]=r?ig(f):rg(f)),s=r?io(f):ps(f)}a&&(n[e+1]=r?rg(i):ig(i))}function rO(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?Xo(n,t)>=0:!1}var Gn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function iO(n){return n.substring(Gn.key,Gn.keyEnd)}function oO(n){return sO(n),IE(n,TE(n,0,Gn.textEnd))}function IE(n,t){let e=Gn.textEnd;return e===t?-1:(t=Gn.keyEnd=aO(n,Gn.key=t,e),TE(n,t,e))}function sO(n){Gn.key=0,Gn.keyEnd=0,Gn.value=0,Gn.valueEnd=0,Gn.textEnd=n.length}function TE(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function aO(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function fr(n,t,e){return ME(n,t,e,!1),fr}function xe(n,t){return ME(n,t,null,!0),xe}function bi(n){cO(mO,lO,n,!0)}function lO(n,t){for(let e=oO(t);e>=0;e=IE(t,e))pu(n,iO(t),!0)}function ME(n,t,e,r){let i=K(),o=Fe(),s=ka(2);if(o.firstUpdatePass&&OE(o,n,s,r),t!==St&&en(i,s,t)){let a=o.data[zn()];RE(o,a,i,i[Me],n,i[s+1]=vO(t,e),r,s)}}function cO(n,t,e,r){let i=Fe(),o=ka(2);i.firstUpdatePass&&OE(i,null,o,r);let s=K();if(e!==St&&en(s,o,e)){let a=i.data[zn()];if(NE(a,r)&&!AE(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=cu(l,e||"")),ng(i,a,s,e,r)}else gO(i,a,s,s[Me],s[o+1],s[o+1]=hO(n,t,e),r,o)}}function AE(n,t){return t>=n.expandoStartIndex}function OE(n,t,e,r){let i=n.data;if(i[e+1]===null){let o=i[zn()],s=AE(n,e);NE(o,r)&&t===null&&!s&&(t=!1),t=uO(i,o,t,r),tO(i,o,t,e,s,r)}}function uO(n,t,e,r){let i=sb(n),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(e=Im(null,n,t,e,r),e=Wa(e,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==i)if(e=Im(i,n,t,e,r),o===null){let l=dO(n,t,r);l!==void 0&&Array.isArray(l)&&(l=Im(null,n,t,l[1],r),l=Wa(l,t.attrs,r),fO(n,t,r,l))}else o=pO(n,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),e}function dO(n,t,e){let r=e?t.classBindings:t.styleBindings;if(ps(r)!==0)return n[io(r)]}function fO(n,t,e,r){let i=e?t.classBindings:t.styleBindings;n[io(i)]=r}function pO(n,t,e){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Wa(r,s,e)}return Wa(r,t.attrs,e)}function Im(n,t,e,r,i){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],r=Wa(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),r}function Wa(n,t,e){let r=e?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),pu(n,s,e?!0:t[++o]))}return n===void 0?null:n}function hO(n,t,e){if(e==null||e==="")return zt;let r=[],i=gs(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function mO(n,t,e){let r=String(t);r!==""&&!r.includes(" ")&&pu(n,r,e)}function gO(n,t,e,r,i,o,s,a){i===St&&(i=zt);let l=0,f=0,p=0<i.length?i[0]:null,m=0<o.length?o[0]:null;for(;p!==null||m!==null;){let v=l<i.length?i[l+1]:void 0,g=f<o.length?o[f+1]:void 0,w=null,S;p===m?(l+=2,f+=2,v!==g&&(w=m,S=g)):m===null||p!==null&&p<m?(l+=2,w=p):(f+=2,w=m,S=g),w!==null&&RE(n,t,e,r,w,S,s,a),p=l<i.length?i[l]:null,m=f<o.length?o[f]:null}}function RE(n,t,e,r,i,o,s,a){if(!(t.type&3))return;let l=n.data,f=l[a+1],p=eO(f)?$b(l,t,e,i,ps(f),s):void 0;if(!ed(p)){ed(o)||JA(f)&&(o=$b(l,null,e,i,a,s));let m=Yh(zn(),e);lM(r,s,m,i,o)}}function $b(n,t,e,r,i,o){let s=t===null,a;for(;i>0;){let l=n[i],f=Array.isArray(l),p=f?l[1]:l,m=p===null,v=e[i+1];v===St&&(v=m?zt:void 0);let g=m?hu(v,r):p===r?v:void 0;if(f&&!ed(g)&&(g=hu(l,r)),ed(g)&&(a=g,s))return a;let w=n[i+1];i=s?io(w):ps(w)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=hu(l,r))}return a}function ed(n){return n!==void 0}function vO(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=Nr(gs(n)))),n}function NE(n,t){return(n.flags&(t?8:16))!==0}function d(n,t=""){let e=K(),r=Fe(),i=n+Ue,o=r.firstCreatePass?Qa(r,i,1,t,null):r.data[i],s=yO(r,e,o,t,n);e[i]=s,Cu()&&xg(r,e,s,o),ss(o,!1)}var yO=(n,t,e,r,i)=>(Fa(!0),AT(t[Me],r));function PE(n,t,e,r=""){return en(n,Ur(),e)?t+ir(e)+r:St}function _O(n,t,e,r,i,o=""){let s=lm(),a=Lg(n,s,e,i);return ka(2),a?t+ir(e)+r+ir(i)+o:St}function bO(n,t,e,r,i,o,s,a=""){let l=lm(),f=uE(n,l,e,i,s);return ka(3),f?t+ir(e)+r+ir(i)+o+ir(s)+a:St}function R(n){return M("",n),R}function M(n,t,e){let r=K(),i=PE(r,n,t,e);return i!==St&&Yg(r,zn(),i),M}function be(n,t,e,r,i){let o=K(),s=_O(o,n,t,e,r,i);return s!==St&&Yg(o,zn(),s),be}function lo(n,t,e,r,i,o,s){let a=K(),l=bO(a,n,t,e,r,i,o,s);return l!==St&&Yg(a,zn(),l),lo}function Yg(n,t,e){let r=Yh(t,n);OT(n[Me],r,e)}function ie(n,t,e){mm(t)&&(t=t());let r=K(),i=Ur();if(en(r,i,t)){let o=Fe(),s=as();Bw(s,r,n,t,r[Me],e)}return ie}function le(n,t){let e=mm(n);return e&&n.set(t),e}function oe(n,t){let e=K(),r=Fe(),i=rt();return xE(r,e,e[Me],i,n,t),oe}function rl(n,t,e=""){return PE(K(),n,t,e)}function wO(n,t,e){let r=Fe();if(r.firstCreatePass){let i=cr(n);og(e,r.data,r.blueprint,i,!0),og(t,r.data,r.blueprint,i,!1)}}function og(n,t,e,r,i){if(n=Ct(n),Array.isArray(n))for(let o=0;o<n.length;o++)og(n[o],t,e,r,i);else{let o=Fe(),s=K(),a=rt(),l=$i(n)?n:Ct(n.provide),f=$h(n),p=a.providerIndexes&1048575,m=a.directiveStart,v=a.providerIndexes>>20;if($i(n)||!n.multi){let g=new eo(f,i,C,null),w=Mm(l,t,i?p:p+v,m);w===-1?(Om(ju(a,s),o,l),Tm(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(g),s.push(g)):(e[w]=g,s[w]=g)}else{let g=Mm(l,t,p+v,m),w=Mm(l,t,p,p+v),S=g>=0&&e[g],E=w>=0&&e[w];if(i&&!E||!i&&!S){Om(ju(a,s),o,l);let D=SO(i?CO:EO,e.length,i,r,f,n);!i&&E&&(e[w].providerFactory=D),Tm(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(D),s.push(D)}else{let D=kE(e[i?w:g],f,!i&&r);Tm(o,n,g>-1?g:w,D)}!i&&r&&E&&e[w].componentProviders++}}}function Tm(n,t,e,r){let i=$i(t),o=U_(t);if(i||o){let l=(o?Ct(t.useClass):t).prototype.ngOnDestroy;if(l){let f=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){let p=f.indexOf(e);p===-1?f.push(e,[r,l]):f[p+1].push(r,l)}else f.push(e,l)}}}function kE(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Mm(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function EO(n,t,e,r,i){return sg(this.multi,[])}function CO(n,t,e,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Ba(r,r[Y],this.providerFactory.index,i);s=l.slice(0,a),sg(o,s);for(let f=a;f<l.length;f++)s.push(l[f])}else s=[],sg(o,s);return s}function sg(n,t){for(let e=0;e<n.length;e++){let r=n[e];t.push(r())}return t}function SO(n,t,e,r,i,o){let s=new eo(n,e,C,null);return s.multi=[],s.index=t,s.componentProviders=0,kE(s,i,r&&!e),s}function Gt(n,t=[]){return e=>{e.providersResolver=(r,i)=>wO(r,i?i(n):n,t)}}function Wt(n,t,e){let r=Ji()+n,i=K();return i[r]===St?yd(i,r,e?t.call(e):t()):eA(i,r)}function Kg(n,t,e,r){return FE(K(),Ji(),n,t,e,r)}function Zg(n,t,e,r,i){return LE(K(),Ji(),n,t,e,r,i)}function Qg(n,t){let e=n[t];return e===St?void 0:e}function FE(n,t,e,r,i,o){let s=t+e;return en(n,s,i)?yd(n,s+1,o?r.call(o,i):r(i)):Qg(n,s+1)}function LE(n,t,e,r,i,o,s){let a=t+e;return Lg(n,a,i,o)?yd(n,a+2,s?r.call(s,i,o):r(i,o)):Qg(n,a+2)}function DO(n,t,e,r,i,o,s,a){let l=t+e;return uE(n,l,i,o,s)?yd(n,l+3,a?r.call(a,i,o,s):r(i,o,s)):Qg(n,l+3)}function z(n,t){let e=Fe(),r,i=n+Ue;e.firstCreatePass?(r=xO(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks??=[]).push(i,r.onDestroy)):r=e.data[i];let o=r.factory||(r.factory=ci(r.type,!0)),s,a=Bt(C);try{let l=Lu(!1),f=o();return Lu(l),Kh(e,K(),i,f),f}finally{Bt(a)}}function xO(n,t){if(t)for(let e=t.length-1;e>=0;e--){let r=t[e];if(n===r.name)return r}}function Wr(n,t,e){let r=n+Ue,i=K(),o=Na(i,r);return Xg(i,r)?FE(i,Ji(),t,o.transform,e,o):o.transform(e)}function W(n,t,e,r){let i=n+Ue,o=K(),s=Na(o,i);return Xg(o,i)?LE(o,Ji(),t,s.transform,e,r,s):s.transform(e,r)}function Jg(n,t,e,r,i){let o=n+Ue,s=K(),a=Na(s,o);return Xg(s,o)?DO(s,Ji(),t,a.transform,e,r,i,a):a.transform(e,r,i)}function Xg(n,t){return n[Y].data[t].pure}function il(n,t){return md(n,t)}var td=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},e0=(()=>{class n{compileModuleSync(e){return new Zu(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=Vh(e),o=Cw(i.declarations).reduce((s,a)=>{let l=jr(a);return l&&s.push(new no(l)),s},[]);return new td(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var IO=(()=>{class n{zone=I(Ge);changeDetectionScheduler=I(Pr);applicationRef=I($r);applicationErrorHandler=I(Ht);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(e){this.applicationErrorHandler(e)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jE=new U("",{factory:()=>!1});function t0({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new Ge(Z(A({},r0()),{scheduleInRootZone:e})),[{provide:Ge,useFactory:n},{provide:Lr,multi:!0,useFactory:()=>{let r=I(IO,{optional:!0});return()=>r.initialize()}},{provide:Lr,multi:!0,useFactory:()=>{let r=I(TO);return()=>{r.initialize()}}},t===!0?{provide:gm,useValue:!0}:[],{provide:vm,useValue:e??Rw},{provide:Ht,useFactory:()=>{let r=I(Ge),i=I(Je),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Vn),o.handleError(s))})}}}]}function n0(n){let t=n?.ignoreChangesOutsideZone,e=n?.scheduleInRootZone,r=t0({ngZoneFactory:()=>{let i=r0(n);return i.scheduleInRootZone=e,i.shouldCoalesceEventChangeDetection&&qn("NgZone_CoalesceEvent"),new Ge(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return or([{provide:jE,useValue:!0},{provide:La,useValue:!1},r])}function r0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var TO=(()=>{class n{subscription=new He;initialized=!1;zone=I(Ge);pendingTasks=I(ur);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ge.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ge.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var VE=(()=>{class n{applicationErrorHandler=I(Ht);appRef=I($r);taskService=I(ur);ngZone=I(Ge);zonelessEnabled=I(La);tracing=I(oo,{optional:!0});disableScheduling=I(gm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new He;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(zu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(I(vm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof $u||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let r=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Db:Nw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(zu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(e),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Db(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MO(){return typeof $localize<"u"&&$localize.locale||el}var co=new U("",{providedIn:"root",factory:()=>I(co,{optional:!0,skipSelf:!0})||MO()});function _t(n){return S_(n)}function Es(n,t){return Ic(n,t?.equal)}var UE=class{[At];constructor(t){this[At]=t}destroy(){this[At].destroy()}};var qE=Symbol("InputSignalNode#UNSET"),BO=Z(A({},Tc),{transformFn:void 0,applyValueToInputSignal(n,t){Bo(n,t)}});function YE(n,t){let e=Object.create(BO);e.value=n,e.transformFn=t?.transform;function r(){if(jo(e),e.value===qE){let i=null;throw new k(-950,i)}return e.value}return r[At]=e,r}var Cd=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Ya(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},zO=new U("");zO.__NG_ELEMENT_ID__=n=>{let t=rt();if(t===null)throw new k(204,!1);if(t.type&2)return t.value;if(n&8)return null;throw new k(204,!1)};function BE(n,t){return YE(n,t)}function $O(n){return YE(qE,n)}var KE=(BE.required=$O,BE);var i0=new U(""),HO=new U("");function ol(n){return!n.moduleRef}function GO(n){let t=ol(n)?n.r3Injector:n.moduleRef.injector,e=t.get(Ge);return e.run(()=>{ol(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=t.get(Ht),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:r})}),ol(n)){let o=()=>t.destroy(),s=n.platformInjector.get(i0);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(i0);s.add(o),n.moduleRef.onDestroy(()=>{Ua(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return qO(r,e,()=>{let o=t.get(ur),s=o.add(),a=t.get($g);return a.runInitializers(),a.donePromise.then(()=>{let l=t.get(co,el);if(DE(l||el),!t.get(HO,!0))return ol(n)?t.get($r):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ol(n)){let p=t.get($r);return n.rootComponent!==void 0&&p.bootstrap(n.rootComponent),p}else return WO?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var WO;function qO(n,t,e){try{let r=e();return yi(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n(r)),r}}var Ed=null;function YO(n=[],t){return $t.create({name:t,providers:[{provide:Ia,useValue:"platform"},{provide:i0,useValue:new Set([()=>Ed=null])},...n]})}function KO(n=[]){if(Ed)return Ed;let t=YO(n);return Ed=t,EE(),ZO(t),t}function ZO(n){let t=n.get(rd,null);vt(n,()=>{t?.forEach(e=>e())})}var qr=(()=>{class n{static __NG_ELEMENT_ID__=QO}return n})();function QO(n){return JO(rt(),K(),(n&16)===16)}function JO(n,t,e){if(Vr(n)&&!e){let r=Sn(n.index,t);return new gi(r,r)}else if(n.type&175){let r=t[pn];return new gi(r,t)}return null}var o0=class{constructor(){}supports(t){return Fg(t)}create(t){return new s0(t)}},XO=(n,t)=>t,s0=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||XO}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){let s=!r||e&&e.currentIndex<zE(r,i,o)?e:r,a=zE(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)i++;else{o||(o=[]);let f=a-i,p=l-i;if(f!=p){for(let v=0;v<f;v++){let g=v<o.length?o[v]:o[v]=0,w=g+v;p<=w&&w<f&&(o[v]=g+1)}let m=s.previousIndex;o[m]=p-f}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!Fg(t))throw new k(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else i=0,cE(t,a=>{s=this._trackByFn(i,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,i),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new a0(e,r),o,i)),t}_verifyReinsertion(t,e,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Sd),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Sd),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},a0=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},l0=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},Sd=class{map=new Map;put(t){let e=t.trackById,r=this.map.get(e);r||(r=new l0,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,i=this.map.get(r);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function zE(n,t,e){let r=n.previousIndex;if(r===null)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}var c0=class{constructor(){}supports(t){return t instanceof Map||vd(t)}create(){return new u0}},u0=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||vd(t)))throw new k(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let i=this._records.get(t);this._maybeAddToChanges(i,e);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new d0(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}},d0=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(t){this.key=t}};function $E(){return new f0([new o0])}var f0=(()=>{class n{factories;static \u0275prov=F({token:n,providedIn:"root",factory:$E});constructor(e){this.factories=e}static create(e,r){if(r!=null){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:()=>{let r=I(n,{optional:!0,skipSelf:!0});return n.create(e,r||$E())}}}find(e){let r=this.factories.find(i=>i.supports(e));if(r!=null)return r;throw new k(901,!1)}}return n})();function HE(){return new p0([new c0])}var p0=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:HE});factories;constructor(e){this.factories=e}static create(e,r){if(r){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:()=>{let r=I(n,{optional:!0,skipSelf:!0});return n.create(e,r||HE())}}}find(e){let r=this.factories.find(i=>i.supports(e));if(r)return r;throw new k(901,!1)}}return n})();function ZE(n){let{rootComponent:t,appProviders:e,platformProviders:r,platformRef:i}=n;De(8);try{let o=i?.injector??KO(r),s=[t0({}),{provide:Pr,useExisting:VE},pb,...e||[]],a=new Ga({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return GO({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{De(9)}}function uo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function QE(n){let t=jr(n);if(!t)return null;let e=new no(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var e1=null;function Tn(){return e1}function h0(n){e1??=n}var sl=class{},al=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>I(t1),providedIn:"platform"})}return n})(),m0=new U(""),t1=(()=>{class n extends al{_location;_history;_doc=I(ze);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Tn().getBaseHref(this._doc)}onPopState(e){let r=Tn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=Tn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Dd(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function JE(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function Yn(n){return n&&n[0]!=="?"?`?${n}`:n}var gn=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>I(Id),providedIn:"root"})}return n})(),xd=new U(""),Id=(()=>{class n extends gn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??I(ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Dd(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+Yn(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Yn(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Yn(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(V(al),V(xd,8))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wi=(()=>{class n{_subject=new Be;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=nR(JE(XE(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Yn(r))}normalize(e){return n.stripTrailingSlash(tR(this._basePath,XE(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Yn(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Yn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Yn;static joinWithSlash=Dd;static stripTrailingSlash=JE;static \u0275fac=function(r){return new(r||n)(V(gn))};static \u0275prov=F({token:n,factory:()=>eR(),providedIn:"root"})}return n})();function eR(){return new wi(V(gn))}function tR(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function XE(n){return n.replace(/\/index.html$/,"")}function nR(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var fl=(()=>{class n extends gn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=Dd(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Yn(o))||this._platformLocation.pathname;this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Yn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(V(al),V(xd,8))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();var Ld=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(Ld||{});var Rt=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Rt||{}),Oe=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Oe||{}),rn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(rn||{}),bt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function a1(n){return nn(n)[qe.LocaleId]}function l1(n,t,e){let r=nn(n),i=[r[qe.DayPeriodsFormat],r[qe.DayPeriodsStandalone]],o=An(i,t);return An(o,e)}function c1(n,t,e){let r=nn(n),i=[r[qe.DaysFormat],r[qe.DaysStandalone]],o=An(i,t);return An(o,e)}function u1(n,t,e){let r=nn(n),i=[r[qe.MonthsFormat],r[qe.MonthsStandalone]],o=An(i,t);return An(o,e)}function d1(n,t){let r=nn(n)[qe.Eras];return An(r,t)}function ll(n,t){let e=nn(n);return An(e[qe.DateFormat],t)}function cl(n,t){let e=nn(n);return An(e[qe.TimeFormat],t)}function ul(n,t){let r=nn(n)[qe.DateTimeFormat];return An(r,t)}function Mn(n,t){let e=nn(n),r=e[qe.NumberSymbols][t];if(typeof r>"u"){if(t===bt.CurrencyDecimal)return e[qe.NumberSymbols][bt.Decimal];if(t===bt.CurrencyGroup)return e[qe.NumberSymbols][bt.Group]}return r}function E0(n,t){return nn(n)[qe.NumberFormats][t]}function f1(n){if(!n[qe.ExtraData])throw new k(2303,!1)}function p1(n){let t=nn(n);return f1(t),(t[qe.ExtraData][2]||[]).map(r=>typeof r=="string"?g0(r):[g0(r[0]),g0(r[1])])}function h1(n,t,e){let r=nn(n);f1(r);let i=[r[qe.ExtraData][0],r[qe.ExtraData][1]],o=An(i,t)||[];return An(o,e)||[]}function An(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new k(2304,!1)}function g0(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var rR=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Td={},iR=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function m1(n,t,e,r){let i=pR(n);t=Yr(e,t)||t;let s=[],a;for(;t;)if(a=iR.exec(t),a){s=s.concat(a.slice(1));let p=s.pop();if(!p)break;t=p}else{s.push(t);break}let l=i.getTimezoneOffset();r&&(l=v1(r,l),i=fR(i,r));let f="";return s.forEach(p=>{let m=uR(p);f+=m?m(i,e,l):p==="''"?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function Nd(n,t,e){let r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function Yr(n,t){let e=a1(n);if(Td[e]??={},Td[e][t])return Td[e][t];let r="";switch(t){case"shortDate":r=ll(n,rn.Short);break;case"mediumDate":r=ll(n,rn.Medium);break;case"longDate":r=ll(n,rn.Long);break;case"fullDate":r=ll(n,rn.Full);break;case"shortTime":r=cl(n,rn.Short);break;case"mediumTime":r=cl(n,rn.Medium);break;case"longTime":r=cl(n,rn.Long);break;case"fullTime":r=cl(n,rn.Full);break;case"short":let i=Yr(n,"shortTime"),o=Yr(n,"shortDate");r=Md(ul(n,rn.Short),[i,o]);break;case"medium":let s=Yr(n,"mediumTime"),a=Yr(n,"mediumDate");r=Md(ul(n,rn.Medium),[s,a]);break;case"long":let l=Yr(n,"longTime"),f=Yr(n,"longDate");r=Md(ul(n,rn.Long),[l,f]);break;case"full":let p=Yr(n,"fullTime"),m=Yr(n,"fullDate");r=Md(ul(n,rn.Full),[p,m]);break}return r&&(Td[e][t]=r),r}function Md(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return t!=null&&r in t?t[r]:e})),n}function Kn(n,t,e="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function oR(n,t){return Kn(n,3).substring(0,t)}function ot(n,t,e=0,r=!1,i=!1){return function(o,s){let a=sR(n,o);if((e>0||a>-e)&&(a+=e),n===3)a===0&&e===-12&&(a=12);else if(n===6)return oR(a,t);let l=Mn(s,bt.MinusSign);return Kn(a,t,l,r,i)}}function sR(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new k(2301,!1)}}function Pe(n,t,e=Rt.Format,r=!1){return function(i,o){return aR(i,o,n,t,e,r)}}function aR(n,t,e,r,i,o){switch(e){case 2:return u1(t,i,r)[n.getMonth()];case 1:return c1(t,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let f=p1(t),p=h1(t,i,r),m=f.findIndex(v=>{if(Array.isArray(v)){let[g,w]=v,S=s>=g.hours&&a>=g.minutes,E=s<w.hours||s===w.hours&&a<w.minutes;if(g.hours<w.hours){if(S&&E)return!0}else if(S||E)return!0}else if(v.hours===s&&v.minutes===a)return!0;return!1});if(m!==-1)return p[m]}return l1(t,i,r)[s<12?0:1];case 3:return d1(t,r)[n.getFullYear()<=0?0:1];default:let l=e;throw new k(2302,!1)}}function Ad(n){return function(t,e,r){let i=-1*r,o=Mn(e,bt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Kn(s,2,o)+Kn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Kn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Kn(s,2,o)+":"+Kn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Kn(s,2,o)+":"+Kn(Math.abs(i%60),2,o);default:throw new k(2310,!1)}}}var lR=0,Rd=4;function cR(n){let t=Nd(n,lR,1).getDay();return Nd(n,0,1+(t<=Rd?Rd:Rd+7)-t)}function g1(n){let t=n.getDay(),e=t===0?-3:Rd-t;return Nd(n.getFullYear(),n.getMonth(),n.getDate()+e)}function v0(n,t=!1){return function(e,r){let i;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();i=1+Math.floor((s+o)/7)}else{let o=g1(e),s=cR(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Kn(i,n,Mn(r,bt.MinusSign))}}function Od(n,t=!1){return function(e,r){let o=g1(e).getFullYear();return Kn(o,n,Mn(r,bt.MinusSign),t)}}var y0={};function uR(n){if(y0[n])return y0[n];let t;switch(n){case"G":case"GG":case"GGG":t=Pe(3,Oe.Abbreviated);break;case"GGGG":t=Pe(3,Oe.Wide);break;case"GGGGG":t=Pe(3,Oe.Narrow);break;case"y":t=ot(0,1,0,!1,!0);break;case"yy":t=ot(0,2,0,!0,!0);break;case"yyy":t=ot(0,3,0,!1,!0);break;case"yyyy":t=ot(0,4,0,!1,!0);break;case"Y":t=Od(1);break;case"YY":t=Od(2,!0);break;case"YYY":t=Od(3);break;case"YYYY":t=Od(4);break;case"M":case"L":t=ot(1,1,1);break;case"MM":case"LL":t=ot(1,2,1);break;case"MMM":t=Pe(2,Oe.Abbreviated);break;case"MMMM":t=Pe(2,Oe.Wide);break;case"MMMMM":t=Pe(2,Oe.Narrow);break;case"LLL":t=Pe(2,Oe.Abbreviated,Rt.Standalone);break;case"LLLL":t=Pe(2,Oe.Wide,Rt.Standalone);break;case"LLLLL":t=Pe(2,Oe.Narrow,Rt.Standalone);break;case"w":t=v0(1);break;case"ww":t=v0(2);break;case"W":t=v0(1,!0);break;case"d":t=ot(2,1);break;case"dd":t=ot(2,2);break;case"c":case"cc":t=ot(7,1);break;case"ccc":t=Pe(1,Oe.Abbreviated,Rt.Standalone);break;case"cccc":t=Pe(1,Oe.Wide,Rt.Standalone);break;case"ccccc":t=Pe(1,Oe.Narrow,Rt.Standalone);break;case"cccccc":t=Pe(1,Oe.Short,Rt.Standalone);break;case"E":case"EE":case"EEE":t=Pe(1,Oe.Abbreviated);break;case"EEEE":t=Pe(1,Oe.Wide);break;case"EEEEE":t=Pe(1,Oe.Narrow);break;case"EEEEEE":t=Pe(1,Oe.Short);break;case"a":case"aa":case"aaa":t=Pe(0,Oe.Abbreviated);break;case"aaaa":t=Pe(0,Oe.Wide);break;case"aaaaa":t=Pe(0,Oe.Narrow);break;case"b":case"bb":case"bbb":t=Pe(0,Oe.Abbreviated,Rt.Standalone,!0);break;case"bbbb":t=Pe(0,Oe.Wide,Rt.Standalone,!0);break;case"bbbbb":t=Pe(0,Oe.Narrow,Rt.Standalone,!0);break;case"B":case"BB":case"BBB":t=Pe(0,Oe.Abbreviated,Rt.Format,!0);break;case"BBBB":t=Pe(0,Oe.Wide,Rt.Format,!0);break;case"BBBBB":t=Pe(0,Oe.Narrow,Rt.Format,!0);break;case"h":t=ot(3,1,-12);break;case"hh":t=ot(3,2,-12);break;case"H":t=ot(3,1);break;case"HH":t=ot(3,2);break;case"m":t=ot(4,1);break;case"mm":t=ot(4,2);break;case"s":t=ot(5,1);break;case"ss":t=ot(5,2);break;case"S":t=ot(6,1);break;case"SS":t=ot(6,2);break;case"SSS":t=ot(6,3);break;case"Z":case"ZZ":case"ZZZ":t=Ad(0);break;case"ZZZZZ":t=Ad(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Ad(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=Ad(2);break;default:return null}return y0[n]=t,t}function v1(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function dR(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function fR(n,t,e){let i=n.getTimezoneOffset(),o=v1(t,i);return dR(n,-1*(o-i))}function pR(n){if(n1(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Nd(i,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(rR))return hR(r)}let t=new Date(n);if(!n1(t))throw new k(2311,!1);return t}function hR(n){let t=new Date(0),e=0,r=0,i=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-r,l=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,f),t}function n1(n){return n instanceof Date&&!isNaN(n.valueOf())}var mR=/^(\d+)?\.((\d+)(-(\d+))?)?$/,r1=22,Pd=".",dl="0",gR=";",vR=",",_0="#";var yR="%";function y1(n,t,e,r,i,o,s=!1){let a="",l=!1;if(!isFinite(n))a=Mn(e,bt.Infinity);else{let f=bR(n);s&&(f=_R(f));let p=t.minInt,m=t.minFrac,v=t.maxFrac;if(o){let G=o.match(mR);if(G===null)throw new k(2306,!1);let B=G[1],L=G[3],fe=G[5];B!=null&&(p=b0(B)),L!=null&&(m=b0(L)),fe!=null?v=b0(fe):L!=null&&m>v&&(v=m)}wR(f,m,v);let g=f.digits,w=f.integerLen,S=f.exponent,E=[];for(l=g.every(G=>!G);w<p;w++)g.unshift(0);for(;w<0;w++)g.unshift(0);w>0?E=g.splice(w,g.length):(E=g,g=[0]);let D=[];for(g.length>=t.lgSize&&D.unshift(g.splice(-t.lgSize,g.length).join(""));g.length>t.gSize;)D.unshift(g.splice(-t.gSize,g.length).join(""));g.length&&D.unshift(g.join("")),a=D.join(Mn(e,r)),E.length&&(a+=Mn(e,i)+E.join("")),S&&(a+=Mn(e,bt.Exponential)+"+"+S)}return n<0&&!l?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function _1(n,t,e){let r=E0(t,Ld.Percent),i=w1(r,Mn(t,bt.MinusSign));return y1(n,i,t,bt.Group,bt.Decimal,e,!0).replace(new RegExp(yR,"g"),Mn(t,bt.PercentSign))}function b1(n,t,e){let r=E0(t,Ld.Decimal),i=w1(r,Mn(t,bt.MinusSign));return y1(n,i,t,bt.Group,bt.Decimal,e)}function w1(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(gR),i=r[0],o=r[1],s=i.indexOf(Pd)!==-1?i.split(Pd):[i.substring(0,i.lastIndexOf(dl)+1),i.substring(i.lastIndexOf(dl)+1)],a=s[0],l=s[1]||"";e.posPre=a.substring(0,a.indexOf(_0));for(let p=0;p<l.length;p++){let m=l.charAt(p);m===dl?e.minFrac=e.maxFrac=p+1:m===_0?e.maxFrac=p+1:e.posSuf+=m}let f=a.split(vR);if(e.gSize=f[1]?f[1].length:0,e.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let p=i.length-e.posPre.length-e.posSuf.length,m=o.indexOf(_0);e.negPre=o.substring(0,m).replace(/'/g,""),e.negSuf=o.slice(m+p).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function _R(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function bR(n){let t=Math.abs(n)+"",e=0,r,i,o,s,a;for((i=t.indexOf(Pd))>-1&&(t=t.replace(Pd,"")),(o=t.search(/e/i))>0?(i<0&&(i=o),i+=+t.slice(o+1),t=t.substring(0,o)):i<0&&(i=t.length),o=0;t.charAt(o)===dl;o++);if(o===(a=t.length))r=[0],i=1;else{for(a--;t.charAt(a)===dl;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(t.charAt(o))}return i>r1&&(r=r.splice(0,r1-1),e=i-1,i=1),{digits:r,exponent:e,integerLen:i}}function wR(n,t,e){if(t>e)throw new k(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(t,i),e),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let m=s;m<r.length;m++)r[m]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let m=1;m<s;m++)r[m]=0}if(a>=5)if(s-1<0){for(let m=0;m>s;m--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,f=t+n.integerLen,p=r.reduceRight(function(m,v,g,w){return v=v+m,w[g]=v<10?v:v-10,l&&(w[g]===0&&g>=f?w.pop():l=!1),v>=10?1:0},0);p&&(r.unshift(p),n.integerLen++)}function b0(n){let t=parseInt(n);if(isNaN(t))throw new k(2305,!1);return t}var w0=/\s+/,i1=[],pl=(()=>{class n{_ngEl;_renderer;initialClasses=i1;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(w0):i1}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(w0):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(w0).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(C(yt),C(tn))};static \u0275dir=ye({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var kd=class{$implicit;ngForOf;index;count;constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ye=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new kd(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),o1(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);o1(o,i)})}static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(C(zr),C(vi),C(f0))};static \u0275dir=ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function o1(n,t){n.context.$implicit=t.item}var Ne=(()=>{class n{_viewContainer;_context=new Fd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,r){this._viewContainer=e,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){s1(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){s1(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(C(zr),C(vi))};static \u0275dir=ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Fd=class{$implicit=null;ngIf=null};function s1(n,t){if(n&&!n.createEmbeddedView)throw new k(2020,!1)}var C0=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,r,i){this._ngEl=e,this._differs=r,this._renderer=i}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){let[i,o]=e.split("."),s=i.indexOf("-")===-1?void 0:Wn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(C(yt),C(p0),C(tn))};static \u0275dir=ye({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function jd(n,t){return new k(2100,!1)}var ER="mediumDate",E1=new U(""),C1=new U(""),ut=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,r,i){this.locale=e,this.defaultTimezone=r,this.defaultOptions=i}transform(e,r,i,o){if(e==null||e===""||e!==e)return null;try{let s=r??this.defaultOptions?.dateFormat??ER,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return m1(e,s,o||this.locale,a)}catch(s){throw jd(n,s.message)}}static \u0275fac=function(r){return new(r||n)(C(co,16),C(E1,24),C(C1,24))};static \u0275pipe=ys({name:"date",type:n,pure:!0})}return n})();var qt=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,r,i){if(!S1(e))return null;i||=this._locale;try{let o=D1(e);return b1(o,i,r)}catch(o){throw jd(n,o.message)}}static \u0275fac=function(r){return new(r||n)(C(co,16))};static \u0275pipe=ys({name:"number",type:n,pure:!0})}return n})(),hl=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,r,i){if(!S1(e))return null;i||=this._locale;try{let o=D1(e);return _1(o,i,r)}catch(o){throw jd(n,o.message)}}static \u0275fac=function(r){return new(r||n)(C(co,16))};static \u0275pipe=ys({name:"percent",type:n,pure:!0})}return n})();function S1(n){return!(n==null||n===""||n!==n)}function D1(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new k(2309,!1);return n}var S0=(()=>{class n{transform(e,r,i){if(e==null)return null;if(!(typeof e=="string"||Array.isArray(e)))throw jd(n,e);return e.slice(r,i)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=ys({name:"slice",type:n,pure:!1})}return n})();var _e=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=In({type:n});static \u0275inj=fn({})}return n})();function ml(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,o]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var fo=class{};var x1="browser";var I1=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:()=>new D0(I(ze),window)})}return n})(),D0=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,e){this.window.scrollTo(Z(A({},e),{left:t[0],top:t[1]}))}scrollToAnchor(t,e){let r=CR(this.document,t);r&&(this.scrollToElement(r,e),r.focus())}setHistoryScrollRestoration(t){try{this.window.history.scrollRestoration=t}catch{console.warn(kr(2400,!1))}}scrollToElement(t,e){let r=t.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Z(A({},e),{left:i-s[0],top:o-s[1]}))}};function CR(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}var gl=class{_doc;constructor(t){this._doc=t}manager},Vd=(()=>{class n extends gl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,o){return e.addEventListener(r,i,o),()=>this.removeEventListener(e,r,i,o)}removeEventListener(e,r,i,o){return e.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(V(ze))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),Bd=new U(""),A0=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(s=>{s.manager=this});let i=e.filter(s=>!(s instanceof Vd));this._plugins=i.slice().reverse();let o=e.find(s=>s instanceof Vd);o&&this._plugins.push(o)}addEventListener(e,r,i,o){return this._findPluginFor(r).addEventListener(e,r,i,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new k(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(V(Bd),V(Ge))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),x0="ng-app-id";function T1(n){for(let t of n)t.remove()}function M1(n,t){let e=t.createElement("style");return e.textContent=n,e}function SR(n,t,e,r){let i=n.head?.querySelectorAll(`style[${x0}="${t}"],link[${x0}="${t}"]`);if(i)for(let o of i)o.removeAttribute(x0),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function T0(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var O0=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,SR(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,M1);r?.forEach(i=>this.addUsage(i,this.external,T0))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let o=r.get(e);o?o.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(T1(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])T1(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,M1(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,T0(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(V(ze),V(nd),V(id,8),V(ms))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),I0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},R0=/%COMP%/g;var O1="%COMP%",DR=`_nghost-${O1}`,xR=`_ngcontent-${O1}`,IR=!0,TR=new U("",{providedIn:"root",factory:()=>IR});function MR(n){return xR.replace(R0,n)}function AR(n){return DR.replace(R0,n)}function R1(n,t){return t.map(e=>e.replace(R0,n))}var N0=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,o,s,a,l,f=null,p=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=f,this.tracingService=p,this.platformIsServer=!1,this.defaultRenderer=new vl(e,s,l,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(e,r);return i instanceof Ud?i.applyToHost(e):i instanceof yl&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer,v=this.tracingService;switch(r.encapsulation){case Br.Emulated:o=new Ud(l,f,r,this.appId,p,s,a,m,v);break;case Br.ShadowDom:return new M0(l,f,e,r,s,a,this.nonce,m,v);default:o=new yl(l,f,r,p,s,a,m,v);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(V(A0),V(O0),V(nd),V(TR),V(ze),V(ms),V(Ge),V(id),V(oo,8))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),vl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(I0[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(A1(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(A1(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new k(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let o=I0[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=I0[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(Wn.DashCase|Wn.Important)?t.style.setProperty(e,r,i&Wn.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Wn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=Tn().getGlobalEventTarget(this.doc,t),!t))throw new k(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function A1(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var M0=class extends vl{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,i,o,s,a,l,f){super(t,o,s,l,f),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=i.styles;p=R1(i.id,p);for(let v of p){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=v,this.shadowRoot.appendChild(g)}let m=i.getExternalStyles?.();if(m)for(let v of m){let g=T0(v,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yl=class extends vl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,o,s,a,l,f){super(t,o,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let p=r.styles;this.styles=f?R1(f,p):p,this.styleUrls=r.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&fs.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ud=class extends yl{contentAttr;hostAttr;constructor(t,e,r,i,o,s,a,l,f){let p=i+"-"+r.id;super(t,e,r,o,s,a,l,f,p),this.contentAttr=MR(p),this.hostAttr=AR(p)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}};var zd=class n extends sl{supportsDOMEvents=!0;static makeCurrent(){h0(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=OR();return e==null?null:RR(e)}resetBaseElement(){_l=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ml(document.cookie,t)}},_l=null;function OR(){return _l=_l||document.head.querySelector("base"),_l?_l.getAttribute("href"):null}function RR(n){return new URL(n,document.baseURI).pathname}var NR=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),N1=["alt","control","meta","shift"],PR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kR={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},P1=(()=>{class n extends gl{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Tn().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),N1.forEach(f=>{let p=r.indexOf(f);p>-1&&(r.splice(p,1),s+=f+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let i=PR[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),N1.forEach(s=>{if(s!==i){let a=kR[s];a(e)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(V(ze))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();function P0(n,t,e){let r=A({rootComponent:n,platformRef:e?.platformRef},FR(t));return ZE(r)}function FR(n){return{appProviders:[...BR,...n?.providers??[]],platformProviders:UR}}function LR(){zd.makeCurrent()}function jR(){return new Vn}function VR(){return cg(document),document}var UR=[{provide:ms,useValue:x1},{provide:rd,useValue:LR,multi:!0},{provide:ze,useFactory:VR}];var BR=[{provide:Ia,useValue:"root"},{provide:Vn,useFactory:jR},{provide:Bd,useClass:Vd,multi:!0,deps:[ze]},{provide:Bd,useClass:P1,multi:!0,deps:[ze]},N0,O0,A0,{provide:to,useExisting:N0},{provide:fo,useClass:NR},[]];var Ds=class{},bl=class{},pr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),o=e.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let i=(t.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Hd=class{encodeKey(t){return k1(t)}encodeValue(t){return k1(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function zR(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var $R=/%(\d[a-f0-9])/gi,HR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function k1(n){return encodeURIComponent(n).replace($R,(t,e)=>HR[e]??t)}function $d(n){return`${n}`}var Kr=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Hd,t.fromString){if(t.fromObject)throw new k(2805,!1);this.map=zR(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],i=Array.isArray(r)?r.map($d):[$d(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push($d(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf($d(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Gd=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function GR(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function F1(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function L1(n){return typeof Blob<"u"&&n instanceof Blob}function j1(n){return typeof FormData<"u"&&n instanceof FormData}function WR(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var V1="Content-Type",U1="Accept",B1="X-Request-URL",z1="text/plain",$1="application/json",qR=`${$1}, ${z1}, */*`,Cs=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,e,r,i){this.url=e,this.method=t.toUpperCase();let o;if(GR(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new k(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new pr,this.context??=new Gd,!this.params)this.params=new Kr,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||F1(this.body)||L1(this.body)||j1(this.body)||WR(this.body)?this.body:this.body instanceof Kr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||j1(this.body)?null:L1(this.body)?this.body.type||null:F1(this.body)?null:typeof this.body=="string"?z1:this.body instanceof Kr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?$1:null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.keepalive??this.keepalive,s=t.priority||this.priority,a=t.cache||this.cache,l=t.mode||this.mode,f=t.redirect||this.redirect,p=t.credentials||this.credentials,m=t.referrer||this.referrer,v=t.integrity||this.integrity,g=t.transferCache??this.transferCache,w=t.timeout??this.timeout,S=t.body!==void 0?t.body:this.body,E=t.withCredentials??this.withCredentials,D=t.reportProgress??this.reportProgress,G=t.headers||this.headers,B=t.params||this.params,L=t.context??this.context;return t.setHeaders!==void 0&&(G=Object.keys(t.setHeaders).reduce((fe,ht)=>fe.set(ht,t.setHeaders[ht]),G)),t.setParams&&(B=Object.keys(t.setParams).reduce((fe,ht)=>fe.set(ht,t.setParams[ht]),B)),new n(e,r,S,{params:B,headers:G,context:L,reportProgress:D,responseType:i,withCredentials:E,transferCache:g,keepalive:o,cache:a,priority:s,timeout:w,mode:l,redirect:f,credentials:p,referrer:m,integrity:v})}},po=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(po||{}),xs=class{headers;status;statusText;url;ok;type;redirected;constructor(t,e=200,r="OK"){this.headers=t.headers||new pr,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.redirected=t.redirected,this.ok=this.status>=200&&this.status<300}},Wd=class n extends xs{constructor(t={}){super(t)}type=po.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},wl=class n extends xs{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=po.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected})}},Ss=class extends xs{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},YR=200,KR=204;function k0(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var hr=(()=>{class n{handler;constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof Cs)o=e;else{let l;i.headers instanceof pr?l=i.headers:l=new pr(i.headers);let f;i.params&&(i.params instanceof Kr?f=i.params:f=new Kr({fromObject:i.params})),o=new Cs(e,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:f,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let s=$(o).pipe(rr(l=>this.handler.handle(l)));if(e instanceof Cs||i.observe==="events")return s;let a=s.pipe(lt(l=>l instanceof wl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ae(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new k(2806,!1);return l.body}));case"blob":return a.pipe(ae(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new k(2807,!1);return l.body}));case"text":return a.pipe(ae(l=>{if(l.body!==null&&typeof l.body!="string")throw new k(2808,!1);return l.body}));case"json":default:return a.pipe(ae(l=>l.body))}case"response":return a;default:throw new k(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new Kr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,k0(i,r))}post(e,r,i={}){return this.request("POST",e,k0(i,r))}put(e,r,i={}){return this.request("PUT",e,k0(i,r))}static \u0275fac=function(r){return new(r||n)(V(Ds))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();var ZR=new U("");function QR(n,t){return t(n)}function JR(n,t,e){return(r,i)=>vt(e,()=>t(r,o=>n(o,i)))}var H1=new U(""),G1=new U(""),W1=new U("",{providedIn:"root",factory:()=>!0});var qd=(()=>{class n extends Ds{backend;injector;chain=null;pendingTasks=I(Du);contributeToStability=I(W1);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(H1),...this.injector.get(G1,[])]));this.chain=r.reduceRight((i,o)=>JR(i,o,this.injector),QR)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(Ui(r))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(V(bl),V(Je))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();var XR=/^\)\]\}',?\n/,eN=RegExp(`^${B1}:`,"m");function tN(n){return"responseURL"in n&&n.responseURL?n.responseURL:eN.test(n.getAllResponseHeaders())?n.getResponseHeader(B1):null}var F0=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new k(-2800,!1);let r=this.xhrFactory;return $(null).pipe(Ve(()=>new he(o=>{let s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((E,D)=>s.setRequestHeader(E,D.join(","))),e.headers.has(U1)||s.setRequestHeader(U1,qR),!e.headers.has(V1)){let E=e.detectContentTypeHeader();E!==null&&s.setRequestHeader(V1,E)}if(e.timeout&&(s.timeout=e.timeout),e.responseType){let E=e.responseType.toLowerCase();s.responseType=E!=="json"?E:"text"}let a=e.serializeBody(),l=null,f=()=>{if(l!==null)return l;let E=s.statusText||"OK",D=new pr(s.getAllResponseHeaders()),G=tN(s)||e.url;return l=new Wd({headers:D,status:s.status,statusText:E,url:G}),l},p=()=>{let{headers:E,status:D,statusText:G,url:B}=f(),L=null;D!==KR&&(L=typeof s.response>"u"?s.responseText:s.response),D===0&&(D=L?YR:0);let fe=D>=200&&D<300;if(e.responseType==="json"&&typeof L=="string"){let ht=L;L=L.replace(XR,"");try{L=L!==""?JSON.parse(L):null}catch(Te){L=ht,fe&&(fe=!1,L={error:Te,text:L})}}fe?(o.next(new wl({body:L,headers:E,status:D,statusText:G,url:B||void 0})),o.complete()):o.error(new Ss({error:L,headers:E,status:D,statusText:G,url:B||void 0}))},m=E=>{let{url:D}=f(),G=new Ss({error:E,status:s.status||0,statusText:s.statusText||"Unknown Error",url:D||void 0});o.error(G)},v=m;e.timeout&&(v=E=>{let{url:D}=f(),G=new Ss({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:D||void 0});o.error(G)});let g=!1,w=E=>{g||(o.next(f()),g=!0);let D={type:po.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(D.total=E.total),e.responseType==="text"&&s.responseText&&(D.partialText=s.responseText),o.next(D)},S=E=>{let D={type:po.UploadProgress,loaded:E.loaded};E.lengthComputable&&(D.total=E.total),o.next(D)};return s.addEventListener("load",p),s.addEventListener("error",m),s.addEventListener("timeout",v),s.addEventListener("abort",m),e.reportProgress&&(s.addEventListener("progress",w),a!==null&&s.upload&&s.upload.addEventListener("progress",S)),s.send(a),o.next({type:po.Sent}),()=>{s.removeEventListener("error",m),s.removeEventListener("abort",m),s.removeEventListener("load",p),s.removeEventListener("timeout",v),e.reportProgress&&(s.removeEventListener("progress",w),a!==null&&s.upload&&s.upload.removeEventListener("progress",S)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(V(fo))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),q1=new U(""),nN="XSRF-TOKEN",rN=new U("",{providedIn:"root",factory:()=>nN}),iN="X-XSRF-TOKEN",oN=new U("",{providedIn:"root",factory:()=>iN}),El=class{},sN=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r){this.doc=e,this.cookieName=r}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ml(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||n)(V(ze),V(rN))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();function aN(n,t){let e=n.url.toLowerCase();if(!I(q1)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let r=I(El).getToken(),i=I(oN);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}function L0(...n){let t=[hr,F0,qd,{provide:Ds,useExisting:qd},{provide:bl,useFactory:()=>I(ZR,{optional:!0})??I(F0)},{provide:H1,useValue:aN,multi:!0},{provide:q1,useValue:!0},{provide:El,useClass:sN}];for(let e of n)t.push(...e.\u0275providers);return or(t)}var Y1=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(V(ze))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ce="primary",kl=Symbol("RouteTitle"),z0=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function go(n){return new z0(n)}function nC(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function cN(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!mr(n[e],t[e]))return!1;return!0}function mr(n,t){let e=n?$0(n):void 0,r=t?$0(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!rC(n[i],t[i]))return!1;return!0}function $0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function rC(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}else return n===t}function iC(n){return n.length>0?n[n.length-1]:null}function Zr(n){return lh(n)?n:yi(n)?Q(Promise.resolve(n)):$(n)}var uN={exact:sC,subset:aC},oC={exact:dN,subset:fN,ignored:()=>!0};function K1(n,t,e){return uN[e.paths](n.root,t.root,e.matrixParams)&&oC[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function dN(n,t){return mr(n,t)}function sC(n,t,e){if(!ho(n.segments,t.segments)||!Qd(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!sC(n.children[r],t.children[r],e))return!1;return!0}function fN(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>rC(n[e],t[e]))}function aC(n,t,e){return lC(n,t,t.segments,e)}function lC(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!ho(i,e)||t.hasChildren()||!Qd(i,e,r))}else if(n.segments.length===e.length){if(!ho(n.segments,e)||!Qd(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!aC(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!ho(n.segments,i)||!Qd(n.segments,i,r)||!n.children[ce]?!1:lC(n.children[ce],t,o,r)}}function Qd(n,t,e){return t.every((r,i)=>oC[e](n[i].parameters,r.parameters))}var vr=class{root;queryParams;fragment;_queryParamMap;constructor(t=new we([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=go(this.queryParams),this._queryParamMap}toString(){return mN.serialize(this)}},we=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jd(this)}},Ei=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=go(this.parameters),this._parameterMap}toString(){return uC(this)}};function pN(n,t){return ho(n,t)&&n.every((e,r)=>mr(e.parameters,t[r].parameters))}function ho(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function hN(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===ce&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ce&&(e=e.concat(t(i,r)))}),e}var vo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>new Ci,providedIn:"root"})}return n})(),Ci=class{parse(t){let e=new G0(t);return new vr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Cl(t.root,!0)}`,r=yN(t.queryParams),i=typeof t.fragment=="string"?`#${gN(t.fragment)}`:"";return`${e}${r}${i}`}},mN=new Ci;function Jd(n){return n.segments.map(t=>uC(t)).join("/")}function Cl(n,t){if(!n.hasChildren())return Jd(n);if(t){let e=n.children[ce]?Cl(n.children[ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ce&&r.push(`${i}:${Cl(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=hN(n,(r,i)=>i===ce?[Cl(n.children[ce],!1)]:[`${i}:${Cl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${Jd(n)}/${e[0]}`:`${Jd(n)}/(${e.join("//")})`}}function cC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kd(n){return cC(n).replace(/%3B/gi,";")}function gN(n){return encodeURI(n)}function H0(n){return cC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xd(n){return decodeURIComponent(n)}function Z1(n){return Xd(n.replace(/\+/g,"%20"))}function uC(n){return`${H0(n.path)}${vN(n.parameters)}`}function vN(n){return Object.entries(n).map(([t,e])=>`;${H0(t)}=${H0(e)}`).join("")}function yN(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${Kd(e)}=${Kd(i)}`).join("&"):`${Kd(e)}=${Kd(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var _N=/^[^\/()?;#]+/;function j0(n){let t=n.match(_N);return t?t[0]:""}var bN=/^[^\/()?;=#]+/;function wN(n){let t=n.match(bN);return t?t[0]:""}var EN=/^[^=?&#]+/;function CN(n){let t=n.match(EN);return t?t[0]:""}var SN=/^[^&#]+/;function DN(n){let t=n.match(SN);return t?t[0]:""}var G0=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[ce]=new we(t,e)),r}parseSegment(){let t=j0(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new k(4009,!1);return this.capture(t),new Ei(Xd(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=wN(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=j0(this.remaining);i&&(r=i,this.capture(r))}t[Xd(e)]=Xd(r)}parseQueryParam(t){let e=CN(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=DN(this.remaining);s&&(r=s,this.capture(r))}let i=Z1(e),o=Z1(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=j0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new k(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=ce);let s=this.parseChildren();e[o]=Object.keys(s).length===1&&s[ce]?s[ce]:new we([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new k(4011,!1)}};function dC(n){return n.segments.length>0?new we([],{[ce]:n}):n}function fC(n){let t={};for(let[r,i]of Object.entries(n.children)){let o=fC(i);if(r===ce&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let e=new we(n.segments,t);return xN(e)}function xN(n){if(n.numberOfChildren===1&&n.children[ce]){let t=n.children[ce];return new we(n.segments.concat(t.segments),t.children)}return n}function Si(n){return n instanceof vr}function pC(n,t,e=null,r=null){let i=hC(n);return mC(i,t,e,r)}function hC(n){let t;function e(o){let s={};for(let l of o.children){let f=e(l);s[l.outlet]=f}let a=new we(o.url,s);return o===n&&(t=a),a}let r=e(n.root),i=dC(r);return t??i}function mC(n,t,e,r){let i=n;for(;i.parent;)i=i.parent;if(t.length===0)return V0(i,i,i,e,r);let o=IN(t);if(o.toRoot())return V0(i,i,new we([],{}),e,r);let s=TN(o,i,n),a=s.processChildren?Dl(s.segmentGroup,s.index,o.commands):vC(s.segmentGroup,s.index,o.commands);return V0(i,s.segmentGroup,a,e,r)}function ef(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Il(n){return typeof n=="object"&&n!=null&&n.outlets}function V0(n,t,e,r,i){let o={};r&&Object.entries(r).forEach(([l,f])=>{o[l]=Array.isArray(f)?f.map(p=>`${p}`):`${f}`});let s;n===t?s=e:s=gC(n,t,e);let a=dC(fC(s));return new vr(a,o,i)}function gC(n,t,e){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===t?r[i]=e:r[i]=gC(o,t,e)}),new we(n.segments,r)}var tf=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&ef(r[0]))throw new k(4003,!1);let i=r.find(Il);if(i&&i!==iC(r))throw new k(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function IN(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new tf(!0,0,n);let t=0,e=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,f])=>{a[l]=typeof f=="string"?f.split("/"):f}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new tf(e,t,r)}var Ms=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function TN(n,t,e){if(n.isAbsolute)return new Ms(t,!0,0);if(!e)return new Ms(t,!1,NaN);if(e.parent===null)return new Ms(e,!0,0);let r=ef(n.commands[0])?0:1,i=e.segments.length-1+r;return MN(e,i,n.numberOfDoubleDots)}function MN(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new k(4005,!1);i=r.segments.length}return new Ms(r,!1,i-o)}function AN(n){return Il(n[0])?n[0].outlets:{[ce]:n}}function vC(n,t,e){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return Dl(n,t,e);let r=ON(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new we(n.segments.slice(0,r.pathIndex),{});return o.children[ce]=new we(n.segments.slice(r.pathIndex),n.children),Dl(o,0,i)}else return r.match&&i.length===0?new we(n.segments,{}):r.match&&!n.hasChildren()?W0(n,t,e):r.match?Dl(n,0,i):W0(n,t,e)}function Dl(n,t,e){if(e.length===0)return new we(n.segments,{});{let r=AN(e),i={};if(Object.keys(r).some(o=>o!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let o=Dl(n.children[ce],t,e);return new we(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=vC(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new we(n.segments,i)}}function ON(n,t,e){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;let s=n.segments[i],a=e[r];if(Il(a))break;let l=`${a}`,f=r<e.length-1?e[r+1]:null;if(i>0&&l===void 0)break;if(l&&f&&typeof f=="object"&&f.outlets===void 0){if(!J1(l,f,s))return o;r+=2}else{if(!J1(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function W0(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let o=e[i];if(Il(o)){let l=RN(o.outlets);return new we(r,l)}if(i===0&&ef(e[0])){let l=n.segments[t];r.push(new Ei(l.path,Q1(e[0]))),i++;continue}let s=Il(o)?o.outlets[ce]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&ef(a)?(r.push(new Ei(s,Q1(a))),i+=2):(r.push(new Ei(s,{})),i++)}return new we(r,{})}function RN(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=W0(new we([],{}),0,r))}),t}function Q1(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function J1(n,t,e){return n==e.path&&mr(t,e.parameters)}var As="imperative",dt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(dt||{}),yn=class{id;url;constructor(t,e){this.id=t,this.url=e}},Di=class extends yn{type=dt.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kt=class extends yn{urlAfterRedirects;type=dt.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Yt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Yt||{}),Rs=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Rs||{}),gr=class extends yn{reason;code;type=dt.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yr=class extends yn{reason;code;type=dt.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},Ns=class extends yn{error;target;type=dt.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Tl=class extends yn{urlAfterRedirects;state;type=dt.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nf=class extends yn{urlAfterRedirects;state;type=dt.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rf=class extends yn{urlAfterRedirects;state;shouldActivate;type=dt.GuardsCheckEnd;constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},of=class extends yn{urlAfterRedirects;state;type=dt.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sf=class extends yn{urlAfterRedirects;state;type=dt.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},af=class{route;type=dt.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},lf=class{route;type=dt.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},cf=class{snapshot;type=dt.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uf=class{snapshot;type=dt.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},df=class{snapshot;type=dt.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ff=class{snapshot;type=dt.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ps=class{routerEvent;position;anchor;type=dt.Scroll;constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Ml=class{},ks=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function NN(n){return!(n instanceof Ml)&&!(n instanceof ks)}function PN(n,t){return n.providers&&!n._injector&&(n._injector=vs(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Zn(n){return n.outlet||ce}function kN(n,t){let e=n.filter(r=>Zn(r)===t);return e.push(...n.filter(r=>Zn(r)!==t)),e}function js(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var pf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return js(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new yo(this.rootInjector)}},yo=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new pf(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(V(Je))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hf=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=q0(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=q0(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Y0(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Y0(t,this._root).map(e=>e.value)}};function q0(n,t){if(n===t.value)return t;for(let e of t.children){let r=q0(n,e);if(r)return r}return null}function Y0(n,t){if(n===t.value)return[t];for(let e of t.children){let r=Y0(n,e);if(r.length)return r.unshift(t),r}return[]}var vn=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Ts(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Al=class extends hf{snapshot;constructor(t,e){super(t),this.snapshot=e,nv(this,t)}toString(){return this.snapshot.toString()}};function yC(n){let t=FN(n),e=new at([new Ei("",{})]),r=new at({}),i=new at({}),o=new at({}),s=new at(""),a=new on(e,r,o,s,i,ce,n,t.root);return a.snapshot=t.root,new Al(new vn(a,[]),t)}function FN(n){let t={},e={},r={},o=new mo([],t,r,"",e,ce,n,null,{});return new Ol("",new vn(o,[]))}var on=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ae(f=>f[kl]))??$(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(t=>go(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(t=>go(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mf(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:A(A({},t.params),n.params),data:A(A({},t.data),n.data),resolve:A(A(A(A({},n.data),t.data),i?.data),n._resolvedData)}:r={params:A({},n.params),data:A({},n.data),resolve:A(A({},n.data),n._resolvedData??{})},i&&bC(i)&&(r.resolve[kl]=i.title),r}var mo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[kl]}constructor(t,e,r,i,o,s,a,l,f){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=go(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=go(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Ol=class extends hf{url;constructor(t,e){super(e),this.url=t,nv(this,e)}toString(){return _C(this._root)}};function nv(n,t){t.value._routerState=n,t.children.forEach(e=>nv(n,e))}function _C(n){let t=n.children.length>0?` { ${n.children.map(_C).join(", ")} } `:"";return`${n.value}${t}`}function U0(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,mr(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),mr(t.params,e.params)||n.paramsSubject.next(e.params),cN(t.url,e.url)||n.urlSubject.next(e.url),mr(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function K0(n,t){let e=mr(n.params,t.params)&&pN(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||K0(n.parent,t.parent))}function bC(n){return typeof n.title=="string"||n.title===null}var wC=new U(""),Fl=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ce;activateEvents=new Le;deactivateEvents=new Le;attachEvents=new Le;detachEvents=new Le;routerOutletData=KE(void 0);parentContexts=I(yo);location=I(zr);changeDetector=I(qr);inputBinder=I(Ll,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new k(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new k(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new k(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new k(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Z0(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[mn]})}return n})(),Z0=class{route;childContexts;parent;outletData;constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===on?this.route:t===yo?this.childContexts:t===wC?this.outletData:this.parent.get(t,e)}},Ll=new U(""),rv=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,i=ba([r.queryParams,r.params,r.data]).pipe(Ve(([o,s,a],l)=>(a=A(A(A({},o),s),a),l===0?$(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let s=QE(r.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),iv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=me({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&O(0,"router-outlet")},dependencies:[Fl],encapsulation:2})}return n})();function ov(n){let t=n.children&&n.children.map(ov),e=t?Z(A({},n),{children:t}):A({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==ce&&(e.component=iv),e}function LN(n,t,e){let r=Rl(n,t._root,e?e._root:void 0);return new Al(r,t)}function Rl(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=jN(n,t,e);return new vn(r,i)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Rl(n,a)),s}}let r=VN(t.value),i=t.children.map(o=>Rl(n,o));return new vn(r,i)}}function jN(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Rl(n,r,i);return Rl(n,r)})}function VN(n){return new on(new at(n.url),new at(n.params),new at(n.queryParams),new at(n.fragment),new at(n.data),n.outlet,n.component,n)}var Fs=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},EC="ngNavigationCancelingError";function gf(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Si(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=CC(!1,Yt.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function CC(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[EC]=!0,e.cancellationCode=t,e}function UN(n){return SC(n)&&Si(n.url)}function SC(n){return!!n&&n[EC]}var BN=(n,t,e,r)=>ae(i=>(new Q0(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),Q0=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),U0(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=Ts(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Ts(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Ts(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=Ts(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ff(o.value.snapshot))}),t.children.length&&this.forwardEvent(new uf(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(U0(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),U0(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},vf=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Os=class{component;route;constructor(t,e){this.component=t,this.route=e}};function zN(n,t,e){let r=n._root,i=t?t._root:null;return Sl(r,i,e,[r.value])}function $N(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Vs(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!Th(n)?n:t.get(n):r}function Sl(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ts(t);return n.children.forEach(s=>{HN(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>xl(a,e.getContext(s),i)),i}function HN(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=GN(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new vf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Sl(n,t,a?a.children:null,r,i):Sl(n,t,e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Os(a.outlet.component,s))}else s&&xl(t,a,i),i.canActivateChecks.push(new vf(r)),o.component?Sl(n,null,a?a.children:null,r,i):Sl(n,null,e,r,i);return i}function GN(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!ho(n.url,t.url);case"pathParamsOrQueryParamsChange":return!ho(n.url,t.url)||!mr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!K0(n,t)||!mr(n.queryParams,t.queryParams);case"paramsChange":default:return!K0(n,t)}}function xl(n,t,e){let r=Ts(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?t?xl(s,t.children.getContext(o),e):xl(s,null,e):xl(s,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Os(t.outlet.component,i)):e.canDeactivateChecks.push(new Os(null,i)):e.canDeactivateChecks.push(new Os(null,i))}function jl(n){return typeof n=="function"}function WN(n){return typeof n=="boolean"}function qN(n){return n&&jl(n.canLoad)}function YN(n){return n&&jl(n.canActivate)}function KN(n){return n&&jl(n.canActivateChild)}function ZN(n){return n&&jl(n.canDeactivate)}function QN(n){return n&&jl(n.canMatch)}function DC(n){return n instanceof dn||n?.name==="EmptyError"}var Zd=Symbol("INITIAL_VALUE");function Ls(){return Ve(n=>ba(n.map(t=>t.pipe(Et(1),mh(Zd)))).pipe(ae(t=>{for(let e of t)if(e!==!0){if(e===Zd)return Zd;if(e===!1||JN(e))return e}return!0}),lt(t=>t!==Zd),Et(1)))}function JN(n){return Si(n)||n instanceof Fs}function XN(n,t){return Qe(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?$(Z(A({},e),{guardsResult:!0})):eP(s,r,i,n).pipe(Qe(a=>a&&WN(a)?tP(r,o,n,t):$(a)),ae(a=>Z(A({},e),{guardsResult:a})))})}function eP(n,t,e,r){return Q(n).pipe(Qe(i=>sP(i.component,i.route,e,t,r)),Or(i=>i!==!0,!0))}function tP(n,t,e,r){return Q(t).pipe(rr(i=>Zo(rP(i.route.parent,r),nP(i.route,r),oP(n,i.path,e),iP(n,i.route,e))),Or(i=>i!==!0,!0))}function nP(n,t){return n!==null&&t&&t(new df(n)),$(!0)}function rP(n,t){return n!==null&&t&&t(new cf(n)),$(!0)}function iP(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return $(!0);let i=r.map(o=>wa(()=>{let s=js(t)??e,a=Vs(o,s),l=YN(a)?a.canActivate(t,n):vt(s,()=>a(t,n));return Zr(l).pipe(Or())}));return $(i).pipe(Ls())}function oP(n,t,e){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>$N(s)).filter(s=>s!==null).map(s=>wa(()=>{let a=s.guards.map(l=>{let f=js(s.node)??e,p=Vs(l,f),m=KN(p)?p.canActivateChild(r,n):vt(f,()=>p(r,n));return Zr(m).pipe(Or())});return $(a).pipe(Ls())}));return $(o).pipe(Ls())}function sP(n,t,e,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return $(!0);let s=o.map(a=>{let l=js(t)??i,f=Vs(a,l),p=ZN(f)?f.canDeactivate(n,t,e,r):vt(l,()=>f(n,t,e,r));return Zr(p).pipe(Or())});return $(s).pipe(Ls())}function aP(n,t,e,r){let i=t.canLoad;if(i===void 0||i.length===0)return $(!0);let o=i.map(s=>{let a=Vs(s,n),l=qN(a)?a.canLoad(t,e):vt(n,()=>a(t,e));return Zr(l)});return $(o).pipe(Ls(),xC(r))}function xC(n){return eh(mt(t=>{if(typeof t!="boolean")throw gf(n,t)}),ae(t=>t===!0))}function lP(n,t,e,r){let i=t.canMatch;if(!i||i.length===0)return $(!0);let o=i.map(s=>{let a=Vs(s,n),l=QN(a)?a.canMatch(t,e):vt(n,()=>a(t,e));return Zr(l)});return $(o).pipe(Ls(),xC(r))}var Nl=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Pl=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Is(n){return Ko(new Nl(n))}function cP(n){return Ko(new k(4e3,!1))}function uP(n){return Ko(CC(!1,Yt.GuardRejected))}var J0=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return $(r);if(i.numberOfChildren>1||!i.children[ce])return cP(`${t.redirectTo}`);i=i.children[ce]}}applyRedirectCommands(t,e,r,i,o){return dP(e,i,o).pipe(ae(s=>{if(s instanceof vr)throw new Pl(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new Pl(a);return a}))}applyRedirectCreateUrlTree(t,e,r,i){let o=this.createSegmentGroup(t,e.root,r,i);return new vr(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,i){let o=this.createSegments(t,e.segments,r,i),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,r,i)}),new we(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new k(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}};function dP(n,t,e){if(typeof n=="string")return $(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,params:f,data:p,title:m}=t;return Zr(vt(e,()=>r({params:f,data:p,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,title:m})))}var X0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fP(n,t,e,r,i){let o=IC(n,t,e);return o.matched?(r=PN(t,r),lP(r,t,e,i).pipe(ae(s=>s===!0?o:A({},X0)))):$(o)}function IC(n,t,e){if(t.path==="**")return pP(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?A({},X0):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||nC)(e,n,t);if(!i)return A({},X0);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?A(A({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function pP(n){return{matched:!0,parameters:n.length>0?iC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function X1(n,t,e,r){return e.length>0&&gP(n,e,r)?{segmentGroup:new we(t,mP(r,new we(e,n.children))),slicedSegments:[]}:e.length===0&&vP(n,e,r)?{segmentGroup:new we(n.segments,hP(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new we(n.segments,n.children),slicedSegments:e}}function hP(n,t,e,r){let i={};for(let o of e)if(_f(n,t,o)&&!r[Zn(o)]){let s=new we([],{});i[Zn(o)]=s}return A(A({},r),i)}function mP(n,t){let e={};e[ce]=t;for(let r of n)if(r.path===""&&Zn(r)!==ce){let i=new we([],{});e[Zn(r)]=i}return e}function gP(n,t,e){return e.some(r=>_f(n,t,r)&&Zn(r)!==ce)}function vP(n,t,e){return e.some(r=>_f(n,t,r))}function _f(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function yP(n,t,e){return t.length===0&&!n.children[e]}var ev=class{};function _P(n,t,e,r,i,o,s="emptyOnly"){return new tv(n,t,e,r,i,s,o).recognize()}var bP=31,tv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new J0(this.urlSerializer,this.urlTree)}noMatchError(t){return new k(4002,`'${t.segmentGroup}'`)}recognize(){let t=X1(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ae(({children:e,rootSnapshot:r})=>{let i=new vn(r,e),o=new Ol("",i),s=pC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new mo([],Object.freeze({}),Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,ce,e).pipe(ae(r=>({children:r,rootSnapshot:e})),Ar(r=>{if(r instanceof Pl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Nl?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,o):this.processSegment(t,e,r,r.segments,i,!0,o).pipe(ae(s=>s instanceof vn?[s]:[]))}processChildren(t,e,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Q(o).pipe(rr(s=>{let a=r.children[s],l=kN(e,s);return this.processSegmentGroup(t,l,a,s,i)}),hh((s,a)=>(s.push(...a),s)),li(null),ph(),Qe(s=>{if(s===null)return Is(r);let a=TC(s);return wP(a),$(a)}))}processSegment(t,e,r,i,o,s,a){return Q(e).pipe(rr(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,r,i,o,s,a).pipe(Ar(f=>{if(f instanceof Nl)return $(null);throw f}))),Or(l=>!!l),Ar(l=>{if(DC(l))return yP(r,i,o)?$(new ev):Is(r);throw l}))}processSegmentAgainstRoute(t,e,r,i,o,s,a,l){return Zn(r)!==s&&(s===ce||!_f(i,o,r))?Is(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,o,s,l):Is(i)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s,a){let{matched:l,parameters:f,consumedSegments:p,positionalParamSegments:m,remainingSegments:v}=IC(e,i,o);if(!l)return Is(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>bP&&(this.allowRedirects=!1));let g=new mo(o,f,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,eC(i),Zn(i),i.component??i._loadedComponent??null,i,tC(i)),w=mf(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(w.params),g.data=Object.freeze(w.data),this.applyRedirects.applyRedirectCommands(p,i.redirectTo,m,g,t).pipe(Ve(E=>this.applyRedirects.lineralizeSegments(i,E)),Qe(E=>this.processSegment(t,r,e,E.concat(v),s,!1,a)))}matchSegmentAgainstRoute(t,e,r,i,o,s){let a=fP(e,r,i,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(Ve(l=>l.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Ve(({routes:f})=>{let p=r._loadedInjector??t,{parameters:m,consumedSegments:v,remainingSegments:g}=l,w=new mo(v,m,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,eC(r),Zn(r),r.component??r._loadedComponent??null,r,tC(r)),S=mf(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(S.params),w.data=Object.freeze(S.data);let{segmentGroup:E,slicedSegments:D}=X1(e,v,g,f);if(D.length===0&&E.hasChildren())return this.processChildren(p,f,E,w).pipe(ae(B=>new vn(w,B)));if(f.length===0&&D.length===0)return $(new vn(w,[]));let G=Zn(r)===o;return this.processSegment(p,f,E,D,G?ce:o,!0,w).pipe(ae(B=>new vn(w,B instanceof vn?[B]:[])))}))):Is(e)))}getChildConfig(t,e,r){return e.children?$({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?$({routes:e._loadedRoutes,injector:e._loadedInjector}):aP(t,e,r,this.urlSerializer).pipe(Qe(i=>i?this.configLoader.loadChildren(t,e).pipe(mt(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):uP(e))):$({routes:[],injector:t})}};function wP(n){n.sort((t,e)=>t.value.outlet===ce?-1:e.value.outlet===ce?1:t.value.outlet.localeCompare(e.value.outlet))}function EP(n){let t=n.value.routeConfig;return t&&t.path===""}function TC(n){let t=[],e=new Set;for(let r of n){if(!EP(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=TC(r.children);t.push(new vn(r.value,i))}return t.filter(r=>!e.has(r))}function eC(n){return n.data||{}}function tC(n){return n.resolve||{}}function CP(n,t,e,r,i,o){return Qe(s=>_P(n,t,e,r,s.extractedUrl,i,o).pipe(ae(({state:a,tree:l})=>Z(A({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function SP(n,t){return Qe(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return $(e);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let f of MC(l))s.add(f);let a=0;return Q(s).pipe(rr(l=>o.has(l)?DP(l,r,n,t):(l.data=mf(l,l.parent,n).resolve,$(void 0))),mt(()=>a++),Qo(1),Qe(l=>a===s.size?$(e):Ot))})}function MC(n){let t=n.children.map(e=>MC(e)).flat();return[n,...t]}function DP(n,t,e,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!bC(i)&&(o[kl]=i.title),wa(()=>(n.data=mf(n,n.parent,e).resolve,xP(o,n,t,r).pipe(ae(s=>(n._resolvedData=s,n.data=A(A({},n.data),s),null)))))}function xP(n,t,e,r){let i=$0(n);if(i.length===0)return $({});let o={};return Q(i).pipe(Qe(s=>IP(n[s],t,e,r).pipe(Or(),mt(a=>{if(a instanceof Fs)throw gf(new Ci,a);o[s]=a}))),Qo(1),ae(()=>o),Ar(s=>DC(s)?Ot:Ko(s)))}function IP(n,t,e,r){let i=js(t)??r,o=Vs(n,i),s=o.resolve?o.resolve(t,e):vt(i,()=>o(t,e));return Zr(s)}function B0(n){return Ve(t=>{let e=n(t);return e?Q(e).pipe(ae(()=>t)):$(t)})}var sv=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ce);return r}getResolvedTitleForRoute(e){return e.data[kl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>I(AC),providedIn:"root"})}return n})(),AC=(()=>{class n extends sv{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(V(Y1))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xi=new U("",{providedIn:"root",factory:()=>({})}),_o=new U(""),bf=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=I(e0);loadComponent(e,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return $(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Zr(vt(e,()=>r.loadComponent())).pipe(ae(RC),Ve(NC),mt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ui(()=>{this.componentLoaders.delete(r)})),o=new qo(i,()=>new Be).pipe(Wo());return this.componentLoaders.set(r,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=OC(r,this.compiler,e,this.onLoadEndListener).pipe(Ui(()=>{this.childrenLoaders.delete(r)})),s=new qo(o,()=>new Be).pipe(Wo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OC(n,t,e,r){return Zr(vt(e,()=>n.loadChildren())).pipe(ae(RC),Ve(NC),Qe(i=>i instanceof _d||Array.isArray(i)?$(i):Q(t.compileModuleAsync(i))),ae(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(e).injector,s=o.get(_o,[],{optional:!0,self:!0}).flat()),{routes:s.map(ov),injector:o}}))}function TP(n){return n&&typeof n=="object"&&"default"in n}function RC(n){return TP(n)?n.default:n}function NC(n){return $(n)}var wf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>I(MP),providedIn:"root"})}return n})(),MP=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),av=new U(""),lv=new U("");function PC(n,t,e){let r=n.get(lv),i=n.get(ze);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,s=new Promise(f=>{o=f}),a=i.startViewTransition(()=>(o(),AP(n)));a.ready.catch(f=>{});let{onViewTransitionCreated:l}=r;return l&&vt(n,()=>l({transition:a,from:t,to:e})),s}function AP(n){return new Promise(t=>{Ka({read:()=>setTimeout(t)},{injector:n})})}var cv=new U(""),Ef=(()=>{class n{currentNavigation=et(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Be;transitionAbortWithErrorSubject=new Be;configLoader=I(bf);environmentInjector=I(Je);destroyRef=I($n);urlSerializer=I(vo);rootContexts=I(yo);location=I(wi);inputBindingEnabled=I(Ll,{optional:!0})!==null;titleStrategy=I(sv);options=I(xi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=I(wf);createViewTransition=I(av,{optional:!0});navigationErrorHandler=I(cv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>$(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new af(i)),r=i=>this.events.next(new lf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;_t(()=>{this.transitions?.next(Z(A({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(e){return this.transitions=new at(null),this.transitions.pipe(lt(r=>r!==null),Ve(r=>{let i=!1;return $(r).pipe(Ve(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Yt.SupersededByNewNavigation),Ot;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Z(A({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new yr(o.id,this.urlSerializer.serialize(o.rawUrl),"",Rs.IgnoredSameUrlNavigation)),o.resolve(!1),Ot;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return $(o).pipe(Ve(l=>(this.events.next(new Di(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Ot:Promise.resolve(l))),CP(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),mt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(p=>(p.finalUrl=l.urlAfterRedirects,p));let f=new Tl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:f,source:p,restoredState:m,extras:v}=o,g=new Di(l,this.urlSerializer.serialize(f),p,m);this.events.next(g);let w=yC(this.rootComponentType).snapshot;return this.currentTransition=r=Z(A({},o),{targetSnapshot:w,urlAfterRedirects:f,extras:Z(A({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(S=>(S.finalUrl=f,S)),$(r)}else return this.events.next(new yr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Rs.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Ot}),mt(o=>{let s=new nf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ae(o=>(this.currentTransition=r=Z(A({},o),{guards:zN(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),XN(this.environmentInjector,o=>this.events.next(o)),mt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw gf(this.urlSerializer,o.guardsResult);let s=new rf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),lt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Yt.GuardRejected),!1)),B0(o=>{if(o.guards.canActivateChecks.length!==0)return $(o).pipe(mt(s=>{let a=new of(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ve(s=>{let a=!1;return $(s).pipe(SP(this.paramsInheritanceStrategy,this.environmentInjector),mt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Yt.NoDataFromResolver)}}))}),mt(s=>{let a=new sf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),B0(o=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let f=js(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(f,a.routeConfig).pipe(mt(p=>{a.component=p}),ae(()=>{})))}for(let f of a.children)l.push(...s(f));return l};return ba(s(o.targetSnapshot.root)).pipe(li(null),Et(1))}),B0(()=>this.afterPreactivation()),Ve(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Q(a).pipe(ae(()=>r)):$(r)}),ae(o=>{let s=LN(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Z(A({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),mt(()=>{this.events.next(new Ml)}),BN(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Et(1),jn(new he(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(lt(()=>!i&&!r.targetRouterState),mt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Yt.Aborted)}))),mt({next:o=>{i=!0,this.lastSuccessfulNavigation=_t(this.currentNavigation),this.events.next(new Kt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),jn(this.transitionAbortWithErrorSubject.pipe(mt(o=>{throw o}))),Ui(()=>{i||this.cancelNavigationTransition(r,"",Yt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ar(o=>{if(this.destroyed)return r.resolve(!1),Ot;if(i=!0,SC(o))this.events.next(new gr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),UN(o)?this.events.next(new ks(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ns(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=vt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Fs){let{message:l,cancellationCode:f}=gf(this.urlSerializer,a);this.events.next(new gr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,f)),this.events.next(new ks(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Ot}))}))}cancelNavigationTransition(e,r,i){let o=new gr(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=_t(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return e.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OP(n){return n!==As}var kC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>I(RP),providedIn:"root"})}return n})(),yf=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},RP=(()=>{class n extends yf{static \u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})();static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FC=(()=>{class n{urlSerializer=I(vo);options=I(xi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=I(wi);urlHandlingStrategy=I(wf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new vr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,s=i??o;return s instanceof vr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=yC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>I(NP),providedIn:"root"})}return n})(),NP=(()=>{class n extends FC{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Di?this.updateStateMemento():e instanceof yr?this.commitTransition(r):e instanceof Tl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof Ml?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof gr&&e.code!==Yt.SupersededByNewNavigation&&e.code!==Yt.Redirect?this.restoreHistory(r):e instanceof Ns?this.restoreHistory(r,!0):e instanceof Kt&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(e)||o){let a=this.browserPageId,l=A(A({},s),this.generateNgRouterState(i,a));this.location.replaceState(e,"",l)}else{let a=A(A({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})();static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Cf(n,t){n.events.pipe(lt(e=>e instanceof Kt||e instanceof gr||e instanceof Ns||e instanceof yr),ae(e=>e instanceof Kt||e instanceof yr?0:(e instanceof gr?e.code===Yt.Redirect||e.code===Yt.SupersededByNewNavigation:!1)?2:1),lt(e=>e!==2),Et(1)).subscribe(()=>{t()})}var PP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ie=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=I(Vg);stateManager=I(FC);options=I(xi,{optional:!0})||{};pendingTasks=I(ur);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=I(Ef);urlSerializer=I(vo);location=I(wi);urlHandlingStrategy=I(wf);injector=I(Je);_events=new Be;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=I(kC);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=I(_o,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!I(Ll,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new He;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=_t(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof gr&&r.code!==Yt.Redirect&&r.code!==Yt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Kt)this.navigated=!0;else if(r instanceof ks){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=A({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||OP(i.source)},s);this.scheduleNavigation(a,As,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}NN(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),As,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=A({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,o).catch(l=>{this.disposed||this.injector.get(Ht)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return _t(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(ov),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,f=l?this.currentUrlTree.fragment:s,p=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":p=A(A({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let v=i?i.snapshot:this.routerState.snapshot.root;m=hC(v)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),m=this.currentUrlTree.root}return mC(m,e,p,f??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Si(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,As,null,r)}navigate(e,r={skipLocationChange:!1}){return FP(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(kr(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=A({},PP):r===!1?i=A({},kP):i=r,Si(e))return K1(this.currentUrlTree,e,i);let o=this.parseUrl(e);return K1(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,f;s?(a=s.resolve,l=s.reject,f=s.promise):f=new Promise((m,v)=>{a=m,l=v});let p=this.pendingTasks.add();return Cf(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FP(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new k(4008,!1)}var Pt=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=et(null);get href(){return _t(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Be;applicationErrorHandler=I(Ht);options=I(xi,{optional:!0});constructor(e,r,i,o,s,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(I(new Cd("href"),{optional:!0}));let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,r=i=>i==="merge"||i==="preserve";e||=r(this.queryParamsHandling),e||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Kt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Si(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l)?.catch(f=>{this.applicationErrorHandler(f)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Si(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(C(Ie),C(on),Ya("tabindex"),C(tn),C(yt),C(gn))};static \u0275dir=ye({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&T("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&bs("href",i.reactiveHref(),hg)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",uo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",uo],replaceUrl:[2,"replaceUrl","replaceUrl",uo],routerLink:"routerLink"},features:[mn]})}return n})(),dv=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Le;constructor(e,r,i,o,s){this.router=e,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof Kt&&this.update()})}ngAfterContentInit(){$(this.links.changes,$(null)).pipe(ai()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Q(e).pipe(ai()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=LP(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?e.isActive(o,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||n)(C(Ie),C(yt),C(tn),C(qr),C(Pt,8))};static \u0275dir=ye({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Wg(o,Pt,5),r&2){let s;tl(s=nl())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[mn]})}return n})();function LP(n){return!!n.paths}var Vl=class{};var LC=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,i,o){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(lt(e=>e instanceof Kt),rr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=vs(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Q(i).pipe(ai())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(e,r):i=$(null);let o=i.pipe(Qe(s=>s===null?$(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(e,r);return Q([o,s]).pipe(ai())}else return o})}static \u0275fac=function(r){return new(r||n)(V(Ie),V(Je),V(Vl),V(bf))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jC=new U(""),jP=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=As;restoredId=0;store={};constructor(e,r,i,o,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Di?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Kt?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof yr&&e.code===Rs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{if(!(e instanceof Ps))return;let r={behavior:"instant"};e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position,r):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>_(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Ps(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Ng()};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();function fv(n,...t){return or([{provide:_o,multi:!0,useValue:n},[],{provide:on,useFactory:VC,deps:[Ie]},{provide:Xa,multi:!0,useFactory:UC},t.map(e=>e.\u0275providers)])}function VC(n){return n.routerState.root}function Ul(n,t){return{\u0275kind:n,\u0275providers:t}}function UC(){let n=I($t);return t=>{let e=n.get($r);if(t!==e.components[0])return;let r=n.get(Ie),i=n.get(BC);n.get(pv)===1&&r.initialNavigation(),n.get(HC,null,{optional:!0})?.setUpPreloading(),n.get(jC,null,{optional:!0})?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var BC=new U("",{factory:()=>new Be}),pv=new U("",{providedIn:"root",factory:()=>1});function zC(){let n=[{provide:ug,useValue:!0},{provide:pv,useValue:0},bd(()=>{let t=I($t);return t.get(m0,Promise.resolve()).then(()=>new Promise(r=>{let i=t.get(Ie),o=t.get(BC);Cf(i,()=>{r(!0)}),t.get(Ef).afterPreactivation=()=>(r(!0),o.closed?$(void 0):o),i.initialNavigation()}))})];return Ul(2,n)}function $C(){let n=[bd(()=>{I(Ie).setUpLocationChangeListener()}),{provide:pv,useValue:2}];return Ul(3,n)}var HC=new U("");function GC(n){return Ul(0,[{provide:HC,useExisting:LC},{provide:Vl,useExisting:n}])}function WC(){return Ul(8,[rv,{provide:Ll,useExisting:rv}])}function qC(n){qn("NgRouterViewTransitions");let t=[{provide:av,useValue:PC},{provide:lv,useValue:A({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ul(9,t)}var YC=[wi,{provide:vo,useClass:Ci},Ie,yo,{provide:on,useFactory:VC,deps:[Ie]},bf,[]],Tt=(()=>{class n{constructor(){}static forRoot(e,r){return{ngModule:n,providers:[YC,[],{provide:_o,multi:!0,useValue:e},[],r?.errorHandler?{provide:cv,useValue:r.errorHandler}:[],{provide:xi,useValue:r||{}},r?.useHash?UP():BP(),VP(),r?.preloadingStrategy?GC(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?zP(r):[],r?.bindToComponentInputs?WC().\u0275providers:[],r?.enableViewTransitions?qC().\u0275providers:[],$P()]}}static forChild(e){return{ngModule:n,providers:[{provide:_o,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=In({type:n});static \u0275inj=fn({})}return n})();function VP(){return{provide:jC,useFactory:()=>{let n=I(I1),t=I(Ge),e=I(xi),r=I(Ef),i=I(vo);return e.scrollOffset&&n.setOffset(e.scrollOffset),new jP(i,r,n,t,e)}}}function UP(){return{provide:gn,useClass:fl}}function BP(){return{provide:gn,useClass:Id}}function zP(n){return[n.initialNavigation==="disabled"?$C().\u0275providers:[],n.initialNavigation==="enabledBlocking"?zC().\u0275providers:[]]}var uv=new U("");function $P(){return[{provide:uv,useFactory:UC},{provide:Xa,multi:!0,useExisting:uv}]}var rS=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(C(tn),C(yt))};static \u0275dir=ye({type:n})}return n})(),$s=(()=>{class n extends rS{static \u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})();static \u0275dir=ye({type:n,features:[it]})}return n})(),Qr=new U(""),HP={provide:Qr,useExisting:gt(()=>ql),multi:!0},ql=(()=>{class n extends $s{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&T("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Gt([HP]),it]})}return n})(),GP={provide:Qr,useExisting:gt(()=>Ke),multi:!0};function WP(){let n=Tn()?Tn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var qP=new U(""),Ke=(()=>{class n extends rS{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!WP())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(C(tn),C(yt),C(qP,8))};static \u0275dir=ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&T("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Gt([GP]),it]})}return n})();function yv(n){return n==null||_v(n)===0}function _v(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var bo=new U(""),Hs=new U(""),YP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,H=class{static min(t){return iS(t)}static max(t){return KP(t)}static required(t){return ZP(t)}static requiredTrue(t){return QP(t)}static email(t){return JP(t)}static minLength(t){return XP(t)}static maxLength(t){return ek(t)}static pattern(t){return tk(t)}static nullValidator(t){return Df()}static compose(t){return uS(t)}static composeAsync(t){return fS(t)}};function iS(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function KP(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function ZP(n){return yv(n.value)?{required:!0}:null}function QP(n){return n.value===!0?null:{required:!0}}function JP(n){return yv(n.value)||YP.test(n.value)?null:{email:!0}}function XP(n){return t=>{let e=t.value?.length??_v(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function ek(n){return t=>{let e=t.value?.length??_v(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function tk(n){if(!n)return Df;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(yv(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function Df(n){return null}function oS(n){return n!=null}function sS(n){return yi(n)?Q(n):n}function aS(n){let t={};return n.forEach(e=>{t=e!=null?A(A({},t),e):t}),Object.keys(t).length===0?null:t}function lS(n,t){return t.map(e=>e(n))}function nk(n){return!n.validate}function cS(n){return n.map(t=>nk(t)?t:e=>t.validate(e))}function uS(n){if(!n)return null;let t=n.filter(oS);return t.length==0?null:function(e){return aS(lS(e,t))}}function dS(n){return n!=null?uS(cS(n)):null}function fS(n){if(!n)return null;let t=n.filter(oS);return t.length==0?null:function(e){let r=lS(e,t).map(sS);return uh(r).pipe(ae(aS))}}function pS(n){return n!=null?fS(cS(n)):null}function KC(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function hS(n){return n._rawValidators}function mS(n){return n._rawAsyncValidators}function hv(n){return n?Array.isArray(n)?n:[n]:[]}function xf(n,t){return Array.isArray(n)?n.includes(t):n===t}function ZC(n,t){let e=hv(t);return hv(n).forEach(i=>{xf(e,i)||e.push(i)}),e}function QC(n,t){return hv(t).filter(e=>!xf(n,e))}var If=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=dS(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=pS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},_n=class extends If{name;get formDirective(){return null}get path(){return null}},br=class extends If{_parent=null;name=null;valueAccessor=null},Tf=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},rk={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},QZ=Z(A({},rk),{"[class.ng-submitted]":"isSubmitted"}),Ze=(()=>{class n extends Tf{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(C(br,2))};static \u0275dir=ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&xe("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[it]})}return n})(),wr=(()=>{class n extends Tf{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(C(_n,10))};static \u0275dir=ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&xe("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[it]})}return n})();var Bl="VALID",Sf="INVALID",Us="PENDING",zl="DISABLED",Ii=class{},Mf=class extends Ii{value;source;constructor(t,e){super(),this.value=t,this.source=e}},$l=class extends Ii{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Hl=class extends Ii{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Bs=class extends Ii{status;source;constructor(t,e){super(),this.status=t,this.source=e}},mv=class extends Ii{source;constructor(t){super(),this.source=t}},Wl=class extends Ii{source;constructor(t){super(),this.source=t}};function bv(n){return(kf(n)?n.validators:n)||null}function ik(n){return Array.isArray(n)?dS(n):n||null}function wv(n,t){return(kf(t)?t.asyncValidators:n)||null}function ok(n){return Array.isArray(n)?pS(n):n||null}function kf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function gS(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new k(1e3,"");if(!r[e])throw new k(1001,"")}function vS(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new k(1002,"")})}var zs=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return _t(this.statusReactive)}set status(t){_t(()=>this.statusReactive.set(t))}_status=Es(()=>this.statusReactive());statusReactive=et(void 0);get valid(){return this.status===Bl}get invalid(){return this.status===Sf}get pending(){return this.status==Us}get disabled(){return this.status===zl}get enabled(){return this.status!==zl}errors;get pristine(){return _t(this.pristineReactive)}set pristine(t){_t(()=>this.pristineReactive.set(t))}_pristine=Es(()=>this.pristineReactive());pristineReactive=et(!0);get dirty(){return!this.pristine}get touched(){return _t(this.touchedReactive)}set touched(t){_t(()=>this.touchedReactive.set(t))}_touched=Es(()=>this.touchedReactive());touchedReactive=et(!1);get untouched(){return!this.touched}_events=new Be;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(ZC(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(ZC(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(QC(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(QC(t,this._rawAsyncValidators))}hasValidator(t){return xf(this._rawValidators,t)}hasAsyncValidator(t){return xf(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Z(A({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Hl(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new Hl(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Z(A({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new $l(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new $l(!0,r))}markAsPending(t={}){this.status=Us;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Bs(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Z(A({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=zl,this.errors=null,this._forEachChild(i=>{i.disable(Z(A({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Mf(this.value,r)),this._events.next(new Bs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(A({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Bl,this._forEachChild(r=>{r.enable(Z(A({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Z(A({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bl||this.status===Us)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Mf(this.value,e)),this._events.next(new Bs(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Z(A({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zl:Bl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Us,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let r=sS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Bs(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new Le,this.statusChanges=new Le}_calculateStatus(){return this._allControlsDisabled()?zl:this.errors?Sf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Us)?Us:this._anyControlsHaveStatus(Sf)?Sf:Bl}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new $l(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Hl(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){kf(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=ik(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=ok(this._rawAsyncValidators)}},Af=class extends zs{constructor(t,e,r){super(bv(e),wv(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){vS(this,!0,t),Object.keys(t).forEach(r=>{gS(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new Wl(this))}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var gv=class extends Af{};var Gs=new U("",{providedIn:"root",factory:()=>Yl}),Yl="always";function Ff(n,t){return[...t.path,n]}function Of(n,t,e=Yl){Ev(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),ak(n,t),ck(n,t),lk(n,t),sk(n,t)}function Rf(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Pf(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Nf(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function sk(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Ev(n,t){let e=hS(n);t.validator!==null?n.setValidators(KC(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=mS(n);t.asyncValidator!==null?n.setAsyncValidators(KC(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Nf(t._rawValidators,i),Nf(t._rawAsyncValidators,i)}function Pf(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=hS(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let i=mS(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Nf(t._rawValidators,r),Nf(t._rawAsyncValidators,r),e}function ak(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&yS(n,t)})}function lk(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&yS(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function yS(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ck(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function uk(n,t){n==null,Ev(n,t)}function dk(n,t){return Pf(n,t)}function Cv(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function fk(n){return Object.getPrototypeOf(n.constructor)===$s}function pk(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Sv(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(o=>{o.constructor===Ke?e=o:fk(o)?r=o:i=o}),i||r||e||null}function hk(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function JC(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function XC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Gl=class extends zs{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(bv(e),wv(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kf(e)&&(e.nonNullable||e.initialValueIsDefault)&&(XC(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new Wl(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){JC(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){JC(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){XC(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var mk=n=>n instanceof Gl,gk=(()=>{class n extends _n{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Ff(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})();static \u0275dir=ye({type:n,standalone:!1,features:[it]})}return n})();var vk={provide:br,useExisting:gt(()=>Zt)},eS=Promise.resolve(),Zt=(()=>{class n extends br{_changeDetectorRef;callSetDisabledState;control=new Gl;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Le;constructor(e,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Sv(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Cv(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Of(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){eS.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,i=r!==0&&uo(r);eS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Ff(e,this._parent):[e]}static \u0275fac=function(r){return new(r||n)(C(_n,9),C(bo,10),C(Hs,10),C(Qr,10),C(qr,8),C(Gs,8))};static \u0275dir=ye({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Gt([vk]),it,mn]})}return n})();var Er=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),yk={provide:Qr,useExisting:gt(()=>Dv),multi:!0},Dv=(()=>{class n extends $s{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&T("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Gt([yk]),it]})}return n})(),_k={provide:Qr,useExisting:gt(()=>xv),multi:!0};var bk=(()=>{class n{_accessors=[];add(e,r){this._accessors.push([e,r])}remove(e){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===e){this._accessors.splice(r,1);return}}select(e){this._accessors.forEach(r=>{this._isSameGroup(r,e)&&r[1]!==e&&r[1].fireUncheck(e.value)})}_isSameGroup(e,r){return e[0].control?e[0]._parent===r._control._parent&&e[1].name===r.name:!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xv=(()=>{class n extends $s{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=I(Gs,{optional:!0})??Yl;constructor(e,r,i,o){super(e,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(br),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(C(tn),C(yt),C(bk),C($t))};static \u0275dir=ye({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&T("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Gt([_k]),it]})}return n})();var Iv=new U(""),wk={provide:br,useExisting:gt(()=>Tv)},Tv=(()=>{class n extends br{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(e){}model;update=new Le;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(e),this._setAsyncValidators(r),this.valueAccessor=Sv(this,i)}ngOnChanges(e){if(this._isControlChanged(e)){let r=e.form.previousValue;r&&Rf(r,this,!1),Of(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Cv(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Rf(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(C(bo,10),C(Hs,10),C(Qr,10),C(Iv,8),C(Gs,8))};static \u0275dir=ye({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[Gt([wk]),it,mn]})}return n})(),Ek={provide:_n,useExisting:gt(()=>On)},On=(()=>{class n extends _n{callSetDisabledState;get submitted(){return _t(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=Es(()=>this._submittedReactive());_submittedReactive=et(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Le;constructor(e,r,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Pf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return Of(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Rf(e.control||null,e,!1),hk(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),pk(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new mv(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0,r={}){this.form.reset(e,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&(Rf(r||null,e),mk(i)&&(Of(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);uk(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&dk(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ev(this.form,this),this._oldForm&&Pf(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(C(bo,10),C(Hs,10),C(Gs,8))};static \u0275dir=ye({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&T("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Gt([Ek]),it,mn]})}return n})(),Ck={provide:_n,useExisting:gt(()=>Ws)},Ws=(()=>{class n extends gk{name=null;constructor(e,r,i){super(),this._parent=e,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){bS(this._parent)}static \u0275fac=function(r){return new(r||n)(C(_n,13),C(bo,10),C(Hs,10))};static \u0275dir=ye({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[Gt([Ck]),it]})}return n})(),Sk={provide:_n,useExisting:gt(()=>_S)},_S=(()=>{class n extends _n{_parent;name=null;constructor(e,r,i){super(),this._parent=e,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){bS(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Ff(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||n)(C(_n,13),C(bo,10),C(Hs,10))};static \u0275dir=ye({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[Gt([Sk]),it]})}return n})();function bS(n){return!(n instanceof Ws)&&!(n instanceof On)&&!(n instanceof _S)}var Dk={provide:br,useExisting:gt(()=>Qn)},Qn=(()=>{class n extends br{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new Le;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Sv(this,o)}ngOnChanges(e){this._added||this._setUpControl(),Cv(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Ff(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(C(_n,13),C(bo,10),C(Hs,10),C(Qr,10),C(Iv,8))};static \u0275dir=ye({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Gt([Dk]),it,mn]})}return n})();var xk={provide:Qr,useExisting:gt(()=>kt),multi:!0};function wS(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function Ik(n){return n.split(":")[0]}var kt=(()=>{class n extends $s{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=I($r).injector;destroyRef=I($n);cdr=I(qr);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ka({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let r=this._getOptionId(e),i=wS(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){let r=Ik(e);return this._optionMap.has(r)?this._optionMap.get(r):e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&T("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Gt([xk]),it]})}return n})(),sn=(()=>{class n{_element;_renderer;_select;id;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(wS(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(C(yt),C(tn),C(kt,9))};static \u0275dir=ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Tk={provide:Qr,useExisting:gt(()=>ES),multi:!0};function tS(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function Mk(n){return n.split(":")[0]}var ES=(()=>{class n extends $s{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r;if(Array.isArray(e)){let i=e.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],f=this._getOptionValue(l.value);i.push(f)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let f=this._getOptionValue(l.value);i.push(f)}}}this.value=i,e(i)}}_registerOption(e){let r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){let r=Mk(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&T("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Gt([Tk]),it]})}return n})(),an=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(tS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(tS(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(C(yt),C(tn),C(ES,9))};static \u0275dir=ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function Ak(n){return typeof n=="number"?n:parseFloat(n)}var Ok=(()=>{class n{_validator=Df;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Df,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,features:[mn]})}return n})();var Rk={provide:bo,useExisting:gt(()=>Mv),multi:!0},Mv=(()=>{class n extends Ok{min;inputName="min";normalizeInput=e=>Ak(e);createValidator=e=>iS(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&bs("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Gt([Rk]),it]})}return n})();var CS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=In({type:n});static \u0275inj=fn({})}return n})(),vv=class extends zs{constructor(t,e,r){super(bv(e),wv(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){Array.isArray(t)?t.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){vS(this,!1,t),t.forEach((r,i)=>{gS(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new Wl(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function nS(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Cr=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,r=null){let i=this._reduceControls(e),o={};return nS(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Af(i,o)}record(e,r=null){let i=this._reduceControls(e);return new gv(i,r)}control(e,r,i){let o={};return this.useNonNullable?(nS(r)?o=r:(o.validators=r,o.asyncValidators=i),new Gl(e,Z(A({},o),{nonNullable:!0}))):new Gl(e,r,i)}array(e,r,i){let o=e.map(s=>this._createControl(s));return new vv(o,r,i)}_reduceControls(e){let r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){if(e instanceof Gl)return e;if(e instanceof zs)return e;if(Array.isArray(e)){let r=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(r,i,o)}else return this.control(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ln=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Gs,useValue:e.callSetDisabledState??Yl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=In({type:n});static \u0275inj=fn({imports:[CS]})}return n})(),Sr=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Iv,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Gs,useValue:e.callSetDisabledState??Yl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=In({type:n});static \u0275inj=fn({imports:[CS]})}return n})();ke();var SS=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-HXKWO5LS.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var Kl=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},Zl=class extends Kl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Ql=class extends Kl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Jl=class extends Kl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},Av=(function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n})(Av||{});var Xl=class{constructor(t,{headers:e={},customFetch:r,region:i=Av.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=SS(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return j(this,arguments,void 0,function*(e,r={}){var i;try{let{headers:o,method:s,body:a,signal:l}=r,f={},{region:p}=r;p||(p=this.region);let m=new URL(`${this.url}/${e}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let v;a&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=a):typeof a=="string"?(f["Content-Type"]="text/plain",v=a):typeof FormData<"u"&&a instanceof FormData?v=a:(f["Content-Type"]="application/json",v=JSON.stringify(a)):v=a;let g=yield this.fetch(m.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:v,signal:l}).catch(D=>{throw D.name==="AbortError"?D:new Zl(D)}),w=g.headers.get("x-relay-error");if(w&&w==="true")throw new Ql(g);if(!g.ok)throw new Jl(g);let S=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),E;return S==="application/json"?E=yield g.json():S==="application/octet-stream"||S==="application/pdf"?E=yield g.blob():S==="text/event-stream"?E=g:S==="multipart/form-data"?E=yield g.formData():E=yield g.text(),{data:E,error:null,response:g}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new Zl(o)}:{data:null,error:o,response:o instanceof Jl||o instanceof Ql?o.context:void 0}}})}};var qv=Cx(PS(),1),{PostgrestClient:kS,PostgrestQueryBuilder:gQ,PostgrestFilterBuilder:vQ,PostgrestTransformBuilder:yQ,PostgrestBuilder:_Q,PostgrestError:$k}=qv.default||qv;var Yv=class{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){let e=process.versions;if(e&&e.node){let r=e.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){let r=this.getWebSocketConstructor();return new r(t,e)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},Kv=Yv;var FS="2.77.0";var LS=`realtime-js/${FS}`,jS="1.0.0";var tc=1e4,VS=1e3,US=100,nc=(function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n})(nc||{}),ft=(function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n})(ft||{}),Rn=(function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n})(Rn||{}),Zv=(function(n){return n.websocket="websocket",n})(Zv||{}),wo=(function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n})(wo||{});var jf=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let i=e.getUint8(1),o=e.getUint8(2),s=this.HEADER_LENGTH+2,a=r.decode(t.slice(s,s+i));s=s+i;let l=r.decode(t.slice(s,s+o));s=s+o;let f=JSON.parse(r.decode(t.slice(s,t.byteLength)));return{ref:null,topic:a,event:l,payload:f}}};var Ys=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var je=(function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n})(je||{}),Jv=(n,t,e={})=>{var r;let i=(r=e.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,s)=>(o[s]=Hk(s,n,t,i),o),{}):{}},Hk=(n,t,e,r)=>{let i=t.find(a=>a.name===n),o=i?.type,s=e[n];return o&&!r.includes(o)?BS(o,s):Qv(s)},BS=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return Yk(t,e)}switch(n){case je.bool:return Gk(t);case je.float4:case je.float8:case je.int2:case je.int4:case je.int8:case je.numeric:case je.oid:return Wk(t);case je.json:case je.jsonb:return qk(t);case je.timestamp:return Kk(t);case je.abstime:case je.date:case je.daterange:case je.int4range:case je.int8range:case je.money:case je.reltime:case je.text:case je.time:case je.timestamptz:case je.timetz:case je.tsrange:case je.tstzrange:return Qv(t);default:return Qv(t)}},Qv=n=>n,Gk=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Wk=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},qk=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},Yk=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let o,s=n.slice(1,e);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>BS(t,a))}return n},Kk=n=>typeof n=="string"?n.replace(" ","T"):n,Vf=n=>{let t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var Ks=class{constructor(t,e,r={},i=tc){this.channel=t,this.event=e,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var rc=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,o,s),this.pendingDiffs.forEach(l=>{this.state=n.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,i){let o=this.cloneDeep(t),s=this.transformState(e),a={},l={};return this.map(o,(f,p)=>{s[f]||(l[f]=p)}),this.map(s,(f,p)=>{let m=o[f];if(m){let v=p.map(E=>E.presence_ref),g=m.map(E=>E.presence_ref),w=p.filter(E=>g.indexOf(E.presence_ref)<0),S=m.filter(E=>v.indexOf(E.presence_ref)<0);w.length>0&&(a[f]=w),S.length>0&&(l[f]=S)}else a[f]=p}),this.syncDiff(o,{joins:a,leaves:l},r,i)}static syncDiff(t,e,r,i){let{joins:o,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var f;let p=(f=t[a])!==null&&f!==void 0?f:[];if(t[a]=this.cloneDeep(l),p.length>0){let m=t[a].map(g=>g.presence_ref),v=p.filter(g=>m.indexOf(g.presence_ref)<0);t[a].unshift(...v)}r(a,p,l)}),this.map(s,(a,l)=>{let f=t[a];if(!f)return;let p=l.map(m=>m.presence_ref);f=f.filter(m=>p.indexOf(m.presence_ref)<0),t[a]=f,i(a,f,l),f.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let i=t[r];return"metas"in i?e[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):e[r]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var ic=(function(n){return n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",n})(ic||{}),Jr=(function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n})(Jr||{});var oc=class n{constructor(t,e={config:{}},r){var i,o;if(this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new Ks(this,Rn.join,this.params,this.timeout),this.rejoinTimer=new Ys(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rn.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new rc(this),this.broadcastEndpointURL=Vf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){let{config:{broadcast:s,presence:a,private:l}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[ic.PRESENCE]&&this.bindings[ic.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,m={},v={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:p}),postgres_changes:f,private:l};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(g=>t?.(Jr.CHANNEL_ERROR,g)),this._onClose(()=>t?.(Jr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",w=>_(this,[w],function*({postgres_changes:g}){var S;if(this.socket.setAuth(),g===void 0){t?.(Jr.SUBSCRIBED);return}else{let E=this.bindings.postgres_changes,D=(S=E?.length)!==null&&S!==void 0?S:0,G=[];for(let B=0;B<D;B++){let L=E[B],{filter:{event:fe,schema:ht,table:Te,filter:st}}=L,ii=g&&g[B];if(ii&&ii.event===fe&&ii.schema===ht&&ii.table===Te&&ii.filter===st)G.push(Object.assign(Object.assign({},L),{id:ii.id}));else{this.unsubscribe(),this.state=ft.errored,t?.(Jr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=G,t&&t(Jr.SUBSCRIBED);return}})).receive("error",g=>{this.state=ft.errored,t?.(Jr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t?.(Jr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return _(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return _(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,r){return this.state===ft.joined&&t===ic.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,r)}httpSend(i,o){return _(this,arguments,function*(t,e,r={}){var s;let a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(e==null)return Promise.reject("Payload is required for httpSend()");let l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:e,private:this.private}]})},f=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(f.status===202)return{success:!0};let p=f.statusText;try{let m=yield f.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))})}send(r){return _(this,arguments,function*(t,e={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:s,payload:a}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{let p=yield this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=e.timeout)!==null&&i!==void 0?i:this.timeout);return yield(o=p.body)===null||o===void 0?void 0:o.cancel(),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,f;let p=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||f===void 0)&&f.ack)&&s("ok"),p.receive("ok",()=>s("ok")),p.receive("error",()=>s("error")),p.receive("timeout",()=>s("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ft.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Ks(this,Rn.leave,{},t),r.receive("ok",()=>{e(),i("ok")}).receive("timeout",()=>{e(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}_fetchWithTimeout(t,e,r){return _(this,null,function*(){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(o),s})}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ks(this,t,e,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>US){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:l,leave:f,join:p}=Rn;if(r&&[a,l,f,p].indexOf(s)>=0&&r!==this._joinRef())return;let v=this._onMessage(s,e,r);if(e&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var w,S,E;return((w=g.filter)===null||w===void 0?void 0:w.event)==="*"||((E=(S=g.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===s}).map(g=>g.callback(v,r)):(o=this.bindings[s])===null||o===void 0||o.filter(g=>{var w,S,E,D,G,B;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in g){let L=g.id,fe=(w=g.filter)===null||w===void 0?void 0:w.event;return L&&((S=e.ids)===null||S===void 0?void 0:S.includes(L))&&(fe==="*"||fe?.toLocaleLowerCase()===((E=e.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{let L=(G=(D=g?.filter)===null||D===void 0?void 0:D.event)===null||G===void 0?void 0:G.toLocaleLowerCase();return L==="*"||L===((B=e?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===s}).map(g=>{if(typeof v=="object"&&"ids"in v){let w=v.data,{schema:S,table:E,commit_timestamp:D,type:G,errors:B}=w;v=Object.assign(Object.assign({},{schema:S,table:E,commit_timestamp:D,eventType:G,new:{},old:{},errors:B}),this._getPayloadRecords(w))}g.callback(v,r)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let i=t.toLocaleLowerCase(),o={type:i,filter:e,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&n.isEqual(i.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Rn.close,{},t)}_onError(t){this._on(Rn.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Jv(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Jv(t.columns,t.old_record)),e}};var Xv=()=>{},Uf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Qk=[1e3,2e3,5e3,1e4],Jk=1e4,Xk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,sc=class{constructor(t,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tc,this.transport=null,this.heartbeatIntervalMs=Uf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xv,this.ref=0,this.reconnectTimer=null,this.logger=Xv,this.conn=null,this.sendBuffer=[],this.serializer=new jf,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...s)=>import("./chunk-HXKWO5LS.js").then(({default:a})=>a(...s)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...s)=>o(...s)},!(!((r=e?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${Zv.websocket}`,this.httpEndpoint=Vf(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Kv.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:jS}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,e??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){return _(this,null,function*(){let e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return _(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case nc.connecting:return wo.Connecting;case nc.open:return wo.Open;case nc.closing:return wo.Closing;default:return wo.Closed}}isConnected(){return this.connectionState()===wo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){let r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new oc(`realtime:${t}`,e,this);return this.channels.push(o),o}}push(t){let{topic:e,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(t=null){return _(this,null,function*(){this._authPromise=this._performAuth(t);try{yield this._authPromise}finally{this._authPromise=null}})}sendHeartbeat(){return _(this,null,function*(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(VS,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},Uf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply")try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:r,event:i,payload:o,ref:s}=e,a=s?`(${s})`:"",l=o.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,o,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Rn.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${r}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([Xk],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}_performAuth(t=null){return _(this,null,function*(){let e;t?e=t:this.accessToken?e=yield this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(r=>{let i={access_token:e,version:LS};e&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Rn.access_token,{access_token:e})}))})}_waitForAuthIfNeeded(){return _(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(e)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Ys(()=>_(this,null,function*(){setTimeout(()=>_(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),Uf.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(t){var e,r,i,o,s,a,l,f,p;if(this.transport=(e=t?.transport)!==null&&e!==void 0?e:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:tc,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Uf.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:Xv,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t?.reconnectAfterMs)!==null&&l!==void 0?l:m=>Qk[m-1]||Jk,this.encode=(f=t?.encode)!==null&&f!==void 0?f:(m,v)=>v(JSON.stringify(m)),this.decode=(p=t?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};ke();var Zs=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Re(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Bf=class extends Zs{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Eo=class extends Zs{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};ke();ke();var Qs=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-HXKWO5LS.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},zS=()=>j(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-HXKWO5LS.js")).Response:Response}),zf=n=>{if(Array.isArray(n))return n.map(e=>zf(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let i=e.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=zf(r)}),t},$S=n=>{if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var ey=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),e2=(n,t,e)=>j(void 0,void 0,void 0,function*(){let r=yield zS();n instanceof r&&!e?.noResolveJson?n.json().then(i=>{let o=n.status||500,s=i?.statusCode||o+"";t(new Bf(ey(i),o,s))}).catch(i=>{t(new Eo(ey(i),i))}):t(new Eo(ey(n),n))}),t2=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"||!r?i:($S(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),e))};function ac(n,t,e,r,i,o){return j(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,t2(t,r,i,o)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>e2(l,a,r))})})}function Ti(n,t,e,r){return j(this,void 0,void 0,function*(){return ac(n,"GET",t,e,r)})}function cn(n,t,e,r,i){return j(this,void 0,void 0,function*(){return ac(n,"POST",t,r,i,e)})}function lc(n,t,e,r,i){return j(this,void 0,void 0,function*(){return ac(n,"PUT",t,r,i,e)})}function HS(n,t,e,r){return j(this,void 0,void 0,function*(){return ac(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function Js(n,t,e,r,i){return j(this,void 0,void 0,function*(){return ac(n,"DELETE",t,r,i,e)})}ke();ke();var $f=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return j(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Re(t))return{data:null,error:t};throw t}})}};var GS,ty=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[GS]="BlobDownloadBuilder",this.promise=null}asStream(){return new $f(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return j(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Re(t))return{data:null,error:t};throw t}})}};GS=Symbol.toStringTag;var WS=ty;var n2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Hf=class{constructor(t,e={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=Qs(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,r,i){return j(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},qS),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)}),l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let f=this._removeEmptyFolders(e),p=this._getFinalPath(f),m=yield(t=="PUT"?lc:cn)(this.fetch,`${this.url}/object/${p}`,o,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:f,id:m.Id,fullPath:m.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Re(o))return{data:null,error:o};throw o}})}upload(t,e,r){return j(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,i){return j(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l,f=Object.assign({upsert:qS.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",f.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",f.cacheControl)):(l=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);let m=yield lc(this.fetch,a.toString(),l,{headers:p});return{data:{path:o,fullPath:m.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Re(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return j(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let o=yield cn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new Zs("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Re(r))return{data:null,error:r};throw r}})}update(t,e,r){return j(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return j(this,void 0,void 0,function*(){try{return{data:yield cn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Re(i))return{data:null,error:i};throw i}})}copy(t,e,r){return j(this,void 0,void 0,function*(){try{return{data:{path:(yield cn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Re(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,r){return j(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield cn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Re(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,r){return j(this,void 0,void 0,function*(){try{let i=yield cn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Re(i))return{data:null,error:i};throw i}})}download(t,e){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),s=o?`?${o}`:"",a=this._getFinalPath(t),l=()=>Ti(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new WS(l,this.shouldThrowOnError)}info(t){return j(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield Ti(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:zf(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Re(r))return{data:null,error:r};throw r}})}exists(t){return j(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield HS(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Re(r)&&r instanceof Eo){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);let a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&i.push(l);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${f}`)}}}remove(t){return j(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}list(t,e,r){return j(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},n2),e),{prefix:t||""});return{data:yield cn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Re(i))return{data:null,error:i};throw i}})}listV2(t,e){return j(this,void 0,void 0,function*(){try{let r=Object.assign({},t);return{data:yield cn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Re(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};ke();var Gf="2.77.0";var Wf={"X-Client-Info":`storage-js/${Gf}`};var qf=class{constructor(t,e={},r,i){this.shouldThrowOnError=!1;let o=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wf),e),this.fetch=Qs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return j(this,void 0,void 0,function*(){try{let e=this.listBucketOptionsToQueryString(t);return{data:yield Ti(this.fetch,`${this.url}/bucket${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}getBucket(t){return j(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}createBucket(t){return j(this,arguments,void 0,function*(e,r={public:!1}){try{return{data:yield cn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Re(i))return{data:null,error:i};throw i}})}updateBucket(t,e){return j(this,void 0,void 0,function*(){try{return{data:yield lc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Re(r))return{data:null,error:r};throw r}})}emptyBucket(t){return j(this,void 0,void 0,function*(){try{return{data:yield cn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}deleteBucket(t){return j(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(t){let e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}};ke();var Yf=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wf),e),this.fetch=Qs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return j(this,void 0,void 0,function*(){try{return{data:yield cn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}listBuckets(t){return j(this,void 0,void 0,function*(){try{let e=new URLSearchParams;t?.limit!==void 0&&e.set("limit",t.limit.toString()),t?.offset!==void 0&&e.set("offset",t.offset.toString()),t?.sortColumn&&e.set("sortColumn",t.sortColumn),t?.sortOrder&&e.set("sortOrder",t.sortOrder),t?.search&&e.set("search",t.search);let r=e.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Ti(this.fetch,i,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}deleteBucket(t){return j(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}};ke();ke();var Xs={"X-Client-Info":`storage-js/${Gf}`,"Content-Type":"application/json"};var Kf=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ft(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var ea=class extends Kf{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Zf=class extends Kf{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};ke();var ta=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-HXKWO5LS.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var YS=n=>{if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var KS=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),r2=(n,t,e)=>j(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!e?.noResolveJson){let i=n.status||500,o=n;if(typeof o.json=="function")o.json().then(s=>{let a=s?.statusCode||s?.code||i+"";t(new ea(KS(s),i,a))}).catch(()=>{let s=i+"",a=o.statusText||`HTTP ${i} error`;t(new ea(a,i,s))});else{let s=i+"",a=o.statusText||`HTTP ${i} error`;t(new ea(a,i,s))}}else t(new Zf(KS(n),n))}),i2=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"||!r?i:(YS(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),e))};function o2(n,t,e,r,i,o){return j(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,i2(t,r,i,o)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;let f=l.headers.get("content-type");return!f||!f.includes("application/json")?{}:l.json()}).then(l=>s(l)).catch(l=>r2(l,a,r))})})}function Lt(n,t,e,r,i){return j(this,void 0,void 0,function*(){return o2(n,"POST",t,r,i,e)})}var Qf=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xs),e),this.fetch=ta(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return j(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}})}getIndex(t,e){return j(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}listIndexes(t){return j(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}})}deleteIndex(t,e){return j(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}};ke();var Jf=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xs),e),this.fetch=ta(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return j(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Lt(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}})}getVectors(t){return j(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}})}listVectors(t){return j(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Lt(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}})}queryVectors(t){return j(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}})}deleteVectors(t){return j(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Lt(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}})}};ke();var Xf=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xs),e),this.fetch=ta(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return j(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}})}getBucket(t){return j(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}})}listBuckets(){return j(this,arguments,void 0,function*(t={}){try{return{data:yield Lt(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}})}deleteBucket(t){return j(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}})}};var cc=class extends Xf{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new ep(this.url,this.headers,t,this.fetch)}},ep=class extends Qf{constructor(t,e,r,i){super(t,e,i),this.vectorBucketName=r}createIndex(t){let e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return j(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return j(this,arguments,void 0,function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){let e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return j(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){let e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return j(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new tp(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},tp=class extends Jf{constructor(t,e,r,i,o){super(t,e,o),this.vectorBucketName=r,this.indexName=i}putVectors(t){let e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return j(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){let e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return j(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return j(this,arguments,void 0,function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){let e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return j(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){let e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return j(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}};var uc=class extends qf{constructor(t,e={},r,i){super(t,e,r,i)}from(t){return new Hf(this.url,this.headers,t,this.fetch)}get vectors(){return new cc(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Yf(this.url+"/iceberg",this.headers,this.fetch)}};var ZS="2.77.0";var dc="";typeof Deno<"u"?dc="deno":typeof document<"u"?dc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dc="react-native":dc="node";var s2={"X-Client-Info":`supabase-js-${dc}/${ZS}`},QS={headers:s2},JS={schema:"public"},XS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},eD={};Dy();var a2=n=>{let t;return n?t=n:typeof fetch>"u"?t=Cy:t=fetch,(...e)=>t(...e)},l2=()=>typeof Headers>"u"?Sy:Headers,tD=(n,t,e)=>{let r=a2(e),i=l2();return(o,s)=>_(null,null,function*(){var a;let l=(a=yield t())!==null&&a!==void 0?a:n,f=new i(s?.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},s),{headers:f}))})};function c2(n){return n.endsWith("/")?n:n+"/"}function nD(n,t){var e,r;let{db:i,auth:o,realtime:s,global:a}=n,{db:l,auth:f,realtime:p,global:m}=t,v={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},p),s),storage:{},global:Object.assign(Object.assign(Object.assign({},m),a),{headers:Object.assign(Object.assign({},(e=m?.headers)!==null&&e!==void 0?e:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>_(null,null,function*(){return""})};return n.accessToken?v.accessToken=n.accessToken:delete v.accessToken,v}function rD(n){let t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(c2(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}ke();ke();var np="2.77.0";var Co=30*1e3,rp=3,ip=rp*Co,iD="http://localhost:9999",oD="supabase.auth.token";var sD={"X-Client-Info":`gotrue-js/${np}`};var fc="X-Supabase-Api-Version",ny={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lD=600*1e3;var Mi=class extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}};function q(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var op=class extends Mi{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}};function cD(n){return q(n)&&n.name==="AuthApiError"}var Nn=class extends Mi{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},Dr=class extends Mi{constructor(t,e,r,i){super(t,r,i),this.name=e,this.status=r}},Pn=class extends Dr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function uD(n){return q(n)&&n.name==="AuthSessionMissingError"}var Xr=class extends Dr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},So=class extends Dr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Do=class extends Dr{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function dD(n){return q(n)&&n.name==="AuthImplicitGrantRedirectError"}var pc=class extends Dr{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},na=class extends Dr{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function sp(n){return q(n)&&n.name==="AuthRetryableFetchError"}var hc=class extends Dr{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}};var xo=class extends Dr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var ap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fD=` 	
\r=`.split(""),u2=(()=>{let n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<fD.length;t+=1)n[fD[t].charCodeAt(0)]=-2;for(let t=0;t<ap.length;t+=1)n[ap[t].charCodeAt(0)]=t;return n})();function pD(n,t,e){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(ap[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(ap[r]),t.queuedBits-=6}}function hD(n,t,e){let r=u2[n];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function ry(n){let t=[],e=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{p2(s,r,e)};for(let s=0;s<n.length;s+=1)hD(n.charCodeAt(s),i,o);return t.join("")}function d2(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function f2(n,t){for(let e=0;e<n.length;e+=1){let r=n.charCodeAt(e);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(n.charCodeAt(e+1)-56320&65535|i)+65536,e+=1}d2(r,t)}}function p2(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function Ai(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<n.length;i+=1)hD(n.charCodeAt(i),e,r);return new Uint8Array(t)}function mD(n){let t=[];return f2(n,e=>t.push(e)),new Uint8Array(t)}function ei(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};return n.forEach(i=>pD(i,e,r)),pD(null,e,r),t.join("")}function gD(n){return Math.round(Date.now()/1e3)+n}function vD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var Jt=()=>typeof window<"u"&&typeof document<"u",Io={tested:!1,writable:!1},lp=()=>{if(!Jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Io.tested)return Io.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Io.tested=!0,Io.writable=!0}catch{Io.tested=!0,Io.writable=!1}return Io.writable};function yD(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return e.searchParams.forEach((r,i)=>{t[i]=r}),t}var cp=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-HXKWO5LS.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},_D=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",To=(n,t,e)=>_(null,null,function*(){yield n.setItem(t,JSON.stringify(e))}),Oi=(n,t)=>_(null,null,function*(){let e=yield n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),ti=(n,t)=>_(null,null,function*(){yield n.removeItem(t)}),mc=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};mc.promiseConstructor=Promise;function up(n){let t=n.split(".");if(t.length!==3)throw new xo("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!aD.test(t[r]))throw new xo("JWT not in base64url format");return{header:JSON.parse(ry(t[0])),payload:JSON.parse(ry(t[1])),signature:Ai(t[2]),raw:{header:t[0],payload:t[1]}}}function bD(n){return _(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})}function wD(n,t){return new Promise((r,i)=>{_(null,null,function*(){for(let o=0;o<1/0;o++)try{let s=yield n(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})})}function h2(n){return("0"+n.toString(16)).substr(-2)}function m2(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,i="";for(let o=0;o<56;o++)i+=e.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,h2).join("")}function g2(n){return _(this,null,function*(){let e=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",e),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")})}function v2(n){return _(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=yield g2(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Mo(n,t,e=!1){return _(this,null,function*(){let r=m2(),i=r;e&&(i+="/PASSWORD_RECOVERY"),yield To(n,`${t}-code-verifier`,i);let o=yield v2(r);return[o,r===o?"plain":"s256"]})}var y2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ED(n){let t=n.headers.get(fc);if(!t||!t.match(y2))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function CD(n){if(!n)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function SD(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var _2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ao(n){if(!_2.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function dp(){let n={};return new Proxy(n,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){let r=e.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function iy(n){return JSON.parse(JSON.stringify(n))}var Oo=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),b2=[502,503,504];function DD(n){return _(this,null,function*(){var t;if(!_D(n))throw new na(Oo(n),0);if(b2.includes(n.status))throw new na(Oo(n),n.status);let e;try{e=yield n.json()}catch(o){throw new Nn(Oo(o),o)}let r,i=ED(n);if(i&&i.getTime()>=ny["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?r=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(r=e.error_code),r){if(r==="weak_password")throw new hc(Oo(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Pn}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new hc(Oo(e),n.status,e.weak_password.reasons);throw new op(Oo(e),n.status||500,r)})}var w2=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),e))};function X(n,t,e,r){return _(this,null,function*(){var i;let o=Object.assign({},r?.headers);o[fc]||(o[fc]=ny["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield E2(n,t,e+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}})}function E2(n,t,e,r,i,o){return _(this,null,function*(){let s=w2(t,r,i,o),a;try{a=yield n(e,Object.assign({},s))}catch(l){throw console.error(l),new na(Oo(l),0)}if(a.ok||(yield DD(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield DD(l)}})}function kn(n){var t;let e=null;C2(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=gD(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function oy(n){let t=kn(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function xr(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function xD(n){return{data:n,error:null}}function ID(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o}=n,s=Mr(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function sy(n){return n}function C2(n){return n.access_token&&n.refresh_token&&n.expires_in}var fp=["global","local","others"];var ra=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=cp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(r){return _(this,arguments,function*(t,e=fp[0]){if(fp.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fp.join(", ")}`);try{return yield X(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(q(i))return{data:null,error:i};throw i}})}inviteUserByEmail(r){return _(this,arguments,function*(t,e={}){try{return yield X(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:xr})}catch(i){if(q(i))return{data:{user:null},error:i};throw i}})}generateLink(t){return _(this,null,function*(){try{let{options:e}=t,r=Mr(t,["options"]),i=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),yield X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ID,redirectTo:e?.redirectTo})}catch(e){if(q(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return _(this,null,function*(){try{return yield X(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:xr})}catch(e){if(q(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return _(this,null,function*(){var e,r,i,o,s,a,l;try{let f={nextPage:null,lastPage:0,total:0},p=yield X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:sy});if(p.error)throw p.error;let m=yield p.json(),v=(s=p.headers.get("x-total-count"))!==null&&s!==void 0?s:0,g=(l=(a=p.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(w=>{let S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);f[`${E}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(q(f))return{data:{users:[]},error:f};throw f}})}getUserById(t){return _(this,null,function*(){Ao(t);try{return yield X(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:xr})}catch(e){if(q(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return _(this,null,function*(){Ao(t);try{return yield X(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:xr})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}})}deleteUser(t,e=!1){return _(this,null,function*(){Ao(t);try{return yield X(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:xr})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}})}_listFactors(t){return _(this,null,function*(){Ao(t.userId);try{let{data:e,error:r}=yield X(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:r}}catch(e){if(q(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return _(this,null,function*(){Ao(t.userId),Ao(t.id);try{return{data:yield X(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(q(e))return{data:null,error:e};throw e}})}_listOAuthClients(t){return _(this,null,function*(){var e,r,i,o,s,a,l;try{let f={nextPage:null,lastPage:0,total:0},p=yield X(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:sy});if(p.error)throw p.error;let m=yield p.json(),v=(s=p.headers.get("x-total-count"))!==null&&s!==void 0?s:0,g=(l=(a=p.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(w=>{let S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);f[`${E}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(q(f))return{data:{clients:[]},error:f};throw f}})}_createOAuthClient(t){return _(this,null,function*(){try{return yield X(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(q(e))return{data:null,error:e};throw e}})}_getOAuthClient(t){return _(this,null,function*(){try{return yield X(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(q(e))return{data:null,error:e};throw e}})}_deleteOAuthClient(t){return _(this,null,function*(){try{return yield X(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(q(e))return{data:null,error:e};throw e}})}_regenerateOAuthClientSecret(t){return _(this,null,function*(){try{return yield X(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(q(e))return{data:null,error:e};throw e}})}};function ay(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}var Ro={debug:!!(globalThis&&lp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},gc=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},pp=class extends gc{};function ly(n,t,e){return _(this,null,function*(){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},i=>_(null,null,function*(){if(i){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield e()}finally{Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(t===0)throw Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new pp(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ro.debug)try{let o=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}})))})}function TD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function cy(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function MD(n){return parseInt(n,16)}function AD(n){let t=new TextEncoder().encode(n);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function OD(n){var t;let{chainId:e,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:l,resources:f,scheme:p,uri:m,version:v}=n;{if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}let g=cy(n.address),w=p?`${p}://${r}`:r,S=n.statement?`${n.statement}
`:"",E=`${w} wants you to sign in with your Ethereum account:
${g}

${S}`,D=`URI: ${m}
Version: ${v}
Chain ID: ${e}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(D+=`
Expiration Time: ${i.toISOString()}`),a&&(D+=`
Not Before: ${a.toISOString()}`),l&&(D+=`
Request ID: ${l}`),f){let G=`
Resources:`;for(let B of f){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);G+=`
- ${B}`}D+=G}return`${E}
${D}`}ke();var $e=class extends Error{constructor({message:t,code:e,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=e}},No=class extends $e{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}};function RD({error:n,options:t}){var e,r,i;let{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $e({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((e=o.authenticatorSelection)===null||e===void 0?void 0:e.requireResidentKey)===!0)return new $e({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new $e({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new $e({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new $e({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new $e({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new $e({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new $e({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){let s=window.location.hostname;if(uy(s)){if(o.rp.id!==s)return new $e({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new $e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new $e({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new $e({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new $e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function ND({error:n,options:t}){let{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $e({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new $e({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){let r=window.location.hostname;if(uy(r)){if(e.rpId!==r)return new $e({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new $e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new $e({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new $e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var dy=class{createNewAbortSignal(){if(this.controller){let e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},S2=new dy;function kD(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);let{challenge:t,user:e,excludeCredentials:r}=n,i=Mr(n,["challenge","user","excludeCredentials"]),o=Ai(t).buffer,s=Object.assign(Object.assign({},e),{id:Ai(e.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){let f=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},f),{id:Ai(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return a}function FD(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);let{challenge:t,allowCredentials:e}=n,r=Mr(n,["challenge","allowCredentials"]),i=Ai(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(e&&e.length>0){o.allowCredentials=new Array(e.length);for(let s=0;s<e.length;s++){let a=e[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Ai(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function LD(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let e=n;return{id:n.id,rawId:n.id,response:{attestationObject:ei(new Uint8Array(n.response.attestationObject)),clientDataJSON:ei(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function jD(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let e=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:ei(new Uint8Array(i.authenticatorData)),clientDataJSON:ei(new Uint8Array(i.clientDataJSON)),signature:ei(new Uint8Array(i.signature)),userHandle:i.userHandle?ei(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function uy(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function PD(){var n,t;return!!(Jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}function D2(n){return _(this,null,function*(){try{let t=yield navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new No("Browser returned unexpected credential type",t)}:{data:null,error:new No("Empty credential response",t)}}catch(t){return{data:null,error:RD({error:t,options:n})}}})}function x2(n){return _(this,null,function*(){try{let t=yield navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new No("Browser returned unexpected credential type",t)}:{data:null,error:new No("Empty credential response",t)}}catch(t){return{data:null,error:ND({error:t,options:n})}}})}var I2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},T2={userVerification:"preferred",hints:["security-key"]};function hp(...n){let t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),e=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of n)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(e(s))r[o]=s;else if(t(s)){let a=r[o];t(a)?r[o]=hp(a,s):r[o]=hp(s)}else r[o]=s}return r}function M2(n,t){return hp(I2,n,t||{})}function A2(n,t){return hp(T2,n,t||{})}var mp=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(t){return _(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))})}_challenge(s,a){return _(this,arguments,function*({factorId:t,webauthn:e,friendlyName:r,signal:i},o){try{let{data:l,error:f}=yield this.client.mfa.challenge({factorId:t,webauthn:e});if(!l)return{data:null,error:f};let p=i??S2.createNewAbortSignal();if(l.webauthn.type==="create"){let{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${r}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{let m=M2(l.webauthn.credential_options.publicKey,o?.create),{data:v,error:g}=yield D2({publicKey:m,signal:p});return v?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}case"request":{let m=A2(l.webauthn.credential_options.publicKey,o?.request),{data:v,error:g}=yield x2(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:p}));return v?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}}}catch(l){return q(l)?{data:null,error:l}:{data:null,error:new Nn("Unexpected error in challenge",l)}}})}_verify(i){return _(this,arguments,function*({challengeId:t,factorId:e,webauthn:r}){return this.client.mfa.verify({factorId:e,challengeId:t,webauthn:r})})}_authenticate(s,a){return _(this,arguments,function*({factorId:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!e)return{data:null,error:new Mi("rpId is required for WebAuthn authentication")};try{if(!PD())return{data:null,error:new Nn("Browser does not support WebAuthn",null)};let{data:l,error:f}=yield this.challenge({factorId:t,webauthn:{rpId:e,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:f};let{webauthn:p}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:p.type,rpId:e,rpOrigins:r,credential_response:p.credential_response}})}catch(l){return q(l)?{data:null,error:l}:{data:null,error:new Nn("Unexpected error in authenticate",l)}}})}_register(s,a){return _(this,arguments,function*({friendlyName:t,rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!e)return{data:null,error:new Mi("rpId is required for WebAuthn registration")};try{if(!PD())return{data:null,error:new Nn("Browser does not support WebAuthn",null)};let{data:l,error:f}=yield this._enroll({friendlyName:t});if(!l)return yield this.client.mfa.listFactors().then(v=>{var g;return(g=v.data)===null||g===void 0?void 0:g.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===t&&w.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:f};let{data:p,error:m}=yield this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:e,rpOrigins:r},signal:i},{create:o});return p?this._verify({factorId:l.id,challengeId:p.challengeId,webauthn:{rpId:e,rpOrigins:r,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(l){return q(l)?{data:null,error:l}:{data:null,error:new Nn("Unexpected error in register",l)}}})}};TD();var O2={url:iD,storageKey:oD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function VD(n,t,e){return _(this,null,function*(){return yield e()})}var ia={},R2=(()=>{class n{get jwks(){var e,r;return(r=(e=ia[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){ia[this.storageKey]=Object.assign(Object.assign({},ia[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=ia[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ia[this.storageKey]=Object.assign(Object.assign({},ia[this.storageKey]),{cachedAt:e})}constructor(e){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&Jt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let o=Object.assign(Object.assign({},O2),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new ra({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=cp(o.fetch),this.lock=o.lock||VD,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Jt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=ly:this.lock=VD,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new mp(this)},this.persistSession?(o.storage?this.storage=o.storage:lp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ay(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=ay(this.memoryStorage)),Jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",s=>_(this,null,function*(){this._debug("received broadcast notification from other tab or client",s),yield this._notifyAllSubscribers(s.data.event,s.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${np}) ${new Date().toISOString()}`,...e),this}initialize(){return _(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=_(this,null,function*(){return yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return _(this,null,function*(){var e;try{let r=yD(window.location.href),i="none";if(this._isImplicitGrantCallback(r)?i="implicit":(yield this._isPKCECallback(r))&&(i="pkce"),Jt()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=yield this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),dD(s)){let f=(e=s.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:s}}return yield this._removeSession(),{error:s}}let{session:a,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),yield this._saveSession(a),setTimeout(()=>_(this,null,function*(){l==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return q(r)?{error:r}:{error:new Nn("Unexpected error during initialization",r)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return _(this,null,function*(){var r,i,o;try{let s=yield X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:kn}),{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};let f=a.session,p=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}})}signUp(e){return _(this,null,function*(){var r,i,o;try{let s;if("email"in e){let{email:m,password:v,options:g}=e,w=null,S=null;this.flowType==="pkce"&&([w,S]=yield Mo(this.storage,this.storageKey)),s=yield X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:m,password:v,data:(r=g?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:w,code_challenge_method:S},xform:kn})}else if("phone"in e){let{phone:m,password:v,options:g}=e;s=yield X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:v,data:(i=g?.data)!==null&&i!==void 0?i:{},channel:(o=g?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:kn})}else throw new So("You must provide either an email or phone number and a password");let{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};let f=a.session,p=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithPassword(e){return _(this,null,function*(){try{let r;if("email"in e){let{email:s,password:a,options:l}=e;r=yield X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:oy})}else if("phone"in e){let{phone:s,password:a,options:l}=e;r=yield X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:oy})}else throw new So("You must provide either an email or phone number and a password");let{data:i,error:o}=r;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Xr}:(i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(e){return _(this,null,function*(){var r,i,o,s;return yield this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(e){return _(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>_(this,null,function*(){return this._exchangeCodeForSession(e)}))})}signInWithWeb3(e){return _(this,null,function*(){let{chain:r}=e;switch(r){case"ethereum":return yield this.signInWithEthereum(e);case"solana":return yield this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}})}signInWithEthereum(e){return _(this,null,function*(){var r,i,o,s,a,l,f,p,m,v,g;let w,S;if("message"in e)w=e.message,S=e.signature;else{let{chain:E,wallet:D,statement:G,options:B}=e,L;if(Jt())if(typeof D=="object")L=D;else{let Tr=window;if("ethereum"in Tr&&typeof Tr.ethereum=="object"&&"request"in Tr.ethereum&&typeof Tr.ethereum.request=="function")L=Tr.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=D}let fe=new URL((r=B?.url)!==null&&r!==void 0?r:window.location.href),ht=yield L.request({method:"eth_requestAccounts"}).then(Tr=>Tr).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ht||ht.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let Te=cy(ht[0]),st=(i=B?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!st){let Tr=yield L.request({method:"eth_chainId"});st=MD(Tr)}let ii={domain:fe.host,address:Te,statement:G,uri:fe.href,version:"1",chainId:st,nonce:(o=B?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=B?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=B?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(f=B?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(p=B?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(m=B?.signInWithEthereum)===null||m===void 0?void 0:m.resources};w=OD(ii),S=yield L.request({method:"personal_sign",params:[AD(w),Te]})}try{let{data:E,error:D}=yield X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:S},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:kn});if(D)throw D;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new Xr}:(E.session&&(yield this._saveSession(E.session),yield this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:D})}catch(E){if(q(E))return{data:{user:null,session:null},error:E};throw E}})}signInWithSolana(e){return _(this,null,function*(){var r,i,o,s,a,l,f,p,m,v,g,w;let S,E;if("message"in e)S=e.message,E=e.signature;else{let{chain:D,wallet:G,statement:B,options:L}=e,fe;if(Jt())if(typeof G=="object")fe=G;else{let Te=window;if("solana"in Te&&typeof Te.solana=="object"&&("signIn"in Te.solana&&typeof Te.solana.signIn=="function"||"signMessage"in Te.solana&&typeof Te.solana.signMessage=="function"))fe=Te.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof G!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");fe=G}let ht=new URL((r=L?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in fe&&fe.signIn){let Te=yield fe.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:ht.host,uri:ht.href}),B?{statement:B}:null)),st;if(Array.isArray(Te)&&Te[0]&&typeof Te[0]=="object")st=Te[0];else if(Te&&typeof Te=="object"&&"signedMessage"in Te&&"signature"in Te)st=Te;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in st&&"signature"in st&&(typeof st.signedMessage=="string"||st.signedMessage instanceof Uint8Array)&&st.signature instanceof Uint8Array)S=typeof st.signedMessage=="string"?st.signedMessage:new TextDecoder().decode(st.signedMessage),E=st.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in fe)||typeof fe.signMessage!="function"||!("publicKey"in fe)||typeof fe!="object"||!fe.publicKey||!("toBase58"in fe.publicKey)||typeof fe.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${ht.host} wants you to sign in with your Solana account:`,fe.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${ht.href}`,`Issued At: ${(o=(i=L?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=L?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((a=L?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((l=L?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((f=L?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((p=L?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((v=(m=L?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||v===void 0)&&v.length?["Resources",...L.signInWithSolana.resources.map(st=>`- ${st}`)]:[]].join(`
`);let Te=yield fe.signMessage(new TextEncoder().encode(S),"utf8");if(!Te||!(Te instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=Te}}try{let{data:D,error:G}=yield X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:ei(E)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:kn});if(G)throw G;return!D||!D.session||!D.user?{data:{user:null,session:null},error:new Xr}:(D.session&&(yield this._saveSession(D.session),yield this._notifyAllSubscribers("SIGNED_IN",D.session)),{data:Object.assign({},D),error:G})}catch(D){if(q(D))return{data:{user:null,session:null},error:D};throw D}})}_exchangeCodeForSession(e){return _(this,null,function*(){let r=yield Oi(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{let{data:s,error:a}=yield X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:kn});if(yield ti(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Xr}:(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(q(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}})}signInWithIdToken(e){return _(this,null,function*(){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=e,l=yield X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:kn}),{data:f,error:p}=l;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Xr}:(f.session&&(yield this._saveSession(f.session),yield this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(e){return _(this,null,function*(){var r,i,o,s,a;try{if("email"in e){let{email:l,options:f}=e,p=null,m=null;this.flowType==="pkce"&&([p,m]=yield Mo(this.storage,this.storageKey));let{error:v}=yield X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=f?.data)!==null&&r!==void 0?r:{},create_user:(i=f?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:m},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){let{phone:l,options:f}=e,{data:p,error:m}=yield X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=f?.data)!==null&&o!==void 0?o:{},create_user:(s=f?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(a=f?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:m}}throw new So("You must provide either an email or phone number.")}catch(l){if(q(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(e){return _(this,null,function*(){var r,i;try{let o,s;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:l}=yield X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:kn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let f=a.session,p=a.user;return f?.access_token&&(yield this._saveSession(f),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(q(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithSSO(e){return _(this,null,function*(){var r,i,o;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=yield Mo(this.storage,this.storageKey)),yield X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:xD})}catch(s){if(q(s))return{data:null,error:s};throw s}})}reauthenticate(){return _(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return _(this,null,function*(){try{return yield this._useSession(e=>_(this,null,function*(){let{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new Pn;let{error:o}=yield X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}}))}catch(e){if(q(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return _(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in e){let{email:i,type:o,options:s}=e,{error:a}=yield X(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:i,type:o,options:s}=e,{data:a,error:l}=yield X(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new So("You must provide either an email or phone number and a type")}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return _(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return this._useSession(r=>_(this,null,function*(){return r}))}))})}_acquireLock(e,r){return _(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=_(this,null,function*(){return yield i,yield r()});return this.pendingInLock.push(_(this,null,function*(){try{yield o}catch{}})),o}return yield this.lock(`lock:${this.storageKey}`,e,()=>_(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push(_(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return _(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield e(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return _(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=yield Oi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at*1e3-Date.now()<ip:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){let a=yield Oi(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=dp()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,p,m)=>(!a&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,m))})}return{data:{session:e},error:null}}let{data:o,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return _(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return _(this,null,function*(){try{return e?yield X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:xr}):yield this._useSession(r=>_(this,null,function*(){var i,o,s;let{data:a,error:l}=r;if(l)throw l;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pn}:yield X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:xr})}))}catch(r){if(q(r))return uD(r)&&(yield this._removeSession(),yield ti(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}})}updateUser(i){return _(this,arguments,function*(e,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._updateUser(e,r)}))})}_updateUser(i){return _(this,arguments,function*(e,r={}){try{return yield this._useSession(o=>_(this,null,function*(){let{data:s,error:a}=o;if(a)throw a;if(!s.session)throw new Pn;let l=s.session,f=null,p=null;this.flowType==="pkce"&&e.email!=null&&([f,p]=yield Mo(this.storage,this.storageKey));let{data:m,error:v}=yield X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:p}),jwt:l.access_token,xform:xr});if(v)throw v;return l.user=m.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}}))}catch(o){if(q(o))return{data:{user:null},error:o};throw o}})}setSession(e){return _(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return _(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new Pn;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=up(e.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:l,error:f}=yield this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!l)return{data:{user:null,session:null},error:null};s=l}else{let{data:l,error:f}=yield this._getUser(e.access_token);if(f)throw f;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:i-r,expires_at:i},yield this._saveSession(s),yield this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(q(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(e){return _(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return _(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){var i;if(!e){let{data:a,error:l}=r;if(l)throw l;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Pn;let{data:o,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(e,r){return _(this,null,function*(){try{if(!Jt())throw new Do("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Do(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new pc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Do("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new pc("No code detected.");let{data:B,error:L}=yield this._exchangeCodeForSession(e.code);if(L)throw L;let fe=new URL(window.location.href);return fe.searchParams.delete("code"),window.history.replaceState(window.history.state,"",fe.toString()),{data:{session:B.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:l,expires_at:f,token_type:p}=e;if(!s||!l||!a||!p)throw new Do("No session defined in URL");let m=Math.round(Date.now()/1e3),v=parseInt(l),g=m+v;f&&(g=parseInt(f));let w=g-m;w*1e3<=Co&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${v}s`);let S=g-v;m-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,g,m):m-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,g,m);let{data:E,error:D}=yield this._getUser(s);if(D)throw D;let G={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:v,expires_at:g,refresh_token:a,token_type:p,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:G,redirectType:e.type},error:null}}catch(i){if(q(i))return{data:{session:null,redirectType:null},error:i};throw i}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return _(this,null,function*(){let r=yield Oi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)})}signOut(){return _(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return _(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(r=>_(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return{error:s};let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:l}=yield this.admin.signOut(a,e);if(l&&!(cD(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(yield this._removeSession(),yield ti(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){let r=vD(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),_(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:i}}}_emitInitialSession(e){return _(this,null,function*(){return yield this._useSession(r=>_(this,null,function*(){var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;yield(i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){yield(o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}}))})}resetPasswordForEmail(i){return _(this,arguments,function*(e,r={}){let o=null,s=null;this.flowType==="pkce"&&([o,s]=yield Mo(this.storage,this.storageKey,!0));try{return yield X(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(q(a))return{data:null,error:a};throw a}})}getUserIdentities(){return _(this,null,function*(){var e;try{let{data:r,error:i}=yield this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}})}linkIdentity(e){return _(this,null,function*(){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)})}linkIdentityOAuth(e){return _(this,null,function*(){var r;try{let{data:i,error:o}=yield this._useSession(s=>_(this,null,function*(){var a,l,f,p,m;let{data:v,error:g}=s;if(g)throw g;let w=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return yield X(this.fetch,"GET",w,{headers:this.headers,jwt:(m=(p=v.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0})}));if(o)throw o;return Jt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(q(i))return{data:{provider:e.provider,url:null},error:i};throw i}})}linkIdentityIdToken(e){return _(this,null,function*(){return yield this._useSession(r=>_(this,null,function*(){var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:l,token:f,access_token:p,nonce:m}=e,v=yield X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:l,id_token:f,access_token:p,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:kn}),{data:g,error:w}=v;return w?{data:{user:null,session:null},error:w}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Xr}:(g.session&&(yield this._saveSession(g.session),yield this._notifyAllSubscribers("USER_UPDATED",g.session)),{data:g,error:w})}catch(o){if(q(o))return{data:{user:null,session:null},error:o};throw o}}))})}unlinkIdentity(e){return _(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){var i,o;let{data:s,error:a}=r;if(a)throw a;return yield X(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})}))}catch(r){if(q(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return _(this,null,function*(){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return yield wD(o=>_(this,null,function*(){return o>0&&(yield bD(200*Math.pow(2,o-1))),this._debug(r,"refreshing attempt",o),yield X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kn})}),(o,s)=>{let a=200*Math.pow(2,o);return s&&sp(s)&&Date.now()+a-i<Co})}catch(i){if(this._debug(r,"error",i),q(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){return _(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),Jt()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})}_recoverAndRefresh(){return _(this,null,function*(){var e,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=yield Oi(this.storage,this.storageKey);if(o&&this.userStorage){let a=yield Oi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},yield To(this.userStorage,this.storageKey+"-user",a)),o.user=(e=a?.user)!==null&&e!==void 0?e:dp()}else if(o&&!o.user&&!o.user){let a=yield Oi(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,yield ti(this.storage,this.storageKey+"-user"),yield To(this.storage,this.storageKey,o)):o.user=dp()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&(yield this._removeSession());return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ip;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${ip}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=yield this._callRefreshToken(o.refresh_token);a&&(console.error(a),sp(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:l}=yield this._getUser(o.access_token);!l&&a?.user?(o.user=a.user,yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}})}_callRefreshToken(e){return _(this,null,function*(){var r,i;if(!e)throw new Pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new mc;let{data:s,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Pn;yield this._saveSession(s.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),q(s)){let a={data:null,error:s};return sp(s)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(e,r,i=!0){return _(this,null,function*(){let o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(l=>_(this,null,function*(){try{yield l.callback(e,r)}catch(f){s.push(f)}}));if(yield Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}})}_saveSession(e){return _(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;let r=Object.assign({},e),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&(yield To(this.userStorage,this.storageKey+"-user",{user:r.user}));let o=Object.assign({},r);delete o.user;let s=iy(o);yield To(this.storage,this.storageKey,s)}else{let o=iy(r);yield To(this.storage,this.storageKey,o)}})}_removeSession(){return _(this,null,function*(){this._debug("#_removeSession()"),yield ti(this.storage,this.storageKey),yield ti(this.storage,this.storageKey+"-code-verifier"),yield ti(this.storage,this.storageKey+"-user"),this.userStorage&&(yield ti(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Jt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return _(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),Co);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>_(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return _(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return _(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return _(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return _(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>_(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(r=>_(this,null,function*(){let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-e)/Co);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Co}ms, refresh threshold is ${rp} ticks`),o<=rp&&(yield this._callRefreshToken(i.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof gc)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return _(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Jt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>_(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return _(this,null,function*(){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,r,i){return _(this,null,function*(){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=yield Mo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(l.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`})}_unenroll(e){return _(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){var i;let{data:o,error:s}=r;return s?{data:null,error:s}:yield X(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(q(r))return{data:null,error:r};throw r}})}_enroll(e){return _(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){var i,o;let{data:s,error:a}=r;if(a)return{data:null,error:a};let l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:p}=yield X(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&f.type==="totp"&&(!((o=f?.totp)===null||o===void 0)&&o.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})}))}catch(r){if(q(r))return{data:null,error:r};throw r}})}_verify(e){return _(this,null,function*(){return this._acquireLock(-1,()=>_(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return{data:null,error:s};let a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?LD(e.webauthn.credential_response):jD(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:f}=yield X(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:f})}))}catch(r){if(q(r))return{data:null,error:r};throw r}}))})}_challenge(e){return _(this,null,function*(){return this._acquireLock(-1,()=>_(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return{data:null,error:s};let a=yield X(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:kD(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:FD(l.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(r){if(q(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(e){return _(this,null,function*(){let{data:r,error:i}=yield this._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})})}_listFactors(){return _(this,null,function*(){var e;let{data:{user:r},error:i}=yield this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(e=r?.factors)!==null&&e!==void 0?e:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}})}_getAuthenticatorAssuranceLevel(){return _(this,null,function*(){return this._acquireLock(-1,()=>_(this,null,function*(){return yield this._useSession(e=>_(this,null,function*(){var r,i;let{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=up(o.access_token),l=null;a.aal&&(l=a.aal);let f=l;((i=(r=o.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");let m=a.amr||[];return{data:{currentLevel:l,nextLevel:f,currentAuthenticationMethods:m},error:null}}))}))})}fetchJwk(i){return _(this,arguments,function*(e,r={keys:[]}){let o=r.keys.find(f=>f.kid===e);if(o)return o;let s=Date.now();if(o=this.jwks.keys.find(f=>f.kid===e),o&&this.jwks_cached_at+lD>s)return o;let{data:a,error:l}=yield X(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,o=a.keys.find(f=>f.kid===e),!o)?null:o})}getClaims(i){return _(this,arguments,function*(e,r={}){try{let o=e;if(!o){let{data:S,error:E}=yield this.getSession();if(E||!S.session)return{data:null,error:E};o=S.session.access_token}let{header:s,payload:a,signature:l,raw:{header:f,payload:p}}=up(o);r?.allowExpired||CD(a.exp);let m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!m){let{error:S}=yield this.getUser(o);if(S)throw S;return{data:{claims:a,header:s,signature:l},error:null}}let v=SD(s.alg),g=yield crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!(yield crypto.subtle.verify(v,g,l,mD(`${f}.${p}`))))throw new xo("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(o){if(q(o))return{data:null,error:o};throw o}})}}return n.nextInstanceID=0,n})(),fy=R2;var N2=fy,py=N2;var gp=class extends py{constructor(t){super(t)}};var vp=class{constructor(t,e,r){var i,o,s;this.supabaseUrl=t,this.supabaseKey=e;let a=rD(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);let l=`sb-${a.hostname.split(".")[0]}-auth-token`,f={db:JS,realtime:eD,auth:Object.assign(Object.assign({},XS),{storageKey:l}),global:QS},p=nD(r??{},f);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=p.auth)!==null&&s!==void 0?s:{},this.headers,p.global.fetch),this.fetch=tD(e,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new kS(new URL("rest/v1",a).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new uc(this.storageUrl.href,this.headers,this.fetch,r?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new Xl(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return _(this,null,function*(){var t,e;if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:s,flowType:a,lock:l,debug:f},p,m){let v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gp({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),p),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:o,flowType:a,lock:l,debug:f,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new sc(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var UD=(n,t,e)=>new vp(n,t,e);function P2(){if(typeof window<"u"||typeof process>"u")return!1;let n=process.version;if(n==null)return!1;let t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}P2()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var hy={production:!1,supabaseUrl:"https://qgtquamtmzqvytxwlwst.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFndHF1YW10bXpxdnl0eHdsd3N0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2NTU0NzMsImV4cCI6MjA3NzIzMTQ3M30.xR4HjqI1lYoFLgbZl1zJ4eLRXjM_uraIdK2l_6t2G4A"};var un=class n{supabase;constructor(){let t={getItem:e=>_(null,null,function*(){return localStorage.getItem(e)}),setItem:(e,r)=>_(null,null,function*(){localStorage.setItem(e,r)}),removeItem:e=>_(null,null,function*(){localStorage.removeItem(e)})};this.supabase=UD(hy.supabaseUrl,hy.supabaseKey,{auth:{storage:t,detectSessionInUrl:!1}})}getClient(){return this.supabase}static \u0275fac=function(e){return new(e||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var ge=class n{constructor(t,e,r){this.http=t;this.router=e;this.supabaseService=r;this.checkStoredToken();let i=this.supabaseService.getClient();i.auth.getSession().then(({data:o})=>{let s=o.session?.user??null;s&&this.loadAndPublishUser(s.id)}).catch(o=>console.debug("[AuthService] getSession err",o)),i.auth.onAuthStateChange((o,s)=>{let a=s?.user??null;a?this.loadAndPublishUser(a.id):this.currentUserSubject.next(null)})}apiUrl="http://localhost:3000/api";currentUserSubject=new at(null);currentUser$=this.currentUserSubject.asObservable();loadAndPublishUser(t){return _(this,null,function*(){try{let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.from("users").select("*").eq("id",t).maybeSingle();if(i){console.error("[AuthService] load user error",i),this.currentUserSubject.next(null);return}let o=r??null;if(o&&!o.company_id){let{data:s,error:a}=yield e.from("companies").select("id").eq("admin_user_id",t).maybeSingle();if(!a&&s?.id){let{error:l}=yield e.from("users").update({company_id:s.id}).eq("id",t);l?console.warn("[AuthService] non ho potuto aggiornare users.company_id",l):o=Z(A({},o),{company_id:s.id})}o&&typeof o.company_id=="string"&&(o.company_id==="null"||o.company_id==="undefined"||o.company_id.trim()==="")&&(o=Z(A({},o),{company_id:null})),this.currentUserSubject.next(o),console.debug("[AuthService] loaded user row",o)}this.currentUserSubject.next(o),console.debug("[AuthService] loaded user row",o)}catch(e){console.error("[AuthService] unexpected error loadAndPublishUser",e),this.currentUserSubject.next(null)}})}register(t){return Q(this.registerWithSupabase(t))}login(t,e){return _(this,null,function*(){let r=this.supabaseService.getClient(),{data:i,error:o}=yield r.auth.signInWithPassword({email:t,password:e});if(o)throw o;if(!i||!i.user)throw new Error("Login fallito: nessun user restituito dal provider");let s=i.user.id,{data:a,error:l}=yield r.from("users").select("*").eq("id",s).maybeSingle();if(l)throw l;let f=a;if(!f){let{data:m,error:v}=yield r.from("users").insert([{id:s,company_id:null,first_name:i.user.user_metadata?.first_name||null,last_name:i.user.user_metadata?.last_name||null,email:i.user.email,phone:i.user.user_metadata?.phone||null,timezone:i.user.user_metadata?.timezone||"Europe/Rome",is_active:!0,role:i.user.user_metadata?.role||"employee"}]).select().maybeSingle();if(v)throw v;f=m}let p=i.session?.access_token??null;return p?this.storeAuthData({token:p,user:f}):localStorage.setItem("user_data",JSON.stringify(f)),this.currentUserSubject.next(f),{auth:i,user:f}})}loginWithSupabase(t){return _(this,null,function*(){let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.auth.signInWithPassword({email:t.email,password:t.password});if(i)throw i;if(r.user){let{data:o,error:s}=yield e.from("users").select("*").eq("id",r.user.id).single();if(s)throw s;this.storeAuthData({token:r.session.access_token,user:o}),this.currentUserSubject.next(o)}return r})}getAuthHeaders(){let t=this.getToken();return new pr({Authorization:`Bearer ${t}`,"Content-Type":"application/json"})}logout(){this.supabaseService.getClient().auth.signOut(),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),this.currentUserSubject.next(null),this.router.navigate(["/login"])}getToken(){return localStorage.getItem("auth_token")}isAuthenticated(){return!!this.getToken()}hasRole(t){return this.currentUserSubject.value?.role===t}storeAuthData(t){t.token&&localStorage.setItem("auth_token",t.token),t.user&&localStorage.setItem("user_data",JSON.stringify(t.user))}checkStoredToken(){let t=this.getToken(),e=localStorage.getItem("user_data");if(t&&e)try{let r=JSON.parse(e);this.currentUserSubject.next(r)}catch{this.logout()}}retryOnLock(t,e=4,r=120){return _(this,null,function*(){let i=0;for(;;)try{return yield t()}catch(o){let s=o?.name??"",a=o?.message??"";if(!(s==="NavigatorLockAcquireTimeoutError"||a.includes("NavigatorLock")||a.includes("acquire"))||i>=e-1)throw o;let f=r*Math.pow(2,i)+Math.round(Math.random()*r);yield new Promise(p=>setTimeout(p,f)),i++}})}registerAdmin(t){return Q(this.registerWithSupabase(t))}registerUser(t){return Q(this.registerUserWithSupabase(t))}registerWithSupabase(t){return _(this,null,function*(){let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.auth.signUp({email:t.admin.email,password:t.admin.password,options:{data:{first_name:t.admin.first_name,last_name:t.admin.last_name,role:"admin"}}});if(i)throw i;if(!r||!r.user)throw new Error("Auth provider non ha restituito user");let o=r.user.id;try{let{error:s}=yield e.from("users").insert([{id:o,company_id:null,first_name:t.admin.first_name,last_name:t.admin.last_name,email:t.admin.email,phone:t.admin.phone,timezone:t.admin.timezone||"Europe/Rome",is_active:!0,role:"admin"}]);if(s)throw s;let{data:a,error:l}=yield e.from("companies").insert([{name:t.company.name,vat:t.company.vat,address:t.company.address,city:t.company.city,province:t.company.province,civic_number:t.company.civic_number,website:t.company.website,legal_form:t.company.legal_form,category:t.company.category,opening_hours:t.company.opening_hours,admin_user_id:o}]).select().single();if(l)throw yield e.from("users").delete().eq("id",o),l;let{error:f}=yield e.from("users").update({company_id:a.id}).eq("id",o);if(f)throw yield e.from("companies").delete().eq("id",a.id),yield e.from("users").delete().eq("id",o),f;return{user:r.user,company:a}}catch(s){throw s}})}registerUserWithSupabase(t){return _(this,null,function*(){let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.from("companies").select("id").eq("vat",t.company_vat).single();if(i||!r)throw new Error("Azienda non trovata per la partita IVA fornita");let{data:o,error:s}=yield e.auth.signUp({email:t.user.email,password:t.user.password,options:{data:{first_name:t.user.first_name,last_name:t.user.last_name,role:"employee"}}});if(s)throw s;if(!o||!o.user)throw new Error("Registrazione fallita: impossibile creare l'utente (auth returned no user)");let a=o.user.id,{error:l}=yield e.from("users").insert([{id:a,company_id:r.id,first_name:t.user.first_name,last_name:t.user.last_name,email:t.user.email,phone:t.user.phone,timezone:t.user.timezone,is_active:!0,role:"employee"}]);if(l)throw l;return{user:o.user}})}updateUserProfile(t,e){return _(this,null,function*(){let r=this.supabaseService.getClient();try{let s=yield r.auth.getSession();console.debug("[AuthService] session user id:",s?.data?.session?.user?.id??null)}catch(s){console.debug("[AuthService] getSession failed",s)}console.debug("[AuthService] updateUserProfile patch:",e,"target userId:",t);let{data:i,error:o}=yield r.from("users").update(e).eq("id",t).select().maybeSingle();if(o)throw console.error("[AuthService] updateUserProfile error:",o),o;return i&&this.currentUserSubject.next(i),i})}static \u0275fac=function(e){return new(e||n)(V(hr),V(Ie),V(un))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function k2(n,t){if(n&1&&(u(0,"div",19),d(1),c()),n&2){let e=b();h(),M(" ",e.errorMessage," ")}}function F2(n,t){n&1&&(u(0,"span",22),d(1,"Email obbligatoria"),c())}function L2(n,t){n&1&&(u(0,"span",22),d(1,"Email non valida"),c())}function j2(n,t){if(n&1&&(u(0,"div",20),x(1,F2,2,0,"span",21)(2,L2,2,0,"span",21),c()),n&2){let e=b();h(),y("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.required),h(),y("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.email)}}function V2(n,t){n&1&&(u(0,"span",22),d(1,"Password obbligatoria"),c())}function U2(n,t){if(n&1&&(u(0,"span",22),d(1),c()),n&2){let e=b(2);h(),M(" Minimo ",e.password==null||e.password.errors==null?null:e.password.errors.minlength.requiredLength," caratteri ")}}function B2(n,t){if(n&1&&(u(0,"div",20),x(1,V2,2,0,"span",21)(2,U2,2,1,"span",21),c()),n&2){let e=b();h(),y("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.required),h(),y("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.minlength)}}function z2(n,t){n&1&&(u(0,"span"),d(1,"Accedi"),c())}function $2(n,t){n&1&&O(0,"div",23)}var yp=class n{constructor(t,e,r){this.fb=t;this.authService=e;this.router=r;this.loginForm=this.fb.group({email:["",[H.required,H.email]],password:["",[H.required,H.minLength(6)]]})}loginForm;isLoading=!1;errorMessage="";ngOnInit(){this.authService.isAuthenticated()&&this.router.navigate(["/home"])}onSubmit(){return _(this,null,function*(){if(this.loginForm.valid){this.isLoading=!0,this.errorMessage="";let t=this.loginForm.value;try{yield this.authService.login(t.email,t.password),this.isLoading=!1,yield this.router.navigate(["/home"])}catch(e){this.isLoading=!1,this.errorMessage=e?.message||e?.error?.message||"Errore durante il login. Riprova.",console.error("Login error:",e)}}else this.markFormGroupTouched()})}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(t=>{this.loginForm.get(t)?.markAsTouched()})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(e){return new(e||n)(C(Cr),C(ge),C(Ie))};static \u0275cmp=me({type:n,selectors:[["app-login"]],decls:31,vars:11,consts:[[1,"gradient-container"],[1,"form-card",2,"max-width","440px"],[1,"section-header"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"generic-form",3,"ngSubmit","formGroup"],["class","status-message error",4,"ngIf"],[1,"form-group"],[1,"form-label"],["type","email","formControlName","email","placeholder","inserisci@email.com",1,"form-input"],["class","error-messages",4,"ngIf"],["type","password","formControlName","password","placeholder","Inserisci la password",1,"form-input"],["type","submit",1,"promethea-button","outline",3,"disabled"],[4,"ngIf"],["class","loading-spinner small",4,"ngIf"],[1,"form-footer"],["routerLink","/register",1,"link"],["routerLink","/forgot-password",1,"link","text-sm"],[1,"status-message","error"],[1,"error-messages"],["class","error",4,"ngIf"],[1,"error"],[1,"loading-spinner","small"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),d(5,"Accedi alla Piattaforma"),c(),u(6,"p",5),d(7,"Inserisci le tue credenziali per accedere"),c()()(),u(8,"form",6),T("ngSubmit",function(){return r.onSubmit()}),x(9,k2,2,1,"div",7),u(10,"div",8)(11,"label",9),d(12,"Email"),c(),O(13,"input",10),x(14,j2,3,2,"div",11),c(),u(15,"div",8)(16,"label",9),d(17,"Password"),c(),O(18,"input",12),x(19,B2,3,2,"div",11),c(),u(20,"button",13),x(21,z2,2,0,"span",14)(22,$2,1,0,"div",15),c(),u(23,"div",16)(24,"div",5),d(25," Non hai un account? "),O(26,"br"),u(27,"a",17),d(28,"Registrati"),c()(),u(29,"a",18),d(30,"Password dimenticata?"),c()()()()()),e&2&&(h(8),y("formGroup",r.loginForm),h(),y("ngIf",r.errorMessage),h(4),xe("error",(r.email==null?null:r.email.invalid)&&(r.email==null?null:r.email.touched)),h(),y("ngIf",(r.email==null?null:r.email.invalid)&&(r.email==null?null:r.email.touched)),h(4),xe("error",(r.password==null?null:r.password.invalid)&&(r.password==null?null:r.password.touched)),h(),y("ngIf",(r.password==null?null:r.password.invalid)&&(r.password==null?null:r.password.touched)),h(),y("disabled",r.isLoading),h(),y("ngIf",!r.isLoading),h(),y("ngIf",r.isLoading))},dependencies:[_e,Ne,Sr,Er,Ke,Ze,wr,On,Qn,Pt],styles:[".link[_ngcontent-%COMP%]{color:var(--text-color)}.form-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:var(--gutter-sm)}"]})};var sa=class n{constructor(t){this.supabaseService=t}listByCompany(t){let e=this.supabaseService.getClient();return Q(e.from("employee_invitations").select("*").eq("company_id",t).order("created_at",{ascending:!0}).then(r=>{if(r.error)throw r.error;return r.data||[]}))}addInvite(t,e,r){let i=this.supabaseService.getClient(),o={company_id:t,email:e.toLowerCase(),invited_by:r??null};return Q(i.from("employee_invitations").insert(o).single().then(s=>{if(s.error)throw s.error;return s.data}))}removeInviteById(t){let e=this.supabaseService.getClient();return Q(e.from("employee_invitations").delete().eq("id",t).then(r=>{if(r.error)throw r.error;return r}))}isEmailInvited(t,e){if(!t)return Q(Promise.resolve(!1));let r=this.supabaseService.getClient();return Q(r.from("employee_invitations").select("id").eq("company_id",t).ilike("email",e).limit(1).then(i=>{if(i.error)throw i.error;return i.data&&i.data.length>0}))}getInviteForEmail(t){let e=this.supabaseService.getClient();return Q(e.from("employee_invitations").select("*").ilike("email",t).limit(1).then(r=>{if(r.error)throw r.error;return r.data&&r.data.length?r.data[0]:null}))}markAccepted(t){let e=this.supabaseService.getClient();return Q(e.from("employee_invitations").update({accepted:!0}).eq("id",t).then(r=>{if(r.error)throw r.error;return r.data}))}static \u0275fac=function(e){return new(e||n)(V(un))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var wt=class n{constructor(t,e,r){this.http=t;this.authService=e;this.supabaseService=r}baseUrl="/api/companies";getAziendaByAdmin(t){if(!t||t==="null"||t==="undefined")return console.warn("[CompanyService] getAziendaByAdmin called with invalid adminUserId:",t),$(null);let r=this.supabaseService.getClient().from("companies").select("*").eq("admin_user_id",t).maybeSingle().then(i=>{if(console.log("[CompanyService] getAziendaByAdmin raw response",i),i.error)throw i.error;return i.data??null});return Q(r)}getAzienda(t){if(!t||t==="null"||t==="undefined")return Q(Promise.resolve(null));let r=this.supabaseService.getClient().from("companies").select("*").eq("id",t).maybeSingle().then(i=>{if(i.error)throw console.error("[CompanyService] getAzienda error",i.error),i.error;return i.data});return Q(r)}getAziendaForUser(t,e){let r=this.supabaseService.getClient(),i=_(this,null,function*(){try{if(e&&e!=="null"&&e!=="undefined"){let o=yield r.from("companies").select("*").eq("id",e).maybeSingle();if(o.error)console.warn("[CompanyService] getAziendaForUser by companyId error",o.error);else if(o.data)return console.debug("[CompanyService] found company by companyId",o.data),o.data}if(t){let o=yield r.from("companies").select("*").eq("admin_user_id",t).maybeSingle();if(o.error)console.warn("[CompanyService] getAziendaForUser by admin_user_id error",o.error);else if(o.data)return console.debug("[CompanyService] found company by admin_user_id",o.data),o.data}return null}catch(o){throw console.error("[CompanyService] getAziendaForUser unexpected",o),o}});return Q(i)}aggiornaAzienda(t,e){let r=this.supabaseService.getClient(),i=_(this,null,function*(){try{let o=yield r.from("companies").update(e).eq("id",t).select().maybeSingle();if(o.error)throw console.error("[CompanyService] aggiornaAzienda supabase error",o.error,{companyId:t,payload:e}),o.error;return console.debug("[CompanyService] aggiornaAzienda success",o.data),o.data}catch(o){throw console.error("[CompanyService] aggiornaAzienda unexpected",o,{companyId:t,payload:e}),o}});return Q(i)}getDipendenti(t){let e=this.authService.getAuthHeaders();return this.http.get(`${this.baseUrl}/${t}/users`,{headers:e})}cambiaStatoDipendente(t,e){let r=this.authService.getAuthHeaders();return this.http.patch(`${this.baseUrl}/users/${t}`,{is_active:e},{headers:r})}eliminaDipendente(t){let e=this.authService.getAuthHeaders();return this.http.delete(`${this.baseUrl}/users/${t}`,{headers:e})}creaDipendente(t){let e=this.authService.getAuthHeaders(),r={company_vat:t.company_vat||t.company_vat_field||t.company?.vat||null,user:{first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone??null,timezone:t.timezone??"Europe/Rome",hire_date:t.hire_date??null,password:t.password??(()=>{let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%",o="";for(let s=0;s<12;s++)o+=i.charAt(Math.floor(Math.random()*i.length));return o})()}};return this.http.post(`${this.baseUrl}/users`,r,{headers:e})}static \u0275fac=function(e){return new(e||n)(V(hr),V(ge),V(un))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function H2(n,t){n&1&&(u(0,"span",42),d(1,"Obbligatorio"),c())}function G2(n,t){if(n&1&&(u(0,"div",40),x(1,H2,2,0,"span",41),c()),n&2){let e=b(2);h(),y("ngIf",e.company_name==null||e.company_name.errors==null?null:e.company_name.errors.required)}}function W2(n,t){n&1&&(u(0,"span",42),d(1,"Obbligatorio"),c())}function q2(n,t){n&1&&(u(0,"span",42),d(1,"Formato non valido"),c())}function Y2(n,t){if(n&1&&(u(0,"div",40),x(1,W2,2,0,"span",41)(2,q2,2,0,"span",41),c()),n&2){let e=b(2);h(),y("ngIf",e.vat==null||e.vat.errors==null?null:e.vat.errors.required),h(),y("ngIf",e.vat==null||e.vat.errors==null?null:e.vat.errors.pattern)}}function K2(n,t){if(n&1&&(u(0,"option",43),d(1),c()),n&2){let e=t.$implicit;y("value",e),h(),R(e)}}function Z2(n,t){if(n&1&&(u(0,"option",43),d(1),c()),n&2){let e=t.$implicit;y("value",e),h(),R(e)}}function Q2(n,t){if(n&1&&(u(0,"div",44)(1,"div",45),d(2),c(),O(3,"input",46),u(4,"span",5),d(5,"\u2014"),c(),O(6,"input",47),u(7,"label",48),O(8,"input",49),u(9,"span",5),d(10,"Chiuso"),c()()()),n&2){let e,r,i,o=t.$implicit,s=b(2);xe("closed",(e=s.registerForm.get("opening_hours."+o.key+".closed"))==null?null:e.value),y("formGroupName",o.key),h(2),R(o.label),h(),_s("aria-label",rl("",o.label," apertura")),y("disabled",(r=s.registerForm.get("opening_hours."+o.key+".closed"))==null?null:r.value),h(3),_s("aria-label",rl("",o.label," chiusura")),y("disabled",(i=s.registerForm.get("opening_hours."+o.key+".closed"))==null?null:i.value),h(2),_s("aria-label",rl("",o.label," chiuso"))}}function J2(n,t){if(n&1&&(u(0,"div",10)(1,"h2",4)(2,"span",22),d(3,"business"),c(),d(4," Dati Azienda"),c(),u(5,"div",23)(6,"div")(7,"label",24),d(8,"Nome Azienda *"),c(),O(9,"input",25),x(10,G2,2,1,"div",15),c(),u(11,"div")(12,"label",24),d(13,"Partita IVA *"),c(),O(14,"input",26),x(15,Y2,3,2,"div",15),c(),u(16,"div")(17,"label",24),d(18,"Provincia"),c(),O(19,"input",27),c(),u(20,"div")(21,"label",24),d(22,"Citt\xE0"),c(),O(23,"input",28),c(),u(24,"div")(25,"label",24),d(26,"Indirizzo"),c(),O(27,"input",29),c(),u(28,"div")(29,"label",24),d(30,"Civico"),c(),O(31,"input",30),c(),u(32,"div")(33,"label",24),d(34,"Sito web"),c(),O(35,"input",31),c(),u(36,"div")(37,"label",24),d(38,"Forma legale"),c(),u(39,"select",32)(40,"option",33),d(41,"Seleziona forma legale"),c(),x(42,K2,2,2,"option",34),c()(),u(43,"div")(44,"label",24),d(45,"Categoria"),c(),u(46,"select",35)(47,"option",33),d(48,"Seleziona categoria"),c(),x(49,Z2,2,2,"option",34),c()(),u(50,"div",36)(51,"label",24),d(52,"Orari settimanali"),c(),u(53,"div",37),x(54,Q2,11,12,"div",38),c(),u(55,"div",39),d(56,' Lascia vuoto open/close per i giorni chiusi oppure seleziona "Chiuso". '),c()()()()),n&2){let e=b();h(10),y("ngIf",(e.company_name==null?null:e.company_name.invalid)&&(e.company_name==null?null:e.company_name.touched)),h(5),y("ngIf",(e.vat==null?null:e.vat.invalid)&&(e.vat==null?null:e.vat.touched)),h(27),y("ngForOf",e.companyLegalForms),h(7),y("ngForOf",e.companyCategories),h(5),y("ngForOf",e.days)}}function X2(n,t){if(n&1&&(u(0,"div",10)(1,"h2",4)(2,"span",22),d(3,"person"),c(),d(4),c(),u(5,"div",23)(6,"div")(7,"label",24),d(8,"Nome *"),c(),O(9,"input",50),c(),u(10,"div")(11,"label",24),d(12,"Cognome *"),c(),O(13,"input",51),c(),u(14,"div")(15,"label",24),d(16,"Email *"),c(),O(17,"input",52),c(),u(18,"div")(19,"label",24),d(20,"Telefono *"),c(),O(21,"input",53),c(),u(22,"div")(23,"label",24),d(24,"Partita IVA azienda (per associare utente) *"),c(),O(25,"input",54),c(),u(26,"div")(27,"label",24),d(28,"Password *"),c(),O(29,"input",55),c(),u(30,"div")(31,"label",24),d(32,"Conferma Password *"),c(),O(33,"input",56),c()()()),n&2){let e=b();h(4),M(" ",e.mode==="admin"?"Dati Amministratore":"Dati Utente"," ")}}function eF(n,t){n&1&&(u(0,"div",40)(1,"span",42),d(2,"Devi accettare i termini"),c()())}function tF(n,t){if(n&1&&(u(0,"div",57),d(1),c()),n&2){let e=b();h(),R(e.errorMessage)}}function nF(n,t){if(n&1&&(u(0,"div",58),d(1),c()),n&2){let e=b();h(),R(e.successMessage)}}function rF(n,t){n&1&&(u(0,"span"),d(1,"Registrati"),c())}function iF(n,t){n&1&&(u(0,"span"),d(1,"Attendere\u2026"),c())}var oF=["S.r.l.","S.r.l.s.","S.p.A.","S.a.s.","S.n.c.","S.s.","Ditta Individuale","Libero Professionista"],sF=["Agricoltura","Industria","Costruzioni","Commercio","Alimentare","Trasporti","Servizi","ICT","Professioni","Altro"],_p=class n{constructor(t,e,r,i,o,s){this.fb=t;this.authService=e;this.router=r;this.route=i;this.invitiService=o;this.companyService=s;let a=this.fb.group({});this.days.forEach(l=>{a.addControl(l.key,this.fb.group({open:[""],close:[""],closed:[!1]}))}),this.registerForm=this.fb.group({company_name:["",[H.required,H.minLength(2)]],vat:["",[H.required,H.pattern(/^[0-9]{11}$/)]],address:[""],city:[""],province:[""],civic_number:[""],website:[""],legal_form:[""],category:[""],opening_hours:a,first_name:["",[H.required,H.minLength(2)]],last_name:["",[H.required,H.minLength(2)]],email:["",[H.required,H.email]],phone:["",[H.required,H.pattern(/^[0-9+\s\-()]{6,20}$/)]],birth_date:[""],birth_place:[""],fiscal_code:[""],timezone:["Europe/Rome"],is_active:[!1],hire_date:[""],password:["",[H.required,H.minLength(8)]],confirmPassword:["",[H.required]],terms:[!1,[H.requiredTrue]],company_vat:[""]},{validators:this.passwordMatchValidator})}mode="admin";registerForm;isLoading=!1;errorMessage="";successMessage="";closed_days=[];weekDays=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];sub;companyLegalForms=oF;companyCategories=sF;days=[{key:"monday",label:"Luned\xEC"},{key:"tuesday",label:"Marted\xEC"},{key:"wednesday",label:"Mercoled\xEC"},{key:"thursday",label:"Gioved\xEC"},{key:"friday",label:"Venerd\xEC"},{key:"saturday",label:"Sabato"},{key:"sunday",label:"Domenica"}];ngOnInit(){let t=this.route.snapshot.queryParamMap.get("mode");(t==="user"||t==="admin")&&(this.mode=t),this.setMode(this.mode)}setMode(t){this.mode=t,t==="admin"?(this.registerForm.get("company_name")?.setValidators([H.required,H.minLength(2)]),this.registerForm.get("vat")?.setValidators([H.required,H.pattern(/^[0-9]{11}$/)]),this.registerForm.get("first_name")?.setValidators([H.required,H.minLength(2)]),this.registerForm.get("last_name")?.setValidators([H.required,H.minLength(2)]),this.registerForm.get("email")?.setValidators([H.required,H.email]),this.registerForm.get("phone")?.setValidators([H.required,H.pattern(/^[0-9+\s\-()]{6,20}$/)])):(this.registerForm.get("company_name")?.clearValidators(),this.registerForm.get("vat")?.clearValidators(),this.registerForm.get("first_name")?.setValidators([H.required,H.minLength(2)]),this.registerForm.get("last_name")?.setValidators([H.required,H.minLength(2)]),this.registerForm.get("email")?.setValidators([H.required,H.email]),this.registerForm.get("phone")?.setValidators([H.required,H.pattern(/^[0-9+\s\-()]{6,20}$/)]),this.registerForm.get("company_vat")?.setValidators([H.required,H.pattern(/^[0-9]{11}$/)])),Object.keys(this.registerForm.controls).forEach(e=>this.registerForm.get(e)?.updateValueAndValidity())}toggleClosedDay(t){let e=t.target,r=e.value;e.checked?this.closed_days.includes(r)||this.closed_days.push(r):this.closed_days=this.closed_days.filter(i=>i!==r)}passwordMatchValidator(t){let e=t.get("password")?.value,r=t.get("confirmPassword")?.value;return e&&r&&e!==r?{passwordMismatch:!0}:null}get company_name(){return this.registerForm.get("company_name")}get vat(){return this.registerForm.get("vat")}get first_name(){return this.registerForm.get("first_name")}get last_name(){return this.registerForm.get("last_name")}get email(){return this.registerForm.get("email")}get phone(){return this.registerForm.get("phone")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}get terms(){return this.registerForm.get("terms")}onSubmit(){if(console.log("onSubmit invoked",{mode:this.mode,valid:this.registerForm.valid}),this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.isLoading=!0;let t=this.registerForm.value;if(this.mode==="admin"){let e={company:{name:t.company_name,vat:t.vat,address:t.address||null,city:t.city||null,province:t.province||null,civic_number:t.civic_number||null,website:t.website||null,legal_form:t.legal_form||null,category:t.category||null,opening_hours:t.opening_hours},admin:{first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone||null,birth_date:t.birth_date||null,birth_place:t.birth_place||null,fiscal_code:t.fiscal_code||null,timezone:t.timezone||"Europe/Rome",is_active:!!t.is_active,hire_date:t.hire_date||null,password:t.password}};this.sub=this.authService.registerAdmin(e).subscribe({next:r=>{this.isLoading=!1,this.successMessage="Registrazione admin completata",setTimeout(()=>this.router.navigate(["/login"]),1500)},error:r=>{this.isLoading=!1,this.errorMessage=r?.message||"Errore",console.error(r)}})}else this.isLoading=!0,this.sub=this.invitiService.getInviteForEmail(t.email).pipe(Et(1),Ve(e=>e?this.companyService.getAzienda(e.company_id).pipe(Et(1),Ve(r=>{if(!r)throw new Error("Azienda associata all'invito non trovata.");let i={user:{first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone,password:t.password,timezone:t.timezone||"Europe/Rome"},company_vat:r.vat};return this.authService.registerUser(i).pipe(Et(1),Ve(o=>this.invitiService.markAccepted(e.id).pipe(Et(1),ae(()=>o))))})):(this.isLoading=!1,this.errorMessage="La tua email non \xE8 autorizzata. Contatta l'amministratore dell'azienda.",Ot))).subscribe({next:e=>{this.isLoading=!1,this.successMessage="Registrazione utente completata",setTimeout(()=>this.router.navigate(["/login"]),1500)},error:e=>{this.isLoading=!1,this.errorMessage=e?.message||"Errore durante la registrazione",console.error(e)}})}ngOnDestroy(){this.sub?.unsubscribe()}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(C(Cr),C(ge),C(Ie),C(on),C(sa),C(wt))};static \u0275cmp=me({type:n,selectors:[["app-register"]],decls:36,vars:14,consts:[[1,"gradient-container"],[1,"form-card",2,"max-width","900px","margin","auto"],[1,"section-header"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"section-header",2,"justify-content","center","padding","var(--gutter-md)"],["type","button",1,"promethea-button",3,"click"],["novalidate","",1,"generic-form",3,"ngSubmit","formGroup"],["class","form-section",4,"ngIf"],[1,"form-section"],[1,"form-group"],[1,"checkbox-label"],["type","checkbox","formControlName","terms",1,"checkbox-input"],["href","#",1,"link"],["class","error-messages",4,"ngIf"],["class","status-message error",4,"ngIf"],["class","status-message info",4,"ngIf"],[1,"form-footer",2,"display","flex","justify-content","flex-end","gap","var(--gutter-sm)","margin-top","var(--gutter-md)"],["type","button",1,"promethea-button","ghost",3,"click","disabled"],["type","submit",1,"promethea-button",3,"disabled"],[4,"ngIf"],[1,"material-icons"],[1,"grid-form"],[1,"form-label"],["type","text","formControlName","company_name","placeholder","Nome azienda",1,"form-input"],["type","text","formControlName","vat","placeholder","12345678901",1,"form-input"],["type","text","formControlName","province","placeholder","MI",1,"form-input"],["type","text","formControlName","city","placeholder","Milano",1,"form-input"],["type","text","formControlName","address","placeholder","Via Roma 1",1,"form-input"],["type","text","formControlName","civic_number","placeholder","1/A",1,"form-input"],["type","url","formControlName","website","placeholder","https://esempio.it",1,"form-input"],["formControlName","legal_form",1,"form-input"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","category",1,"form-input"],[1,"form-group",2,"grid-column","1 / -1"],["formGroupName","opening_hours",2,"display","flex","flex-direction","column","gap","0.5rem"],["class","opening-row","style","display:flex; gap:0.5rem; align-items:center;",3,"formGroupName","closed",4,"ngFor","ngForOf"],[1,"text-muted",2,"font-size","0.9rem","margin-top","0.35rem"],[1,"error-messages"],["class","error",4,"ngIf"],[1,"error"],[3,"value"],[1,"opening-row",2,"display","flex","gap","0.5rem","align-items","center",3,"formGroupName"],[2,"width","110px","font-weight","600"],["type","time","formControlName","open",1,"form-input",2,"width","140px",3,"disabled","aria-label"],["type","time","formControlName","close",1,"form-input",2,"width","140px",3,"disabled","aria-label"],[1,"closed-label",2,"display","flex","align-items","center","gap","0.3rem","margin-left","0.5rem"],["type","checkbox","formControlName","closed",3,"aria-label"],["type","text","formControlName","first_name",1,"form-input"],["type","text","formControlName","last_name",1,"form-input"],["type","email","formControlName","email",1,"form-input"],["type","tel","formControlName","phone",1,"form-input"],["type","text","formControlName","company_vat","placeholder","01234567890",1,"form-input"],["type","password","formControlName","password",1,"form-input"],["type","password","formControlName","confirmPassword",1,"form-input"],[1,"status-message","error"],[1,"status-message","info"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),d(5,"Crea il Tuo Account"),c(),u(6,"p",5),d(7,"Seleziona il tipo di registrazione"),c()()(),u(8,"div",6)(9,"button",7),T("click",function(){return r.setMode("admin")}),d(10,"Azienda / Admin"),c(),u(11,"button",7),T("click",function(){return r.setMode("user")}),d(12,"Dipendente"),c()(),u(13,"form",8),T("ngSubmit",function(){return r.onSubmit()}),x(14,J2,57,5,"div",9)(15,X2,34,1,"div",9),u(16,"div",10)(17,"div",11)(18,"label",12),O(19,"input",13),d(20," Accetto i "),u(21,"a",14),d(22,"Termini e Condizioni"),c(),d(23," e la "),u(24,"a",14),d(25,"Privacy"),c(),d(26," * "),c(),x(27,eF,3,0,"div",15),c()(),x(28,tF,2,1,"div",16)(29,nF,2,1,"div",17),u(30,"div",18)(31,"button",19),T("click",function(){return r.goToLogin()}),d(32,"Annulla"),c(),u(33,"button",20),x(34,rF,2,0,"span",21)(35,iF,2,0,"span",21),c()()()()()),e&2&&(h(9),xe("active",r.mode==="admin"),h(2),xe("active",r.mode==="user"),h(2),y("formGroup",r.registerForm),h(),y("ngIf",r.mode==="admin"),h(),y("ngIf",r.mode==="user"||r.mode==="admin"),h(12),y("ngIf",(r.terms==null?null:r.terms.invalid)&&(r.terms==null?null:r.terms.touched)),h(),y("ngIf",r.errorMessage),h(),y("ngIf",r.successMessage),h(2),y("disabled",r.isLoading),h(2),y("disabled",r.isLoading||r.registerForm.invalid),h(),y("ngIf",!r.isLoading),h(),y("ngIf",r.isLoading))},dependencies:[_e,Ye,Ne,Sr,Er,sn,an,Ke,ql,kt,Ze,wr,On,Qn,Ws],styles:[".opening-row[_ngcontent-%COMP%]{padding:.35rem 0;align-items:center;transition:opacity .18s ease,background-color .18s ease}.opening-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{height:40px;padding:.45rem .75rem}.opening-row.closed[_ngcontent-%COMP%]{opacity:.6;pointer-events:auto;background:color-mix(in srgb,var(--background) 92%,transparent);border-radius:8px;padding-left:.5rem}.opening-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:disabled{background:color-mix(in srgb,var(--smoke-color-1) 6%,var(--background));border-color:color-mix(in srgb,var(--smoke-color-1) 45%,transparent);color:color-mix(in srgb,var(--text-color) 60%,transparent);cursor:not-allowed;box-shadow:none}.closed-label[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-size:.92rem;color:color-mix(in srgb,var(--text-color) 60%,transparent);font-weight:600}@media (max-width: 640px){.opening-row[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.4rem}.opening-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;font-size:.95rem}.opening-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:48%;min-width:120px}}"]})};function aF(n,t){n&1&&d(0," Email obbligatoria ")}function lF(n,t){n&1&&d(0," Inserisci un indirizzo email valido ")}function cF(n,t){if(n&1&&(u(0,"div",14),ne(1,aF,1,0),ne(2,lF,1,0),c()),n&2){let e,r,i=b();h(),re(!((e=i.forgotPasswordForm.get("email"))==null||e.errors==null)&&e.errors.required?1:-1),h(),re(!((r=i.forgotPasswordForm.get("email"))==null||r.errors==null)&&r.errors.email?2:-1)}}function uF(n,t){if(n&1&&(u(0,"div",23)(1,"span",4),d(2,"error"),c(),d(3),c()),n&2){let e=b();h(3),M(" ",e.errorMessage," ")}}function dF(n,t){if(n&1&&(u(0,"div",24)(1,"span",4),d(2,"check_circle"),c(),d(3),c()),n&2){let e=b();h(3),M(" ",e.successMessage," ")}}function fF(n,t){n&1&&(u(0,"span",4),d(1,"send"),c())}function pF(n,t){n&1&&O(0,"span",28)}var bp=class n{constructor(t,e,r){this.fb=t;this.authService=e;this.router=r;this.forgotPasswordForm=this.fb.group({email:["",[H.required,H.email]]})}forgotPasswordForm;isLoading=!1;errorMessage="";successMessage="";ngOnInit(){}onSubmit(){return _(this,null,function*(){if(this.forgotPasswordForm.invalid){this.markFormGroupTouched();return}this.isLoading=!0,this.errorMessage="",this.successMessage="";try{let t=this.forgotPasswordForm.get("email")?.value;yield this.simulaInvioEmailReset(t),this.successMessage="Email di recupero inviata! Controlla la tua casella di posta.",this.forgotPasswordForm.reset(),setTimeout(()=>{this.router.navigate(["/login"])},3e3)}catch(t){console.error("Errore nel recupero password:",t),this.errorMessage=this.getErrorMessage(t)}finally{this.isLoading=!1}})}markFormGroupTouched(){Object.keys(this.forgotPasswordForm.controls).forEach(t=>{this.forgotPasswordForm.get(t)?.markAsTouched()})}simulaInvioEmailReset(t){return _(this,null,function*(){return new Promise((e,r)=>{setTimeout(()=>{Math.random()<.1?r({code:"NETWORK_ERROR",message:"Errore di connessione. Riprova pi\xF9 tardi."}):e()},1500)})})}getErrorMessage(t){return t?.code==="NETWORK_ERROR"?t.message:t?.code==="USER_NOT_FOUND"?"Nessun account trovato con questa email.":t?.code==="TOO_MANY_REQUESTS"?"Troppi tentativi. Riprova pi\xF9 tardi.":"Si \xE8 verificato un errore. Riprova pi\xF9 tardi."}hasError(t,e){let r=this.forgotPasswordForm.get(t);return r?r.hasError(e)&&r.touched:!1}static \u0275fac=function(e){return new(e||n)(C(Cr),C(ge),C(Ie))};static \u0275cmp=me({type:n,selectors:[["app-forgot-password"]],decls:73,vars:8,consts:[[1,"gradient-container"],[1,"form-card"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"generic-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"grid-form"],[1,"filter-group"],[1,"form-label"],["type","email","formControlName","email","placeholder","inserisci la tua email","autocomplete","email"],[1,"error"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-content"],[1,"info-item"],[1,"contact-info"],[1,"info-label"],[1,"info-value"],[1,"status-message","error"],[1,"status-message","info"],[1,"form-actions"],["type","button","routerLink","/login",1,"promethea-button","ghost"],["type","submit",1,"promethea-button",3,"disabled"],[1,"loading-spinner"],[1,"form-footer"],["routerLink","/support",1,"link"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),d(5,"key"),c()(),u(6,"div",5)(7,"h1",6),d(8,"Recupera Password"),c(),u(9,"p",7),d(10,"Inserisci la tua email per reimpostare la password"),c()()(),u(11,"form",8),T("ngSubmit",function(){return r.onSubmit()}),u(12,"div",9)(13,"h2",6)(14,"span",4),d(15,"email"),c(),d(16," Informazioni Account "),c(),u(17,"div",10)(18,"div",11)(19,"label",12)(20,"span",4),d(21,"alternate_email"),c(),d(22," Email * "),c(),O(23,"input",13),ne(24,cF,3,2,"div",14),c()()(),u(25,"div",9)(26,"div",15)(27,"div",16)(28,"span",4),d(29,"info"),c(),u(30,"h3",17),d(31,"Cosa succede dopo?"),c()(),u(32,"div",18)(33,"div",19)(34,"span",4),d(35,"send"),c(),u(36,"div",20)(37,"span",21),d(38,"Invio email"),c(),u(39,"span",22),d(40,"Riceverai un link per reimpostare la password"),c()()(),u(41,"div",19)(42,"span",4),d(43,"schedule"),c(),u(44,"div",20)(45,"span",21),d(46,"Validit\xE0"),c(),u(47,"span",22),d(48,"Il link scade dopo 24 ore"),c()()(),u(49,"div",19)(50,"span",4),d(51,"security"),c(),u(52,"div",20)(53,"span",21),d(54,"Sicurezza"),c(),u(55,"span",22),d(56,"Il link \xE8 personale e sicuro"),c()()()()()(),ne(57,uF,4,1,"div",23),ne(58,dF,4,1,"div",24),u(59,"div",25)(60,"button",26)(61,"span",4),d(62,"arrow_back"),c(),d(63," Torna al Login "),c(),u(64,"button",27),ne(65,fF,2,0,"span",4),ne(66,pF,1,0,"span",28),d(67),c()(),u(68,"div",29)(69,"p",7),d(70," Problemi? "),u(71,"a",30),d(72,"Contatta il supporto"),c()()()()()()),e&2){let i;h(11),y("formGroup",r.forgotPasswordForm),h(13),re((i=r.forgotPasswordForm.get("email"))!=null&&i.invalid&&((i=r.forgotPasswordForm.get("email"))!=null&&i.touched)?24:-1),h(33),re(r.errorMessage?57:-1),h(),re(r.successMessage?58:-1),h(6),y("disabled",r.forgotPasswordForm.invalid||r.isLoading),h(),re(r.isLoading?-1:65),h(),re(r.isLoading?66:-1),h(),M(" ",r.isLoading?"Invio in corso...":"Invia Link di Reset"," ")}},dependencies:[_e,Sr,Er,Ke,Ze,wr,On,Qn,Tt,Pt],styles:["[_nghost-%COMP%]{display:block;width:100%}@media (max-width: 768px){.form-card[_ngcontent-%COMP%]{max-width:95%!important;padding:var(--gutter-lg)!important}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm)}.form-actions[_ngcontent-%COMP%]   .promethea-button[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var Vt=class n{constructor(t,e,r){this.http=t;this.authService=e;this.supabaseService=r}timbrature=et([]);base="/api/timbrature";getRecent(t=10){let e=this.authService.getAuthHeaders();return this.http.get(`${this.base}?limit=${t}`,{headers:e})}approve(t){let e=this.authService.getAuthHeaders();return this.http.post(`${this.base}/${t}/approve`,{},{headers:e})}punchIn(){let t=this.authService.getAuthHeaders();return this.http.post(`${this.base}/punch-in`,{},{headers:t})}punchOut(){let t=this.authService.getAuthHeaders();return this.http.post(`${this.base}/punch-out`,{},{headers:t})}eliminaTimbratura(t){let e=this.authService.getAuthHeaders();return this.http.delete(`${this.base}/${t}`,{headers:e})}creaTimbraturaSupabase(t){return _(this,null,function*(){let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.from("timbrature").insert(t).select().maybeSingle();if(i)throw console.error("[TimbratureService] creaTimbraturaSupabase error",i),i;return r})}getTimbraturePerGiorno(t,e){return e.filter(r=>{let i=new Date(r.start_ts);return this.isStessoGiorno(i,t)})}isStessoGiorno(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}formattaOrarioTimbratura(t){let e=new Date(t.start_ts),r=t.end_ts?new Date(t.end_ts):null,i=e.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"});if(r){let o=r.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),s=t.total_minutes||Math.round((r.getTime()-e.getTime())/(1e3*60)),a=Math.floor(s/60),l=s%60;return`${i} - ${o} (${a}h ${l}m)`}else return`${i} - In corso`}getColoreTimbratura(t){return t.end_ts?"var(--primary)":"#ef4444"}getTimbratureUtente(t){return _(this,null,function*(){try{let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.from("timbrature").select("*, user:users(id,first_name,last_name,role)").eq("user_id",t).order("start_ts",{ascending:!1});if(i)throw console.error("[TimbratureService] getTimbratureUtente error",i),i;return r??[]}catch(e){throw console.error("[TimbratureService] getTimbratureUtente unexpected",e),e}})}getTimbratureAzienda(t){return _(this,null,function*(){try{let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.from("timbrature").select("*, user:users(id,first_name,last_name,role)").eq("company_id",t).order("start_ts",{ascending:!1});if(i)throw console.error("[TimbratureService] getTimbratureAzienda error",i),i;return r??[]}catch(e){throw console.error("[TimbratureService] getTimbratureAzienda unexpected",e),e}})}creaTimbratura(t){return _(this,null,function*(){try{let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.from("timbrature").insert(t).select().maybeSingle();if(i)throw console.error("[TimbratureService] creaTimbratura error",i),i;return r}catch(e){throw console.error("[TimbratureService] creaTimbratura unexpected",e),e}})}getTimbraturePerCalendario(){return _(this,null,function*(){try{let t=this.supabaseService.getClient(),{data:e,error:r}=yield t.from("timbrature").select("*, user:users(id,first_name,last_name,role)").order("start_ts",{ascending:!1});if(r)throw console.error("[TimbratureService] getTimbraturePerCalendario error",r),r;return e??[]}catch(t){throw console.error("[TimbratureService] getTimbraturePerCalendario unexpected",t),t}})}static \u0275fac=function(e){return new(e||n)(V(hr),V(ge),V(un))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function hF(n,t){if(n&1&&(u(0,"p",9),d(1),c()),n&2){let e=b();h(),M("Benvenuto in ",e.company.name)}}function mF(n,t){n&1&&(u(0,"div",10),O(1,"div",11),u(2,"p"),d(3,"Caricamento dati..."),c()())}function gF(n,t){if(n&1&&(u(0,"div",14)(1,"h3",15),d(2,"Dipendenti Attivi"),c(),u(3,"div",16),d(4),c(),u(5,"p",9),d(6,"Nell'azienda"),c()()),n&2){let e=b(2);h(4),R(e.getDipendentiAttivi())}}function vF(n,t){n&1&&(u(0,"button",25)(1,"span",3),d(2,"people"),c(),d(3," Gestisci Dipendenti "),c())}function yF(n,t){if(n&1&&(u(0,"div",12)(1,"div",13)(2,"div",14)(3,"h3",15),d(4,"Ore Lavorate"),c(),u(5,"div",16),d(6),z(7,"number"),c(),u(8,"p",9),d(9,"Questa settimana"),c()(),u(10,"div",14)(11,"h3",15),d(12,"Timbrature Oggi"),c(),u(13,"div",16),d(14),c(),u(15,"p",9),d(16,"Timbrature di oggi"),c()(),x(17,gF,7,1,"div",17),u(18,"div",14)(19,"h3",15),d(20,"Stato"),c(),u(21,"div",16)(22,"span",18),d(23),c()(),u(24,"p",9),d(25,"Il tuo account"),c()()(),u(26,"div",19)(27,"h2",5)(28,"span",3),d(29,"flash_on"),c(),d(30," Azioni Rapide "),c(),u(31,"div",20)(32,"button",21)(33,"span",3),d(34,"add_circle"),c(),d(35," Nuova Timbratura "),c(),u(36,"button",22)(37,"span",3),d(38,"list"),c(),d(39," Vedi Timbrature "),c(),u(40,"button",23)(41,"span",3),d(42,"settings"),c(),d(43," Impostazioni "),c(),x(44,vF,4,0,"button",24),c()()()),n&2){let e=b();h(6),M("",W(7,7,e.getOreLavorateSettimana(),"1.1-1"),"h"),h(8),R(e.getTimbratureOggi()),h(3),y("ngIf",e.hasRole("admin")||e.hasRole("manager")),h(5),bi(e.currentUser!=null&&e.currentUser.is_active?"active":"inactive"),h(),M(" ",e.currentUser!=null&&e.currentUser.is_active?"Attivo":"Inattivo"," "),h(21),y("ngIf",e.hasRole("admin"))}}var wp=class n{constructor(t,e,r){this.authService=t;this.companyService=e;this.timbratureService=r}currentUser=null;company=null;timbrature=[];dipendenti=[];isLoading=!0;ngOnInit(){this.authService.currentUser$.subscribe(t=>{this.currentUser=t,t&&this.caricaDatiHome(t.company_id)})}caricaDatiHome(t){this.isLoading=!0,this.companyService.getAzienda(t).subscribe({next:e=>{this.company=e},error:e=>{console.error("Errore nel caricamento dati azienda:",e)}}),this.timbratureService.getRecent().subscribe({next:e=>{this.timbrature=e},error:e=>{console.error("Errore nel caricamento timbrature:",e)}}),this.hasRole("admin")||this.hasRole("manager")?this.companyService.getDipendenti(t).subscribe({next:e=>{this.dipendenti=e,this.isLoading=!1},error:e=>{console.error("Errore nel caricamento dipendenti:",e),this.isLoading=!1}}):this.isLoading=!1}hasRole(t){return this.authService.hasRole(t)}getOreLavorateSettimana(){return this.timbrature.reduce((t,e)=>t+(e.total_minutes||0),0)/60}getTimbratureOggi(){let t=new Date().toDateString();return this.timbrature.filter(e=>new Date(e.start_ts).toDateString()===t).length}getDipendentiAttivi(){return this.dipendenti.filter(t=>t.is_active).length}static \u0275fac=function(e){return new(e||n)(C(ge),C(wt),C(Vt))};static \u0275cmp=me({type:n,selectors:[["app-home"]],decls:11,vars:3,consts:[[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],["class","text-muted",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","dashboard-grid",4,"ngIf"],[1,"text-muted"],[1,"loading-container"],[1,"loading-spinner"],[1,"dashboard-grid"],[1,"grid-cards"],[1,"card"],[1,"card-title"],[1,"card-number"],["class","card",4,"ngIf"],[1,"chip"],[1,"form-section"],[1,"grid-alternative"],["routerLink","/crea-timbratura",1,"promethea-button"],["routerLink","/timbrature",1,"promethea-button","outline"],["routerLink","/impostazioni",1,"promethea-button","secondary"],["class","promethea-button ghost","routerLink","/dipendenti",4,"ngIf"],["routerLink","/dipendenti",1,"promethea-button","ghost"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d(4,"dashboard"),c()(),u(5,"div",4)(6,"h1",5),d(7,"Dashboard"),c(),x(8,hF,2,1,"p",6),c()(),x(9,mF,4,0,"div",7)(10,yF,45,10,"div",8),c()),e&2&&(h(8),y("ngIf",r.company),h(),y("ngIf",r.isLoading),h(),y("ngIf",!r.isLoading))},dependencies:[_e,Ne,Tt,Pt,qt],encapsulation:2})};function _F(n,t){if(n&1&&(u(0,"span"),d(1),c()),n&2){let e=b().$implicit;h(),M(" ",e.breaks.length," ")}}function bF(n,t){n&1&&(u(0,"span"),d(1,"-"),c())}function wF(n,t){if(n&1&&(u(0,"span",29),d(1),c()),n&2){let e=b().$implicit,r=b();y("title",e.notes),h(),M(" ",r.troncaTesto(e.notes,30)," ")}}function EF(n,t){n&1&&(u(0,"span"),d(1,"-"),c())}function CF(n,t){if(n&1){let e=J();u(0,"tr")(1,"td"),d(2),z(3,"date"),c(),u(4,"td"),d(5),z(6,"date"),c(),u(7,"td"),d(8),z(9,"date"),c(),u(10,"td"),d(11),z(12,"number"),c(),u(13,"td"),x(14,_F,2,1,"span",24)(15,bF,2,0,"span",24),c(),u(16,"td"),x(17,wF,2,2,"span",25)(18,EF,2,0,"span",24),c(),u(19,"td")(20,"div",26)(21,"button",27),T("click",function(){let i=N(e).$implicit,o=b();return P(o.modificaTimbratura(i))}),u(22,"span",3),d(23,"edit"),c()(),u(24,"button",28),T("click",function(){let i=N(e).$implicit,o=b();return P(o.eliminaTimbratura(i))}),u(25,"span",3),d(26,"delete"),c()()()()()}if(n&2){let e=t.$implicit;h(2),R(W(3,8,e.start_ts,"dd/MM/yyyy")),h(3),R(W(6,11,e.start_ts,"HH:mm")),h(3),R(e.end_ts?W(9,14,e.end_ts,"HH:mm"):"In corso..."),h(3),M("",W(12,17,e.total_minutes/60,"1.1-1"),"h"),h(3),y("ngIf",e.breaks&&e.breaks.length>0),h(),y("ngIf",!e.breaks||e.breaks.length===0),h(2),y("ngIf",e.notes),h(),y("ngIf",!e.notes)}}function SF(n,t){n&1&&(u(0,"div",30)(1,"span",3),d(2,"inbox"),c(),u(3,"h3"),d(4,"Nessuna timbratura trovata"),c(),u(5,"p"),d(6,"Non sono state trovate timbrature con i filtri attuali."),c()())}function DF(n,t){if(n&1&&(u(0,"div",31)(1,"div",32),d(2),c()()),n&2){let e=b();h(2),be(" Mostrando ",e.timbratureFiltrate.length," di ",e.timbrature.length," timbrature ")}}var Ep=class n{constructor(t,e,r,i){this.timbratureService=t;this.authService=e;this.companyService=r;this.router=i}timbrature=[];timbratureFiltrate=[];currentUser=null;isLoading=!1;filtroDataInizio="";filtroDataFine="";filtroStato="";ngOnInit(){this.authService.currentUser$.subscribe(t=>{this.currentUser=t,t?this.caricaTimbrature():(this.timbrature=[],this.timbratureFiltrate=[])})}caricaTimbrature(){return _(this,null,function*(){if(this.currentUser){this.isLoading=!0;try{let t=[],e=this.currentUser;if(e.role==="employee")t=yield this.timbratureService.getTimbratureUtente(e.id);else if(e.role==="admin")t=yield this.timbratureService.getTimbratureAzienda(e.company_id);else if(e.role==="manager"){let r=yield this.timbratureService.getTimbraturePerCalendario(),s=(((yield this.companyService.getAzienda(e.company_id).toPromise)?yield this.companyService.getAzienda(e.company_id).toPromise():yield this.companyService.getAzienda(e.company_id))?.manager_visibility??{})[e.id]??{mode:"self",user_ids:[],roles:[]};if(s.mode==="self")t=r.filter(a=>a.user_id===e.id);else if(s.mode==="selected_users"){let a=Array.isArray(s.user_ids)?s.user_ids:[];t=r.filter(l=>a.includes(l.user_id))}else if(s.mode==="roles"){let a=Array.isArray(s.roles)?s.roles:[];t=r.filter(l=>!!l.user&&a.includes(l.user.role))}else t=r.filter(a=>a.user_id===e.id)}else t=yield this.timbratureService.getTimbratureUtente(e.id);this.timbrature=t||[],this.applicaFiltri()}catch(t){console.error("Errore nel caricamento delle timbrature:",t)}finally{this.isLoading=!1}}})}applicaFiltri(){let t=this.timbrature;if(this.filtroDataInizio){let e=new Date(this.filtroDataInizio);t=t.filter(r=>new Date(r.start_ts)>=e)}if(this.filtroDataFine){let e=new Date(this.filtroDataFine);e.setHours(23,59,59,999),t=t.filter(r=>new Date(r.start_ts)<=e)}this.filtroStato&&(this.filtroStato==="attiva"?t=t.filter(e=>!e.end_ts):this.filtroStato==="completata"&&(t=t.filter(e=>!!e.end_ts))),this.timbratureFiltrate=t}nuovaTimbratura(){this.router.navigate(["/crea-timbratura"])}modificaTimbratura(t){this.router.navigate(["/modifica-timbratura",t.id])}eliminaTimbratura(t){confirm("Sei sicuro di voler eliminare questa timbratura?")&&console.log("Eliminazione timbratura:",t.id)}troncaTesto(t,e){return t?t.length<=e?t:t.substring(0,e)+"...":""}static \u0275fac=function(e){return new(e||n)(C(Vt),C(ge),C(wt),C(Ie))};static \u0275cmp=me({type:n,selectors:[["app-lista-timbrature"]],decls:63,vars:6,consts:[[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"filters-section"],[1,"filters-container"],[1,"filter-group"],[1,"form-label"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],["value","attiva"],["value","completata"],[1,"actions-container"],[1,"promethea-button",3,"click"],[1,"table-section"],[1,"table-container"],[1,"crm-table"],[4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","pagination-container",4,"ngIf"],[4,"ngIf"],["class","notes-preview",3,"title",4,"ngIf"],[1,"action-buttons"],["title","Modifica",1,"icon-button",3,"click"],["title","Elimina",1,"icon-button",3,"click"],[1,"notes-preview",3,"title"],[1,"empty-state"],[1,"pagination-container"],[1,"pagination-info"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d(4,"view_list"),c()(),u(5,"div",4)(6,"h1",5),d(7,"Lista Timbrature"),c(),u(8,"p",6),d(9,"Visualizza e gestisci tutte le tue timbrature"),c()()(),u(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),d(14,"Data Inizio"),c(),u(15,"input",11),oe("ngModelChange",function(o){return le(r.filtroDataInizio,o)||(r.filtroDataInizio=o),o}),T("change",function(){return r.applicaFiltri()}),c()(),u(16,"div",9)(17,"label",10),d(18,"Data Fine"),c(),u(19,"input",11),oe("ngModelChange",function(o){return le(r.filtroDataFine,o)||(r.filtroDataFine=o),o}),T("change",function(){return r.applicaFiltri()}),c()(),u(20,"div",9)(21,"label",10),d(22,"Stato"),c(),u(23,"select",12),oe("ngModelChange",function(o){return le(r.filtroStato,o)||(r.filtroStato=o),o}),T("change",function(){return r.applicaFiltri()}),u(24,"option",13),d(25,"Tutti"),c(),u(26,"option",14),d(27,"Attive"),c(),u(28,"option",15),d(29,"Completate"),c()()()(),u(30,"div",16)(31,"button",17),T("click",function(){return r.nuovaTimbratura()}),u(32,"span",3),d(33,"add"),c(),d(34," Nuova Timbratura "),c()()(),u(35,"div",18)(36,"div",19)(37,"table",20)(38,"thead")(39,"tr")(40,"th"),d(41,"Data"),c(),u(42,"th"),d(43,"Ora Inizio"),c(),u(44,"th"),d(45,"Ora Fine"),c(),u(46,"th"),d(47,"Ore Totali"),c(),u(48,"th"),d(49,"Pause"),c(),u(50,"th"),d(51,"Note"),c(),u(52,"th"),d(53,"Azioni"),c()()(),u(54,"tbody"),x(55,CF,27,20,"tr",21),c()()(),x(56,SF,7,0,"div",22),u(57,"div",16)(58,"button",17),T("click",function(){return r.nuovaTimbratura()}),u(59,"span",3),d(60,"add"),c(),d(61," Crea la prima timbratura "),c()()(),x(62,DF,3,2,"div",23),c()),e&2&&(h(15),ie("ngModel",r.filtroDataInizio),h(4),ie("ngModel",r.filtroDataFine),h(4),ie("ngModel",r.filtroStato),h(32),y("ngForOf",r.timbratureFiltrate),h(),y("ngIf",r.timbratureFiltrate.length===0),h(6),y("ngIf",r.timbratureFiltrate.length>0))},dependencies:[_e,Ye,Ne,Tt,ln,sn,an,Ke,kt,Ze,Zt,qt,ut],encapsulation:2})};var xF=(n,t)=>({"chip.active":n,"chip.inactive":t}),IF=()=>[];function TF(n,t){n&1&&(u(0,"span"),d(1,"Data obbligatoria"),c())}function MF(n,t){if(n&1&&(u(0,"span"),d(1),c()),n&2){let e,r=b(2);h(),R((e=r.timbraturaForm.get("data"))==null||e.errors==null||e.errors.futureDate==null?null:e.errors.futureDate.message)}}function AF(n,t){if(n&1&&(u(0,"div",14),x(1,TF,2,0,"span",21)(2,MF,2,1,"span",21),c()),n&2){let e,r,i=b();h(),y("ngIf",(e=i.timbraturaForm.get("data"))==null?null:e.hasError("required")),h(),y("ngIf",(r=i.timbraturaForm.get("data"))==null?null:r.hasError("futureDate"))}}function OF(n,t){n&1&&(u(0,"span"),d(1,"Ora ingresso obbligatoria"),c())}function RF(n,t){if(n&1&&(u(0,"span"),d(1),c()),n&2){let e,r=b(2);h(),R((e=r.timbraturaForm.get("ora_inizio"))==null||e.errors==null||e.errors.futureTime==null?null:e.errors.futureTime.message)}}function NF(n,t){if(n&1&&(u(0,"div",14),x(1,OF,2,0,"span",21)(2,RF,2,1,"span",21),c()),n&2){let e,r,i=b();h(),y("ngIf",(e=i.timbraturaForm.get("ora_inizio"))==null?null:e.hasError("required")),h(),y("ngIf",(r=i.timbraturaForm.get("ora_inizio"))==null?null:r.hasError("futureTime"))}}function PF(n,t){if(n&1&&(u(0,"div",14),d(1),c()),n&2){let e=b();h(),M(" ",e.timeRangeErrorMessage," ")}}function kF(n,t){if(n&1&&(u(0,"div",14),d(1),c()),n&2){let e,r=b();h(),M(" ",(e=r.timbraturaForm.get("ora_fine"))==null||e.errors==null||e.errors.futureTime==null?null:e.errors.futureTime.message," ")}}function FF(n,t){if(n&1){let e=J();u(0,"button",33),T("click",function(){N(e);let i=b().$index,o=b();return P(o.rimuoviPausa(i))}),u(1,"span",4),d(2,"delete"),c()()}}function LF(n,t){if(n&1&&(u(0,"div",31),d(1),c()),n&2){let e,r=b().$index,i=b();h(),M(" ",(e=i.getPausaControl(r,"inizio").errors)==null||e.futureTime==null?null:e.futureTime.message," ")}}function jF(n,t){if(n&1&&(u(0,"div",31),d(1),c()),n&2){let e,r=b().$index,i=b();h(),M(" ",(e=i.getPausaControl(r,"fine").errors)==null||e.futureTime==null?null:e.futureTime.message," ")}}function VF(n,t){if(n&1&&(u(0,"div",32),d(1),c()),n&2){let e=b().$index,r=b();h(),M(" ",r.getPauseTimeErrorMessage(e)," ")}}function UF(n,t){if(n&1&&(u(0,"div",18)(1,"div",25)(2,"div",26)(3,"span",4),d(4,"schedule"),c(),u(5,"strong"),d(6),c()(),x(7,FF,3,0,"button",27),c(),d(8," \xA0 "),u(9,"div",28)(10,"div",29)(11,"label",12),d(12,"Inizio"),c(),O(13,"input",30),ne(14,LF,2,1,"div",31),c(),d(15," \xA0 "),u(16,"div",29)(17,"label",12),d(18,"Fine"),c(),O(19,"input",30),ne(20,jF,2,1,"div",31),c()(),d(21," \xA0 "),ne(22,VF,2,1,"div",32),c()),n&2){let e=t.$index,r=b();h(6),M("Pausa ",e+1),h(),y("ngIf",r.canRemovePause(e)),h(6),y("formControl",r.getPausaControl(e,"inizio")),h(),re(r.getPausaControl(e,"inizio").hasError("futureTime")?14:-1),h(5),y("formControl",r.getPausaControl(e,"fine")),h(),re(r.getPausaControl(e,"fine").hasError("futureTime")?20:-1),h(2),re(r.hasPauseTimeError(e)?22:-1)}}function BF(n,t){n&1&&(Hr(0),u(1,"span",4),d(2,"my_location"),c(),Gr())}function zF(n,t){n&1&&(Hr(0),O(1,"span",43),Gr())}function $F(n,t){n&1&&(u(0,"div",44),d(1,"Ottenendo posizione\u2026"),c())}function HF(n,t){if(n&1&&(u(0,"small"),d(1),z(2,"number"),c()),n&2){let e=b(3);h(),M("(",W(2,1,e.posizioneAttuale==null?null:e.posizioneAttuale.accuracy,"1.0-0")," m)")}}function GF(n,t){if(n&1&&(u(0,"div",45)(1,"span",46),d(2,"check_circle"),c(),d(3," Posizione ottenuta "),x(4,HF,3,4,"small",21),c()),n&2){let e=b(2);h(4),y("ngIf",e.posizioneAttuale==null?null:e.posizioneAttuale.accuracy)}}function WF(n,t){n&1&&(u(0,"div",47),d(1,"Nessuna posizione"),c())}function qF(n,t){if(n&1&&(u(0,"div",51)(1,"div",52)(2,"div")(3,"strong"),d(4),c(),u(5,"div",53),d(6),c(),u(7,"div",54),d(8),c()(),u(9,"div",55)(10,"div"),d(11),c(),u(12,"div")(13,"span",56),d(14),c()()()()()),n&2){let e=b(3);h(4),R((e.nearestPoint==null?null:e.nearestPoint.name)||(e.nearestPoint==null?null:e.nearestPoint.address)),h(2),R(e.nearestPoint==null?null:e.nearestPoint.address),h(2),lo("lat: ",e.nearestPoint==null?null:e.nearestPoint.lat," \u2014 lng: ",e.nearestPoint==null?null:e.nearestPoint.lng," \u2014 raggio: ",(e.nearestPoint==null?null:e.nearestPoint.radius_m)||(e.nearestPoint==null?null:e.nearestPoint.raggio)||"-"," m"),h(3),M("",e.distanceToNearest??"-"," m"),h(2),y("ngClass",Zg(8,xF,e.posizioneValida,!e.posizioneValida)),h(),M(" ",e.posizioneValida?"Dentro":"Fuori"," ")}}function YF(n,t){n&1&&(u(0,"div",57),d(1,"Nessun punto di timbratura valido configurato."),c())}function KF(n,t){if(n&1&&(u(0,"div",48),x(1,qF,15,11,"div",49)(2,YF,2,0,"div",50),c()),n&2){let e=b(2);h(),y("ngIf",e.nearestPoint),h(),y("ngIf",!e.nearestPoint)}}function ZF(n,t){n&1&&(u(0,"div",58)(1,"div",59)(2,"span",4),d(3,"error"),c(),u(4,"div")(5,"div")(6,"strong"),d(7,"Non puoi timbrare"),c()(),u(8,"div",60),d(9,"Devi ottenere la posizione e trovarti all'interno di un punto di timbratura. Al momento non sono configurati punti per la tua azienda."),c()()()())}function QF(n,t){if(n&1&&(u(0,"div",64),d(1),z(2,"number"),c()),n&2){let e=b(3);h(),M(" La precisione della tua posizione \xE8 bassa (",W(2,1,e.posizioneAttuale==null?null:e.posizioneAttuale.accuracy,"1.0-0")," m). Usa smartphone/GPS o migliora il segnale. ")}}function JF(n,t){if(n&1&&(u(0,"div",71),d(1),c()),n&2){let e=b().$implicit,r=b(4);h(),M("",r.distanceToPoint(e)," m")}}function XF(n,t){if(n&1){let e=J();u(0,"div")(1,"button",72),T("click",function(){N(e);let i=b().$implicit,o=b(4);return P(o.submitAfterManualConfirm(i))}),d(2,"Conferma presenza"),c()()}}function eL(n,t){n&1&&(u(0,"div",73),d(1,"Sei fuori dal raggio"),c())}function tL(n,t){if(n&1&&(u(0,"div",68)(1,"div")(2,"div")(3,"strong"),d(4),c()(),u(5,"div",54),d(6),c()(),u(7,"div",55),x(8,JF,2,1,"div",69)(9,XF,3,0,"div",21)(10,eL,2,0,"div",70),c()()),n&2){let e=t.$implicit,r=b(4);h(4),R(r.pointLabel(e)),h(2),lo("lat: ",e==null?null:e.lat," \u2014 lng: ",e==null?null:e.lng," \u2014 raggio: ",r.pointRadius(e)," m"),h(2),y("ngIf",r.distanceToPoint(e)!==null),h(),y("ngIf",r.isInsidePoint(e)),h(),y("ngIf",!r.isInsidePoint(e))}}function nL(n,t){if(n&1&&(u(0,"div",65)(1,"div",66),d(2,"Se sei fisicamente in uno di questi punti, selezionalo e conferma:"),c(),x(3,tL,11,7,"div",67),c()),n&2){let e=b(3);h(3),y("ngForOf",(e.currentCompany==null?null:e.currentCompany.punch_points)??Wt(1,IF))}}function rL(n,t){if(n&1&&(u(0,"div",61)(1,"div",59)(2,"span",4),d(3,"info"),c(),u(4,"div")(5,"div")(6,"strong"),d(7,"Posizione non verificata"),c()(),u(8,"div",60),d(9,'La tua posizione non \xE8 stata ancora verificata entro il raggio dei punti. Verifica i dettagli qui sotto oppure usa "Ottieni Posizione".'),c(),x(10,QF,3,4,"div",62)(11,nL,4,2,"div",63),c()()()),n&2){let e=b(2);h(10),y("ngIf",((e.posizioneAttuale==null?null:e.posizioneAttuale.accuracy)??0)>e.POSITION_ACCURACY_THRESHOLD),h(),y("ngIf",((e.currentCompany==null||e.currentCompany.punch_points==null?null:e.currentCompany.punch_points.length)??0)>0)}}function iL(n,t){if(n&1&&(u(0,"div",58),d(1),c()),n&2){let e=b(2);h(),R(e.errorMessage)}}function oL(n,t){if(n&1&&(u(0,"div",74),d(1),c()),n&2){let e=b(2);h(),R(e.successMessage)}}function sL(n,t){if(n&1){let e=J();u(0,"div")(1,"div",11)(2,"label",12)(3,"span",4),d(4,"location_on"),c(),d(5," Posizione "),c(),u(6,"div",34)(7,"button",35),T("click",function(){N(e);let i=b();return P(i.ottieniPosizione())}),x(8,BF,3,0,"ng-container",21)(9,zF,2,0,"ng-container",21),d(10),c(),x(11,$F,2,0,"div",36)(12,GF,5,1,"div",37)(13,WF,2,0,"div",38),c(),x(14,KF,3,2,"div",39)(15,ZF,10,0,"div",40)(16,rL,12,2,"div",41)(17,iL,2,1,"div",40)(18,oL,2,1,"div",42),c()()}if(n&2){let e=b();h(7),y("disabled",e.ottenendoPosizione),h(),y("ngIf",!e.ottenendoPosizione),h(),y("ngIf",e.ottenendoPosizione),h(),M(" ",e.ottenendoPosizione?"Ottenendo...":"Ottieni Posizione"," "),h(),y("ngIf",e.ottenendoPosizione),h(),y("ngIf",!e.ottenendoPosizione&&e.posizioneAttuale),h(),y("ngIf",!e.ottenendoPosizione&&!e.posizioneAttuale),h(),y("ngIf",(e.currentCompany==null?null:e.currentCompany.timbratura_type)==="punti"),h(),y("ngIf",(e.currentCompany==null?null:e.currentCompany.timbratura_type)==="punti"&&((e.currentCompany==null||e.currentCompany.punch_points==null?null:e.currentCompany.punch_points.length)??0)===0),h(),y("ngIf",(e.currentCompany==null?null:e.currentCompany.timbratura_type)==="punti"&&((e.currentCompany==null||e.currentCompany.punch_points==null?null:e.currentCompany.punch_points.length)??0)>0&&(!e.posizioneAttuale||!e.posizioneValida)),h(),y("ngIf",e.errorMessage),h(),y("ngIf",e.successMessage)}}function aL(n,t){if(n&1&&(u(0,"div",76)(1,"h3",77),d(2,"Pause"),c(),u(3,"div",78),d(4),z(5,"number"),c()()),n&2){let e=b(2);h(4),M("",W(5,1,e.calcolaPauseTotali(),"1.1-1"),"h")}}function lL(n,t){if(n&1&&(u(0,"div",9)(1,"h2",6)(2,"span",4),d(3,"summarize"),c(),d(4," Riepilogo "),c(),u(5,"div",75)(6,"div",76)(7,"h3",77),d(8,"Ore Totali"),c(),u(9,"div",78),d(10),z(11,"number"),c()(),ne(12,aL,6,4,"div",76),u(13,"div",76)(14,"h3",77),d(15,"Ore Lavorative"),c(),u(16,"div",78),d(17),z(18,"number"),c()()()()),n&2){let e=b();h(10),M("",W(11,3,e.calcolaOreTotali(),"1.1-1"),"h"),h(2),re(e.calcolaPauseTotali()>0?12:-1),h(5),M("",W(18,6,e.calcolaLavoroEffettivo(),"1.1-1"),"h")}}function cL(n,t){n&1&&(Hr(0),u(1,"span",4),d(2,"save"),c(),Gr())}function uL(n,t){n&1&&(Hr(0),O(1,"span",43),Gr())}var Cp=class n{constructor(t,e,r,i,o){this.fb=t;this.timbratureService=e;this.authService=r;this.router=i;this.companyService=o;this.timbraturaForm=this.createForm()}POSITION_ACCURACY_THRESHOLD=150;timbraturaForm;isLoading=!1;errorMessage="";successMessage="";ottenendoPosizione=!1;posizioneAttuale=null;posizioneValida=!1;nearestPoint=null;distanceToNearest=null;currentUser=null;currentCompany=null;requiresGeolocation=!1;ngOnInit(){let t=new Date().toISOString().split("T")[0];this.timbraturaForm.patchValue({data:t}),this.timbraturaForm.get("data")?.valueChanges.subscribe(()=>{this.timbraturaForm.get("ora_inizio")?.updateValueAndValidity(),this.timbraturaForm.get("ora_fine")?.updateValueAndValidity(),this.revalidateAllPauses()}),this.authService.currentUser$.subscribe(e=>{this.currentUser=e,e&&this.companyService.getAziendaForUser(e.id,e.company_id).subscribe({next:r=>{this.currentCompany=r,this.requiresGeolocation=r?.timbratura_type==="punti",console.debug("[CreaTimbratura] company caricata",{id:r?.id,name:r?.name,punch_points_length:Array.isArray(r?.punch_points)?r.punch_points.length:0,punch_points:r?.punch_points})},error:r=>console.error("[CreaTimbratura] errore carica azienda",r)})})}createForm(){return this.fb.group({data:["",[H.required,this.noFutureDateValidator]],ora_inizio:["",[H.required,this.noFutureTimeValidator.bind(this)]],ora_fine:["",this.noFutureTimeValidator.bind(this)],notes:[""],pause:this.fb.array([this.creaPausaGroup()])},{validators:this.timeRangeValidator})}noFutureTimeValidator(t){if(!t.value)return null;let e=this.timbraturaForm?.get("data");if(!e?.value)return null;let r=e.value,i=new Date().toISOString().split("T")[0];if(r!==i)return null;let o=new Date,s=`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`;return t.value>s?{futureTime:{message:"Non \xE8 possibile inserire orari futuri per la data odierna"}}:null}get maxTimeForToday(){let t=this.timbraturaForm?.get("data");if(!t?.value)return null;let e=t.value,r=new Date().toISOString().split("T")[0];if(e===r){let i=new Date;return`${i.getHours().toString().padStart(2,"0")}:${i.getMinutes().toString().padStart(2,"0")}`}return null}get isSelectedDateToday(){let t=this.timbraturaForm?.get("data");if(!t?.value)return!1;let e=t.value,r=new Date().toISOString().split("T")[0];return e===r}timeRangeValidator(t){let e=t.get("ora_inizio")?.value,r=t.get("ora_fine")?.value;return!e||!r?null:r<=e?{invalidTimeRange:{message:"L'ora di uscita deve essere successiva all'ora di ingresso"}}:null}get hasTimeRangeError(){return this.timbraturaForm.hasError("invalidTimeRange")}get timeRangeErrorMessage(){return this.timbraturaForm.getError("invalidTimeRange")?.message||""}noFutureDateValidator(t){if(!t.value)return null;let e=new Date(t.value),r=new Date;return r.setHours(23,59,59,999),e>r?{futureDate:{message:"Non \xE8 possibile inserire timbrature future"}}:null}get maxDate(){return new Date().toISOString().split("T")[0]}creaPausaGroup(){return this.fb.group({inizio:["",this.noFutureTimeValidator.bind(this)],fine:["",this.noFutureTimeValidator.bind(this)]},{validators:this.pauseTimeRangeValidator})}revalidateAllPauses(){this.pause.controls.forEach(t=>{t.get("inizio")?.updateValueAndValidity(),t.get("fine")?.updateValueAndValidity()})}pauseTimeRangeValidator(t){let e=t.get("inizio")?.value,r=t.get("fine")?.value;return!e||!r?null:r<=e?{invalidPauseTimeRange:{message:"La fine pausa deve essere successiva all'inizio pausa"}}:null}hasPauseTimeError(t){return this.pause.at(t).hasError("invalidPauseTimeRange")}getPauseTimeErrorMessage(t){return this.pause.at(t).getError("invalidPauseTimeRange")?.message||""}get pause(){return this.timbraturaForm.get("pause")}getPausaControl(t,e){return this.pause.at(t).get(e)}aggiungiPausa(){this.pause.push(this.creaPausaGroup())}rimuoviPausa(t){this.pause.length>1&&t>=0&&t<this.pause.length&&this.pause.removeAt(t)}isPauseUsed(t){let e=this.pause.at(t),r=e.get("inizio")?.value,i=e.get("fine")?.value;return!!(r||i)}canRemovePause(t){return this.pause.length>1&&this.isPauseUsed(t)}ottieniPosizione(){if(this.ottenendoPosizione=!0,this.errorMessage="",this.posizioneValida=!1,this.nearestPoint=null,this.distanceToNearest=null,!navigator.geolocation){this.errorMessage="Geolocalizzazione non supportata dal browser",this.ottenendoPosizione=!1;return}let t=[],e=6,r=8e3,i=Date.now(),o=p=>{console.debug("[CreaTimbratura] sample coords",p.coords.latitude,p.coords.longitude,p.coords.accuracy),t.push(p),(typeof p.coords.accuracy=="number"&&p.coords.accuracy<=this.POSITION_ACCURACY_THRESHOLD||t.length>=e||Date.now()-i>r)&&l()},s=p=>{console.error("[CreaTimbratura] geolocation error",p),f(),this.errorMessage=p.message||"Errore nella richiesta di posizione",this.ottenendoPosizione=!1},a=navigator.geolocation.watchPosition(o,s,{enableHighAccuracy:!0,maximumAge:0,timeout:5e3}),l=()=>{let p=null;for(let m of t){if(!p){p=m;continue}let v=typeof m.coords.accuracy=="number"?m.coords.accuracy:1/0,g=typeof p.coords.accuracy=="number"?p.coords.accuracy:1/0;v<g&&(p=m)}if(p)if(console.debug("[CreaTimbratura] best sample",p.coords.latitude,p.coords.longitude,p.coords.accuracy),this.posizioneAttuale={lat:p.coords.latitude,lng:p.coords.longitude,timestamp:new Date,accuracy:p.coords.accuracy},typeof p.coords.accuracy=="number"&&p.coords.accuracy>this.POSITION_ACCURACY_THRESHOLD)this.posizioneValida=!1,this.errorMessage=`Posizione ottenuta con precisione bassa (${Math.round(p.coords.accuracy)} m). Usa un dispositivo con GPS o avvia "Ottieni Posizione" in un luogo con migliore segnale.`,console.warn("[CreaTimbratura] posizione con scarsa accuracy",p.coords.accuracy);else if(this.currentCompany?.timbratura_type==="punti"){let m=this.checkInsidePoints(this.posizioneAttuale);this.posizioneValida=m.inside,this.nearestPoint=m.nearest,this.distanceToNearest=m.distance}else this.posizioneValida=!0;else this.errorMessage="Impossibile ottenere campioni di posizione";f(),this.ottenendoPosizione=!1},f=()=>{typeof a=="number"&&navigator.geolocation.clearWatch&&(navigator.geolocation.clearWatch(a),a=-1)};setTimeout(()=>{this.ottenendoPosizione&&l()},r+200)}checkInsidePoints(t){let e={inside:!1,nearest:null,distance:null};if(!t||!this.currentCompany)return e;let r=this.currentCompany.punch_points||[];if(!r.length)return e;let i=null,o=Number.POSITIVE_INFINITY;console.debug("[checkInsidePoints] posizione utente",t,"punti disponibili",r.length);for(let s of r){let a=this.toNumber(s.lat),l=this.toNumber(s.lng),f=this.toNumber(s.radius_m)||50;if(!isFinite(a)||!isFinite(l)){console.warn("[checkInsidePoints] punto senza coordinate numeriche",s);continue}let p=this.distanzaMetri(t.lat,t.lng,a,l);console.debug("[checkInsidePoints] punto",{id:s.id,name:s.name,plat:a,plng:l,pradius:f,distance_m:Math.round(p)}),p<o&&(o=p,i=Z(A({},s),{lat:a,lng:l,radius_m:f}))}return i?(e.nearest=i,e.distance=Math.round(o),e.inside=o<=(i.radius_m||50),console.debug("[checkInsidePoints] nearest",e.nearest,"distance",e.distance,"inside",e.inside)):console.debug("[checkInsidePoints] nessun punto valido trovato"),e}toNumber(t){if(t==null)return NaN;if(typeof t=="number")return t;if(typeof t=="string"){let e=t.trim().replace(",",".");return Number(e)}return Number(t)}calcolaOreTotali(){let t=this.timbraturaForm.value;if(!t.ora_inizio||!t.ora_fine)return 0;let e=new Date(`2000-01-01T${t.ora_inizio}`),i=new Date(`2000-01-01T${t.ora_fine}`).getTime()-e.getTime();return Math.max(0,i/(1e3*60*60))}calcolaPauseTotali(){let t=0;return this.timbraturaForm.value.pause.forEach(r=>{if(r.inizio&&r.fine){let i=new Date(`2000-01-01T${r.inizio}`),s=new Date(`2000-01-01T${r.fine}`).getTime()-i.getTime();t+=Math.max(0,s/(1e3*60*60))}}),t}calcolaLavoroEffettivo(){let t=this.calcolaOreTotali(),e=this.calcolaPauseTotali();return Math.max(0,t-e)}preparaDatiTimbratura(){let t=this.timbraturaForm.value,e=new Date(`${t.data}T${t.ora_inizio}`),r=t.ora_fine?new Date(`${t.data}T${t.ora_fine}`):null,i=t.pause.filter(a=>a.inizio&&a.fine).map(a=>({start:new Date(`${t.data}T${a.inizio}`).toISOString(),end:new Date(`${t.data}T${a.fine}`).toISOString()})),o=this.posizioneAttuale?[{lat:this.posizioneAttuale.lat,lng:this.posizioneAttuale.lng,address:this.posizioneAttuale.indirizzo,timestamp:this.posizioneAttuale.timestamp.toISOString()}]:[],s=Math.round(this.calcolaLavoroEffettivo()*60);return{start_ts:e.toISOString(),end_ts:r?.toISOString()||null,breaks:i.length>0?i:null,locations:o.length>0?o:null,notes:t.notes||null,total_minutes:s,company_id:this.currentUser?.company_id||"",user_id:this.currentUser?.id||""}}onSubmit(){return _(this,null,function*(){if(this.timbraturaForm.invalid){this.timbraturaForm.markAllAsTouched();return}if(!this.currentUser||!this.currentUser.id){this.errorMessage="Utente non autenticato";return}this.isLoading=!0,this.errorMessage="",this.successMessage="";try{if(this.currentCompany?.timbratura_type==="punti"){let t=this.currentCompany.punch_points||[];if(!t.length){this.isLoading=!1,this.errorMessage="Nessun punto di timbratura configurato per l'azienda.";return}if(!this.posizioneAttuale)try{let i=yield this.askForPositionOnce(12e3);this.posizioneAttuale={lat:i.coords.latitude,lng:i.coords.longitude,timestamp:new Date,accuracy:i.coords.accuracy},console.debug("[CreaTimbratura] posizione ottenuta onSubmit",this.posizioneAttuale)}catch(i){this.isLoading=!1,this.errorMessage=i?.message||"Impossibile ottenere la posizione";return}if((this.posizioneAttuale?.accuracy??1/0)>this.POSITION_ACCURACY_THRESHOLD){this.isLoading=!1,this.errorMessage=`Precisione posizione insufficiente (${Math.round(this.posizioneAttuale?.accuracy??0)} m). Usa un dispositivo con GPS o seleziona manualmente il punto.`;return}let e=null,r=Number.POSITIVE_INFINITY;for(let i of t){let o=Number(i.lat),s=Number(i.lng);if(!isFinite(o)||!isFinite(s))continue;let a=this.distanzaMetri(this.posizioneAttuale.lat,this.posizioneAttuale.lng,o,s);a<r&&(r=a,e=Z(A({},i),{lat:o,lng:s,radius_m:Number(i.radius_m)||50}))}if(this.nearestPoint=e??null,this.distanceToNearest=r===Number.POSITIVE_INFINITY?null:Math.round(r),!e){this.isLoading=!1,this.errorMessage="Nessun punto di timbratura valido configurato (coordinate mancanti).";return}if(this.posizioneValida=r<=(e.radius_m||50),console.debug("[CreaTimbratura] verifica geofence",{nearest:e,nearestDist:r,posizioneValida:this.posizioneValida}),!this.posizioneValida){this.isLoading=!1,this.errorMessage=`Sei fuori dai punti di timbratura consentiti. Distanza: ${Math.round(r)} m (raggio: ${e.radius_m} m).`;return}}yield this.saveTimbratura()}catch(t){console.error("[CreaTimbratura] errore onSubmit",t),this.isLoading=!1,this.errorMessage=t?.message||"Errore durante il salvataggio della timbratura"}})}distanzaMetri(t,e,r,i){let s=S=>S*Math.PI/180,a=s(t),l=s(r),f=s(r-t),p=s(i-e),m=Math.sin(f/2),v=Math.sin(p/2),g=m*m+Math.cos(a)*Math.cos(l)*v*v;return 6371e3*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)))}saveTimbratura(){return _(this,null,function*(){try{let t=this.preparaDatiTimbratura();if(t.company_id=this.currentCompany?.id||this.currentUser?.company_id||t.company_id,!t.user_id||!t.company_id){this.isLoading=!1,this.errorMessage="Impossibile determinare utente o azienda";return}let e=yield this.timbratureService.creaTimbraturaSupabase(t);console.debug("[CreaTimbratura] timbratura creata",e),this.isLoading=!1,this.successMessage="Timbratura registrata con successo!",setTimeout(()=>this.router.navigate(["/lista-timbrature"]),1200)}catch(t){console.error("[CreaTimbratura] errore saveTimbratura",t),this.isLoading=!1,this.errorMessage=t?.message||"Errore durante il salvataggio della timbratura"}})}submitAfterManualConfirm(t){t&&(this.posizioneAttuale={lat:Number(t.lat),lng:Number(t.lng),timestamp:new Date,accuracy:0},this.posizioneValida=!0,this.nearestPoint=t,this.distanceToNearest=0,this.isLoading=!0,this.errorMessage="",this.saveTimbratura())}askForPositionOnce(t=1e4){return new Promise((e,r)=>{if(!navigator.geolocation)return r(new Error("Geolocalizzazione non supportata"));navigator.geolocation.getCurrentPosition(e,i=>{r(i)},{enableHighAccuracy:!0,timeout:t,maximumAge:0})})}pointRadius(t){let e=Number(t?.radius_m??t?.raggio??50);return isFinite(e)&&e>0?e:50}distanceToPoint(t){if(!this.posizioneAttuale)return null;let e=Number(t?.lat),r=Number(t?.lng);if(!isFinite(e)||!isFinite(r))return null;let i=this.distanzaMetri(this.posizioneAttuale.lat,this.posizioneAttuale.lng,e,r);return Math.round(i)}isInsidePoint(t){let e=this.distanceToPoint(t);if(e===null)return!1;let r=this.pointRadius(t);return e<=r}pointLabel(t){if(!t)return"Punto";let e=(t?.city||"").toString().trim(),r=(t?.province||"").toString().trim(),i=(t?.address||"").toString().trim();if(!i&&(t?.name||"").toString().trim())return`${t.name}${e?", "+e+(r?" "+r:""):""}`.trim();if(!i)return t?.name||"Punto";let o=i.split(",").map(S=>S.trim()).filter(Boolean),s=["italia","italy"];for(;o.length&&s.includes(o[o.length-1].toLowerCase());)o.pop();for(;o.length&&/^\d{4,}$/.test(o[o.length-1]);)o.pop();let a="",l="",f=/\b(Via|Viale|Corso|Piazza|Piazzale|Strada|Largo|P.za|Piazzetta|Vicolo|Borgo|Contrada)\b/i;if(o.length>=2&&/^\d+$/.test(o[0]))l=o[0],a=o[1];else if(o.length>=2&&/^\d+$/.test(o[1]))l=o[1],a=o[0];else{let S=o.findIndex(E=>f.test(E));if(S>=0){a=o[S];let E=a.match(/^(.*\D)\s+(\d+\S*)$/);E&&(a=E[1].trim(),l=E[2].trim())}else{a=o[0];let E=a.match(/^(.*\D)\s+(\d+\S*)$/);E&&(a=E[1].trim(),l=E[2].trim())}}let p=a?l?`${a} ${l}`:a:t?.name||"Punto",m=e,v=r;if(!m)for(let S=o.length-1;S>=0;S--){let E=o[S];if(E&&!(E===a||E===l)&&!(/^\d+$/.test(E)||E.length>40)){m=E;break}}if(!v&&m){let S=o.lastIndexOf(m);if(S>=0){let E=o[S+1];E&&E.length<=30&&!/^\d+$/.test(E)&&E.toLowerCase()!=="italia"&&(v=E)}}let g=m?v?`${m} ${v}`:`${m}`:"";return g?`${p}, ${g}`:p}hasPauseErrors(){for(let t=0;t<this.pause.length;t++){let e=this.pause.at(t);if(e.invalid)return!0;let r=e.get("inizio"),i=e.get("fine");if(r?.hasError("futureTime")||i?.hasError("futureTime"))return!0}return!1}static \u0275fac=function(e){return new(e||n)(C(Cr),C(Vt),C(ge),C(Ie),C(wt))};static \u0275cmp=me({type:n,selectors:[["app-crea-timbratura"]],decls:75,vars:13,consts:[[1,"gradient-container"],[1,"form-card"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"generic-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"grid-form"],[1,"filter-group"],[1,"form-label"],["type","date","formControlName","data",3,"max"],[1,"error"],["type","time","formControlName","ora_inizio"],["type","time","formControlName","ora_fine"],[1,"pause-container"],[1,"card","small",2,"margin-bottom","var(--gutter-md)"],["type","button",1,"promethea-button","outline",3,"click","disabled"],["formControlName","notes","rows","4","placeholder","Note opzionali sulla timbratura..."],[4,"ngIf"],[1,"form-actions"],["type","button","routerLink","/lista-timbrature",1,"promethea-button","ghost"],["type","submit",1,"promethea-button",3,"disabled"],[1,"card-header",2,"justify-content","space-between"],[2,"display","flex","align-items","center","gap","var(--gutter-sm)","flex","1"],["type","button","class","promethea-button small secondary",3,"click",4,"ngIf"],[1,"pause-inputs",2,"margin-top","var(--gutter-sm)"],[1,"form-group"],["type","time",1,"form-control",3,"formControl"],[1,"error",2,"margin-top","4px"],[1,"error",2,"margin-top","8px"],["type","button",1,"promethea-button","small","secondary",3,"click"],[1,"location-actions",2,"display","flex","align-items","center","gap","8px"],["type","button",1,"promethea-button","secondary",3,"click","disabled"],["class","chip","style","background:#fff7e6;color:#8a6d00",4,"ngIf"],["class","chip","style","background:#e6fff1;color:#0a7a3a",4,"ngIf"],["class","chip","style","background:#f0f0f0;color:#333",4,"ngIf"],["style","margin-top:12px",4,"ngIf"],["class","status-message error",4,"ngIf"],["class","status-message warning","style","border-left:4px solid #f0ad4e",4,"ngIf"],["class","status-message info",4,"ngIf"],[1,"loading-spinner"],[1,"chip",2,"background","#fff7e6","color","#8a6d00"],[1,"chip",2,"background","#e6fff1","color","#0a7a3a"],[1,"material-icons",2,"vertical-align","middle"],[1,"chip",2,"background","#f0f0f0","color","#333"],[2,"margin-top","12px"],["class","card small",4,"ngIf"],["class","info small","style","margin-top:6px",4,"ngIf"],[1,"card","small"],[2,"display","flex","justify-content","space-between","align-items","center"],[1,"muted",2,"font-size","0.9rem"],[1,"muted",2,"font-size","0.85rem"],[2,"text-align","right"],[1,"chip",3,"ngClass"],[1,"info","small",2,"margin-top","6px"],[1,"status-message","error"],[2,"display","flex","align-items","flex-start","gap","8px"],[1,"muted",2,"margin-top","6px"],[1,"status-message","warning",2,"border-left","4px solid #f0ad4e"],["style","margin-top:8px","class","muted",4,"ngIf"],["style","margin-top:10px",4,"ngIf"],[1,"muted",2,"margin-top","8px"],[2,"margin-top","10px"],[1,"muted",2,"margin-bottom","6px"],["style","display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-top:1px solid #f0f0f0",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","space-between","align-items","center","padding","6px 0","border-top","1px solid #f0f0f0"],["class","muted",4,"ngIf"],["class","muted small",4,"ngIf"],[1,"muted"],["type","button",1,"promethea-button","small",3,"click"],[1,"muted","small"],[1,"status-message","info"],[1,"grid-cards"],[1,"card"],[1,"card-title"],[1,"card-number"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),d(5,"assignment_add"),c()(),u(6,"div",5)(7,"h1",6),d(8,"Nuova Timbratura"),c(),u(9,"p",7),d(10,"Registra la tua timbratura giornaliera"),c()()(),u(11,"form",8),T("ngSubmit",function(){return r.onSubmit()}),u(12,"div",9)(13,"h2",6)(14,"span",4),d(15,"schedule"),c(),d(16," Orario Timbratura "),c(),u(17,"div",10)(18,"div",11)(19,"label",12)(20,"span",4),d(21,"event"),c(),d(22," Data * "),c(),O(23,"input",13),ne(24,AF,3,2,"div",14),c(),u(25,"div",11)(26,"label",12)(27,"span",4),d(28,"play_arrow"),c(),d(29," Ora Ingresso * "),c(),O(30,"input",15),ne(31,NF,3,2,"div",14),c(),u(32,"div",11)(33,"label",12)(34,"span",4),d(35,"stop"),c(),d(36," Ora Uscita "),c(),O(37,"input",16),ne(38,PF,2,1,"div",14),ne(39,kF,2,1,"div",14),c()()(),u(40,"div",9)(41,"h2",6)(42,"span",4),d(43,"free_breakfast"),c(),d(44," Gestione Pause "),c(),u(45,"div",17),Dt(46,UF,23,7,"div",18,Gg),u(48,"button",19),T("click",function(){return r.aggiungiPausa()}),u(49,"span",4),d(50,"add"),c(),d(51," Aggiungi Pausa "),c()()(),u(52,"div",9)(53,"h2",6)(54,"span",4),d(55,"notes"),c(),d(56," Dettagli Aggiuntivi "),c(),u(57,"div",10)(58,"div",11)(59,"label",12)(60,"span",4),d(61,"sticky_note_2"),c(),d(62," Note "),c(),O(63,"textarea",20),c()(),x(64,sL,19,12,"div",21),c(),ne(65,lL,19,9,"div",9),u(66,"div",22)(67,"button",23)(68,"span",4),d(69,"arrow_back"),c(),d(70," Torna alle Timbrature "),c(),u(71,"button",24),x(72,cL,3,0,"ng-container",21)(73,uL,2,0,"ng-container",21),d(74),c()()()()()),e&2){let i,o,s;h(11),y("formGroup",r.timbraturaForm),h(12),y("max",r.maxDate),h(),re((i=r.timbraturaForm.get("data"))!=null&&i.invalid&&((i=r.timbraturaForm.get("data"))!=null&&i.touched)?24:-1),h(7),re((o=r.timbraturaForm.get("ora_inizio"))!=null&&o.invalid&&((o=r.timbraturaForm.get("ora_inizio"))!=null&&o.touched)?31:-1),h(7),re(r.hasTimeRangeError?38:-1),h(),re((s=r.timbraturaForm.get("ora_fine"))!=null&&s.hasError("futureTime")?39:-1),h(7),xt(r.pause.controls),h(2),y("disabled",r.hasPauseErrors()),h(16),y("ngIf",(r.currentCompany==null?null:r.currentCompany.timbratura_type)==="punti"),h(),re(r.calcolaOreTotali()>0?65:-1),h(6),y("disabled",r.timbraturaForm.invalid||r.isLoading||(r.currentCompany==null?null:r.currentCompany.timbratura_type)==="punti"&&!r.posizioneValida),h(),y("ngIf",!r.isLoading),h(),y("ngIf",r.isLoading),h(),M(" ",r.isLoading?"Salvando...":"Salva Timbratura"," ")}},dependencies:[_e,pl,Ye,Ne,Sr,Er,Ke,Ze,wr,Tv,On,Qn,Tt,Pt,qt],styles:[".pause-inputs[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-md)}.pause-inputs[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}@media (max-width: 768px){.pause-inputs[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm)}}"]})};function dL(n,t){if(n&1&&(u(0,"div",18)(1,"span",19),d(2,"Civico"),c(),u(3,"span",20),d(4),c()()),n&2){let e=b(2);h(4),R(e.azienda.civic_number)}}function fL(n,t){if(n&1&&(u(0,"div",11)(1,"div",16)(2,"span",4),d(3,"corporate_fare"),c(),u(4,"h3",12),d(5,"Informazioni Azienda"),c()(),u(6,"div",17)(7,"div",18)(8,"span",19),d(9,"Nome Azienda"),c(),u(10,"span",20),d(11),c()(),u(12,"div",18)(13,"span",19),d(14,"Partita IVA"),c(),u(15,"span",20),d(16),c()(),u(17,"div",18)(18,"span",19),d(19,"Forma Giuridica"),c(),u(20,"span",20),d(21),c()(),u(22,"div",18)(23,"span",19),d(24,"Settore"),c(),u(25,"span",20),d(26),c()(),x(27,dL,5,1,"div",21),c()()),n&2){let e=b();h(11),R(e.azienda.name),h(5),R(e.azienda.vat),h(5),R(e.azienda.legal_form||"Non specificata"),h(5),R(e.azienda.category||"Non specificato"),h(),y("ngIf",e.azienda.civic_number)}}function pL(n,t){if(n&1&&(u(0,"span",24),d(1),c()),n&2){let e=b(3);h(),be(" ",e.azienda.city," ",e.azienda.province," ")}}function hL(n,t){if(n&1&&(u(0,"div",18)(1,"span",4),d(2,"location_on"),c(),u(3,"div",22)(4,"span",19),d(5,"Indirizzo"),c(),u(6,"span",20),d(7),c(),x(8,pL,2,2,"span",23),c()()),n&2){let e=b(2);h(7),R(e.azienda.name),h(),y("ngIf",(e.azienda==null?null:e.azienda.city)||(e.azienda==null?null:e.azienda.province))}}function mL(n,t){if(n&1&&(u(0,"div",18)(1,"span",4),d(2,"web"),c(),u(3,"div",22)(4,"span",19),d(5,"Sito Web"),c(),u(6,"a",25),d(7),c()()()),n&2){let e=b(2);h(6),y("href",e.azienda.website,sd),h(),R(e.azienda.website)}}function gL(n,t){if(n&1&&(u(0,"div",18)(1,"span",4),d(2,"person"),c(),u(3,"div",22)(4,"span",19),d(5,"Amministratore"),c(),u(6,"span",20),d(7),c(),u(8,"span",24),d(9),c()()()),n&2){let e=b(2);h(7),be("",e.adminAzienda.first_name," ",e.adminAzienda.last_name),h(2),R(e.adminAzienda.email)}}function vL(n,t){if(n&1&&(u(0,"div",11)(1,"div",16)(2,"span",4),d(3,"contact_page"),c(),u(4,"h3",12),d(5,"Contatti"),c()(),u(6,"div",17),x(7,hL,9,2,"div",21)(8,mL,8,2,"div",21)(9,gL,10,3,"div",21),c()()),n&2){let e=b();h(7),y("ngIf",e.azienda==null?null:e.azienda.address),h(),y("ngIf",e.azienda==null?null:e.azienda.website),h(),y("ngIf",e.adminAzienda)}}function yL(n,t){if(n&1&&(u(0,"div",18)(1,"span",19),d(2,"Orario Ufficio"),c(),u(3,"span",20),d(4),c()()),n&2){let e=b(2);h(4),be("",e.azienda.opening_time," - ",e.azienda.closing_time)}}function _L(n,t){if(n&1&&(u(0,"div",30)(1,"span",31),d(2),c(),u(3,"span",32),d(4),c()()),n&2){let e=t.$implicit,r=b(2);h(2),R(e.label),h(),xe("closed",r.isGiornoChiuso(e.key)),h(),M(" ",r.getOrarioGiorno(e.key)," ")}}function bL(n,t){if(n&1&&(u(0,"div",11)(1,"div",16)(2,"span",4),d(3,"schedule"),c(),u(4,"h3",12),d(5,"Orari di Lavoro"),c()(),u(6,"div",17),x(7,yL,5,2,"div",21),u(8,"div",26)(9,"h4",27),d(10,"Orari Settimanali"),c(),u(11,"div",28),x(12,_L,5,4,"div",29),c()()()()),n&2){let e=b();h(7),y("ngIf",(e.azienda==null?null:e.azienda.opening_time)&&(e.azienda==null?null:e.azienda.closing_time)),h(5),y("ngForOf",e.giorniSettimana)}}function wL(n,t){if(n&1&&(u(0,"div",35)(1,"div",36),d(2),c(),u(3,"div",37)(4,"div",38),d(5),c(),u(6,"div",39),d(7),c()(),u(8,"div",40),d(9),c()()),n&2){let e=t.$implicit,r=b(2);h(2),be(" ",((e==null?null:e.first_name)||"")==null?null:((e==null?null:e.first_name)||"").charAt(0),"",((e==null?null:e.last_name)||"")==null?null:((e==null?null:e.last_name)||"").charAt(0)," "),h(3),be("",e==null?null:e.first_name," ",e==null?null:e.last_name),h(),bi("role-"+(e==null?null:e.role)),h(),M(" ",r.getRuoloLabel(e==null?null:e.role)," "),h(),xe("active",e==null?null:e.is_active),h(),M(" ",e!=null&&e.is_active?"Attivo":"Inattivo"," ")}}function EL(n,t){if(n&1&&(u(0,"div",10)(1,"h2",6)(2,"span",4),d(3,"groups"),c(),d(4," Team Aziendale "),c(),u(5,"div",33),x(6,wL,10,10,"div",34),c()()),n&2){let e=b();h(6),y("ngForOf",e.dipendenti)}}function CL(n,t){n&1&&(u(0,"button",43)(1,"span",4),d(2,"add"),c(),d(3," Nuovo Annuncio "),c())}function SL(n,t){if(n&1&&(u(0,"div",46)(1,"div",47)(2,"h4",48),d(3),c(),u(4,"span",49),d(5),z(6,"date"),c()(),u(7,"p",50),d(8),c(),u(9,"div",51),d(10),c()()),n&2){let e=t.$implicit;h(3),R(e.title),h(2),R(W(6,4,e.date,"dd/MM/yyyy")),h(3),R(e.content),h(2),M("Pubblicato da ",e.author)}}function DL(n,t){if(n&1&&(u(0,"div",44),x(1,SL,11,7,"div",45),c()),n&2){let e=b(2);h(),y("ngForOf",e.annunci)}}function xL(n,t){n&1&&(u(0,"div",52)(1,"span",4),d(2,"campaign"),c(),u(3,"h3"),d(4,"Nessun annuncio"),c(),u(5,"p"),d(6,"Non ci sono annunci aziendali al momento."),c()())}function IL(n,t){if(n&1&&(u(0,"div",10)(1,"div",2)(2,"h2",6)(3,"span",4),d(4,"announcement"),c(),d(5," Annunci Aziendali "),c(),x(6,CL,4,0,"button",41),c(),x(7,DL,2,1,"div",42)(8,xL,7,0,"ng-template",null,0,il),c()),n&2){let e=ao(9),r=b();h(6),y("ngIf",r.hasRole("admin")),h(),y("ngIf",r.annunci.length>0)("ngIfElse",e)}}function TL(n,t){n&1&&(u(0,"div",53),O(1,"div",54),u(2,"p"),d(3,"Caricamento informazioni aziendali..."),c()())}var Sp=class n{constructor(t,e){this.authService=t;this.companyService=e}azienda=null;adminAzienda=null;dipendenti=[];statistiche=null;annunci=[];currentUser=null;isLoading=!0;giorniSettimana=[{key:"monday",label:"Luned\xEC"},{key:"tuesday",label:"Marted\xEC"},{key:"wednesday",label:"Mercoled\xEC"},{key:"thursday",label:"Gioved\xEC"},{key:"friday",label:"Venerd\xEC"},{key:"saturday",label:"Sabato"},{key:"sunday",label:"Domenica"}];ngOnInit(){this.authService.currentUser$.subscribe(t=>{this.currentUser=t,t&&this.caricaDatiAzienda(t.company_id)})}caricaDatiAzienda(t){this.isLoading=!0,this.companyService.getAzienda(t).subscribe(e=>{if(!e){console.warn("Nessuna azienda trovata per id",t),this.isLoading=!1;return}this.azienda=e,this.caricaDipendenti(t)},e=>{console.error("Errore nel caricamento dati azienda:",e),this.isLoading=!1})}caricaDipendenti(t){this.companyService.getDipendenti(t).subscribe({next:e=>{this.dipendenti=e,this.caricaAdminAzienda(e),this.caricaStatistiche(e),this.caricaAnnunci(),this.isLoading=!1},error:e=>{console.error("Errore nel caricamento dipendenti:",e),this.isLoading=!1}})}caricaAdminAzienda(t){let e=t.find(r=>r.role==="admin");e&&(this.adminAzienda=e)}caricaStatistiche(t){this.statistiche={dipendentiTotali:t.length,dipendentiAttivi:t.filter(e=>e.is_active).length,timbratureOggi:Math.floor(Math.random()*t.length)+1,presenzeOggi:Math.floor(Math.random()*t.filter(e=>e.is_active).length)+1}}caricaAnnunci(){this.annunci=[{title:"Nuovo Orario Estivo",content:"A partire dal 1 giugno, l'orario di lavoro sar\xE0 dalle 8:00 alle 16:00.",date:new Date("2024-05-15"),author:"Amministrazione"},{title:"Team Building",content:"Venerd\xEC prossimo giornata di team building. Partecipazione obbligatoria.",date:new Date("2024-05-10"),author:"Risorse Umane"}]}hasRole(t){return this.authService.hasRole(t)}isGiornoChiuso(t){return t?!!this.azienda?.closed_days?.includes(t):!1}getOrarioGiorno(t){if(!t)return"Non specificato";if(this.isGiornoChiuso(t))return"Chiuso";let r=this.azienda?.opening_hours?.[t];return r?r?.closed||!r?.open||!r?.close?"Chiuso":`${r.open} - ${r.close}`:this.azienda?.opening_time&&this.azienda?.closing_time?`${this.azienda.opening_time} - ${this.azienda.closing_time}`:"Non specificato"}getRuoloLabel(t){if(!t)return"Dipendente";switch(t){case"admin":return"Amministratore";case"manager":return"Manager";case"employee":return"Dipendente";default:return t.charAt(0).toUpperCase()+t.slice(1)}}static \u0275fac=function(e){return new(e||n)(C(ge),C(wt))};static \u0275cmp=me({type:n,selectors:[["app-profilo-aziendale"]],decls:51,vars:10,consts:[["noAnnunci",""],[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"grid-cards"],["class","card",4,"ngIf"],[1,"form-section"],[1,"card"],[1,"card-title"],[1,"card-number"],["class","form-section",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"card-header"],[1,"card-content"],[1,"info-item"],[1,"info-label"],[1,"info-value"],["class","info-item",4,"ngIf"],[1,"contact-info"],["class","info-detail",4,"ngIf"],[1,"info-detail"],["target","_blank",1,"info-link",3,"href"],[1,"opening-hours"],[1,"subsection-title"],[1,"hours-grid"],["class","hour-item",4,"ngFor","ngForOf"],[1,"hour-item"],[1,"day-label"],[1,"hour-value"],[1,"team-grid"],["class","team-member",4,"ngFor","ngForOf"],[1,"team-member"],[1,"member-avatar"],[1,"member-info"],[1,"member-name"],[1,"member-role","chip"],[1,"member-status"],["class","promethea-button outline",4,"ngIf"],["class","announcements-list",4,"ngIf","ngIfElse"],[1,"promethea-button","outline"],[1,"announcements-list"],["class","announcement-item",4,"ngFor","ngForOf"],[1,"announcement-item"],[1,"announcement-header"],[1,"announcement-title"],[1,"announcement-date"],[1,"announcement-content"],[1,"announcement-author"],[1,"empty-state"],[1,"loading-container"],[1,"loading-spinner"]],template:function(e,r){e&1&&(u(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),d(4,"business"),c()(),u(5,"div",5)(6,"h1",6),d(7,"Profilo Aziendale"),c(),u(8,"p",7),d(9,"Informazioni e contatti dell'azienda"),c()()(),u(10,"div",8),x(11,fL,28,5,"div",9)(12,vL,10,3,"div",9)(13,bL,13,2,"div",9),c(),u(14,"div",10)(15,"h2",6)(16,"span",4),d(17,"insights"),c(),d(18," Statistiche Aziendali "),c(),u(19,"div",8)(20,"div",11)(21,"h3",12),d(22,"Dipendenti Totali"),c(),u(23,"div",13),d(24),c(),u(25,"p",7),d(26,"Persone nell'azienda"),c()(),u(27,"div",11)(28,"h3",12),d(29,"Dipendenti Attivi"),c(),u(30,"div",13),d(31),c(),u(32,"p",7),d(33,"Attualmente attivi"),c()(),u(34,"div",11)(35,"h3",12),d(36,"Timbrature Oggi"),c(),u(37,"div",13),d(38),c(),u(39,"p",7),d(40,"Registrate oggi"),c()(),u(41,"div",11)(42,"h3",12),d(43,"Presenze Oggi"),c(),u(44,"div",13),d(45),c(),u(46,"p",7),d(47,"Dipendenti in ufficio"),c()()()(),x(48,EL,7,1,"div",14)(49,IL,10,3,"div",14)(50,TL,4,0,"div",15),c()),e&2&&(h(11),y("ngIf",r.azienda),h(),y("ngIf",r.azienda),h(),y("ngIf",r.azienda),h(11),R((r.statistiche==null?null:r.statistiche.dipendentiTotali)||0),h(7),R((r.statistiche==null?null:r.statistiche.dipendentiAttivi)||0),h(7),R((r.statistiche==null?null:r.statistiche.timbratureOggi)||0),h(7),R((r.statistiche==null?null:r.statistiche.presenzeOggi)||0),h(3),y("ngIf",((r.dipendenti==null?null:r.dipendenti.length)??0)>0),h(),y("ngIf",r.hasRole("admin")||r.hasRole("manager")),h(),y("ngIf",r.isLoading))},dependencies:[_e,Ye,Ne,ut],encapsulation:2})};var la=class n{message="";fullScreen=!0;size="64px";get style(){return{"--spinner-size":this.size}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=me({type:n,selectors:[["app-loading-spinner"]],inputs:{message:"message",fullScreen:"fullScreen",size:"size"},decls:7,vars:4,consts:[["role","status","aria-live","polite","aria-busy","true",1,"spinner-overlay"],[1,"spinner-wrap",3,"ngStyle"],["aria-hidden","true",1,"loading-spinner"],[1,"spinner-message"],[1,"visually-hidden"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1),O(2,"div",2),u(3,"div",3),d(4),c(),u(5,"span",4),d(6,"Caricamento in corso"),c()()()),e&2&&(xe("fullscreen",r.fullScreen),h(),y("ngStyle",r.style),h(3),R(r.message||"Caricamento in corso..."))},dependencies:[_e,C0],styles:[".spinner-overlay[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:var(--gutter-lg);width:100%;box-sizing:border-box;pointer-events:none}.spinner-overlay.fullscreen[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:9999;background:var(--background);pointer-events:auto}.spinner-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:calc(var(--gutter-sm) / 2);padding:calc(var(--gutter-sm));border-radius:12px;background:transparent}.visually-hidden[_ngcontent-%COMP%]{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px}.loading-spinner[_ngcontent-%COMP%]{min-width:48px;min-height:48px;width:var(--fs-xl);height:var(--fs-xl);border-radius:50%;border:6px solid color-mix(in srgb,var(--muted) 25%,transparent);border-top-color:var(--primary-color, #1976d2);box-sizing:border-box;animation:_ngcontent-%COMP%_spinner-rotate .9s linear infinite}.spinner-message[_ngcontent-%COMP%]{margin-top:8px;color:var(--text-muted);opacity:.95;text-align:center;max-width:min(320px,80vw);white-space:normal;line-height:1.2;font-weight:700;font-style:italic}@keyframes _ngcontent-%COMP%_spinner-rotate{to{transform:rotate(360deg)}}"]})};function ML(n,t){if(n&1&&(u(0,"div",17),d(1),c()),n&2){let e=b();h(),R(e.error)}}function AL(n,t){n&1&&(u(0,"div",18),d(1,"Nessun invito presente"),c())}function OL(n,t){if(n&1){let e=J();u(0,"li",19)(1,"div",20)(2,"strong",21),d(3),c(),u(4,"small",18),d(5),z(6,"date"),c()(),u(7,"div",22)(8,"button",23),T("click",function(){let i=N(e).$implicit,o=b();return P(o.rimuovi(i))}),u(9,"span",5),d(10,"delete"),c()()()()}if(n&2){let e=t.$implicit,r=b();h(3),R(e.email),h(2),R(W(6,3,e.created_at,"dd/MM/yyyy")),h(3),y("disabled",r.loading)}}var ca=class n{constructor(t,e){this.invitiService=t;this.auth=e}companyId;closeModal=new Le;inviti=[];newEmail="";loading=!1;error="";userSub;currentUserId=null;ngOnInit(){this.userSub=this.auth.currentUser$.subscribe(t=>{this.currentUserId=t?.id??null}),this.load()}ngOnDestroy(){this.userSub?.unsubscribe()}load(){this.companyId&&this.invitiService.listByCompany(this.companyId).subscribe({next:t=>this.inviti=t,error:t=>{console.error("Inviti load error",t),t?.message?.includes('relation "employee_invitations" does not exist')&&console.warn("La tabella employee_invitations non esiste ancora in Supabase. Esegui la migrazione SQL.")}})}aggiungi(){if(this.error="",!this.newEmail||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.newEmail)){this.error="Inserire una email valida";return}if(!this.companyId){this.error="Company non disponibile";return}this.loading=!0;let t=this.currentUserId;this.invitiService.addInvite(this.companyId,this.newEmail,t??void 0).subscribe({next:()=>{this.newEmail="",this.loading=!1,this.load()},error:e=>{this.loading=!1,this.error="Errore aggiunta",console.error("Errore addInvite:",e),e?.message?.includes('relation "employee_invitations" does not exist')&&(this.error="Tabella inviti non trovata nel DB. Esegui la migrazione SQL.")}})}rimuovi(t){confirm(`Rimuovere ${t.email}?`)&&(this.loading=!0,this.invitiService.removeInviteById(t.id).subscribe({next:()=>{this.loading=!1,this.load()},error:e=>{this.loading=!1,console.error(e)}}))}close(){this.closeModal.emit()}static \u0275fac=function(e){return new(e||n)(C(sa),C(ge))};static \u0275cmp=me({type:n,selectors:[["app-inviti-dipendenti"]],inputs:{companyId:"companyId"},outputs:{closeModal:"closeModal"},decls:23,vars:5,consts:[["tabindex","-1","role","dialog","aria-modal","true",1,"modal-overlay",3,"click"],[1,"modal-card",3,"click"],[1,"modal-header"],[1,"h3"],["aria-label","Chiudi",1,"icon-button",3,"click"],[1,"material-icons"],[1,"modal-body"],[1,"form-group"],[1,"form-label"],["type","email","placeholder","nome@esempio.it",1,"form-control",3,"ngModelChange","ngModel"],["class","text-error",4,"ngIf"],[1,"form-actions"],[1,"promethea-button",3,"click","disabled"],[1,"divider"],["class","text-muted",4,"ngIf"],[1,"invites-list"],["class","list-row",4,"ngFor","ngForOf"],[1,"text-error"],[1,"text-muted"],[1,"list-row"],[1,"invite-left"],[1,"invite-email"],[1,"invite-actions"],["aria-label","Rimuovi",1,"icon-button",3,"click","disabled"]],template:function(e,r){e&1&&(u(0,"div",0),T("click",function(){return r.close()}),u(1,"div",1),T("click",function(o){return o.stopPropagation()}),u(2,"header",2)(3,"h3",3),d(4,"Inviti dipendenti"),c(),u(5,"button",4),T("click",function(){return r.close()}),u(6,"span",5),d(7,"close"),c()()(),u(8,"section",6)(9,"div",7)(10,"label",8),d(11,"Email da invitare"),c(),u(12,"input",9),oe("ngModelChange",function(o){return le(r.newEmail,o)||(r.newEmail=o),o}),c(),x(13,ML,2,1,"div",10),c(),u(14,"div",11)(15,"button",12),T("click",function(){return r.aggiungi()}),u(16,"span",5),d(17,"person_add"),c(),d(18," Aggiungi "),c()(),O(19,"hr",13),x(20,AL,2,0,"div",14),u(21,"ul",15),x(22,OL,11,6,"li",16),c()()()()),e&2&&(h(12),ie("ngModel",r.newEmail),h(),y("ngIf",r.error),h(2),y("disabled",r.loading),h(5),y("ngIf",(r.inviti==null?null:r.inviti.length)===0),h(2),y("ngForOf",r.inviti))},dependencies:[_e,Ye,Ne,ln,Ke,Ze,Zt,ut],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:var(--gutter-lg, 20px);background:#0000006b;z-index:1200}.modal-card[_ngcontent-%COMP%]{width:100%;max-width:720px;background:var(--card-background, #fff);color:var(--text-color, #111);border-radius:12px;box-shadow:0 8px 28px #00000052;overflow:hidden}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:16px 18px;border-bottom:1px solid color-mix(in srgb,var(--muted, #ddd) 18%,transparent)}.modal-body[_ngcontent-%COMP%]{padding:14px 18px 20px}.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:600}.form-control[type=email][_ngcontent-%COMP%]{width:100%;max-width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;margin-bottom:12px}.invites-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.invites-list[_ngcontent-%COMP%]   .list-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 0;border-bottom:1px dashed color-mix(in srgb,var(--muted, #ddd) 12%,transparent)}.invite-left[_ngcontent-%COMP%]{min-width:0;flex:1 1 auto;overflow:hidden}.invite-email[_ngcontent-%COMP%]{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.invite-actions[_ngcontent-%COMP%]{flex:0 0 auto;margin-left:8px}@media (max-width:520px){.modal-card[_ngcontent-%COMP%]{max-width:calc(100% - 24px);margin:0 6px}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}.form-actions[_ngcontent-%COMP%]{flex-wrap:wrap;gap:8px}}"]})};var Fn=class n{constructor(t){this.supabaseService=t}getDipendenti(t){if(!t||t==="null"||t==="undefined")return console.warn("[Dipendenti] getDipendenti chiamato con companyId non valido:",t),$([]);let r=this.supabaseService.getClient().from("users").select("*").eq("company_id",t).then(i=>{if(console.log("[Dipendenti] getDipendenti raw response",i),i.error)throw i.error;return i.data??[]});return Q(r)}getDipendenteById(t){if(!t)return $(null);let r=this.supabaseService.getClient().from("users").select("*").eq("id",t).single().then(i=>{if(i.error)throw i.error;return i.data});return Q(r)}static \u0275fac=function(e){return new(e||n)(V(un))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var RL=()=>[],NL=n=>["chip",n];function PL(n,t){n&1&&O(0,"app-loading-spinner")}function kL(n,t){if(n&1){let e=J();u(0,"button",29),T("click",function(){N(e);let i=b();return P(i.openInvitiModal())}),u(1,"span",4),d(2,"person_add"),c(),d(3," Nuovo Dipendente "),c()}}function FL(n,t){if(n&1){let e=J();u(0,"button",39),T("click",function(){N(e);let i=b().$implicit,o=b();return P(o.eliminaDipendente(i))}),u(1,"span",4),d(2,"delete"),c()()}}function LL(n,t){if(n&1){let e=J();u(0,"tr")(1,"td")(2,"div",30)(3,"div",31),d(4),c(),u(5,"div",32)(6,"a",33),T("click",function(i){let o=N(e).$implicit,s=b();return P(s.apriDettaglio(o.id,i))}),u(7,"strong"),d(8),c()()()()(),u(9,"td"),d(10),c(),u(11,"td")(12,"span",34),d(13),c()(),u(14,"td")(15,"span",34),d(16),c()(),u(17,"td"),d(18),c(),u(19,"td"),d(20),z(21,"date"),c(),u(22,"td")(23,"div",35)(24,"button",36),T("click",function(){let i=N(e).$implicit,o=b();return P(o.modificaDipendente(i))}),u(25,"span",4),d(26,"edit"),c()(),u(27,"button",37),T("click",function(){let i=N(e).$implicit,o=b();return P(o.cambiaStatoDipendente(i))}),u(28,"span",4),d(29),c()(),x(30,FL,3,0,"button",38),c()()()}if(n&2){let e=t.$implicit,r=b();h(4),be(" ",(e.first_name||"")[0],"",(e.last_name||"")[0]," "),h(4),be("",e.first_name||"-"," ",e.last_name||"-"),h(2),R(e.email||"-"),h(2),y("ngClass",Kg(17,NL,"role-"+(e.role||"unknown"))),h(),M(" ",e.role||"\u2014"," "),h(2),y("ngClass",e!=null&&e.is_active?"chip active":"chip inactive"),h(),M(" ",e!=null&&e.is_active?"Attivo":"Inattivo"," "),h(2),R(e.phone||"-"),h(2),M(" ",e!=null&&e.hire_date?W(21,14,e.hire_date,"dd/MM/yyyy"):"Non specificata"," "),h(7),y("title",e!=null&&e.is_active?"Disattiva":"Attiva"),h(2),R(e!=null&&e.is_active?"person_off":"person"),h(),y("ngIf",r.hasRole("admin"))}}function jL(n,t){if(n&1){let e=J();u(0,"button",29),T("click",function(){N(e);let i=b(2);return P(i.openInvitiModal())}),u(1,"span",4),d(2,"person_add"),c(),d(3," Aggiungi il primo dipendente "),c()}}function VL(n,t){if(n&1&&(u(0,"div",40)(1,"span",4),d(2,"group"),c(),u(3,"h3"),d(4,"Nessun dipendente trovato"),c(),u(5,"p",41),d(6,"Non sono stati trovati dipendenti con i filtri attuali."),c(),x(7,jL,4,0,"button",21),c()),n&2){let e=b();h(7),y("ngIf",e.hasRole("admin"))}}function UL(n,t){if(n&1&&(u(0,"div",42)(1,"div",43),d(2),c()()),n&2){let e=b();h(2),be(" Mostrando ",e.dipendentiFiltrati.length," di ",e.dipendenti.length," dipendenti ")}}function BL(n,t){if(n&1){let e=J();u(0,"app-inviti-dipendenti",44),T("closeModal",function(){N(e);let i=b();return P(i.showInvitiModal=!1)}),c()}if(n&2){let e=b();y("companyId",(e.aziendaCorrente==null?null:e.aziendaCorrente.id)??null)}}var Dp=class n{constructor(t,e,r,i){this.companyService=t;this.dipendentiService=e;this.authService=r;this.router=i}dipendenti=[];dipendentiFiltrati=[];currentUser=null;isLoading=!1;showInvitiModal=!1;aziendaCorrente=null;filtroTesto="";filtroRuolo="";filtroStato="";ngOnInit(){this.isLoading=!0,this.authService.currentUser$.pipe(Et(1),Ve(t=>(this.currentUser=t??null,t?.id?this.companyService.getAziendaByAdmin(t.id):$(null)))).subscribe({next:t=>{this.aziendaCorrente=t,this.aziendaCorrente?.id&&this.caricaDipendenti(this.aziendaCorrente.id),this.isLoading=!1},error:t=>{console.error("Errore caricamento azienda corrente",t),this.isLoading=!1}})}caricaDipendenti(t){this.isLoading=!0,this.dipendentiService.getDipendenti(t).subscribe({next:e=>{let r=(e||[]).filter(i=>{let o=this.currentUser?.id&&i.id===this.currentUser.id,s=i.role==="admin";return!o&&!s});this.dipendenti=r,this.applicaFiltri(),this.isLoading=!1},error:e=>{console.error("Errore nel caricamento dei dipendenti (Dipendenti service):",e),this.isLoading=!1}})}applicaFiltri(){let t=this.dipendenti;if(this.filtroTesto){let e=this.filtroTesto.toLowerCase();t=t.filter(r=>r.first_name.toLowerCase().includes(e)||r.last_name.toLowerCase().includes(e)||r.email.toLowerCase().includes(e))}if(this.filtroRuolo&&(t=t.filter(e=>e.role===this.filtroRuolo)),this.filtroStato){let e=this.filtroStato==="attivo";t=t.filter(r=>r.is_active===e)}this.dipendentiFiltrati=t}hasRole(t){return this.authService.hasRole(t)}openInvitiModal(){if(!this.aziendaCorrente||!this.aziendaCorrente.id){alert("Nessuna azienda associata. Assicurati che l'utente sia amministratore di una azienda.");return}this.showInvitiModal=!0}closeInvitiModal(){this.showInvitiModal=!1}modificaDipendente(t){this.router.navigate(["/modifica-dipendente",t.id])}cambiaStatoDipendente(t){let e=!t.is_active;confirm(`Sei sicuro di voler ${e?"attivare":"disattivare"} il dipendente ${t.first_name} ${t.last_name}?`)&&console.log("Cambio stato dipendente:",t.id,e)}eliminaDipendente(t){confirm(`Sei sicuro di voler eliminare il dipendente ${t.first_name} ${t.last_name}? Questa azione non pu\xF2 essere annullata.`)&&console.log("Eliminazione dipendente:",t.id)}trackById(t,e){return e?.id??t}apriDettaglio(t,e){if(e&&(e.preventDefault(),e.stopPropagation()),!t){console.warn("apriDettaglio chiamato senza id");return}this.router.navigate(["dipendenti",t])}static \u0275fac=function(e){return new(e||n)(C(wt),C(Fn),C(ge),C(Ie))};static \u0275cmp=me({type:n,selectors:[["app-lista-dipendenti"]],decls:65,vars:11,consts:[[1,"page-container"],[4,"ngIf"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"filters-section"],[1,"filters-container"],[1,"filter-group"],[1,"form-label"],["type","text","placeholder","Nome, cognome, email...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],["value","admin"],["value","manager"],["value","employee"],["value","attivo"],["value","inattivo"],[1,"actions-container"],["class","promethea-button",3,"click",4,"ngIf"],[1,"table-section"],[1,"table-container"],[1,"crm-table"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","empty-state",4,"ngIf"],["class","pagination-container",4,"ngIf"],[3,"companyId","closeModal",4,"ngIf"],[1,"promethea-button",3,"click"],[1,"user-info-compact"],[1,"user-avatar-small"],[1,"user-details-compact"],["href","#","title","Apri dettaglio",1,"link",3,"click"],[3,"ngClass"],[1,"action-buttons"],["title","Modifica",1,"icon-button",3,"click"],[1,"icon-button",3,"click","title"],["class","icon-button","title","Elimina",3,"click",4,"ngIf"],["title","Elimina",1,"icon-button",3,"click"],[1,"empty-state"],[2,"margin-bottom","var(--gutter-lg)"],[1,"pagination-container"],[1,"pagination-info"],[3,"closeModal","companyId"]],template:function(e,r){e&1&&(u(0,"div",0),x(1,PL,1,0,"app-loading-spinner",1),u(2,"div",2)(3,"div",3)(4,"span",4),d(5,"people"),c()(),u(6,"div",5)(7,"h1",6),d(8,"Lista Dipendenti"),c(),u(9,"p",7),d(10,"Gestisci i dipendenti dell'azienda"),c()()(),u(11,"div",8)(12,"div",9)(13,"div",10)(14,"label",11),d(15,"Cerca"),c(),u(16,"input",12),oe("ngModelChange",function(o){return le(r.filtroTesto,o)||(r.filtroTesto=o),o}),T("input",function(){return r.applicaFiltri()}),c()(),u(17,"div",10)(18,"label",11),d(19,"Ruolo"),c(),u(20,"select",13),oe("ngModelChange",function(o){return le(r.filtroRuolo,o)||(r.filtroRuolo=o),o}),T("change",function(){return r.applicaFiltri()}),u(21,"option",14),d(22,"Tutti"),c(),u(23,"option",15),d(24,"Admin"),c(),u(25,"option",16),d(26,"Manager"),c(),u(27,"option",17),d(28,"Dipendente"),c()()(),u(29,"div",10)(30,"label",11),d(31,"Stato"),c(),u(32,"select",13),oe("ngModelChange",function(o){return le(r.filtroStato,o)||(r.filtroStato=o),o}),T("change",function(){return r.applicaFiltri()}),u(33,"option",14),d(34,"Tutti"),c(),u(35,"option",18),d(36,"Attivo"),c(),u(37,"option",19),d(38,"Inattivo"),c()()()(),u(39,"div",20),x(40,kL,4,0,"button",21),c()(),u(41,"div",22)(42,"div",23)(43,"table",24)(44,"thead")(45,"tr")(46,"th"),d(47,"Nome"),c(),u(48,"th"),d(49,"Email"),c(),u(50,"th"),d(51,"Ruolo"),c(),u(52,"th"),d(53,"Stato"),c(),u(54,"th"),d(55,"Telefono"),c(),u(56,"th"),d(57,"Data Assunzione"),c(),u(58,"th"),d(59,"Azioni"),c()()(),u(60,"tbody"),x(61,LL,31,19,"tr",25),c()()(),x(62,VL,8,1,"div",26),c(),x(63,UL,3,2,"div",27),c(),x(64,BL,1,1,"app-inviti-dipendenti",28)),e&2&&(h(),y("ngIf",r.isLoading),h(15),ie("ngModel",r.filtroTesto),h(4),ie("ngModel",r.filtroRuolo),h(12),ie("ngModel",r.filtroStato),h(8),y("ngIf",r.hasRole("admin")),h(21),y("ngForOf",r.dipendentiFiltrati||Wt(10,RL))("ngForTrackBy",r.trackById),h(),y("ngIf",r.dipendentiFiltrati.length===0),h(),y("ngIf",r.dipendentiFiltrati.length>0),h(),y("ngIf",r.showInvitiModal))},dependencies:[_e,pl,Ye,Ne,Tt,ln,sn,an,Ke,kt,Ze,Zt,la,ca,ut],styles:[".user-info-compact[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm)}.user-avatar-small[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:var(--gradiente);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:.8rem;flex-shrink:0}.user-details-compact[_ngcontent-%COMP%]{min-width:0}.user-details-compact[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chip.role-admin[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 20%,transparent);color:var(--primary)}.chip.role-manager[_ngcontent-%COMP%]{background:color-mix(in srgb,#f59e0b 20%,transparent);color:#f59e0b}.chip.role-employee[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]{background:color-mix(in srgb,#10b981 20%,transparent);color:#10b981}.chip.inactive[_ngcontent-%COMP%]{background:color-mix(in srgb,#ef4444 20%,transparent);color:#ef4444}@media (max-width: 768px){.user-info-compact[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:0}.user-avatar-small[_ngcontent-%COMP%]{margin-bottom:4px}}"]})};var zL=(n,t)=>t.id,$L=(n,t)=>t.giorno;function HL(n,t){if(n&1){let e=J();u(0,"div",8)(1,"button",21),T("click",function(){N(e);let i=b();return P(i.modificaDipendente())}),u(2,"span",3),d(3,"edit"),c(),d(4," Modifica "),c(),u(5,"button",29),T("click",function(){N(e);let i=b();return P(i.generaReport())}),u(6,"span",3),d(7,"download"),c(),d(8," Report "),c()()}}function GL(n,t){if(n&1&&(d(0),z(1,"date")),n&2){let e=b();M(" ",W(1,1,e.dipendente==null?null:e.dipendente.birth_date,"dd/MM/yyyy")," ")}}function WL(n,t){n&1&&d(0," Non specificata ")}function qL(n,t){if(n&1&&(u(0,"span",18),d(1),c()),n&2){let e=b();h(),R(e.dipendente==null?null:e.dipendente.birth_place)}}function YL(n,t){if(n&1&&(d(0),z(1,"date")),n&2){let e=b();M(" ",W(1,1,e.dipendente==null?null:e.dipendente.created_at,"dd/MM/yyyy")," ")}}function KL(n,t){n&1&&d(0," Non specificata ")}function ZL(n,t){n&1&&(u(0,"th"),d(1,"Azioni"),c())}function QL(n,t){if(n&1){let e=J();u(0,"td")(1,"div",31)(2,"button",32),T("click",function(){N(e);let i=b().$implicit,o=b();return P(o.modificaTimbratura(i))}),u(3,"span",3),d(4,"edit"),c()(),u(5,"button",32),T("click",function(){N(e);let i=b().$implicit,o=b();return P(o.eliminaTimbratura(i))}),u(6,"span",3),d(7,"delete"),c()()()()}}function JL(n,t){if(n&1&&(u(0,"tr")(1,"td"),d(2),z(3,"date"),c(),u(4,"td"),d(5),z(6,"date"),c(),u(7,"td"),d(8),z(9,"date"),c(),u(10,"td"),d(11),z(12,"number"),c(),u(13,"td"),d(14),c(),u(15,"td",30),d(16),c(),ne(17,QL,8,0,"td"),c()),n&2){let e=t.$implicit,r=b();h(2),R(W(3,7,e.start_ts,"dd/MM/yyyy")),h(3),R(W(6,10,e.start_ts,"HH:mm")),h(3),R(W(9,13,e.end_ts,"HH:mm")),h(3),M("",W(12,16,e.total_minutes/60,"1.1-1")," ore"),h(3),R(e.breaks?"S\xEC":"No"),h(2),R(e.notes||"Nessuna"),h(),re(r.hasRole("admin")||r.hasRole("manager")?17:-1)}}function XL(n,t){n&1&&(u(0,"div",24)(1,"span",3),d(2,"schedule"),c(),u(3,"h3"),d(4,"Nessuna timbratura"),c(),u(5,"p"),d(6,"Non sono state trovate timbrature recenti per questo dipendente."),c()())}function ej(n,t){if(n&1&&(u(0,"div",27)(1,"div",33),O(2,"div",34),c(),u(3,"div",35),d(4),z(5,"number"),c(),u(6,"div",36),d(7),c()()),n&2){let e=t.$implicit,r=b();h(2),fr("height",r.getAltezzaBarra(e.ore)+"%"),h(2),M("",W(5,4,e.ore,"1.1-1"),"h"),h(3),R(e.giorno)}}function tj(n,t){n&1&&(u(0,"div",28),O(1,"div",37),u(2,"p"),d(3,"Caricamento dettaglio dipendente..."),c()())}var xp=class n{constructor(t,e,r,i){this.route=t;this.router=e;this.dipendentiService=r;this.timbratureService=i}isLoading=!0;dipendente=null;timbratureRecenti=[];statistiche={oreLavorate:0,giorniPresenti:0,mediaOreGiornaliere:0,puntualita:0};andamentoSettimanale=[];ngOnInit(){let t=this.route.snapshot.paramMap.get("id");if(!t){console.error("Dipendente non trovato: id mancante nella route");return}this.isLoading=!0,this.dipendentiService.getDipendenteById(t).subscribe({next:e=>{e?this.dipendente=e:console.error("Dipendente non trovato",t),this.isLoading=!1},error:e=>{console.error("Errore caricamento dipendente",e),this.isLoading=!1}})}caricaDipendente(t){return _(this,null,function*(){try{let e=localStorage.getItem("companyId"),r=yield nr(this.dipendentiService.getDipendenti(e));this.dipendente=r?.find(i=>i.id===t)||null,this.dipendente||(console.error("Dipendente non trovato"),this.router.navigate(["/dipendenti"]))}catch(e){console.error("Errore nel caricamento del dipendente",e)}})}caricaTimbratureRecenti(t){return _(this,null,function*(){try{let e=yield this.timbratureService.getTimbratureUtente(t);this.timbratureRecenti=Array.isArray(e)?e.slice(0,10):[]}catch(e){console.error("Errore nel caricamento delle timbrature",e),this.timbratureRecenti=[{id:"1",start_ts:new Date("2024-01-15T08:00:00"),end_ts:new Date("2024-01-15T17:00:00"),total_minutes:540,breaks:null,notes:"Giornata regolare"}]}})}caricaStatistiche(t){return _(this,null,function*(){try{let e=yield this.timbratureService.getTimbratureUtente(t);this.calcolaStatistiche(Array.isArray(e)?e:[])}catch(e){console.error("Errore nel caricamento delle statistiche",e),this.statistiche={oreLavorate:120.5,giorniPresenti:15,mediaOreGiornaliere:8,puntualita:.85}}})}calcolaStatistiche(t){if(!t.length)return;let e=new Date,r=new Date(e.getFullYear(),e.getMonth(),1),i=t.filter(a=>a.start_ts&&new Date(a.start_ts)>=r),o=i.reduce((a,l)=>a+(l.total_minutes||0)/60,0),s=new Set(i.map(a=>a.start_ts?new Date(a.start_ts).toDateString():"")).size;this.statistiche={oreLavorate:o,giorniPresenti:s,mediaOreGiornaliere:s>0?o/s:0,puntualita:.85}}caricaAndamentoSettimanale(t){return _(this,null,function*(){try{this.andamentoSettimanale=[{giorno:"Lun",ore:7.5},{giorno:"Mar",ore:8.2},{giorno:"Mer",ore:6.8},{giorno:"Gio",ore:8.5},{giorno:"Ven",ore:7},{giorno:"Sab",ore:0},{giorno:"Dom",ore:0}]}catch(e){console.error("Errore nel caricamento dell'andamento settimanale",e)}})}getRuoloLabel(t){return t?{admin:"Amministratore",manager:"Manager",employee:"Dipendente"}[t]||t:"Dipendente"}getDifferenzaOre(){let t=this.dipendente?.monthly_hours||0;return(this.statistiche.oreLavorate||0)-t}getClasseDifferenzaOre(){return this.getDifferenzaOre()>=0?"positive":"negative"}getPercentualeCompletamento(){let t=this.dipendente?.monthly_hours||0,e=this.statistiche.oreLavorate||0;return t>0?e/t:0}getAltezzaBarra(t){let e=Math.max(...this.andamentoSettimanale.map(r=>r.ore));return e>0?t/e*100:0}modificaDipendente(){this.dipendente&&this.router.navigate(["/dipendenti",this.dipendente.id,"modifica"])}generaReport(){this.dipendente&&this.generaReportLocale()}generaReportLocale(){let t=`
      REPORT DIPENDENTE
      =================
      
      Nome: ${this.dipendente?.first_name} ${this.dipendente?.last_name}
      Email: ${this.dipendente?.email}
      Mansione: ${this.dipendente?.job_title}
      
      STATISTICHE MENSILI
      -------------------
      Ore lavorate: ${this.statistiche.oreLavorate}
      Giorni presenti: ${this.statistiche.giorniPresenti}
      Media ore/giorno: ${this.statistiche.mediaOreGiornaliere}
      Puntualit\xE0: ${(this.statistiche.puntualita*100).toFixed(1)}%
    `,e=new Blob([t],{type:"text/plain"}),r=window.URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download=`report_${this.dipendente?.first_name}_${this.dipendente?.last_name}.txt`,i.click(),window.URL.revokeObjectURL(r)}vediTutteTimbrature(){this.dipendente&&this.router.navigate(["/timbrature"],{queryParams:{dipendente:this.dipendente.id}})}modificaTimbratura(t){console.log("Modifica timbratura:",t),this.router.navigate(["/timbrature",t.id,"modifica"])}eliminaTimbratura(t){confirm("Sei sicuro di voler eliminare questa timbratura?")&&(console.log("Elimina timbratura:",t),this.timbratureRecenti=this.timbratureRecenti.filter(e=>e.id!==t.id))}hasRole(t){return!0}static \u0275fac=function(e){return new(e||n)(C(on),C(Ie),C(Fn),C(Vt))};static \u0275cmp=me({type:n,selectors:[["app-dipendente-dettaglio"]],decls:212,vars:49,consts:[[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],["routerLink","/dipendenti",1,"link"],[1,"actions-container"],[1,"grid-cards"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-content"],[1,"info-item"],[1,"contact-info"],[1,"info-label"],[1,"info-value"],[1,"info-detail"],[1,"chip"],[1,"form-section"],[1,"promethea-button","outline",3,"click"],[1,"table-container"],[1,"crm-table"],[1,"empty-state"],[1,"chart-container"],[1,"chart-bars"],[1,"chart-bar"],[1,"loading-container"],[1,"promethea-button",3,"click"],[1,"notes-preview"],[1,"action-buttons"],[1,"icon-button",3,"click"],[1,"bar-container"],[1,"bar-fill"],[1,"bar-value"],[1,"bar-label"],[1,"loading-spinner"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d(4,"person"),c()(),u(5,"div",4)(6,"h1",5),d(7),c(),u(8,"p",6)(9,"a",7),d(10,"Dipendenti"),c(),d(11," / Dettaglio dipendente "),c()(),ne(12,HL,9,0,"div",8),c(),u(13,"div",9)(14,"div",10)(15,"div",11)(16,"span",3),d(17,"badge"),c(),u(18,"h2",12),d(19,"Informazioni Personali"),c()(),u(20,"div",13)(21,"div",14)(22,"span",3),d(23,"email"),c(),u(24,"div",15)(25,"span",16),d(26,"Email"),c(),u(27,"span",17),d(28),c()()(),u(29,"div",14)(30,"span",3),d(31,"phone"),c(),u(32,"div",15)(33,"span",16),d(34,"Telefono"),c(),u(35,"span",17),d(36),c()()(),u(37,"div",14)(38,"span",3),d(39,"cake"),c(),u(40,"div",15)(41,"span",16),d(42,"Data di Nascita"),c(),u(43,"span",17),ne(44,GL,2,4)(45,WL,1,0),c(),ne(46,qL,2,1,"span",18),c()(),u(47,"div",14)(48,"span",3),d(49,"fingerprint"),c(),u(50,"div",15)(51,"span",16),d(52,"Codice Fiscale"),c(),u(53,"span",17),d(54),c()()()()(),u(55,"div",10)(56,"div",11)(57,"span",3),d(58,"work"),c(),u(59,"h2",12),d(60,"Informazioni Lavorative"),c()(),u(61,"div",13)(62,"div",14)(63,"span",3),d(64,"business_center"),c(),u(65,"div",15)(66,"span",16),d(67,"Mansione"),c(),u(68,"span",17),d(69),c()()(),u(70,"div",14)(71,"span",3),d(72,"admin_panel_settings"),c(),u(73,"div",15)(74,"span",16),d(75,"Ruolo"),c(),u(76,"span",19),d(77),c()()(),u(78,"div",14)(79,"span",3),d(80,"toggle_on"),c(),u(81,"div",15)(82,"span",16),d(83,"Stato"),c(),u(84,"span",19),d(85),c()()(),u(86,"div",14)(87,"span",3),d(88,"schedule"),c(),u(89,"div",15)(90,"span",16),d(91,"Tipo di Contratto"),c(),u(92,"span",17),d(93),c()()(),u(94,"div",14)(95,"span",3),d(96,"av_timer"),c(),u(97,"div",15)(98,"span",16),d(99,"Ore Mensili Previste"),c(),u(100,"span",17),d(101),c()()(),u(102,"div",14)(103,"span",3),d(104,"event_available"),c(),u(105,"div",15)(106,"span",16),d(107,"Data Assunzione"),c(),u(108,"span",17),ne(109,YL,2,4)(110,KL,1,0),c()()()()(),u(111,"div",10)(112,"div",11)(113,"span",3),d(114,"insights"),c(),u(115,"h2",12),d(116,"Statistiche Mese Corrente"),c()(),u(117,"div",13)(118,"div",14)(119,"span",16),d(120,"Ore Lavorate"),c(),u(121,"span",17),d(122),z(123,"number"),c()(),u(124,"div",14)(125,"span",16),d(126,"Giorni Presenti"),c(),u(127,"span",17),d(128),c()(),u(129,"div",14)(130,"span",16),d(131,"Media Ore Giornaliere"),c(),u(132,"span",17),d(133),z(134,"number"),c()(),u(135,"div",14)(136,"span",16),d(137,"Puntualit\xE0"),c(),u(138,"span",17),d(139),z(140,"percent"),c()()()(),u(141,"div",10)(142,"div",11)(143,"span",3),d(144,"calendar_today"),c(),u(145,"h2",12),d(146,"Riepilogo Presenze"),c()(),u(147,"div",13)(148,"div",14)(149,"span",16),d(150,"Ore Previste"),c(),u(151,"span",17),d(152),c()(),u(153,"div",14)(154,"span",16),d(155,"Ore Raggiunte"),c(),u(156,"span",17),d(157),z(158,"number"),c()(),u(159,"div",14)(160,"span",16),d(161,"Differenza"),c(),u(162,"span",17),d(163),z(164,"number"),c()(),u(165,"div",14)(166,"span",16),d(167,"Progresso"),c(),u(168,"span",17),d(169),z(170,"percent"),c()()()()(),u(171,"div",20)(172,"div",1)(173,"h2",5)(174,"span",3),d(175,"schedule"),c(),d(176," Timbrature Recenti "),c(),u(177,"button",21),T("click",function(){return r.vediTutteTimbrature()}),u(178,"span",3),d(179,"list"),c(),d(180," Vedi Tutte "),c()(),u(181,"div",22)(182,"table",23)(183,"thead")(184,"tr")(185,"th"),d(186,"Data"),c(),u(187,"th"),d(188,"Ingresso"),c(),u(189,"th"),d(190,"Uscita"),c(),u(191,"th"),d(192,"Ore Totali"),c(),u(193,"th"),d(194,"Pause"),c(),u(195,"th"),d(196,"Note"),c(),ne(197,ZL,2,0,"th"),c()(),u(198,"tbody"),Dt(199,JL,18,19,"tr",null,zL),c()()(),ne(201,XL,7,0,"div",24),c(),u(202,"div",20)(203,"h2",5)(204,"span",3),d(205,"bar_chart"),c(),d(206," Andamento Settimanale "),c(),u(207,"div",25)(208,"div",26),Dt(209,ej,8,7,"div",27,$L),c()()(),ne(211,tj,4,0,"div",28),c()),e&2&&(h(7),be("",r.dipendente==null?null:r.dipendente.first_name," ",r.dipendente==null?null:r.dipendente.last_name),h(5),re(r.hasRole("admin")||r.hasRole("manager")?12:-1),h(16),R(r.dipendente==null?null:r.dipendente.email),h(8),R((r.dipendente==null?null:r.dipendente.phone)||"Non specificato"),h(8),re(r.dipendente!=null&&r.dipendente.birth_date?44:45),h(2),re(r.dipendente!=null&&r.dipendente.birth_place?46:-1),h(8),R((r.dipendente==null?null:r.dipendente.fiscal_code)||"Non specificato"),h(15),R((r.dipendente==null?null:r.dipendente.job_title)||"Non specificata"),h(7),bi("role-"+((r.dipendente==null?null:r.dipendente.role)||"employee")),h(),M(" ",r.getRuoloLabel(r.dipendente==null?null:r.dipendente.role)," "),h(7),xe("active",r.dipendente==null?null:r.dipendente.is_active)("inactive",!(r.dipendente!=null&&r.dipendente.is_active)),h(),M(" ",r.dipendente!=null&&r.dipendente.is_active?"Attivo":"Inattivo"," "),h(8),R(r.dipendente!=null&&r.dipendente.full_time?"Full-Time":"Part-Time"),h(8),M("",(r.dipendente==null?null:r.dipendente.monthly_hours)||0," ore"),h(8),re(r.dipendente!=null&&r.dipendente.created_at?109:110),h(13),M("",W(123,33,r.statistiche.oreLavorate,"1.1-1")," ore"),h(6),M("",r.statistiche.giorniPresenti," giorni"),h(5),M("",W(134,36,r.statistiche.mediaOreGiornaliere,"1.1-1")," ore"),h(6),R(Wr(140,39,r.statistiche.puntualita)),h(13),M("",(r.dipendente==null?null:r.dipendente.monthly_hours)||0," ore"),h(5),M("",W(158,41,r.statistiche.oreLavorate,"1.1-1")," ore"),h(5),bi(r.getClasseDifferenzaOre()),h(),M(" ",W(164,44,r.getDifferenzaOre(),"1.1-1")," ore "),h(6),R(Wr(170,47,r.getPercentualeCompletamento())),h(28),re(r.hasRole("admin")||r.hasRole("manager")?197:-1),h(2),xt(r.timbratureRecenti),h(2),re(r.timbratureRecenti.length===0?201:-1),h(8),xt(r.andamentoSettimanale),h(2),re(r.isLoading?211:-1))},dependencies:[_e,Tt,Pt,qt,hl,ut],styles:["[_ngcontent-%COMP%]:root{--dip-card-min: 500px}.grid-cards[_ngcontent-%COMP%]{gap:var(--gutter-lg);grid-template-columns:repeat(auto-fit,minmax(var(--dip-card-min),1fr));max-width:calc((var(--dip-card-min) * 2) + var(--gutter-lg));width:100%;margin-left:auto;margin-right:auto;box-sizing:border-box}.grid-cards[_ngcontent-%COMP%] > .card[_ngcontent-%COMP%]{width:100%;max-width:none;box-sizing:border-box}"]})};var Ip=class n{constructor(t,e){this.http=t;this.authService=e}baseUrl="/api/reports";generaReportTimbrature(t){let e=this.authService.getAuthHeaders();return this.http.post(`${this.baseUrl}/timbrature`,t,{headers:e})}esportaPDF(t){let e=this.authService.getAuthHeaders();return this.http.post(`${this.baseUrl}/export/pdf`,t,{headers:e,responseType:"blob"})}esportaExcel(t){let e=this.authService.getAuthHeaders();return this.http.post(`${this.baseUrl}/export/excel`,t,{headers:e,responseType:"blob"})}generaReportKPI(t){return this.http.post(`${this.baseUrl}/kpi`,t,{responseType:"blob"})}static \u0275fac=function(e){return new(e||n)(V(hr),V(ge))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function rj(n,t){if(n&1&&(u(0,"option",42),d(1),c()),n&2){let e=t.$implicit;y("value",e.id),h(),be("",e.first_name," ",e.last_name)}}function ij(n,t){if(n&1&&(u(0,"div",43)(1,"div",44),O(2,"div",45),c(),u(3,"div",46),d(4),z(5,"number"),c(),u(6,"div",47),d(7),c()()),n&2){let e=t.$implicit,r=b();h(2),fr("height",r.getAltezzaBarra(e.ore)+"%"),h(2),M("",W(5,4,e.ore,"1.0-1"),"h"),h(3),R(e.nome)}}function oj(n,t){if(n&1&&(u(0,"div",48)(1,"span",49),d(2),c(),u(3,"span",50),d(4),z(5,"percent"),c()()),n&2){let e=t.$implicit;h(2),R(e.fascia),h(2),R(Wr(5,2,e.percentuale))}}function sj(n,t){if(n&1&&(u(0,"tr")(1,"td")(2,"div",51)(3,"div",52),d(4),c(),u(5,"div",53)(6,"strong"),d(7),c()()()(),u(8,"td"),d(9),z(10,"number"),c(),u(11,"td"),d(12),z(13,"number"),c(),u(14,"td"),d(15),c(),u(16,"td"),d(17),z(18,"percent"),c(),u(19,"td")(20,"span",54),d(21),c()()()),n&2){let e=t.$implicit;h(4),M(" ",e.nome.charAt(0)," "),h(3),R(e.nome),h(2),M("",W(10,12,e.oreTotali,"1.1-1"),"h"),h(3),M("",W(13,15,e.oreMedieGiorno,"1.1-1"),"h"),h(3),be("",e.giorniPresente,"/",e.giorniTotali),h(2),R(Wr(18,18,e.puntualita)),h(3),xe("active",e.attivo)("inactive",!e.attivo),h(),M(" ",e.attivo?"Attivo":"Inattivo"," ")}}function aj(n,t){if(n&1&&(u(0,"div",48)(1,"span",49),d(2),c(),u(3,"span",50),d(4),z(5,"number"),c()()),n&2){let e=t.$implicit;h(2),R(e.giorno),h(2),M("",W(5,2,e.ore,"1.1-1"),"h")}}function lj(n,t){if(n&1&&(u(0,"div",55)(1,"span",3),d(2,"info"),c(),u(3,"div",56)(4,"span",57),d(5),c(),u(6,"span",58),d(7),c(),u(8,"span",59),d(9),z(10,"date"),c()()()),n&2){let e=t.$implicit;h(5),R(e.tipo),h(2),R(e.descrizione),h(2),be("",e.dipendente," - ",Wr(10,4,e.data))}}function cj(n,t){n&1&&(u(0,"div",60)(1,"span",3),d(2,"check_circle"),c(),u(3,"h3"),d(4,"Nessuna anomalia"),c(),u(5,"p"),d(6,"Non sono state rilevate anomalie nelle timbrature"),c()())}function uj(n,t){n&1&&(u(0,"div",61),O(1,"div",62),u(2,"p"),d(3,"Caricamento metriche KPI..."),c()())}var Tp=class n{constructor(t,e,r){this.timbratureService=t;this.dipendentiService=e;this.reportsService=r}isLoading=!0;filtroPeriodo="mese";filtroDipendente="tutti";filtroReparto="tutti";kpi={oreTotali:0,presenzeMedie:0,oreMediePerDipendente:0,tassoPuntualita:0};orePerDipendente=[];performanceDipendenti=[];distribuzioneOrari=[];andamentoSettimanale=[];anomalie=[];dipendenti=[];ngOnInit(){return _(this,null,function*(){yield this.caricaDipendenti(),yield this.caricaKPI()})}caricaDipendenti(){return _(this,null,function*(){try{let t=yield ch(this.dipendentiService.getDipendenti());this.dipendenti=t??[]}catch(t){console.error("Errore nel caricamento dei dipendenti",t),this.dipendenti=[]}})}caricaKPI(){return _(this,null,function*(){this.isLoading=!0;try{yield this.simulaCaricamentoDati(),this.kpi={oreTotali:324.5,presenzeMedie:8.2,oreMediePerDipendente:7.8,tassoPuntualita:.87},this.orePerDipendente=[{nome:"Mario Rossi",ore:45.2},{nome:"Luca Bianchi",ore:42.8},{nome:"Anna Verdi",ore:38.5},{nome:"Giulia Neri",ore:41.3},{nome:"Paolo Gialli",ore:39.7}],this.performanceDipendenti=[{nome:"Mario Rossi",oreTotali:45.2,oreMedieGiorno:8.2,giorniPresente:22,giorniTotali:22,puntualita:.95,attivo:!0},{nome:"Luca Bianchi",oreTotali:42.8,oreMedieGiorno:7.8,giorniPresente:21,giorniTotali:22,puntualita:.88,attivo:!0},{nome:"Anna Verdi",oreTotali:38.5,oreMedieGiorno:7.1,giorniPresente:20,giorniTotali:22,puntualita:.92,attivo:!0}],this.distribuzioneOrari=[{fascia:"Prima delle 8:00",percentuale:.15},{fascia:"8:00 - 8:30",percentuale:.45},{fascia:"8:30 - 9:00",percentuale:.3},{fascia:"Dopo le 9:00",percentuale:.1}],this.andamentoSettimanale=[{giorno:"Luned\xEC",ore:65.2},{giorno:"Marted\xEC",ore:68.7},{giorno:"Mercoled\xEC",ore:62.4},{giorno:"Gioved\xEC",ore:70.1},{giorno:"Venerd\xEC",ore:58.9}],this.anomalie=[{tipo:"Timbratura Mancante",descrizione:"Uscita non registrata",dipendente:"Paolo Gialli",data:new Date("2024-01-15")}]}catch(t){console.error("Errore nel caricamento dei KPI",t)}finally{this.isLoading=!1}})}getAltezzaBarra(t){let e=Math.max(...this.orePerDipendente.map(r=>r.ore));return e>0?t/e*100:0}onFiltroChange(){this.caricaKPI()}aggiornaDati(){return _(this,null,function*(){yield this.caricaKPI()})}esportaReport(){return _(this,null,function*(){try{yield this.reportsService.generaReportKPI({periodo:this.filtroPeriodo,dipendente:this.filtroDipendente,reparto:this.filtroReparto}).toPromise(),alert("Report KPI esportato con successo!")}catch(t){console.error("Errore nell'esportazione del report",t),alert("Errore nell'esportazione del report")}})}simulaCaricamentoDati(){return new Promise(t=>{setTimeout(()=>t(),1500)})}static \u0275fac=function(e){return new(e||n)(C(Vt),C(Fn),C(Ip))};static \u0275cmp=me({type:n,selectors:[["app-kpi"]],decls:160,vars:26,consts:[[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"filters-section"],[1,"filters-container"],[1,"filter-group"],[1,"form-label"],[3,"ngModelChange","change","ngModel"],["value","oggi"],["value","settimana"],["value","mese"],["value","trimestre"],["value","tutti"],[3,"value",4,"ngFor","ngForOf"],["value","amministrazione"],["value","produzione"],["value","vendite"],[1,"actions-container"],[1,"promethea-button","outline",3,"click"],[1,"promethea-button",3,"click"],[1,"grid-cards"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-number"],[1,"card-content"],[1,"chart-container"],[1,"chart-bars"],["class","chart-bar",4,"ngFor","ngForOf"],[1,"hours-grid"],["class","hour-item",4,"ngFor","ngForOf"],[1,"form-section"],[1,"table-container"],[1,"crm-table"],[4,"ngFor","ngForOf"],["class","info-item",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","loading-container",4,"ngIf"],[3,"value"],[1,"chart-bar"],[1,"bar-container"],[1,"bar-fill"],[1,"bar-value"],[1,"bar-label"],[1,"hour-item"],[1,"day-label"],[1,"hour-value"],[1,"user-info-compact"],[1,"user-avatar-small"],[1,"user-details-compact"],[1,"chip"],[1,"info-item"],[1,"contact-info"],[1,"info-label"],[1,"info-value"],[1,"info-detail"],[1,"empty-state"],[1,"loading-container"],[1,"loading-spinner"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d(4,"insights"),c()(),u(5,"div",4)(6,"h1",5),d(7,"Key Performance Indicators"),c(),u(8,"p",6),d(9,"Metriche e statistiche sulle timbrature"),c()()(),u(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),d(14,"Periodo"),c(),u(15,"select",11),oe("ngModelChange",function(o){return le(r.filtroPeriodo,o)||(r.filtroPeriodo=o),o}),T("change",function(){return r.onFiltroChange()}),u(16,"option",12),d(17,"Oggi"),c(),u(18,"option",13),d(19,"Questa Settimana"),c(),u(20,"option",14),d(21,"Questo Mese"),c(),u(22,"option",15),d(23,"Questo Trimestre"),c()()(),u(24,"div",9)(25,"label",10),d(26,"Dipendente"),c(),u(27,"select",11),oe("ngModelChange",function(o){return le(r.filtroDipendente,o)||(r.filtroDipendente=o),o}),T("change",function(){return r.onFiltroChange()}),u(28,"option",16),d(29,"Tutti i dipendenti"),c(),x(30,rj,2,3,"option",17),c()(),u(31,"div",9)(32,"label",10),d(33,"Reparto"),c(),u(34,"select",11),oe("ngModelChange",function(o){return le(r.filtroReparto,o)||(r.filtroReparto=o),o}),T("change",function(){return r.onFiltroChange()}),u(35,"option",16),d(36,"Tutti i reparti"),c(),u(37,"option",18),d(38,"Amministrazione"),c(),u(39,"option",19),d(40,"Produzione"),c(),u(41,"option",20),d(42,"Vendite"),c()()()(),u(43,"div",21)(44,"button",22),T("click",function(){return r.esportaReport()}),u(45,"span",3),d(46,"download"),c(),d(47," Esporta Report "),c(),u(48,"button",23),T("click",function(){return r.aggiornaDati()}),u(49,"span",3),d(50,"refresh"),c(),d(51," Aggiorna "),c()()(),u(52,"div",24)(53,"div",25)(54,"div",26)(55,"span",3),d(56,"schedule"),c(),u(57,"h3",27),d(58,"Ore Totali Lavorate"),c()(),u(59,"div",28),d(60),z(61,"number"),c(),u(62,"p",6),d(63,"Nel periodo selezionato"),c()(),u(64,"div",25)(65,"div",26)(66,"span",3),d(67,"groups"),c(),u(68,"h3",27),d(69,"Presenze Medie"),c()(),u(70,"div",28),d(71),z(72,"number"),c(),u(73,"p",6),d(74,"Dipendenti per giorno"),c()(),u(75,"div",25)(76,"div",26)(77,"span",3),d(78,"timelapse"),c(),u(79,"h3",27),d(80,"Ore Medie per Dip."),c()(),u(81,"div",28),d(82),z(83,"number"),c(),u(84,"p",6),d(85,"Per dipendente"),c()(),u(86,"div",25)(87,"div",26)(88,"span",3),d(89,"access_time"),c(),u(90,"h3",27),d(91,"Puntualit\xE0"),c()(),u(92,"div",28),d(93),z(94,"percent"),c(),u(95,"p",6),d(96,"Ingressi in orario"),c()()(),u(97,"div",24)(98,"div",25)(99,"div",26)(100,"span",3),d(101,"bar_chart"),c(),u(102,"h3",27),d(103,"Ore per Dipendente"),c()(),u(104,"div",29)(105,"div",30)(106,"div",31),x(107,ij,8,7,"div",32),c()()()(),u(108,"div",25)(109,"div",26)(110,"span",3),d(111,"pie_chart"),c(),u(112,"h3",27),d(113,"Distribuzione Orari"),c()(),u(114,"div",29)(115,"div",33),x(116,oj,6,4,"div",34),c()()()(),u(117,"div",35)(118,"h2",5)(119,"span",3),d(120,"leaderboard"),c(),d(121," Performance Dipendenti "),c(),u(122,"div",36)(123,"table",37)(124,"thead")(125,"tr")(126,"th"),d(127,"Dipendente"),c(),u(128,"th"),d(129,"Ore Totali"),c(),u(130,"th"),d(131,"Ore Medie/Giorno"),c(),u(132,"th"),d(133,"Giorni Presente"),c(),u(134,"th"),d(135,"Puntualit\xE0"),c(),u(136,"th"),d(137,"Status"),c()()(),u(138,"tbody"),x(139,sj,22,20,"tr",38),c()()()(),u(140,"div",24)(141,"div",25)(142,"div",26)(143,"span",3),d(144,"trending_up"),c(),u(145,"h3",27),d(146,"Andamento Settimanale"),c()(),u(147,"div",29)(148,"div",33),x(149,aj,6,5,"div",34),c()()(),u(150,"div",25)(151,"div",26)(152,"span",3),d(153,"warning"),c(),u(154,"h3",27),d(155,"Anomalie Rilevate"),c()(),u(156,"div",29),x(157,lj,11,6,"div",39)(158,cj,7,0,"div",40),c()()(),x(159,uj,4,0,"div",41),c()),e&2&&(h(15),ie("ngModel",r.filtroPeriodo),h(12),ie("ngModel",r.filtroDipendente),h(3),y("ngForOf",r.dipendenti),h(4),ie("ngModel",r.filtroReparto),h(26),M("",W(61,15,r.kpi.oreTotali,"1.0-1"),"h"),h(11),R(W(72,18,r.kpi.presenzeMedie,"1.0-1")),h(11),M("",W(83,21,r.kpi.oreMediePerDipendente,"1.0-1"),"h"),h(11),R(Wr(94,24,r.kpi.tassoPuntualita)),h(14),y("ngForOf",r.orePerDipendente),h(9),y("ngForOf",r.distribuzioneOrari),h(23),y("ngForOf",r.performanceDipendenti),h(10),y("ngForOf",r.andamentoSettimanale),h(8),y("ngForOf",r.anomalie),h(),y("ngIf",r.anomalie.length===0),h(),y("ngIf",r.isLoading))},dependencies:[ln,sn,an,kt,Ze,Zt,_e,Ye,Ne,qt,hl,ut],encapsulation:2})};var ni=()=>({standalone:!0});function dj(n,t){n&1&&(u(0,"div",47),d(1," Nome obbligatorio "),c())}function fj(n,t){n&1&&(u(0,"div",47),d(1," Cognome obbligatorio "),c())}function pj(n,t){n&1&&(u(0,"div",47),d(1," Email obbligatoria e valida "),c())}function hj(n,t){n&1&&(u(0,"span",3),d(1,"save"),c())}function mj(n,t){n&1&&O(0,"span",48)}function gj(n,t){n&1&&(u(0,"div",47),d(1," Nome azienda obbligatorio "),c())}function vj(n,t){n&1&&(u(0,"div",47),d(1," Partita IVA obbligatoria "),c())}function yj(n,t){if(n&1&&(u(0,"span"),d(1),z(2,"number"),z(3,"number"),c()),n&2){let e=b().$implicit;h(),be("coord: ",W(2,2,e.lat,"1.5-5"),", ",W(3,5,e.lng,"1.5-5"))}}function _j(n,t){n&1&&(u(0,"span"),d(1,"coord: \u2014"),c())}function bj(n,t){if(n&1){let e=J();u(0,"div",89)(1,"div",90),d(2),c(),u(3,"div",91)(4,"div",92),d(5),c(),u(6,"div",93)(7,"span",94),d(8,"place"),c(),u(9,"div",95)(10,"div",96)(11,"strong",97),d(12),u(13,"small",98),d(14),c()(),u(15,"div",99),x(16,yj,4,8,"span",100)(17,_j,2,0,"span",100),c()(),u(18,"div",101)(19,"div",102),d(20),c(),u(21,"div",103)(22,"span",104),d(23),c()()()()()(),u(24,"div")(25,"button",105),T("click",function(){let i=N(e).index,o=b(3);return P(o.removePunchPoint(i))}),u(26,"span",3),d(27,"delete"),c()()()()}if(n&2){let e=t.$implicit,r=t.index,i=b(3);h(2),M(" ",((e.name||e.address||"Punto "+(r+1))==null?null:(e.name||e.address||"Punto "+(r+1)).charAt(0))||r+1," "),h(3),R(e.name||e.address||"Punto "+(r+1)),h(7),M(" ",i.getStreet(e)," "),h(2),R(i.getCivic(e)),h(2),y("ngIf",(e==null?null:e.lat)&&(e==null?null:e.lng)),h(),y("ngIf",!(e!=null&&e.lat)||!(e!=null&&e.lng)),h(3),R(i.getCityProvince(e)||"\u2014"),h(3),M("raggio: ",e.radius_m||50," m")}}function wj(n,t){if(n&1){let e=J();u(0,"div",73)(1,"h3",62)(2,"span",3),d(3,"place"),c(),d(4,"Punti di Timbratura"),c(),u(5,"div",74),x(6,bj,28,8,"div",75),c(),u(7,"div",76)(8,"div",11)(9,"label",12),d(10,"Nome Punto"),c(),u(11,"input",77),oe("ngModelChange",function(i){N(e);let o=b(2);return le(o.newPoint.name,i)||(o.newPoint.name=i),P(i)}),c()(),u(12,"div",78)(13,"div",79)(14,"label",12),d(15,"Via / Indirizzo"),c(),u(16,"input",80),oe("ngModelChange",function(i){N(e);let o=b(2);return le(o.newPoint.address,i)||(o.newPoint.address=i),P(i)}),c()(),u(17,"div",81)(18,"label",12),d(19,"Civico"),c(),u(20,"input",82),oe("ngModelChange",function(i){N(e);let o=b(2);return le(o.newPoint.civic_number,i)||(o.newPoint.civic_number=i),P(i)}),c()()(),u(21,"div",83)(22,"div",11)(23,"label",12),d(24,"Citt\xE0"),c(),u(25,"input",84),oe("ngModelChange",function(i){N(e);let o=b(2);return le(o.newPoint.city,i)||(o.newPoint.city=i),P(i)}),c()(),u(26,"div",11)(27,"label",12),d(28,"Provincia"),c(),u(29,"input",85),oe("ngModelChange",function(i){N(e);let o=b(2);return le(o.newPoint.province,i)||(o.newPoint.province=i),P(i)}),c()()(),u(30,"div",86)(31,"div",87)(32,"label",12),d(33,"Raggio (m)"),c(),u(34,"input",88),oe("ngModelChange",function(i){N(e);let o=b(2);return le(o.newPoint.radius_m,i)||(o.newPoint.radius_m=i),P(i)}),c()()(),u(35,"div",31)(36,"button",44),T("click",function(){N(e);let i=b(2);return P(i.addPunchPoint())}),d(37," Aggiungi Punto "),c()()()()}if(n&2){let e=b(2);h(6),y("ngForOf",e.punchPoints),h(5),ie("ngModel",e.newPoint.name),y("ngModelOptions",Wt(14,ni)),h(5),ie("ngModel",e.newPoint.address),y("ngModelOptions",Wt(15,ni)),h(4),ie("ngModel",e.newPoint.civic_number),y("ngModelOptions",Wt(16,ni)),h(5),ie("ngModel",e.newPoint.city),y("ngModelOptions",Wt(17,ni)),h(4),ie("ngModel",e.newPoint.province),y("ngModelOptions",Wt(18,ni)),h(5),ie("ngModel",e.newPoint.radius_m),y("ngModelOptions",Wt(19,ni)),h(2),y("disabled",!(e.aziendaCorrente!=null&&e.aziendaCorrente.id)||e.salvataggioAzienda)}}function Ej(n,t){if(n&1&&(u(0,"div",106)(1,"label",107),d(2),c(),u(3,"div",108)(4,"div",87)(5,"label",12),d(6,"Apertura"),c(),O(7,"input",109),c(),u(8,"div",87)(9,"label",12),d(10,"Chiusura"),c(),O(11,"input",110),c(),u(12,"div",111)(13,"label",26),O(14,"input",112)(15,"span",28),d(16," Chiuso "),c()()()()),n&2){let e=t.$implicit;y("formGroupName",e.key),h(2),R(e.label)}}function Cj(n,t){if(n&1){let e=J();u(0,"div",113)(1,"div")(2,"strong"),d(3),c(),u(4,"div",114),d(5),c()(),u(6,"div")(7,"button",105),T("click",function(){let i=N(e).index,o=b(2);return P(o.rimuoviGiornoChiusura(i))}),u(8,"span",3),d(9,"delete"),c()()()()}if(n&2){let e=t.$implicit,r=b(2);h(3),R(r.formatClosedDay(e)),h(2),R(e.label||(e.type==="range"?"Intervallo":"Giorno singolo"))}}function Sj(n,t){n&1&&(u(0,"span",3),d(1,"save"),c())}function Dj(n,t){n&1&&O(0,"span",48)}function xj(n,t){if(n&1){let e=J();u(0,"div",8)(1,"h2",5)(2,"span",3),d(3,"business"),c(),d(4," Dati Azienda "),c(),u(5,"form",9),T("ngSubmit",function(){N(e);let i=b();return P(i.salvaAzienda())}),u(6,"div",10)(7,"div",11)(8,"label",12)(9,"span",3),d(10,"corporate_fare"),c(),d(11," Nome Azienda * "),c(),O(12,"input",49),x(13,gj,2,0,"div",14),c(),u(14,"div",11)(15,"label",12)(16,"span",3),d(17,"receipt"),c(),d(18," Partita IVA * "),c(),O(19,"input",50),x(20,vj,2,0,"div",14),c(),u(21,"div",11)(22,"label",12)(23,"span",3),d(24,"location_on"),c(),d(25," Indirizzo "),c(),O(26,"input",51),c(),u(27,"div",11)(28,"label",12)(29,"span",3),d(30,"location_city"),c(),d(31," Citt\xE0 "),c(),O(32,"input",52),c(),u(33,"div",11)(34,"label",12)(35,"span",3),d(36,"map"),c(),d(37," Provincia "),c(),O(38,"input",53),c(),u(39,"div",11)(40,"label",12)(41,"span",3),d(42,"web"),c(),d(43," Sito Web "),c(),O(44,"input",54),c(),u(45,"div",11)(46,"label",12)(47,"span",3),d(48,"room_preferences"),c(),d(49," Tipologia Timbratura "),c(),u(50,"div",55)(51,"label",56),O(52,"input",57)(53,"span",58),d(54," Libera "),c(),u(55,"label",56),O(56,"input",59)(57,"span",58),d(58," Punti Timbratura "),c()()(),x(59,wj,38,20,"div",60),c(),u(60,"div",61)(61,"h3",62)(62,"span",3),d(63,"schedule"),c(),d(64," Orari di Lavoro "),c(),u(65,"div",63),x(66,Ej,17,2,"div",64),c()(),u(67,"div",61)(68,"h3",62)(69,"span",3),d(70,"event_busy"),c(),d(71," Giorni di Chiusura (festivit\xE0 / chiusure) "),c(),u(72,"div",65),x(73,Cj,10,2,"div",66),c(),u(74,"div",67)(75,"div",68)(76,"input",69),oe("ngModelChange",function(i){N(e);let o=b();return le(o.newDate,i)||(o.newDate=i),P(i)}),c(),u(77,"button",70),T("click",function(){N(e);let i=b();return P(i.aggiungiGiornoSingolo())}),d(78,"Aggiungi Giorno"),c()(),u(79,"div",68)(80,"input",69),oe("ngModelChange",function(i){N(e);let o=b();return le(o.rangeStart,i)||(o.rangeStart=i),P(i)}),c(),u(81,"input",69),oe("ngModelChange",function(i){N(e);let o=b();return le(o.rangeEnd,i)||(o.rangeEnd=i),P(i)}),c(),u(82,"button",70),T("click",function(){N(e);let i=b();return P(i.aggiungiIntervallo())}),d(83,"Aggiungi Intervallo"),c()(),u(84,"div",71)(85,"button",72),T("click",function(){N(e);let i=b();return P(i.ripristinaFestivita())}),d(86,"Ripristina Festivit\xE0"),c()()()(),u(87,"div",31)(88,"button",32),x(89,Sj,2,0,"span",33)(90,Dj,1,0,"span",34),d(91),c()()()()}if(n&2){let e,r,i,o=b();h(5),y("formGroup",o.aziendaForm),h(8),y("ngIf",((e=o.aziendaForm.get("name"))==null?null:e.invalid)&&((e=o.aziendaForm.get("name"))==null?null:e.touched)),h(7),y("ngIf",((r=o.aziendaForm.get("vat"))==null?null:r.invalid)&&((r=o.aziendaForm.get("vat"))==null?null:r.touched)),h(39),y("ngIf",((i=o.aziendaForm.get("timbratura_type"))==null?null:i.value)==="punti"),h(6),y("formGroup",o.openingHoursGroup),h(),y("ngForOf",o.giorniSettimana),h(7),y("ngForOf",o.giorniChiusura),h(3),ie("ngModel",o.newDate),y("ngModelOptions",Wt(17,ni)),h(4),ie("ngModel",o.rangeStart),y("ngModelOptions",Wt(18,ni)),h(),ie("ngModel",o.rangeEnd),y("ngModelOptions",Wt(19,ni)),h(7),y("disabled",o.aziendaForm.invalid||o.salvataggioAzienda),h(),y("ngIf",!o.salvataggioAzienda),h(),y("ngIf",o.salvataggioAzienda),h(),M(" ",o.salvataggioAzienda?"Salvando...":"Salva Azienda"," ")}}function Ij(n,t){if(n&1&&(u(0,"option",117),d(1),c()),n&2){let e=t.$implicit;y("ngValue",e.id),h(),lo("",e.first_name," ",e.last_name," (",e.email,")")}}function Tj(n,t){if(n&1){let e=J();u(0,"label",26)(1,"input",128),T("change",function(i){let o=N(e).$implicit,s=b(4);return P(s.toggleManagerUser(o.id,i))}),c(),d(2),c()}if(n&2){let e=t.$implicit,r=b(4);h(),y("value",e.id)("checked",r.managerConfig.user_ids.includes(e.id)),h(),be(" ",e.first_name," ",e.last_name," ")}}function Mj(n,t){if(n&1){let e=J();u(0,"div",19)(1,"button",129),T("click",function(){N(e);let i=b(4);return P(i.toggleShowEmployees())}),d(2),c()()}if(n&2){let e=b(4);h(2),M(" ",e.showAllEmployees?"Mostra meno":"Mostra tutti ("+e.companyEmployees.length+")"," ")}}function Aj(n,t){if(n&1&&(u(0,"div",11)(1,"label",12),d(2,"Seleziona Utenti"),c(),u(3,"div",125),x(4,Tj,3,4,"label",126),z(5,"slice"),c(),x(6,Mj,3,1,"div",127),c()),n&2){let e=b(3);h(4),y("ngForOf",e.showAllEmployees?e.companyEmployees:Jg(5,2,e.companyEmployees,0,10)),h(2),y("ngIf",e.companyEmployees.length>10)}}function Oj(n,t){if(n&1){let e=J();u(0,"label",26)(1,"input",128),T("change",function(i){let o=N(e).$implicit,s=b(4);return P(s.toggleManagerRole(o,i))}),c(),d(2),c()}if(n&2){let e=t.$implicit,r=b(4);h(),y("value",e)("checked",r.managerConfig.roles.includes(e)),h(),M(" ",e," ")}}function Rj(n,t){if(n&1&&(u(0,"div",11)(1,"label",12),d(2,"Seleziona Ruoli"),c(),u(3,"div",130),x(4,Oj,3,3,"label",126),c()()),n&2){let e=b(3);h(4),y("ngForOf",e.availableRoles)}}function Nj(n,t){if(n&1){let e=J();u(0,"div",120)(1,"div",11)(2,"label",12),d(3,"Modalit\xE0 di visibilit\xE0"),c(),u(4,"div")(5,"label",56)(6,"input",121),oe("ngModelChange",function(i){N(e);let o=b(2);return le(o.managerConfig.mode,i)||(o.managerConfig.mode=i),P(i)}),c(),d(7," Solo proprie timbrature"),c(),u(8,"label",56)(9,"input",122),oe("ngModelChange",function(i){N(e);let o=b(2);return le(o.managerConfig.mode,i)||(o.managerConfig.mode=i),P(i)}),c(),d(10," Lista utenti selezionati"),c(),u(11,"label",56)(12,"input",123),oe("ngModelChange",function(i){N(e);let o=b(2);return le(o.managerConfig.mode,i)||(o.managerConfig.mode=i),P(i)}),c(),d(13," Per ruolo"),c()()(),x(14,Aj,7,6,"div",124)(15,Rj,5,1,"div",124),u(16,"div",31)(17,"button",44),T("click",function(){N(e);let i=b(2);return P(i.salvaManagerVisibility())}),d(18," Salva Visibilit\xE0 "),c()()()}if(n&2){let e=b(2);h(6),ie("ngModel",e.managerConfig.mode),h(3),ie("ngModel",e.managerConfig.mode),h(3),ie("ngModel",e.managerConfig.mode),h(2),y("ngIf",e.managerConfig.mode==="selected_users"),h(),y("ngIf",e.managerConfig.mode==="roles"),h(2),y("disabled",e.salvataggioAzienda)}}function Pj(n,t){if(n&1){let e=J();u(0,"div",8)(1,"h2",5)(2,"span",3),d(3,"visibility"),c(),d(4," Visibilit\xE0 Responsabili "),c(),u(5,"div",115)(6,"div",11)(7,"label",12),d(8,"Seleziona Responsabile"),c(),u(9,"select",116),oe("ngModelChange",function(i){N(e);let o=b();return le(o.selectedManagerId,i)||(o.selectedManagerId=i),P(i)}),T("change",function(){N(e);let i=b();return P(i.onManagerSelected())}),u(10,"option",117),d(11,"-- Seleziona --"),c(),x(12,Ij,2,4,"option",118),c()(),x(13,Nj,19,6,"div",119),c()()}if(n&2){let e=b();h(9),ie("ngModel",e.selectedManagerId),h(),y("ngValue",null),h(2),y("ngForOf",e.companyEmployees),h(),y("ngIf",e.selectedManagerId)}}function kj(n,t){n&1&&(u(0,"span",3),d(1,"lock"),c())}function Fj(n,t){n&1&&O(0,"span",48)}function Lj(n,t){if(n&1){let e=J();u(0,"label",40)(1,"input",41),oe("ngModelChange",function(i){N(e);let o=b();return le(o.impostazioniNotifiche.notificheAmministratore,i)||(o.impostazioniNotifiche.notificheAmministratore=i),P(i)}),c(),O(2,"span",28),u(3,"div",42)(4,"strong"),d(5,"Notifiche Amministratore"),c(),u(6,"span"),d(7,"Ricevi notifiche per le attivit\xE0 aziendali"),c()()()}if(n&2){let e=b();h(),ie("ngModel",e.impostazioniNotifiche.notificheAmministratore)}}function jj(n,t){n&1&&(u(0,"span",3),d(1,"save"),c())}function Vj(n,t){n&1&&O(0,"span",48)}function Uj(n,t){if(n&1&&(u(0,"div",131)(1,"span",3),d(2,"check_circle"),c(),d(3),c()),n&2){let e=b();h(3),M(" ",e.messaggioSuccesso," ")}}function Bj(n,t){if(n&1&&(u(0,"div",132)(1,"span",3),d(2,"error"),c(),d(3),c()),n&2){let e=b();h(3),M(" ",e.messaggioErrore," ")}}var Mp=class n{constructor(t,e,r,i){this.fb=t;this.authService=e;this.companyService=r;this.dipendentiService=i;this.profiloForm=this.creaProfiloForm(),this.aziendaForm=this.creaAziendaForm(),this.sicurezzaForm=this.creaSicurezzaForm()}profiloForm;aziendaForm;sicurezzaForm;giorniChiusura=[];newDate=null;rangeStart=null;rangeEnd=null;currentYear=new Date().getFullYear();punchPoints=[];newPoint={name:"",address:"",civic_number:"",city:null,province:null,lat:null,lng:null,radius_m:50};showAllEmployees=!1;companyEmployees=[];availableRoles=[];selectedManagerId=null;managerConfig={mode:"self",user_ids:[],roles:[]};managerVisibilityMap={};currentUser=null;aziendaCorrente=null;impostazioniNotifiche={emailNotifiche:!0,riepilogoGiornaliero:!1,notificheAmministratore:!0};closedDays=[];salvataggioProfilo=!1;salvataggioAzienda=!1;salvataggioPassword=!1;salvataggioNotifiche=!1;messaggioSuccesso="";messaggioErrore="";giorniSettimana=[{key:"monday",label:"Luned\xEC"},{key:"tuesday",label:"Marted\xEC"},{key:"wednesday",label:"Mercoled\xEC"},{key:"thursday",label:"Gioved\xEC"},{key:"friday",label:"Venerd\xEC"},{key:"saturday",label:"Sabato"},{key:"sunday",label:"Domenica"}];ngOnInit(){let t=this.aziendaForm.get("timbratura_type");t&&t.valueChanges.pipe(dh(500),fh()).subscribe(e=>{if(!this.aziendaCorrente||!this.aziendaCorrente.id){console.debug("[Impostazioni] timbratura_type changed before azienda loaded",e);return}this.salvataggioAzienda=!0,this.companyService.aggiornaAzienda(this.aziendaCorrente.id,{timbratura_type:e}).subscribe({next:r=>{this.salvataggioAzienda=!1,r&&(this.aziendaCorrente=r,this.patchAziendaForm(r)),this.messaggioSuccesso="Tipologia timbratura aggiornata",this.nascondiMessaggioDopoTimeout()},error:r=>{this.salvataggioAzienda=!1,console.error("[Impostazioni] errore aggiorna timbratura_type",r),this.messaggioErrore="Impossibile salvare la tipologia di timbratura",this.nascondiMessaggioDopoTimeout()}})}),this.authService.currentUser$.subscribe(e=>{console.log("[Impostazioni] currentUser$",e),this.currentUser=e,e&&(this.caricaDatiProfilo(),this.companyService.getAziendaForUser(e.id,e.company_id).subscribe({next:r=>{r?(this.aziendaCorrente=r,this.managerVisibilityMap=r.manager_visibility??{},this.loadManagerVisibilityData(),this.patchAziendaForm(r),console.log("[Impostazioni] azienda caricata",r)):console.warn("[Impostazioni] nessuna azienda trovata per utente",e.id)},error:r=>{console.error("[Impostazioni] errore getAziendaForUser",r)}}))},e=>console.error("[Impostazioni] currentUser$ error",e))}creaProfiloForm(){return this.fb.group({first_name:["",H.required],last_name:["",H.required],email:["",[H.required,H.email]],phone:[""],hire_date:[""],birth_date:[""],birth_place:[""],fiscal_code:[""],job_title:[""],monthly_hours:[null],full_time:[!1],timezone:["Europe/Rome"]})}creaAziendaForm(){let t=this.fb.group({});return this.giorniSettimana.forEach(e=>{t.addControl(e.key,this.fb.group({open:[""],close:[""],closed:[!1]}))}),this.fb.group({name:["",H.required],vat:["",H.required],address:[""],city:[""],province:[""],website:[""],opening_hours:t,timbratura_type:["libera"]})}get openingHoursGroup(){return this.aziendaForm.get("opening_hours")}patchAziendaForm(t){let e=A({},t);t.opening_hours&&(e.opening_hours=t.opening_hours),e.timbratura_type=t.timbratura_type??"libera",this.aziendaForm.patchValue(e),this.punchPoints=t.punch_points?[...t.punch_points]:[],t.city&&(this.newPoint.city=t.city),t.province&&(this.newPoint.province=t.province);let r=t.closed_days;r&&Array.isArray(r)&&r.length>0?this.giorniChiusura=r.map(s=>{if(typeof s!="string")return null;if(s.includes("/")){let[a,l]=s.split("/");return{type:"range",start:a,end:l,label:`Chiusura ${this.formatDateDisplay(a)}`}}else{let a=this.festivitaMap()[s];return{type:"single",start:s,label:a??"Festa"}}}).filter(Boolean):this.giorniChiusura=this.getFestivitaItalianeDetailed(this.currentYear);let i=this.openingHoursGroup,o=t.opening_hours;o&&Object.keys(o).forEach(s=>{let a=i.get(s);a&&(a.get("open")?.setValue(o?.[s]?.open??""),a.get("close")?.setValue(o?.[s]?.close??""),a.get("closed")?.setValue(!!o?.[s]?.closed))})}aggiungiGiornoSingolo(){if(!this.newDate)return;this.giorniChiusura.some(e=>e.type==="single"&&e.start===this.newDate)||(this.giorniChiusura.push({type:"single",start:this.newDate,label:"Festa personalizzata"}),this.newDate=null)}aggiungiIntervallo(){if(!this.rangeStart||!this.rangeEnd)return;if(this.rangeEnd<this.rangeStart){let e=this.rangeStart;this.rangeStart=this.rangeEnd,this.rangeEnd=e}this.giorniChiusura.some(e=>e.type==="range"&&e.start===this.rangeStart&&e.end===this.rangeEnd)||(this.giorniChiusura.push({type:"range",start:this.rangeStart,end:this.rangeEnd,label:"Intervallo personalizzato"}),this.rangeStart=null,this.rangeEnd=null)}rimuoviGiornoChiusura(t){this.giorniChiusura.splice(t,1)}ripristinaFestivita(){this.giorniChiusura=this.getFestivitaItalianeDetailed(this.currentYear)}closedDaysToPayload(){return this.giorniChiusura.map(t=>t.type==="range"?`${t.start}/${t.end}`:t.start)}creaSicurezzaForm(){return this.fb.group({currentPassword:[""],newPassword:[""],confirmPassword:[""]})}caricaDatiProfilo(){this.currentUser&&(this.profiloForm.patchValue({first_name:this.currentUser.first_name,last_name:this.currentUser.last_name,email:this.currentUser.email,phone:this.currentUser.phone||"",hire_date:this.currentUser.hire_date??"",birth_date:this.currentUser.birth_date??"",birth_place:this.currentUser.birth_place??"",fiscal_code:this.currentUser.fiscal_code??"",job_title:this.currentUser.job_title??"",monthly_hours:this.currentUser.monthly_hours??null,full_time:this.currentUser.full_time??!1,timezone:this.currentUser.timezone??"Europe/Rome"}),this.currentUser.notifications_preferences&&(this.impostazioniNotifiche=A(A({},this.impostazioniNotifiche),this.currentUser.notifications_preferences)),this.hasRole("admin")?this.profiloForm.get("hire_date")?.enable():this.profiloForm.get("hire_date")?.disable())}caricaDatiAzienda(t){t&&this.companyService.getAzienda(t).subscribe({next:e=>{if(!e){console.warn("Nessuna azienda trovata per id",t);return}this.aziendaCorrente=e;let r=A({},e);e.opening_hours&&(r.opening_hours=e.opening_hours),this.aziendaForm.patchValue(r);let i=e.closed_days;i&&Array.isArray(i)&&i.length>0?this.giorniChiusura=i.map(s=>{if(typeof s!="string")return null;if(s.includes("/")){let[a,l]=s.split("/");return{type:"range",start:a,end:l,label:`Chiusura ${this.formatDateDisplay(a)}`}}else{let a=this.festivitaMap()[s];return{type:"single",start:s,label:a??"Festa"}}}).filter(Boolean):this.giorniChiusura=this.getFestivitaItalianeDetailed(this.currentYear);let o=this.openingHoursGroup;e.opening_hours&&Object.keys(e.opening_hours).forEach(s=>{let a=o.get(s);a&&(a.get("open")?.setValue(e.opening_hours?.[s]?.open??""),a.get("close")?.setValue(e.opening_hours?.[s]?.close??""),a.get("closed")?.setValue(!!e.opening_hours?.[s]?.closed))})},error:e=>{console.error("Errore nel caricamento dati azienda:",e)}})}hasRole(t){return this.authService.hasRole(t)}salvaProfilo(){return _(this,null,function*(){if(this.profiloForm.invalid||!this.currentUser){this.profiloForm.markAllAsTouched();return}this.salvataggioProfilo=!0,this.messaggioErrore="";try{let t=this.profiloForm.getRawValue(),e={first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone||null,birth_date:t.birth_date?t.birth_date:null,birth_place:t.birth_place||null,fiscal_code:t.fiscal_code||null,job_title:t.job_title||null,monthly_hours:t.monthly_hours!==""&&t.monthly_hours!=null?Number(t.monthly_hours):null,full_time:!!t.full_time,timezone:t.timezone||null};this.hasRole("admin")&&(e.hire_date=t.hire_date?t.hire_date:null),e.notifications_preferences=this.impostazioniNotifiche;let r=yield this.authService.updateUserProfile(this.currentUser.id,e);this.currentUser=r??this.currentUser,this.messaggioSuccesso="Profilo aggiornato con successo!",this.nascondiMessaggioDopoTimeout(),this.showSystemNotification("Aggiornato il profilo con successo")}catch(t){console.error("[Impostazioni] errore salvaProfilo",t),this.messaggioErrore="Errore durante il salvataggio del profilo"}finally{this.salvataggioProfilo=!1}})}salvaAzienda(){if(this.aziendaForm.invalid){this.aziendaForm.markAllAsTouched();return}this.salvataggioAzienda=!0,this.messaggioErrore="";let t=this.aziendaForm.value,e={},r=this.aziendaForm.get("opening_hours");this.giorniSettimana.forEach(o=>{let s=r.get(o.key);e[o.key]={open:s.get("open")?.value||null,close:s.get("close")?.value||null,closed:!!s.get("closed")?.value}});let i=Z(A({},t),{opening_hours:e,closed_days:this.closedDaysToPayload(),timbratura_type:t.timbratura_type??"libera",punch_points:this.punchPoints});console.debug("[Impostazioni] salvaAzienda payload:",i,"companyId:",this.aziendaCorrente?.id),this.companyService.aggiornaAzienda(this.aziendaCorrente.id,i).subscribe({next:o=>{this.salvataggioAzienda=!1,o&&(this.aziendaCorrente=o,this.patchAziendaForm(o)),this.messaggioSuccesso="Dati azienda aggiornati con successo!",this.nascondiMessaggioDopoTimeout()},error:o=>{this.salvataggioAzienda=!1,this.messaggioErrore="Errore durante il salvataggio dei dati azienda",console.error("Errore aggiornamento azienda:",o)}})}showSystemNotification(t,e=!1){return _(this,null,function*(){if(!("Notification"in window)){console.debug("[Impostazioni] Notification API non disponibile");return}if(!(location.protocol==="https:"||location.hostname==="localhost"||location.hostname==="127.0.0.1")){console.debug("[Impostazioni] Notification API richiede HTTPS o localhost");return}try{if(Notification.permission==="granted"){new Notification(t,{silent:!1});return}if(Notification.permission!=="denied"){let i=yield Notification.requestPermission();i==="granted"?new Notification(t,{silent:!1}):console.debug("[Impostazioni] Notification permission non concessa:",i)}else console.debug("[Impostazioni] Notification permission \xE8 denied")}catch(i){console.warn("[Impostazioni] errore Notification API",i)}})}cambiaPassword(){if(this.sicurezzaForm.invalid){this.sicurezzaForm.markAllAsTouched();return}this.salvataggioPassword=!0,this.messaggioErrore="",setTimeout(()=>{this.salvataggioPassword=!1,this.sicurezzaForm.reset(),this.messaggioSuccesso="Password cambiata con successo!",this.nascondiMessaggioDopoTimeout()},1e3)}salvaNotifiche(){return _(this,null,function*(){if(!this.currentUser){console.debug("[Impostazioni] salvaNotifiche: utente non autenticato");return}this.salvataggioNotifiche=!0,this.messaggioErrore="";let t=null;try{"Notification"in window?location.protocol==="https:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"?(t=yield Notification.requestPermission(),console.debug("[Impostazioni] Notification.requestPermission =>",t)):console.debug("[Impostazioni] Notification API richiede HTTPS o localhost"):console.debug("[Impostazioni] Notification API non disponibile")}catch(r){console.warn("[Impostazioni] errore requestPermission",r)}let e={notifications_preferences:this.impostazioniNotifiche};console.debug("[Impostazioni] salvaNotifiche payload:",e);try{let r=yield this.authService.updateUserProfile(this.currentUser.id,e);if(console.debug("[Impostazioni] updateUserProfile response:",r),this.currentUser=r??this.currentUser,this.salvataggioNotifiche=!1,this.messaggioSuccesso="Preferenze notifiche salvate!",this.nascondiMessaggioDopoTimeout(),t==="granted")try{new Notification("Aggiornato il profilo con successo")}catch(i){console.warn("[Impostazioni] errore creazione Notification",i)}else console.debug("[Impostazioni] permesso notifiche non concesso, nessuna notifica di sistema mostrata")}catch(r){let i=r&&(r.message||r.error||JSON.stringify(r))||"Errore sconosciuto";if(console.error("[Impostazioni] errore salvaNotifiche",r),this.salvataggioNotifiche=!1,this.messaggioErrore="Errore durante il salvataggio delle preferenze: "+i,t==="granted")try{new Notification("Salvataggio preferenze fallito")}catch{}}})}toggleGiornoChiusura(t){let e=t.target,r=e.value;r&&(e.checked?this.giorniChiusura.some(o=>o.type==="single"&&o.start===r)||this.giorniChiusura.push({type:"single",start:r,label:"Festa personalizzata"}):this.giorniChiusura=this.giorniChiusura.filter(i=>!(i.type==="single"&&i.start===r)))}formatDateDisplay(t){if(!t)return"";let e=t.split("-");if(e.length!==3)return t;let[r,i,o]=e;return`${o}/${i}/${r}`}formatClosedDay(t){return t?t.type==="range"?`${this.formatDateDisplay(t.start)} \u2192 ${this.formatDateDisplay(t.end??"")}`:this.formatDateDisplay(t.start):""}nascondiMessaggioDopoTimeout(){setTimeout(()=>{this.messaggioSuccesso="",this.messaggioErrore=""},5e3)}getFestivitaItalianeDetailed(t){let e=p=>p.toString().padStart(2,"0"),r=p=>`${p.getFullYear()}-${e(p.getMonth()+1)}-${e(p.getDate())}`,i={[r(new Date(t,0,1))]:"Capodanno",[r(new Date(t,0,6))]:"Epifania",[r(new Date(t,3,25))]:"Festa della Liberazione",[r(new Date(t,4,1))]:"Festa del Lavoro",[r(new Date(t,5,2))]:"Festa della Repubblica",[r(new Date(t,7,15))]:"Ferragosto",[r(new Date(t,10,1))]:"Ognissanti",[r(new Date(t,11,8))]:"Immacolata Concezione",[r(new Date(t,11,25))]:"Natale",[r(new Date(t,11,26))]:"Santo Stefano"},o=this.calculateEasterDate(t),s=r(o),a=new Date(o);a.setDate(a.getDate()+1);let l=r(a),f=[];return Object.keys(i).forEach(p=>f.push({type:"single",start:p,label:i[p]})),f.push({type:"single",start:s,label:"Pasqua"}),f.push({type:"single",start:l,label:"Pasquetta"}),f.sort((p,m)=>p.start>m.start?1:p.start<m.start?-1:0),f}festivitaMap(){let t=this.getFestivitaItalianeDetailed(this.currentYear),e={};return t.forEach(r=>{e[r.start]=r.label??"Festa"}),e}calculateEasterDate(t){let e=t%19,r=Math.floor(t/100),i=t%100,o=Math.floor(r/4),s=r%4,a=Math.floor((r+8)/25),l=Math.floor((r-a+1)/3),f=(19*e+r-o-l+15)%30,p=Math.floor(i/4),m=i%4,v=(32+2*s+2*p-f-m)%7,g=Math.floor((e+11*f+22*v)/451),w=Math.floor((f+v-7*g+114)/31),S=(f+v-7*g+114)%31+1;return new Date(t,w-1,S)}loadManagerVisibilityData(){!this.aziendaCorrente||!this.aziendaCorrente.id||this.dipendentiService.getDipendenti(this.aziendaCorrente.id).subscribe({next:t=>{this.companyEmployees=t||[];let e=new Set;(this.companyEmployees||[]).forEach(r=>{r.role&&e.add(r.role)}),this.availableRoles=Array.from(e)},error:t=>{console.error("[Impostazioni] errore loadManagerVisibilityData",t)}})}onManagerSelected(){if(!this.selectedManagerId){this.managerConfig={mode:"self",user_ids:[],roles:[]};return}let t=this.managerVisibilityMap[this.selectedManagerId]??{mode:"self",user_ids:[],roles:[]};this.managerConfig={mode:t.mode??"self",user_ids:Array.isArray(t.user_ids)?t.user_ids:[],roles:Array.isArray(t.roles)?t.roles:[]}}toggleManagerUser(t,e){let r=e.target.checked,i=this.managerConfig.user_ids.indexOf(t);r&&i===-1?this.managerConfig.user_ids.push(t):!r&&i!==-1&&this.managerConfig.user_ids.splice(i,1)}toggleManagerRole(t,e){e.target.checked?this.managerConfig.roles.includes(t)||this.managerConfig.roles.push(t):this.managerConfig.roles=this.managerConfig.roles.filter(i=>i!==t)}salvaManagerVisibility(){if(!this.aziendaCorrente||!this.aziendaCorrente.id||!this.selectedManagerId)return;this.managerVisibilityMap[this.selectedManagerId]=A({},this.managerConfig);let t={manager_visibility:this.managerVisibilityMap};this.salvataggioAzienda=!0,this.companyService.aggiornaAzienda(this.aziendaCorrente.id,t).subscribe({next:e=>{this.salvataggioAzienda=!1,this.messaggioSuccesso="Visibilit\xE0 responsabile salvata",this.nascondiMessaggioDopoTimeout()},error:e=>{this.salvataggioAzienda=!1,this.messaggioErrore="Errore salvataggio visibilit\xE0 responsabile",console.error("[Impostazioni] salvaManagerVisibility error",e)}})}addPunchPoint(){return _(this,null,function*(){if(this.messaggioErrore="",!this.aziendaCorrente?.id){if(!this.currentUser){this.messaggioErrore="Azienda non selezionata e utente non autenticato",console.debug("[Impostazioni] addPunchPoint abort: aziendaCorrente missing and no currentUser",{currentUser:this.currentUser});return}try{let l=yield nr(this.companyService.getAziendaForUser(this.currentUser.id,this.currentUser.company_id));l&&(this.aziendaCorrente=l,this.punchPoints=[...l.punch_points||[]],this.patchAziendaForm(l))}catch(l){console.warn("[Impostazioni] fallback getAziendaForUser failed",l)}}if(!this.aziendaCorrente?.id){this.messaggioErrore="Azienda non selezionata",console.debug("[Impostazioni] addPunchPoint abort: aziendaCorrente missing after reload attempt",{currentUser:this.currentUser});return}let t=A({},this.newPoint);t.radius_m=Number(t.radius_m)||50;let e=t.address||"",r=t.civic_number||"",i=t.city||this.aziendaCorrente?.city||"",o=t.province||this.aziendaCorrente?.province||"",s=yield this.geocodeAddress(e,r,i,o);if(!s){this.messaggioErrore="Impossibile trovare coordinate per l'indirizzo inserito. Controlla indirizzo/civico/citt\xE0.";return}t.lat=s.lat,t.lng=s.lng,t.address=s.displayName,t.id=Math.random().toString(36).slice(2,9),delete t.civic_number;let a=[...this.punchPoints||[],t];this.salvataggioAzienda=!0,this.companyService.aggiornaAzienda(this.aziendaCorrente.id,{punch_points:a}).subscribe({next:l=>_(this,null,function*(){this.salvataggioAzienda=!1,console.debug("[Impostazioni] aggiornaAzienda response",l);try{if(!this.currentUser)console.warn("[Impostazioni] currentUser non definito, salto refresh azienda");else{let f=yield nr(this.companyService.getAziendaForUser(this.currentUser.id,this.currentUser.company_id));f&&(this.aziendaCorrente=f,this.punchPoints=[...f.punch_points||[]],this.patchAziendaForm(f))}}catch(f){console.warn("[Impostazioni] impossibile ricaricare azienda dopo update",f),l&&(this.aziendaCorrente=l,this.punchPoints=l.punch_points||a,this.patchAziendaForm(l))}this.messaggioSuccesso="Punto di timbratura salvato",this.nascondiMessaggioDopoTimeout()}),error:l=>{this.salvataggioAzienda=!1,console.error("[Impostazioni] errore salva punch_point",l),this.messaggioErrore="Errore durante il salvataggio del punto (verifica permessi / console network)"}})})}removePunchPoint(t){this.punchPoints.splice(t,1)}toggleShowEmployees(){this.showAllEmployees=!this.showAllEmployees}geocodeAddress(t,e,r,i){return _(this,null,function*(){let o=[];t&&o.push(t),e&&o.push(e),r&&o.push(r),i&&o.push(i);let s=o.join(", ");if(!s)return null;let a="https://nominatim.openstreetmap.org/search?format=json&limit=1&q="+encodeURIComponent(s);try{let l=yield fetch(a,{method:"GET",headers:{Accept:"application/json"}});if(!l.ok)return null;let f=yield l.json();if(!Array.isArray(f)||f.length===0)return null;let p=f[0];return{lat:Number(p.lat),lng:Number(p.lon),displayName:p.display_name}}catch(l){return console.error("[Impostazioni] geocodeAddress error",l),null}})}getStreet(t){let e=(t?.address||t?.name||"").toString().trim();if(!e)return"";let r=e.split(",").map(s=>s.trim()).filter(Boolean),i=r[0]||"",o=i.match(/^(.*\D)\s+(\d+\S*)$/);return o?o[1].trim():r.length>=2&&/^\d+\S*$/.test(r[0])?r[1]:i}getCivic(t){let e=(t?.address||"").toString().trim();if(!e)return"";let r=e.split(",").map(s=>s.trim()).filter(Boolean),o=(r[0]||"").match(/^(.*\D)\s+(\d+\S*)$/);return o?o[2].trim():r.length>=2&&/^\d+\S*$/.test(r[0])?r[0]:r.length>=2&&/^\d+\S*$/.test(r[1])?r[1]:""}getCityProvince(t){let e=(t?.city||"").toString().trim(),r=(t?.province||"").toString().trim();if(e||r)return`${e}${r&&e!==r?" "+r:""}`.trim();let i=(t?.address||"").toString().trim();if(!i)return"";let o=i.split(",").map(f=>f.trim()).filter(Boolean),s=["italia","italy"];for(;o.length&&s.includes(o[o.length-1].toLowerCase());)o.pop();for(;o.length&&/^\d{4,}$/.test(o[o.length-1]);)o.pop();let a=this.getStreet(t),l=this.getCivic(t);for(let f=o.length-1;f>=0;f--){let p=o[f];if(p&&!(p===a||p===l)&&!(/^\d+$/.test(p)||p.length>40))return p}return""}static \u0275fac=function(e){return new(e||n)(C(Cr),C(ge),C(wt),C(Fn))};static \u0275cmp=me({type:n,selectors:[["app-impostazioni"]],decls:173,vars:27,consts:[[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"settings-grid"],[1,"form-section"],[1,"generic-form",3,"ngSubmit","formGroup"],[1,"grid-form"],[1,"form-group"],[1,"form-label"],["type","text","formControlName","first_name",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","last_name",1,"form-control"],["type","email","formControlName","email",1,"form-control"],["type","tel","formControlName","phone",1,"form-control"],["type","date","formControlName","hire_date",1,"form-control",3,"disabled"],[1,"info","small"],["type","date","formControlName","birth_date",1,"form-control"],["type","text","formControlName","birth_place",1,"form-control"],["type","text","formControlName","fiscal_code",1,"form-control"],["type","text","formControlName","job_title",1,"form-control"],["type","number","min","0","formControlName","monthly_hours",1,"form-control"],[1,"form-group","checkbox-inline"],[1,"checkbox-label"],["type","checkbox","formControlName","full_time"],[1,"checkmark"],["type","text","formControlName","timezone","placeholder","Europe/Rome",1,"form-control"],["type","text","disabled","",1,"form-control",3,"value"],[1,"form-actions"],["type","submit",1,"promethea-button",3,"disabled"],["class","material-icons",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["class","form-section",4,"ngIf"],["type","password","formControlName","currentPassword",1,"form-control"],["type","password","formControlName","newPassword",1,"form-control"],["type","password","formControlName","confirmPassword",1,"form-control"],[1,"notifications-grid"],[1,"checkbox-label","large"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"notification-info"],["class","checkbox-label large",4,"ngIf"],["type","button",1,"promethea-button",3,"click","disabled"],["class","status-message info",4,"ngIf"],["class","status-message error",4,"ngIf"],[1,"error"],[1,"loading-spinner"],["type","text","formControlName","name",1,"form-control"],["type","text","formControlName","vat",1,"form-control"],["type","text","formControlName","address",1,"form-control"],["type","text","formControlName","city",1,"form-control"],["type","text","formControlName","province",1,"form-control"],["type","url","formControlName","website",1,"form-control"],[1,"radio-group"],[1,"radio-label"],["type","radio","formControlName","timbratura_type","value","libera"],[1,"radio-checkmark"],["type","radio","formControlName","timbratura_type","value","punti"],["class","form-subsection full-width",4,"ngIf"],[1,"form-subsection"],[1,"subsection-title"],["formGroupName","opening_hours",1,"opening-hours-grid",3,"formGroup"],["class","day-row",3,"formGroupName",4,"ngFor","ngForOf"],[1,"closed-days-grid"],["class","day-row feste",4,"ngFor","ngForOf"],[1,"closed-days-actions"],[1,"action-group"],["type","date",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["type","button",1,"promethea-button",3,"click"],[1,"actions-right"],["type","button",1,"promethea-button","ghost",3,"click"],[1,"form-subsection","full-width"],[1,"punch-points-list"],["class","team-member",4,"ngFor","ngForOf"],[1,"point-form"],["type","text","placeholder","Es. Sede Principale",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],[1,"grid-alternative",2,"display","flex","gap","var(--gutter-sm)"],[1,"form-group","wider"],["type","text","placeholder","Es. Via Roma",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],[1,"form-group","narrower"],["type","text","placeholder","Es. 12/A",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],[1,"grid-alternative"],["type","text","placeholder","Citt\xE0",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["type","text","placeholder","Provincia (es. RM)",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],[1,"inline-fields"],[1,"form-group","small"],["type","number","placeholder","50",1,"form-control","small",3,"ngModelChange","ngModel","ngModelOptions"],[1,"team-member"],["aria-hidden","true",1,"user-avatar-small"],[1,"member-info"],[1,"member-name"],[1,"info-detail","location-chip",2,"display","flex","align-items","center","gap","8px"],["aria-hidden","true",1,"material-icons"],[2,"display","flex","flex","1","align-items","center","gap","12px","flex-wrap","wrap","min-width","0"],[2,"min-width","0","overflow","hidden","text-overflow","ellipsis","white-space","nowrap"],[2,"display","inline-block","overflow","hidden","text-overflow","ellipsis"],[2,"font-size","0.85em","color","var(--text-color)","opacity","0.8","margin-left","6px"],[1,"muted","small",2,"margin-top","4px"],[4,"ngIf"],[2,"margin-left","auto","text-align","right","white-space","nowrap"],[1,"muted","small"],[2,"margin-top","6px"],[1,"chip"],["type","button","title","Rimuovi",1,"icon-button",3,"click"],[1,"day-row",3,"formGroupName"],[1,"form-label","day-label"],[1,"day-controls"],["type","time","formControlName","open",1,"form-control"],["type","time","formControlName","close",1,"form-control"],[1,"form-group","small","checkbox-inline"],["type","checkbox","formControlName","closed"],[1,"day-row","feste"],[1,"info-detail"],[1,"generic-form"],["name","selectedManager",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","manager-config",4,"ngIf"],[1,"manager-config"],["type","radio","name","mode","value","self",3,"ngModelChange","ngModel"],["type","radio","name","mode","value","selected_users",3,"ngModelChange","ngModel"],["type","radio","name","mode","value","roles",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"users-list"],["class","checkbox-label",4,"ngFor","ngForOf"],["class","info small",4,"ngIf"],["type","checkbox",3,"change","value","checked"],["type","button",1,"promethea-button","ghost","small",3,"click"],[1,"roles-list"],[1,"status-message","info"],[1,"status-message","error"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d(4,"settings"),c()(),u(5,"div",4)(6,"h1",5),d(7,"Impostazioni"),c(),u(8,"p",6),d(9,"Gestisci il tuo profilo e le impostazioni aziendali"),c()()(),u(10,"div",7)(11,"div",8)(12,"h2",5)(13,"span",3),d(14,"person"),c(),d(15," Profilo Utente "),c(),u(16,"form",9),T("ngSubmit",function(){return r.salvaProfilo()}),u(17,"div",10)(18,"div",11)(19,"label",12)(20,"span",3),d(21,"badge"),c(),d(22," Nome * "),c(),O(23,"input",13),x(24,dj,2,0,"div",14),c(),u(25,"div",11)(26,"label",12)(27,"span",3),d(28,"badge"),c(),d(29," Cognome * "),c(),O(30,"input",15),x(31,fj,2,0,"div",14),c(),u(32,"div",11)(33,"label",12)(34,"span",3),d(35,"email"),c(),d(36," Email * "),c(),O(37,"input",16),x(38,pj,2,0,"div",14),c(),u(39,"div",11)(40,"label",12)(41,"span",3),d(42,"phone"),c(),d(43," Telefono "),c(),O(44,"input",17),c(),u(45,"div",11)(46,"label",12)(47,"span",3),d(48,"event_available"),c(),d(49," Data di Assunzione "),c(),O(50,"input",18),u(51,"div",19),d(52,"Modificabile solo dall'amministratore"),c()(),u(53,"div",11)(54,"label",12)(55,"span",3),d(56,"cake"),c(),d(57," Data di Nascita "),c(),O(58,"input",20),c(),u(59,"div",11)(60,"label",12)(61,"span",3),d(62,"place"),c(),d(63," Luogo di Nascita "),c(),O(64,"input",21),c(),u(65,"div",11)(66,"label",12)(67,"span",3),d(68,"badge"),c(),d(69," Codice Fiscale "),c(),O(70,"input",22),c(),u(71,"div",11)(72,"label",12)(73,"span",3),d(74,"work_outline"),c(),d(75," Job Title "),c(),O(76,"input",23),c(),u(77,"div",11)(78,"label",12)(79,"span",3),d(80,"schedule"),c(),d(81," Ore Mensili "),c(),O(82,"input",24),c(),u(83,"div",25)(84,"label",26),O(85,"input",27)(86,"span",28),d(87," Full time "),c()(),u(88,"div",11)(89,"label",12)(90,"span",3),d(91,"public"),c(),d(92," Timezone "),c(),O(93,"input",29),c(),u(94,"div",11)(95,"label",12)(96,"span",3),d(97,"work"),c(),d(98," Ruolo "),c(),O(99,"input",30),c(),u(100,"div",11)(101,"label",12)(102,"span",3),d(103,"business"),c(),d(104," Azienda "),c(),O(105,"input",30),c()(),u(106,"div",31)(107,"button",32),x(108,hj,2,0,"span",33)(109,mj,1,0,"span",34),d(110),c()()()(),x(111,xj,92,20,"div",35)(112,Pj,14,4,"div",35),u(113,"div",8)(114,"h2",5)(115,"span",3),d(116,"security"),c(),d(117," Sicurezza "),c(),u(118,"form",9),T("ngSubmit",function(){return r.cambiaPassword()}),u(119,"div",10)(120,"div",11)(121,"label",12)(122,"span",3),d(123,"lock"),c(),d(124," Password Attuale "),c(),O(125,"input",36),c(),u(126,"div",11)(127,"label",12)(128,"span",3),d(129,"lock_reset"),c(),d(130," Nuova Password "),c(),O(131,"input",37),c(),u(132,"div",11)(133,"label",12)(134,"span",3),d(135,"lock_reset"),c(),d(136," Conferma Password "),c(),O(137,"input",38),c()(),u(138,"div",31)(139,"button",32),x(140,kj,2,0,"span",33)(141,Fj,1,0,"span",34),d(142),c()()()(),u(143,"div",8)(144,"h2",5)(145,"span",3),d(146,"notifications"),c(),d(147," Notifiche "),c(),u(148,"div",39)(149,"label",40)(150,"input",41),oe("ngModelChange",function(o){return le(r.impostazioniNotifiche.emailNotifiche,o)||(r.impostazioniNotifiche.emailNotifiche=o),o}),c(),O(151,"span",28),u(152,"div",42)(153,"strong"),d(154,"Notifiche Email"),c(),u(155,"span"),d(156,"Ricevi notifiche via email per le tue timbrature"),c()()(),u(157,"label",40)(158,"input",41),oe("ngModelChange",function(o){return le(r.impostazioniNotifiche.riepilogoGiornaliero,o)||(r.impostazioniNotifiche.riepilogoGiornaliero=o),o}),c(),O(159,"span",28),u(160,"div",42)(161,"strong"),d(162,"Riepilogo Giornaliero"),c(),u(163,"span"),d(164,"Ricevi un riepilogo giornaliero delle tue ore"),c()()(),x(165,Lj,8,1,"label",43),c(),u(166,"div",31)(167,"button",44),T("click",function(){return r.salvaNotifiche()}),x(168,jj,2,0,"span",33)(169,Vj,1,0,"span",34),d(170),c()()()(),x(171,Uj,4,1,"div",45)(172,Bj,4,1,"div",46),c()),e&2){let i,o,s;h(16),y("formGroup",r.profiloForm),h(8),y("ngIf",((i=r.profiloForm.get("first_name"))==null?null:i.invalid)&&((i=r.profiloForm.get("first_name"))==null?null:i.touched)),h(7),y("ngIf",((o=r.profiloForm.get("last_name"))==null?null:o.invalid)&&((o=r.profiloForm.get("last_name"))==null?null:o.touched)),h(7),y("ngIf",((s=r.profiloForm.get("email"))==null?null:s.invalid)&&((s=r.profiloForm.get("email"))==null?null:s.touched)),h(12),y("disabled",!r.hasRole("admin")),h(49),y("value",r.currentUser==null?null:r.currentUser.role),h(6),y("value",(r.aziendaCorrente==null?null:r.aziendaCorrente.name)||"N/A"),h(2),y("disabled",r.profiloForm.invalid||r.salvataggioProfilo),h(),y("ngIf",!r.salvataggioProfilo),h(),y("ngIf",r.salvataggioProfilo),h(),M(" ",r.salvataggioProfilo?"Salvando...":"Salva Profilo"," "),h(),y("ngIf",r.hasRole("admin")),h(),y("ngIf",r.hasRole("admin")),h(6),y("formGroup",r.sicurezzaForm),h(21),y("disabled",r.sicurezzaForm.invalid||r.salvataggioPassword),h(),y("ngIf",!r.salvataggioPassword),h(),y("ngIf",r.salvataggioPassword),h(),M(" ",r.salvataggioPassword?"Salvando...":"Cambia Password"," "),h(8),ie("ngModel",r.impostazioniNotifiche.emailNotifiche),h(8),ie("ngModel",r.impostazioniNotifiche.riepilogoGiornaliero),h(7),y("ngIf",r.hasRole("admin")),h(2),y("disabled",r.salvataggioNotifiche),h(),y("ngIf",!r.salvataggioNotifiche),h(),y("ngIf",r.salvataggioNotifiche),h(),M(" ",r.salvataggioNotifiche?"Salvando...":"Salva Notifiche"," "),h(),y("ngIf",r.messaggioSuccesso),h(),y("ngIf",r.messaggioErrore)}},dependencies:[_e,Ye,Ne,Sr,Er,sn,an,Ke,Dv,ql,kt,xv,Ze,wr,Mv,On,Qn,Ws,ln,Zt,S0,qt],styles:[".closed-days-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--gutter-sm)}.closed-days-grid[_ngcontent-%COMP%]   .day-row.feste[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:var(--gutter-sm);justify-content:flex-start}.closed-days-grid[_ngcontent-%COMP%]   .day-row.feste[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{flex:1 1 auto;min-width:0;overflow:hidden}.closed-days-grid[_ngcontent-%COMP%]   .day-row.feste[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;overflow:hidden;text-overflow:ellipsis}.closed-days-grid[_ngcontent-%COMP%]   .day-row.feste[_ngcontent-%COMP%]   .info-detail[_ngcontent-%COMP%]{font-size:.85rem;color:color-mix(in srgb,var(--text-color) 60%,transparent);margin-top:4px;overflow:hidden}.closed-days-grid[_ngcontent-%COMP%]   .day-row.feste[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, .closed-days-grid[_ngcontent-%COMP%]   .day-row.feste[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{flex:0 0 auto;margin-left:8px}.closed-days-actions[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm, 12px);margin-top:var(--space-sm, 12px);align-items:center}.closed-days-actions[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.closed-days-actions[_ngcontent-%COMP%]   .actions-right[_ngcontent-%COMP%]{margin-left:auto}.closed-days-actions[_ngcontent-%COMP%]   .form-control[type=date][_ngcontent-%COMP%]{max-width:220px}@media (max-width: 600px){.closed-days-actions[_ngcontent-%COMP%]{flex-wrap:wrap;gap:10px}.closed-days-actions[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%], .closed-days-actions[_ngcontent-%COMP%]   .actions-right[_ngcontent-%COMP%]{flex:1 1 100%;display:flex;justify-content:flex-start}.closed-days-actions[_ngcontent-%COMP%]   .actions-right[_ngcontent-%COMP%]{justify-content:flex-end}}.point-form[_ngcontent-%COMP%], .inline-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-sm)}.form-subsection.full-width[_ngcontent-%COMP%]{grid-column:1 / -1;width:100%}.form-group.wider[_ngcontent-%COMP%]{flex:2}.form-group.narrower[_ngcontent-%COMP%]{flex:1}"]})};function zj(n,t){if(n&1&&(u(0,"option",32),d(1),c()),n&2){let e=t.$implicit;y("value",e.id),h(),be(" ",e.first_name," ",e.last_name," ")}}function $j(n,t){if(n&1){let e=J();u(0,"select",29),oe("ngModelChange",function(i){N(e);let o=b();return le(o.dipendenteSelezionato,i)||(o.dipendenteSelezionato=i),P(i)}),u(1,"option",30),d(2,"Tutti i dipendenti"),c(),x(3,zj,2,3,"option",31),c()}if(n&2){let e=b();ie("ngModel",e.dipendenteSelezionato),h(3),y("ngForOf",e.dipendenti)}}function Hj(n,t){if(n&1&&O(0,"input",33),n&2){let e=b();y("value",(e.currentUser==null?null:e.currentUser.first_name)+" "+(e.currentUser==null?null:e.currentUser.last_name))}}function Gj(n,t){n&1&&(u(0,"span",3),d(1,"refresh"),c())}function Wj(n,t){n&1&&O(0,"span",34)}function qj(n,t){if(n&1&&(u(0,"div",35)(1,"h2",5)(2,"span",3),d(3,"insights"),c(),d(4," Statistiche "),c(),u(5,"div",36)(6,"div",37)(7,"h3",38),d(8,"Ore Totali"),c(),u(9,"div",39),d(10),z(11,"number"),c(),u(12,"p",6),d(13,"Periodo selezionato"),c()(),u(14,"div",37)(15,"h3",38),d(16,"Media Giornaliera"),c(),u(17,"div",39),d(18),z(19,"number"),c(),u(20,"p",6),d(21,"Per giorno lavorativo"),c()(),u(22,"div",37)(23,"h3",38),d(24,"Giorni Lavorati"),c(),u(25,"div",39),d(26),c(),u(27,"p",6),d(28),c()(),u(29,"div",37)(30,"h3",38),d(31,"Ore di Pause"),c(),u(32,"div",39),d(33),z(34,"number"),c(),u(35,"p",6),d(36,"Totale pause"),c()()()()),n&2){let e=b();h(10),M("",W(11,5,e.datiReport.oreTotali,"1.1-1"),"h"),h(8),M("",W(19,8,e.datiReport.mediaGiornaliera,"1.1-1"),"h"),h(8),R(e.datiReport.giorniLavorati),h(2),M("Su ",e.datiReport.giorniTotali," giorni"),h(5),M("",W(34,11,e.datiReport.orePause,"1.1-1"),"h")}}function Yj(n,t){if(n&1&&(u(0,"span",46),d(1),c()),n&2){let e=b().$implicit,r=b(2);y("title",e.note),h(),M(" ",r.troncaTesto(e.note,20)," ")}}function Kj(n,t){n&1&&(u(0,"span"),d(1,"-"),c())}function Zj(n,t){if(n&1&&(u(0,"tr")(1,"td"),d(2),z(3,"date"),c(),u(4,"td"),d(5),c(),u(6,"td"),d(7),c(),u(8,"td"),d(9),c(),u(10,"td"),d(11),z(12,"number"),c(),u(13,"td"),d(14),z(15,"number"),c(),u(16,"td"),d(17),z(18,"number"),c(),u(19,"td"),x(20,Yj,2,2,"span",44)(21,Kj,2,0,"span",45),c()()),n&2){let e=t.$implicit;h(2),R(W(3,9,e.data,"dd/MM/yyyy")),h(3),R(e.dipendente),h(2),R(e.oraInizio),h(2),R(e.oraFine),h(2),M("",W(12,12,e.oreLavorate,"1.1-1"),"h"),h(3),M("",W(15,15,e.pause,"1.1-1"),"h"),h(3),M("",W(18,18,e.oreEffettive,"1.1-1"),"h"),h(3),y("ngIf",e.note),h(),y("ngIf",!e.note)}}function Qj(n,t){if(n&1&&(u(0,"div",40)(1,"h2",5)(2,"span",3),d(3,"view_list"),c(),d(4," Dettaglio Timbrature "),c(),u(5,"div",41)(6,"table",42)(7,"thead")(8,"tr")(9,"th"),d(10,"Data"),c(),u(11,"th"),d(12,"Dipendente"),c(),u(13,"th"),d(14,"Ora Inizio"),c(),u(15,"th"),d(16,"Ora Fine"),c(),u(17,"th"),d(18,"Ore Lavorate"),c(),u(19,"th"),d(20,"Pause"),c(),u(21,"th"),d(22,"Ore Effettive"),c(),u(23,"th"),d(24,"Note"),c()()(),u(25,"tbody"),x(26,Zj,22,21,"tr",43),c()()()()),n&2){let e=b();h(26),y("ngForOf",e.datiReport.dettaglio)}}function Jj(n,t){if(n&1&&(u(0,"div",51)(1,"div",52),d(2),c(),u(3,"div",53),O(4,"div",54),c(),u(5,"div",55),d(6),z(7,"number"),c()()),n&2){let e=t.$implicit,r=b(2);h(2),R(e.giorno),h(2),fr("height",e.ore/r.datiReport.maxOreGiornaliere*100+"%"),h(2),M("",W(7,4,e.ore,"1.1-1"),"h")}}function Xj(n,t){if(n&1&&(u(0,"div",7)(1,"h2",5)(2,"span",3),d(3,"bar_chart"),c(),d(4," Andamento Ore Lavorative "),c(),u(5,"div",47)(6,"div",48)(7,"p",6),d(8,"Grafico delle ore lavorative per giorno"),c(),u(9,"div",49),x(10,Jj,8,7,"div",50),c()()()()),n&2){let e=b();h(10),y("ngForOf",e.datiReport.graficoOre)}}function eV(n,t){n&1&&(u(0,"div",56)(1,"span",3),d(2,"analytics"),c(),u(3,"h3"),d(4,"Nessun report generato"),c(),u(5,"p"),d(6,"Seleziona i filtri e genera un report per visualizzare i dati."),c()())}var Ap=class n{constructor(t,e,r){this.authService=t;this.companyService=e;this.timbratureService=r}tipoReport="settimanale";dataInizio="";dataFine="";dipendenteSelezionato="tutti";currentUser=null;dipendenti=[];datiReport=null;isLoading=!1;ngOnInit(){this.authService.currentUser$.subscribe(t=>{this.currentUser=t,t&&(this.impostaDatePredefinite(),(this.hasRole("admin")||this.hasRole("manager"))&&this.caricaDipendenti(t.company_id))})}impostaDatePredefinite(){let t=new Date;switch(this.tipoReport){case"settimanale":let e=new Date(t);e.setDate(t.getDate()-t.getDay()+1),this.dataInizio=e.toISOString().split("T")[0],this.dataFine=t.toISOString().split("T")[0];break;case"mensile":let r=new Date(t.getFullYear(),t.getMonth(),1);this.dataInizio=r.toISOString().split("T")[0],this.dataFine=t.toISOString().split("T")[0];break;case"annuale":let i=new Date(t.getFullYear(),0,1);this.dataInizio=i.toISOString().split("T")[0],this.dataFine=t.toISOString().split("T")[0];break;case"personalizzato":break}}onTipoReportChange(){this.impostaDatePredefinite()}caricaDipendenti(t){this.companyService.getDipendenti(t).subscribe({next:e=>{this.dipendenti=e},error:e=>{console.error("Errore nel caricamento dipendenti:",e)}})}hasRole(t){return this.authService.hasRole(t)}generaReport(){if(!this.dataInizio||!this.dataFine){alert("Seleziona le date di inizio e fine");return}this.isLoading=!0,this.datiReport=null,setTimeout(()=>{this.datiReport=this.generaReportMock(),this.isLoading=!1},1500)}generaReportMock(){let t=[{data:new Date("2024-01-15"),dipendente:"Mario Rossi",oraInizio:"08:00",oraFine:"17:00",oreLavorate:9,pause:1,oreEffettive:8,note:"Giornata standard"},{data:new Date("2024-01-16"),dipendente:"Mario Rossi",oraInizio:"09:00",oraFine:"18:00",oreLavorate:9,pause:1,oreEffettive:8,note:"Riunione mattutina"},{data:new Date("2024-01-17"),dipendente:"Mario Rossi",oraInizio:"08:30",oraFine:"17:30",oreLavorate:9,pause:.5,oreEffettive:8.5}],e=[{giorno:"Lun",ore:8},{giorno:"Mar",ore:8},{giorno:"Mer",ore:8.5},{giorno:"Gio",ore:7.5},{giorno:"Ven",ore:8},{giorno:"Sab",ore:4},{giorno:"Dom",ore:0}],r=t.reduce((s,a)=>s+a.oreEffettive,0),i=t.reduce((s,a)=>s+a.pause,0),o=Math.max(...e.map(s=>s.ore));return{oreTotali:r,mediaGiornaliera:r/t.length,giorniLavorati:t.length,giorniTotali:7,orePause:i,maxOreGiornaliere:o,dettaglio:t,graficoOre:e}}esportaPDF(){console.log("Esportazione PDF con dati:",this.datiReport),alert("Esportazione PDF simulata! Nella versione reale verrebbe generato un PDF.")}esportaExcel(){console.log("Esportazione Excel con dati:",this.datiReport),alert("Esportazione Excel simulata! Nella versione reale verrebbe generato un file Excel.")}troncaTesto(t,e){return t?t.length<=e?t:t.substring(0,e)+"...":""}static \u0275fac=function(e){return new(e||n)(C(ge),C(wt),C(Vt))};static \u0275cmp=me({type:n,selectors:[["app-report"]],decls:58,vars:15,consts:[[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"form-section"],[1,"grid-form"],[1,"form-group"],[1,"form-label"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value","settimanale"],["value","mensile"],["value","annuale"],["value","personalizzato"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["class","form-control",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","class","form-control","disabled","",3,"value",4,"ngIf"],[1,"form-actions"],[1,"promethea-button",3,"click","disabled"],["class","material-icons",4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"promethea-button","outline",3,"click","disabled"],[1,"promethea-button","secondary",3,"click","disabled"],["class","kpi-section",4,"ngIf"],["class","table-section",4,"ngIf"],["class","form-section",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"form-control",3,"ngModelChange","ngModel"],["value","tutti"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","disabled","",1,"form-control",3,"value"],[1,"loading-spinner"],[1,"kpi-section"],[1,"grid-cards"],[1,"card"],[1,"card-title"],[1,"card-number"],[1,"table-section"],[1,"table-container"],[1,"crm-table"],[4,"ngFor","ngForOf"],["class","notes-preview",3,"title",4,"ngIf"],[4,"ngIf"],[1,"notes-preview",3,"title"],[1,"chart-placeholder"],[1,"chart-container"],[1,"chart-bars"],["class","chart-bar",4,"ngFor","ngForOf"],[1,"chart-bar"],[1,"bar-label"],[1,"bar-container"],[1,"bar-fill"],[1,"bar-value"],[1,"empty-state"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d(4,"assessment"),c()(),u(5,"div",4)(6,"h1",5),d(7,"Report Timbrature"),c(),u(8,"p",6),d(9,"Analizza e esporta i dati delle timbrature"),c()()(),u(10,"div",7)(11,"h2",5)(12,"span",3),d(13,"filter_alt"),c(),d(14," Filtri Report "),c(),u(15,"div",8)(16,"div",9)(17,"label",10),d(18,"Tipo Report"),c(),u(19,"select",11),oe("ngModelChange",function(o){return le(r.tipoReport,o)||(r.tipoReport=o),o}),T("change",function(){return r.onTipoReportChange()}),u(20,"option",12),d(21,"Settimanale"),c(),u(22,"option",13),d(23,"Mensile"),c(),u(24,"option",14),d(25,"Annuale"),c(),u(26,"option",15),d(27,"Personalizzato"),c()()(),u(28,"div",9)(29,"label",10),d(30,"Data Inizio"),c(),u(31,"input",16),oe("ngModelChange",function(o){return le(r.dataInizio,o)||(r.dataInizio=o),o}),c()(),u(32,"div",9)(33,"label",10),d(34,"Data Fine"),c(),u(35,"input",16),oe("ngModelChange",function(o){return le(r.dataFine,o)||(r.dataFine=o),o}),c()(),u(36,"div",9)(37,"label",10),d(38,"Dipendente"),c(),x(39,$j,4,2,"select",17)(40,Hj,1,1,"input",18),c()(),u(41,"div",19)(42,"button",20),T("click",function(){return r.generaReport()}),x(43,Gj,2,0,"span",21)(44,Wj,1,0,"span",22),d(45),c(),u(46,"button",23),T("click",function(){return r.esportaPDF()}),u(47,"span",3),d(48,"picture_as_pdf"),c(),d(49," Esporta PDF "),c(),u(50,"button",24),T("click",function(){return r.esportaExcel()}),u(51,"span",3),d(52,"table_chart"),c(),d(53," Esporta Excel "),c()()(),x(54,qj,37,14,"div",25)(55,Qj,27,1,"div",26)(56,Xj,11,1,"div",27)(57,eV,7,0,"div",28),c()),e&2&&(h(19),ie("ngModel",r.tipoReport),h(12),ie("ngModel",r.dataInizio),h(4),ie("ngModel",r.dataFine),h(4),y("ngIf",r.hasRole("admin")||r.hasRole("manager")),h(),y("ngIf",!r.hasRole("admin")&&!r.hasRole("manager")),h(2),y("disabled",r.isLoading),h(),y("ngIf",!r.isLoading),h(),y("ngIf",r.isLoading),h(),M(" ",r.isLoading?"Generando...":"Genera Report"," "),h(),y("disabled",!r.datiReport),h(4),y("disabled",!r.datiReport),h(4),y("ngIf",r.datiReport),h(),y("ngIf",r.datiReport),h(),y("ngIf",r.datiReport),h(),y("ngIf",!r.datiReport&&!r.isLoading))},dependencies:[_e,Ye,Ne,ln,sn,an,Ke,kt,Ze,Zt,qt,ut],styles:[".kpi-section[_ngcontent-%COMP%]{margin-bottom:var(--gutter-lg)}.chart-placeholder[_ngcontent-%COMP%]{background:var(--background);border:1px solid var(--smoke-color-1);border-radius:16px;padding:var(--gutter-lg);margin-top:var(--gutter-md)}.chart-container[_ngcontent-%COMP%]{text-align:center}.chart-bars[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;gap:var(--gutter-sm);height:200px;margin-top:var(--gutter-lg);padding:0 var(--gutter-md)}.chart-bar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1;gap:var(--gutter-sm)}.bar-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-color);opacity:.7}.bar-container[_ngcontent-%COMP%]{height:120px;width:30px;background:color-mix(in srgb,var(--smoke-color-1) 50%,transparent);border-radius:4px 4px 0 0;position:relative;display:flex;align-items:flex-end}.bar-fill[_ngcontent-%COMP%]{width:100%;background:var(--gradiente);border-radius:4px 4px 0 0;transition:height .3s ease;min-height:4px}.bar-value[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:var(--text-color)}@media (max-width: 768px){.chart-bars[_ngcontent-%COMP%]{gap:4px;padding:0 var(--gutter-sm)}.bar-container[_ngcontent-%COMP%]{width:20px}.bar-label[_ngcontent-%COMP%], .bar-value[_ngcontent-%COMP%]{font-size:.7rem}}@media (max-width: 480px){.chart-bars[_ngcontent-%COMP%]{flex-wrap:wrap;height:auto;gap:var(--gutter-md)}.chart-bar[_ngcontent-%COMP%]{flex:0 0 calc(33.333% - var(--gutter-md))}}"]})};var Op=class n{constructor(t){this.supabaseService=t}BUCKET_NAME="buste-paga";getBustePagaAzienda(t){let r=this.supabaseService.getClient().from("payroll_files").select(`
        *,
        users:user_id (first_name, last_name, email)
      `).eq("company_id",t).order("period",{ascending:!1}).then(i=>{if(i.error)throw i.error;return i.data});return Q(r)}getBustePagaDipendente(t){let r=this.supabaseService.getClient().from("payroll_files").select("*").eq("user_id",t).eq("visible_to_user",!0).order("period",{ascending:!1}).then(i=>{if(i.error)throw i.error;return i.data});return Q(r)}uploadBustaPaga(t,e,r,i,o){return _(this,null,function*(){let s=this.supabaseService.getClient(),a=t.name.split(".").pop(),l=`${e}_${i}_${Date.now()}.${a}`,f=`${r}/${l}`,{error:p}=yield s.storage.from(this.BUCKET_NAME).upload(f,t);if(p)throw p;let{error:m}=yield s.from("payroll_files").insert({user_id:e,company_id:r,filename:l,original_name:t.name,file_size_bytes:t.size,mime_type:t.type,storage_path:f,period:i,uploaded_by:o,visible_to_user:!0});if(m)throw m;return{success:!0,fileName:l}})}downloadBustaPaga(t,e){let i=this.supabaseService.getClient().storage.from(this.BUCKET_NAME).download(t).then(o=>{if(o.error)throw o.error;let s=URL.createObjectURL(o.data),a=document.createElement("a");return a.href=s,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),{success:!0}});return Q(i)}eliminaBustaPaga(t,e){let r=this.supabaseService.getClient(),i=Promise.all([r.from("payroll_files").delete().eq("id",t),r.storage.from(this.BUCKET_NAME).remove([e])]).then(([o,s])=>{if(o.error)throw o.error;if(s.error)throw s.error;return{success:!0}});return Q(i)}static \u0275fac=function(e){return new(e||n)(V(un))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var my=(n,t)=>t.id;function nV(n,t){if(n&1){let e=J();u(0,"div",8)(1,"button",16),T("click",function(){N(e);let i=b();return P(i.mostraUpload=!i.mostraUpload)}),u(2,"span",4),d(3,"upload"),c(),d(4," Carica Buste Paga "),c()()}}function rV(n,t){if(n&1&&(u(0,"option",21),d(1),c()),n&2){let e=t.$implicit;y("value",e.id),h(),be("",e.first_name," ",e.last_name)}}function iV(n,t){if(n&1){let e=J();u(0,"div",32)(1,"span",4),d(2,"cloud_upload"),c(),u(3,"h3"),d(4,"Trascina i file PDF qui"),c(),u(5,"p",33),d(6,"oppure"),c(),u(7,"button",34),T("click",function(){N(e);let i=ao(12);return P(i.click())}),u(8,"span",4),d(9,"attach_file"),c(),d(10," Seleziona File "),c(),u(11,"input",35,0),T("change",function(i){N(e);let o=b(2);return P(o.onFileSelected(i))}),c()()}}function oV(n,t){if(n&1){let e=J();u(0,"div",38)(1,"span",4),d(2,"picture_as_pdf"),c(),u(3,"div",39)(4,"span",40),d(5),c(),u(6,"span",41),d(7),c()(),u(8,"button",42),T("click",function(){let i=N(e).index,o=b(3);return P(o.rimuoviFile(i))}),u(9,"span",4),d(10,"close"),c()()()}if(n&2){let e=t.$implicit;h(5),R(e.name),h(2),M("",(e.size/1024/1024).toFixed(2)," MB")}}function sV(n,t){if(n&1&&(u(0,"div",36)(1,"h4"),d(2),c(),x(3,oV,11,2,"div",37),c()),n&2){let e=b(2);h(2),M("File selezionati (",e.selectedFiles.length,")"),h(),y("ngForOf",e.selectedFiles)}}function aV(n,t){if(n&1&&(u(0,"div",26)(1,"span",4),d(2,"error"),c(),d(3),c()),n&2){let e=b(2);h(3),M(" ",e.errorMessage," ")}}function lV(n,t){if(n&1&&(u(0,"div",27)(1,"span",4),d(2,"check_circle"),c(),d(3),c()),n&2){let e=b(2);h(3),M(" ",e.successMessage," ")}}function cV(n,t){n&1&&(u(0,"span",4),d(1,"upload"),c())}function uV(n,t){n&1&&O(0,"span",31)}function dV(n,t){if(n&1){let e=J();u(0,"div",9)(1,"h2",6)(2,"span",4),d(3,"cloud_upload"),c(),d(4," Carica Nuove Buste Paga "),c(),u(5,"div",17)(6,"div",12)(7,"label",18)(8,"span",4),d(9,"person"),c(),d(10," Dipendente * "),c(),u(11,"select",19),oe("ngModelChange",function(i){N(e);let o=b();return le(o.selectedUserId,i)||(o.selectedUserId=i),P(i)}),u(12,"option",20),d(13,"Seleziona dipendente"),c(),Dt(14,rV,2,3,"option",21,my),c()(),u(16,"div",12)(17,"label",18)(18,"span",4),d(19,"event"),c(),d(20," Periodo * "),c(),u(21,"input",22),oe("ngModelChange",function(i){N(e);let o=b();return le(o.selectedPeriod,i)||(o.selectedPeriod=i),P(i)}),c()()(),u(22,"div",23),T("drop",function(i){N(e);let o=b();return P(o.onDrop(i))})("dragover",function(i){N(e);let o=b();return P(o.onDragOver(i))})("dragleave",function(i){N(e);let o=b();return P(o.onDragLeave(i))}),x(23,iV,13,0,"div",24)(24,sV,4,2,"div",25),c(),ne(25,aV,4,1,"div",26),ne(26,lV,4,1,"div",27),u(27,"div",28)(28,"button",29),T("click",function(){N(e);let i=b();return P(i.resetUpload())}),d(29," Annulla "),c(),u(30,"button",30),T("click",function(){N(e);let i=b();return P(i.onUpload())}),ne(31,cV,2,0,"span",4),ne(32,uV,1,0,"span",31),d(33),c()()()}if(n&2){let e=b();h(11),ie("ngModel",e.selectedUserId),y("disabled",e.isLoading),h(3),xt(e.dipendenti),h(7),ie("ngModel",e.selectedPeriod),y("disabled",e.isLoading),h(),xe("drag-over",e.isDragOver)("has-files",e.selectedFiles.length>0),h(),y("ngIf",e.selectedFiles.length===0),h(),y("ngIf",e.selectedFiles.length>0),h(),re(e.errorMessage?25:-1),h(),re(e.successMessage?26:-1),h(2),y("disabled",e.isLoading),h(2),y("disabled",!e.canUpload()||e.isLoading),h(),re(e.isLoading?-1:31),h(),re(e.isLoading?32:-1),h(),M(" ",e.isLoading?"Caricamento...":"Carica Buste Paga"," ")}}function fV(n,t){if(n&1&&(u(0,"div",10)(1,"div",43)(2,"h3",44),d(3,"Buste Paga Totali"),c(),u(4,"div",45),d(5),c()(),u(6,"div",43)(7,"h3",44),d(8,"Ultima Busta Paga"),c(),u(9,"div",45),d(10),c()()()),n&2){let e=b();h(5),R(e.bustePaga.length),h(5),M(" ",(e.ultimaBustaPaga==null?null:e.ultimaBustaPaga.period)||"N/A"," ")}}function pV(n,t){if(n&1&&(u(0,"option",21),d(1),c()),n&2){let e=t.$implicit;y("value",e),h(),R(e)}}function hV(n,t){if(n&1&&(u(0,"option",21),d(1),c()),n&2){let e=t.$implicit;y("value",e.id),h(),be("",e.first_name," ",e.last_name)}}function mV(n,t){if(n&1){let e=J();u(0,"div",12)(1,"label",18),d(2,"Filtra per periodo"),c(),u(3,"select",46),oe("ngModelChange",function(i){N(e);let o=b();return le(o.filtroPeriodo,i)||(o.filtroPeriodo=i),P(i)}),T("change",function(){N(e);let i=b();return P(i.applicaFiltri())}),u(4,"option",20),d(5,"Tutti i periodi"),c(),Dt(6,pV,2,2,"option",21,_i),c()(),u(8,"div",12)(9,"label",18),d(10,"Filtra per dipendente"),c(),u(11,"select",46),oe("ngModelChange",function(i){N(e);let o=b();return le(o.filtroDipendente,i)||(o.filtroDipendente=i),P(i)}),T("change",function(){N(e);let i=b();return P(i.applicaFiltri())}),u(12,"option",20),d(13,"Tutti i dipendenti"),c(),Dt(14,hV,2,3,"option",21,my),c()()}if(n&2){let e=b();h(3),ie("ngModel",e.filtroPeriodo),h(3),xt(e.periodiUnici),h(5),ie("ngModel",e.filtroDipendente),h(3),xt(e.dipendenti)}}function gV(n,t){if(n&1&&(u(0,"option",21),d(1),c()),n&2){let e=t.$implicit;y("value",e),h(),R(e)}}function vV(n,t){if(n&1){let e=J();u(0,"div",12)(1,"label",18),d(2,"Anno"),c(),u(3,"select",46),oe("ngModelChange",function(i){N(e);let o=b();return le(o.filtroAnno,i)||(o.filtroAnno=i),P(i)}),T("change",function(){N(e);let i=b();return P(i.applicaFiltri())}),u(4,"option",20),d(5,"Tutti gli anni"),c(),Dt(6,gV,2,2,"option",21,_i),c()()}if(n&2){let e=b();h(3),ie("ngModel",e.filtroAnno),h(3),xt(e.anniDisponibili)}}function yV(n,t){n&1&&(u(0,"th"),d(1,"Dipendente"),c())}function _V(n,t){if(n&1&&(u(0,"td")(1,"div",50)(2,"div",51),d(3),c(),u(4,"div",52)(5,"strong"),d(6),c(),u(7,"span",7),d(8),c()()()()),n&2){let e=b().$implicit;h(3),be(" ",e.user==null||e.user.first_name==null?null:e.user.first_name.charAt(0),"",e.user==null||e.user.last_name==null?null:e.user.last_name.charAt(0)," "),h(3),be("",e.user==null?null:e.user.first_name," ",e.user==null?null:e.user.last_name),h(2),R(e.user==null?null:e.user.email)}}function bV(n,t){if(n&1){let e=J();u(0,"button",48),T("click",function(){N(e);let i=b().$implicit,o=b();return P(o.eliminaBustaPaga(i))}),u(1,"span",4),d(2,"delete"),c()()}}function wV(n,t){if(n&1){let e=J();u(0,"tr"),ne(1,_V,9,5,"td"),u(2,"td"),d(3),c(),u(4,"td")(5,"div",39)(6,"span",4),d(7,"picture_as_pdf"),c(),d(8),c()(),u(9,"td"),d(10),z(11,"date"),c(),u(12,"td"),d(13),c(),u(14,"td")(15,"div",47)(16,"button",48),T("click",function(){let i=N(e).$implicit,o=b();return P(o.downloadBustaPaga(i))}),u(17,"span",4),d(18,"download"),c()(),ne(19,bV,3,0,"button",49),c()()()}if(n&2){let e=t.$implicit,r=b();h(),re(r.isAdmin?1:-1),h(2),R(e.period),h(5),M(" ",e.original_name," "),h(2),R(W(11,6,e.uploaded_at,"dd/MM/yyyy")),h(3),M("",(e.file_size_bytes/1024/1024).toFixed(2)," MB"),h(6),re(r.isAdmin?19:-1)}}function EV(n,t){if(n&1&&(u(0,"div",15)(1,"span",4),d(2,"description"),c(),u(3,"h3"),d(4,"Nessuna busta paga"),c(),u(5,"p"),d(6),c()()),n&2){let e=b();h(6),M(" ",e.isAdmin?"Non sono state caricate buste paga per i filtri selezionati.":"Non sono presenti buste paga per i filtri selezionati."," ")}}var Rp=class n{constructor(t,e,r){this.bustePagaService=t;this.dipendentiService=e;this.authService=r}destroy$=new Be;isAdmin=!1;isLoading=!1;bustePaga=[];bustePagaFiltrate=[];mostraUpload=!1;selectedFiles=[];isDragOver=!1;selectedUserId="";selectedPeriod="";filtroPeriodo="";filtroDipendente="";filtroAnno="";dipendenti=[];periodiUnici=[];anniDisponibili=[];errorMessage="";successMessage="";ngOnInit(){return _(this,null,function*(){this.verificaRuolo(),yield this.caricaDati()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}verificaRuolo(){return _(this,null,function*(){try{let t=yield nr(this.authService.currentUser$);this.isAdmin=t?.role==="admin"||t?.role==="manager",console.log("Ruolo utente:",this.isAdmin?"Admin":"Dipendente")}catch(t){console.error("Errore nel verificare il ruolo:",t),this.isAdmin=!1}})}caricaDati(){return _(this,null,function*(){this.isLoading=!0;try{let t=localStorage.getItem("companyId");if(!t)throw new Error("Company ID non trovato");if(this.isAdmin)yield Promise.all([this.caricaBustePagaAzienda(t),this.caricaDipendenti(t)]);else{let e=yield this.getCurrentUserId();yield this.caricaBustePagaDipendente(e)}this.inizializzaFiltri()}catch(t){console.error("Errore nel caricamento dei dati:",t),this.errorMessage="Errore nel caricamento dei dati"}finally{this.isLoading=!1}})}caricaBustePagaAzienda(t){return new Promise((e,r)=>{this.bustePagaService.getBustePagaAzienda(t).pipe(jn(this.destroy$)).subscribe({next:i=>{this.bustePaga=i,this.bustePagaFiltrate=i,e()},error:i=>{console.error("Errore nel caricamento buste paga azienda:",i),r(i)}})})}caricaBustePagaDipendente(t){return new Promise((e,r)=>{this.bustePagaService.getBustePagaDipendente(t).pipe(jn(this.destroy$)).subscribe({next:i=>{this.bustePaga=i,this.bustePagaFiltrate=i,e()},error:i=>{console.error("Errore nel caricamento buste paga dipendente:",i),r(i)}})})}caricaDipendenti(t){return new Promise((e,r)=>{this.dipendentiService.getDipendenti(t).pipe(jn(this.destroy$)).subscribe({next:i=>{this.dipendenti=i,e()},error:i=>{console.error("Errore nel caricamento dipendenti:",i),r(i)}})})}inizializzaFiltri(){this.isAdmin?this.periodiUnici=[...new Set(this.bustePaga.map(t=>t.period))].sort().reverse():this.anniDisponibili=[...new Set(this.bustePaga.map(t=>t.period.split("-")[0]))].sort().reverse()}getCurrentUserId(){return _(this,null,function*(){return(yield nr(this.authService.currentUser$))?.id||""})}applicaFiltri(){let t=this.bustePaga;this.isAdmin?(this.filtroPeriodo&&(t=t.filter(e=>e.period===this.filtroPeriodo)),this.filtroDipendente&&(t=t.filter(e=>e.user_id===this.filtroDipendente))):this.filtroAnno&&(t=t.filter(e=>e.period.startsWith(this.filtroAnno))),this.bustePagaFiltrate=t}onDragOver(t){t.preventDefault(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),this.isDragOver=!1}onDrop(t){t.preventDefault(),this.isDragOver=!1;let e=t.dataTransfer?.files;e&&this.processFiles(e)}onFileSelected(t){let e=t.target;e.files&&this.processFiles(e.files)}processFiles(t){let e=Array.from(t).filter(r=>r.type==="application/pdf");if(e.length===0){this.errorMessage="Seleziona solo file PDF";return}this.selectedFiles=[...this.selectedFiles,...e],this.errorMessage=""}rimuoviFile(t){this.selectedFiles.splice(t,1)}canUpload(){return!!this.selectedUserId&&!!this.selectedPeriod&&this.selectedFiles.length>0}onUpload(){return _(this,null,function*(){if(this.canUpload()){this.isLoading=!0,this.errorMessage="",this.successMessage="";try{let t=localStorage.getItem("companyId");if(!t)throw new Error("Company ID non trovato");let e=yield nr(this.authService.currentUser$);if(!e?.id)throw new Error("Utente non autenticato");let r=e.id;for(let i of this.selectedFiles)yield this.bustePagaService.uploadBustaPaga(i,this.selectedUserId,t,this.selectedPeriod,r);this.successMessage=`Caricamento completato! ${this.selectedFiles.length} file caricati.`,this.resetUpload(),yield this.caricaDati()}catch(t){console.error("Errore durante l'upload:",t),this.errorMessage=t.message||"Errore durante l'upload"}finally{this.isLoading=!1}}})}resetUpload(){this.selectedFiles=[],this.selectedUserId="",this.selectedPeriod="",this.mostraUpload=!1}downloadBustaPaga(t){this.bustePagaService.downloadBustaPaga(t.storage_path,t.original_name).pipe(jn(this.destroy$)).subscribe({error:e=>{console.error("Errore nel download:",e),this.errorMessage="Errore durante il download"}})}eliminaBustaPaga(t){confirm("Sei sicuro di voler eliminare questa busta paga?")&&this.bustePagaService.eliminaBustaPaga(t.id,t.storage_path).pipe(jn(this.destroy$)).subscribe({next:()=>{this.successMessage="Busta paga eliminata con successo",this.caricaDati()},error:e=>{console.error("Errore nell'eliminazione:",e),this.errorMessage="Errore durante l'eliminazione"}})}get ultimaBustaPaga(){return this.bustePaga.length>0?this.bustePaga[0]:null}static \u0275fac=function(e){return new(e||n)(C(Op),C(Fn),C(ge))};static \u0275cmp=me({type:n,selectors:[["app-buste-paga"]],decls:41,vars:9,consts:[["fileInput",""],[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"actions-container"],[1,"form-section"],[1,"grid-cards"],[1,"filters-container"],[1,"filter-group"],[1,"table-container"],[1,"crm-table"],[1,"empty-state"],[1,"promethea-button",3,"click"],[1,"grid-form",2,"margin-bottom","var(--gutter-lg)"],[1,"form-label"],[3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value"],["type","month",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"drop-zone",3,"drop","dragover","dragleave"],["class","drop-content",4,"ngIf"],["class","files-list",4,"ngIf"],[1,"status-message","error"],[1,"status-message","info"],[1,"form-actions"],["type","button",1,"promethea-button","ghost",3,"click","disabled"],["type","button",1,"promethea-button",3,"click","disabled"],[1,"loading-spinner"],[1,"drop-content"],[1,"text-muted",2,"margin-bottom","var(--gutter-lg)"],["type","button",1,"promethea-button","outline",3,"click"],["type","file","accept",".pdf","multiple","","hidden","",3,"change"],[1,"files-list"],["class","file-item",4,"ngFor","ngForOf"],[1,"file-item"],[1,"file-info"],[1,"file-name"],[1,"file-size"],["type","button",1,"icon-button",3,"click"],[1,"card"],[1,"card-title"],[1,"card-number"],[3,"ngModelChange","change","ngModel"],[1,"action-buttons"],[1,"icon-button",3,"click"],[1,"icon-button"],[1,"user-info-compact"],[1,"user-avatar-small"],[1,"user-details-compact"]],template:function(e,r){e&1&&(u(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),d(4,"payments"),c()(),u(5,"div",5)(6,"h1",6),d(7),c(),u(8,"p",7),d(9),c()(),ne(10,nV,5,0,"div",8),c(),ne(11,dV,34,17,"div",9),ne(12,fV,11,2,"div",10),u(13,"div",9)(14,"div",2)(15,"h2",6)(16,"span",4),d(17,"list_alt"),c(),d(18),c(),u(19,"div",11),ne(20,mV,16,2)(21,vV,8,1,"div",12),c()(),u(22,"div",13)(23,"table",14)(24,"thead")(25,"tr"),ne(26,yV,2,0,"th"),u(27,"th"),d(28,"Periodo"),c(),u(29,"th"),d(30,"File"),c(),u(31,"th"),d(32,"Data Caricamento"),c(),u(33,"th"),d(34,"Dimensione"),c(),u(35,"th"),d(36,"Azioni"),c()()(),u(37,"tbody"),Dt(38,wV,20,9,"tr",null,my),c()()(),ne(40,EV,7,1,"div",15),c()()),e&2&&(h(7),M(" ",r.isAdmin?"Gestione Buste Paga":"Le mie Buste Paga"," "),h(2),M(" ",r.isAdmin?"Carica e gestisci le buste paga dei dipendenti":"Consulta e scarica le tue buste paga"," "),h(),re(r.isAdmin?10:-1),h(),re(r.isAdmin&&r.mostraUpload?11:-1),h(),re(r.isAdmin?-1:12),h(6),M(" ",r.isAdmin?"Buste Paga Caricate":"Storico Buste Paga"," "),h(2),re(r.isAdmin?20:21),h(6),re(r.isAdmin?26:-1),h(12),xt(r.bustePagaFiltrate),h(2),re(r.bustePagaFiltrate.length===0?40:-1))},dependencies:[_e,Ye,Ne,ln,sn,an,Ke,kt,Ze,Zt,Tt,ut],styles:[".drop-zone[_ngcontent-%COMP%]{border:2px dashed var(--smoke-color-1);border-radius:16px;padding:var(--gutter-xl);text-align:center;transition:all .3s ease;background:color-mix(in srgb,var(--background) 95%,transparent)}.drop-zone.drag-over[_ngcontent-%COMP%]{border-color:var(--primary);background:color-mix(in srgb,var(--primary) 5%,transparent)}.drop-zone.has-files[_ngcontent-%COMP%]{border-style:solid;border-color:var(--primary);background:color-mix(in srgb,var(--primary) 2%,transparent)}.drop-content[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--smoke-color-1)}.drop-zone.drag-over[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--primary)}.files-list[_ngcontent-%COMP%]{text-align:left}.file-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-sm);border:1px solid var(--smoke-color-1);border-radius:8px;margin-bottom:var(--gutter-sm);background:var(--background)}.file-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.file-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.file-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color)}.file-size[_ngcontent-%COMP%]{font-size:.8rem;color:color-mix(in srgb,var(--text-color) 60%,transparent)}@media (max-width: 768px){.drop-zone[_ngcontent-%COMP%]{padding:var(--gutter-lg)}.file-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--gutter-sm)}.action-buttons[_ngcontent-%COMP%]{align-self:flex-end}}"]})};var CV=Math.pow(10,8)*24*60*60*1e3,yre=-CV,Np=6048e5,zD=864e5;var SV=3600;var $D=SV*24,_re=$D*7,DV=$D*365.2425,xV=DV/12,bre=xV*3,gy=Symbol.for("constructDateFrom");function pt(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&gy in n?n[gy](t):n instanceof Date?new n.constructor(t):new Date(t)}function Se(n,t){return pt(t||n,n)}function Pp(n,t,e){let r=Se(n,e?.in);if(isNaN(t))return pt(e?.in||n,NaN);if(!t)return r;let i=r.getDate(),o=pt(e?.in||n,r.getTime());o.setMonth(r.getMonth()+t+1,0);let s=o.getDate();return i>=s?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}var IV={};function Ir(){return IV}function Xn(n,t){let e=Ir(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,i=Se(n,t?.in),o=i.getDay(),s=(o<r?7:0)+o-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Po(n,t){return Xn(n,Z(A({},t),{weekStartsOn:1}))}function kp(n,t){let e=Se(n,t?.in),r=e.getFullYear(),i=pt(e,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);let o=Po(i),s=pt(e,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);let a=Po(s);return e.getTime()>=o.getTime()?r+1:e.getTime()>=a.getTime()?r:r-1}function vy(n){let t=Se(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Ni(n,...t){let e=pt.bind(null,n||t.find(r=>typeof r=="object"));return t.map(e)}function ua(n,t){let e=Se(n,t?.in);return e.setHours(0,0,0,0),e}function HD(n,t,e){let[r,i]=Ni(e?.in,n,t),o=ua(r),s=ua(i),a=+o-vy(o),l=+s-vy(s);return Math.round((a-l)/zD)}function GD(n,t){let e=kp(n,t),r=pt(t?.in||n,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Po(r)}function yy(n,t,e){let[r,i]=Ni(e?.in,n,t);return+ua(r)==+ua(i)}function WD(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function qD(n){return!(!WD(n)&&typeof n!="number"||isNaN(+Se(n)))}function YD(n,t){let e=Se(n,t?.in),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function KD(n,t){let[e,r]=Ni(n,t.start,t.end);return{start:e,end:r}}function ZD(n,t){let{start:e,end:r}=KD(t?.in,n),i=+e>+r,o=i?+e:+r,s=i?r:e;s.setHours(0,0,0,0);let a=t?.step??1;if(!a)return[];a<0&&(a=-a,i=!i);let l=[];for(;+s<=o;)l.push(pt(e,s)),s.setDate(s.getDate()+a),s.setHours(0,0,0,0);return i?l.reverse():l}function QD(n,t){let e=Se(n,t?.in);return e.setDate(1),e.setHours(0,0,0,0),e}function JD(n,t){let e=Se(n,t?.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function XD(n,t){let e=Ir(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,i=Se(n,t?.in),o=i.getDay(),s=(o<r?-7:0)+6-(o-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}var TV={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ex=(n,t,e)=>{let r,i=TV[n];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function Fp(n){return(t={})=>{let e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}var MV={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},AV={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},OV={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tx={date:Fp({formats:MV,defaultWidth:"full"}),time:Fp({formats:AV,defaultWidth:"full"}),dateTime:Fp({formats:OV,defaultWidth:"full"})};var RV={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nx=(n,t,e,r)=>RV[n];function da(n){return(t,e)=>{let r=e?.context?String(e.context):"standalone",i;if(r==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=e?.width?String(e.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=e?.width?String(e.width):n.defaultWidth;i=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(t):t;return i[o]}}var NV={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},PV={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},kV={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},FV={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LV={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},jV={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},VV=(n,t)=>{let e=Number(n),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},rx={ordinalNumber:VV,era:da({values:NV,defaultWidth:"wide"}),quarter:da({values:PV,defaultWidth:"wide",argumentCallback:n=>n-1}),month:da({values:kV,defaultWidth:"wide"}),day:da({values:FV,defaultWidth:"wide"}),dayPeriod:da({values:LV,defaultWidth:"wide",formattingValues:jV,defaultFormattingWidth:"wide"})};function fa(n){return(t,e={})=>{let r=e.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=t.match(i);if(!o)return null;let s=o[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?BV(a,m=>m.test(s)):UV(a,m=>m.test(s)),f;f=n.valueCallback?n.valueCallback(l):l,f=e.valueCallback?e.valueCallback(f):f;let p=t.slice(s.length);return{value:f,rest:p}}}function UV(n,t){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function BV(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function ix(n){return(t,e={})=>{let r=t.match(n.matchPattern);if(!r)return null;let i=r[0],o=t.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=e.valueCallback?e.valueCallback(s):s;let a=t.slice(i.length);return{value:s,rest:a}}}var zV=/^(\d+)(th|st|nd|rd)?/i,$V=/\d+/i,HV={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},GV={any:[/^b/i,/^(a|c)/i]},WV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qV={any:[/1/i,/2/i,/3/i,/4/i]},YV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},KV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ZV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},QV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},JV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},XV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ox={ordinalNumber:ix({matchPattern:zV,parsePattern:$V,valueCallback:n=>parseInt(n,10)}),era:fa({matchPatterns:HV,defaultMatchWidth:"wide",parsePatterns:GV,defaultParseWidth:"any"}),quarter:fa({matchPatterns:WV,defaultMatchWidth:"wide",parsePatterns:qV,defaultParseWidth:"any",valueCallback:n=>n+1}),month:fa({matchPatterns:YV,defaultMatchWidth:"wide",parsePatterns:KV,defaultParseWidth:"any"}),day:fa({matchPatterns:ZV,defaultMatchWidth:"wide",parsePatterns:QV,defaultParseWidth:"any"}),dayPeriod:fa({matchPatterns:JV,defaultMatchWidth:"any",parsePatterns:XV,defaultParseWidth:"any"})};var _y={code:"en-US",formatDistance:ex,formatLong:tx,formatRelative:nx,localize:rx,match:ox,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sx(n,t){let e=Se(n,t?.in);return HD(e,JD(e))+1}function ax(n,t){let e=Se(n,t?.in),r=+Po(e)-+GD(e);return Math.round(r/Np)+1}function Lp(n,t){let e=Se(n,t?.in),r=e.getFullYear(),i=Ir(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=pt(t?.in||n,0);s.setFullYear(r+1,0,o),s.setHours(0,0,0,0);let a=Xn(s,t),l=pt(t?.in||n,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);let f=Xn(l,t);return+e>=+a?r+1:+e>=+f?r:r-1}function lx(n,t){let e=Ir(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,i=Lp(n,t),o=pt(t?.in||n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Xn(o,t)}function cx(n,t){let e=Se(n,t?.in),r=+Xn(e,t)-+lx(e,t);return Math.round(r/Np)+1}function Ee(n,t){let e=n<0?"-":"",r=Math.abs(n).toString().padStart(t,"0");return e+r}var ri={y(n,t){let e=n.getFullYear(),r=e>0?e:1-e;return Ee(t==="yy"?r%100:r,t.length)},M(n,t){let e=n.getMonth();return t==="M"?String(e+1):Ee(e+1,2)},d(n,t){return Ee(n.getDate(),t.length)},a(n,t){let e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return Ee(n.getHours()%12||12,t.length)},H(n,t){return Ee(n.getHours(),t.length)},m(n,t){return Ee(n.getMinutes(),t.length)},s(n,t){return Ee(n.getSeconds(),t.length)},S(n,t){let e=t.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,e-3));return Ee(i,t.length)}};var pa={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},by={G:function(n,t,e){let r=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){let r=n.getFullYear(),i=r>0?r:1-r;return e.ordinalNumber(i,{unit:"year"})}return ri.y(n,t)},Y:function(n,t,e,r){let i=Lp(n,r),o=i>0?i:1-i;if(t==="YY"){let s=o%100;return Ee(s,2)}return t==="Yo"?e.ordinalNumber(o,{unit:"year"}):Ee(o,t.length)},R:function(n,t){let e=kp(n);return Ee(e,t.length)},u:function(n,t){let e=n.getFullYear();return Ee(e,t.length)},Q:function(n,t,e){let r=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ee(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,t,e){let r=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ee(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,t,e){let r=n.getMonth();switch(t){case"M":case"MM":return ri.M(n,t);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(n,t,e){let r=n.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ee(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(n,t,e,r){let i=cx(n,r);return t==="wo"?e.ordinalNumber(i,{unit:"week"}):Ee(i,t.length)},I:function(n,t,e){let r=ax(n);return t==="Io"?e.ordinalNumber(r,{unit:"week"}):Ee(r,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):ri.d(n,t)},D:function(n,t,e){let r=sx(n);return t==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):Ee(r,t.length)},E:function(n,t,e){let r=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(n,t,e,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Ee(o,2);case"eo":return e.ordinalNumber(o,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(n,t,e,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Ee(o,t.length);case"co":return e.ordinalNumber(o,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(n,t,e){let r=n.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Ee(i,t.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(n,t,e){let i=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,t,e){let r=n.getHours(),i;switch(r===12?i=pa.noon:r===0?i=pa.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,t,e){let r=n.getHours(),i;switch(r>=17?i=pa.evening:r>=12?i=pa.afternoon:r>=4?i=pa.morning:i=pa.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let r=n.getHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return ri.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):ri.H(n,t)},K:function(n,t,e){let r=n.getHours()%12;return t==="Ko"?e.ordinalNumber(r,{unit:"hour"}):Ee(r,t.length)},k:function(n,t,e){let r=n.getHours();return r===0&&(r=24),t==="ko"?e.ordinalNumber(r,{unit:"hour"}):Ee(r,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):ri.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):ri.s(n,t)},S:function(n,t){return ri.S(n,t)},X:function(n,t,e){let r=n.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return dx(r);case"XXXX":case"XX":return ko(r);case"XXXXX":case"XXX":default:return ko(r,":")}},x:function(n,t,e){let r=n.getTimezoneOffset();switch(t){case"x":return dx(r);case"xxxx":case"xx":return ko(r);case"xxxxx":case"xxx":default:return ko(r,":")}},O:function(n,t,e){let r=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ux(r,":");case"OOOO":default:return"GMT"+ko(r,":")}},z:function(n,t,e){let r=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ux(r,":");case"zzzz":default:return"GMT"+ko(r,":")}},t:function(n,t,e){let r=Math.trunc(+n/1e3);return Ee(r,t.length)},T:function(n,t,e){return Ee(+n,t.length)}};function ux(n,t=""){let e=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?e+String(i):e+String(i)+t+Ee(o,2)}function dx(n,t){return n%60===0?(n>0?"-":"+")+Ee(Math.abs(n)/60,2):ko(n,t)}function ko(n,t=""){let e=n>0?"-":"+",r=Math.abs(n),i=Ee(Math.trunc(r/60),2),o=Ee(r%60,2);return e+i+t+o}var fx=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},px=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},e3=(n,t)=>{let e=n.match(/(P+)(p+)?/)||[],r=e[1],i=e[2];if(!i)return fx(n,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",fx(r,t)).replace("{{time}}",px(i,t))},hx={p:px,P:e3};var t3=/^D+$/,n3=/^Y+$/,r3=["D","DD","YY","YYYY"];function mx(n){return t3.test(n)}function gx(n){return n3.test(n)}function vx(n,t,e){let r=i3(n,t,e);if(console.warn(r),r3.includes(n))throw new RangeError(r)}function i3(n,t,e){let r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var o3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,s3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,a3=/^'([^]*?)'?$/,l3=/''/g,c3=/[a-zA-Z]/;function wy(n,t,e){let r=Ir(),i=e?.locale??r.locale??_y,o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Se(n,e?.in);if(!qD(a))throw new RangeError("Invalid time value");let l=t.match(s3).map(p=>{let m=p[0];if(m==="p"||m==="P"){let v=hx[m];return v(p,i.formatLong)}return p}).join("").match(o3).map(p=>{if(p==="''")return{isToken:!1,value:"'"};let m=p[0];if(m==="'")return{isToken:!1,value:u3(p)};if(by[m])return{isToken:!0,value:p};if(m.match(c3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:p}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));let f={firstWeekContainsDate:o,weekStartsOn:s,locale:i};return l.map(p=>{if(!p.isToken)return p.value;let m=p.value;(!e?.useAdditionalWeekYearTokens&&gx(m)||!e?.useAdditionalDayOfYearTokens&&mx(m))&&vx(m,t,String(n));let v=by[m[0]];return v(a,m,i.localize,f)}).join("")}function u3(n){let t=n.match(a3);return t?t[1].replace(l3,"'"):n}function yx(n,t,e){let[r,i]=Ni(e?.in,n,t);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function _x(n,t,e){return Pp(n,-t,e)}var d3=(n,t)=>t.id;function f3(n,t){n&1&&(Ae(0,"div",10),ws(1,"div",20),Ae(2,"p"),d(3,"Caricamento timbrature..."),We()())}function p3(n,t){if(n&1&&(Ae(0,"div",13),d(1),We()),n&2){let e=t.$implicit;h(),M(" ",e," ")}}function h3(n,t){if(n&1&&d(0),n&2){let e=b().$implicit,r=b(3);M(" - ",r.formattaOrario(e.data.end_ts)," ")}}function m3(n,t){n&1&&d(0," (in corso) ")}function g3(n,t){if(n&1&&(Ae(0,"span",28),d(1),We()),n&2){let e=b().$implicit;h(),M(" ",e.data.user.first_name," ")}}function v3(n,t){if(n&1&&(Ae(0,"div",26)(1,"span",27),d(2),ne(3,h3,1,1)(4,m3,1,0),We(),ne(5,g3,2,1,"span",28),We()),n&2){let e=t.$implicit,r=b(3);fr("background",e.color),wd("title",e.title),h(2),M(" ",r.formattaOrario(e.data.start_ts)," "),h(),re(e.data.end_ts?3:4),h(2),re(r.getRuoloCorrente()!=="employee"&&e.data.user?5:-1)}}function y3(n,t){if(n&1){let e=J();Ae(0,"div",22),so("click",function(){let i=N(e).$implicit,o=b(2);return P(o.onDayClick(i))}),Ae(1,"div",23),d(2),We(),Ae(3,"div",24),Dt(4,v3,6,6,"div",25,d3),We()()}if(n&2){let e=t.$implicit,r=b(2);xe("current-month",r.isCurrentMonth(e))("other-month",!r.isCurrentMonth(e))("today",r.isToday(e)),h(2),M(" ",e.getDate()," "),h(2),xt(r.getEventsForDay(e))}}function _3(n,t){if(n&1&&(Ae(0,"div",15),Dt(1,y3,6,7,"div",21,_i),We()),n&2){let e=t.$implicit;h(),xt(e)}}var jp=class n{timbratureService=I(Vt);authService=I(ge);currentDate=et(new Date);weeks=et([]);events=et([]);timbrature=et([]);isLoading=et(!0);daysOfWeek=["Lun","Mar","Mer","Gio","Ven","Sab","Dom"];ngOnInit(){return _(this,null,function*(){yield this.caricaTimbrature(),this.generateCalendar()})}caricaTimbrature(){return _(this,null,function*(){this.isLoading.set(!0);try{let t=yield this.timbratureService.getTimbraturePerCalendario();this.timbrature.set(t),this.creaEventiDaTimbrature(t)}catch(t){console.error("Errore nel caricamento timbrature:",t)}finally{this.isLoading.set(!1)}})}creaEventiDaTimbrature(t){let e=t.map(r=>{let i=new Date(r.start_ts),o=this.authService.currentUserSubject.value,s="";return o?.role==="employee"?s=this.timbratureService.formattaOrarioTimbratura(r):s=`${r.user?`${r.user.first_name} ${r.user.last_name}`:"Utente"}: ${this.timbratureService.formattaOrarioTimbratura(r)}`,{id:r.id||`timbratura-${Date.now()}`,title:s,date:i,color:this.timbratureService.getColoreTimbratura(r),type:"timbratura",data:r}});this.events.set(e)}formattaOrario(t){return t?new Date(t).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",hour12:!1}):""}generateCalendar(){let t=Xn(QD(this.currentDate()),{weekStartsOn:1}),e=XD(YD(this.currentDate()),{weekStartsOn:1}),r=ZD({start:t,end:e}),i=[];for(let o=0;o<r.length;o+=7)i.push(r.slice(o,o+7));this.weeks.set(i)}getEventsForDay(t){return this.events().filter(e=>yy(e.date,t))}isCurrentMonth(t){return yx(t,this.currentDate())}isToday(t){return yy(t,new Date)}previousMonth(){return _(this,null,function*(){this.currentDate.set(_x(this.currentDate(),1)),this.generateCalendar(),yield this.caricaTimbrature()})}nextMonth(){return _(this,null,function*(){this.currentDate.set(Pp(this.currentDate(),1)),this.generateCalendar(),yield this.caricaTimbrature()})}goToToday(){return _(this,null,function*(){this.currentDate.set(new Date),this.generateCalendar(),yield this.caricaTimbrature()})}onDayClick(t){console.log("Giorno cliccato:",t);let e=this.timbratureService.getTimbraturePerGiorno(t,this.timbrature());console.log("Timbrature del giorno:",e)}getMonthYearTitle(){let t=this.currentDate(),e=wy(t,"MMMM"),r=wy(t,"yyyy");return`${e.charAt(0).toUpperCase()+e.slice(1)} ${r}`}getRuoloCorrente(){return this.authService.currentUserSubject.value?.role||"employee"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=me({type:n,selectors:[["app-calendario"]],decls:35,vars:2,consts:[[1,"page-container"],[1,"card-header"],[1,"material-icons"],[1,"card-title"],[1,"calendar-controls"],["title","Mese precedente",1,"icon-button",3,"click"],[1,"promethea-button","ghost",3,"click"],[1,"calendar-month-title"],["title","Mese successivo",1,"icon-button",3,"click"],[1,"card-content"],[1,"loading-container"],[1,"calendar-container"],[1,"calendar-header"],[1,"calendar-day-header"],[1,"calendar-grid"],[1,"calendar-week"],[1,"calendar-legend"],[1,"legend-item"],[1,"legend-color",2,"background","var(--primary)"],[1,"legend-color",2,"background","#ef4444"],[1,"loading-spinner"],[1,"calendar-day",3,"current-month","other-month","today"],[1,"calendar-day",3,"click"],[1,"day-number"],[1,"day-events"],[1,"calendar-event","timbratura-event",3,"background","title"],[1,"calendar-event","timbratura-event",3,"title"],[1,"event-time"],[1,"event-user"]],template:function(e,r){e&1&&(Ae(0,"div",0)(1,"div",1)(2,"span",2),d(3,"calendar_today"),We(),Ae(4,"h2",3),d(5,"Calendario Timbrature"),We(),Ae(6,"div",4)(7,"button",5),so("click",function(){return r.previousMonth()}),Ae(8,"span",2),d(9,"chevron_left"),We()(),Ae(10,"button",6),so("click",function(){return r.goToToday()}),d(11," Oggi "),We(),Ae(12,"h3",7),d(13),We(),Ae(14,"button",8),so("click",function(){return r.nextMonth()}),Ae(15,"span",2),d(16,"chevron_right"),We()()()(),Ae(17,"div",9),ne(18,f3,4,0,"div",10),Ae(19,"div",11)(20,"div",12),Dt(21,p3,2,1,"div",13,_i),We(),Ae(23,"div",14),Dt(24,_3,3,0,"div",15,_i),We()(),Ae(26,"div",16)(27,"div",17),ws(28,"div",18),Ae(29,"span"),d(30,"Timbratura completata"),We()(),Ae(31,"div",17),ws(32,"div",19),Ae(33,"span"),d(34,"Timbratura in corso"),We()()()()()),e&2&&(h(13),M(" ",r.getMonthYearTitle()," "),h(5),re(r.isLoading()?18:-1),h(3),xt(r.daysOfWeek),h(3),xt(r.weeks()))},styles:[".day-events[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.calendar-event[_ngcontent-%COMP%]{padding:2px 6px;border-radius:4px;font-size:.7rem;color:#fff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;transition:all .2s ease}.calendar-event[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 2px 4px var(--shadow)}@media (max-width: 768px){.calendar-controls[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.calendar-month-title[_ngcontent-%COMP%]{min-width:150px;order:-1;width:100%;text-align:center}.calendar-week[_ngcontent-%COMP%]{min-height:80px}.calendar-day[_ngcontent-%COMP%]{padding:4px}.day-number[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:2px}.calendar-event[_ngcontent-%COMP%]{font-size:.6rem;padding:1px 3px}}@media (max-width: 480px){.calendar-day-header[_ngcontent-%COMP%]{padding:var(--gutter-sm);font-size:.7rem}.days-of-week[_ngcontent-%COMP%]{font-size:.7rem}}.timbratura-event[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;padding:4px 6px;border-radius:6px;font-size:.7rem;color:#fff;cursor:pointer;transition:all .2s ease;border-left:3px solid color-mix(in srgb,currentColor 30%,transparent)}.timbratura-event[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px var(--shadow)}.event-time[_ngcontent-%COMP%]{font-weight:600;font-size:.65rem}.event-user[_ngcontent-%COMP%]{font-size:.6rem;opacity:.9;font-style:italic}.calendar-legend[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-lg);margin-top:var(--gutter-lg);padding-top:var(--gutter-md);border-top:1px solid var(--smoke-color-1);flex-wrap:wrap}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);font-size:.8rem;color:var(--text-color)}.legend-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:4px;border:1px solid var(--smoke-color-1)}@media (max-width: 768px){.timbratura-event[_ngcontent-%COMP%]{padding:2px 4px;font-size:.6rem}.event-time[_ngcontent-%COMP%]{font-size:.55rem}.event-user[_ngcontent-%COMP%]{font-size:.5rem}.calendar-legend[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm)}}.calendar-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-md);margin-left:auto}.calendar-month-title[_ngcontent-%COMP%]{margin:0;font-size:var(--fs-md);font-weight:600;color:var(--text-color);min-width:200px;text-align:center}.calendar-container[_ngcontent-%COMP%]{background:var(--background);border-radius:16px;overflow:hidden}.calendar-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);background:var(--smoke-color-2);border-bottom:1px solid var(--smoke-color-1)}.calendar-day-header[_ngcontent-%COMP%]{padding:var(--gutter-md);text-align:center;font-weight:600;color:var(--text-color);font-size:var(--fs-sm);border-right:1px solid var(--smoke-color-1)}.calendar-day-header[_ngcontent-%COMP%]:last-child{border-right:none}.calendar-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column}.calendar-week[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);min-height:120px}.calendar-day[_ngcontent-%COMP%]{padding:var(--gutter-sm);border-right:1px solid var(--smoke-color-1);border-bottom:1px solid var(--smoke-color-1);cursor:pointer;transition:all .2s ease;background:var(--background);position:relative}.calendar-day[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--primary) 5%,transparent);transform:translateY(-1px)}.calendar-day.other-month[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--background) 60%,transparent);color:color-mix(in srgb,var(--text-color) 40%,transparent)}.calendar-day.other-month[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--primary) 3%,transparent)}.calendar-day.today[_ngcontent-%COMP%]{background:var(--gradiente-light);border:2px solid var(--primary)}.calendar-day.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{font-weight:800;color:var(--primary)}.day-number[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:600;margin-bottom:var(--gutter-sm);text-align:center;color:var(--text-color)}.other-month[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:color-mix(in srgb,var(--text-color) 40%,transparent);font-weight:400}.day-events[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;max-height:80px;overflow-y:auto}.day-events[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.day-events[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--smoke-color-1);border-radius:2px}@media (max-width: 768px){.calendar-controls[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.calendar-month-title[_ngcontent-%COMP%]{min-width:150px;order:-1;width:100%;text-align:center}.calendar-week[_ngcontent-%COMP%]{min-height:100px}.calendar-day[_ngcontent-%COMP%]{padding:4px}.day-number[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:2px}}@media (max-width: 480px){.calendar-day-header[_ngcontent-%COMP%]{padding:var(--gutter-sm);font-size:.7rem}}"]})};var bx=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:yp},{path:"register",component:_p},{path:"forgot-password",component:bp},{path:"home",component:wp},{path:"timbrature",component:Ep},{path:"crea-timbratura",component:Cp},{path:"profilo-aziendale",component:Sp},{path:"calendario",component:jp},{path:"dipendenti",component:Dp},{path:"dipendenti/:id",component:xp},{path:"inviti-dipendenti",component:ca},{path:"report",component:Ap},{path:"buste-paga",component:Rp},{path:"kpi",component:Tp},{path:"impostazioni",component:Mp},{path:"loading-spinner",component:la},{path:"**",redirectTo:"/home"}];var Ey={providers:[pm(),L0(),n0({eventCoalescing:!0}),fv(bx)]};var Vp=class n{THEME_KEY="app-theme";darkThemeClass="dark-theme";currentTheme=et("light");constructor(){this.loadTheme()}loadTheme(){let t=localStorage.getItem(this.THEME_KEY),e=window.matchMedia("(prefers-color-scheme: dark)").matches,r=t||(e?"dark":"light");this.setTheme(r)}toggleTheme(){let t=this.currentTheme()==="light"?"dark":"light";this.setTheme(t)}setTheme(t){this.currentTheme.set(t),localStorage.setItem(this.THEME_KEY,t),t==="dark"?(document.documentElement.setAttribute("data-theme","dark"),document.documentElement.classList.add(this.darkThemeClass)):(document.documentElement.removeAttribute("data-theme"),document.documentElement.classList.remove(this.darkThemeClass))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var b3=["sidebar"];function w3(n,t){if(n&1){let e=J();u(0,"button",36),T("click",function(){N(e);let i=b(2);return P(i.toggleSidebar())}),u(1,"span",10),d(2,"chevron_left"),c()()}}function E3(n,t){n&1&&(u(0,"div",37),d(1,"Dashboard"),c())}function C3(n,t){n&1&&(u(0,"div",37),d(1,"Gestione"),c())}function S3(n,t){if(n&1){let e=J();u(0,"div",13),x(1,C3,2,0,"div",14),u(2,"a",38),T("click",function(){N(e);let i=b(2);return P(i.onNavItemClicked())}),u(3,"span",10),d(4,"people"),c(),u(5,"span",16),d(6,"Dipendenti"),c()(),u(7,"a",39),T("click",function(){N(e);let i=b(2);return P(i.onNavItemClicked())}),u(8,"span",10),d(9,"business"),c(),u(10,"span",16),d(11,"Azienda"),c()()()}if(n&2){let e=b(2);h(),y("ngIf",!e.isSidebarCollapsed)}}function D3(n,t){n&1&&(u(0,"div",37),d(1,"Timbrature"),c())}function x3(n,t){n&1&&(u(0,"div",37),d(1,"Report"),c())}function I3(n,t){if(n&1){let e=J();u(0,"div",13),x(1,x3,2,0,"div",14),u(2,"a",40),T("click",function(){N(e);let i=b(2);return P(i.onNavItemClicked())}),u(3,"span",10),d(4,"assessment"),c(),u(5,"span",16),d(6,"Report"),c()()()}if(n&2){let e=b(2);h(),y("ngIf",!e.isSidebarCollapsed)}}function T3(n,t){n&1&&(u(0,"div",37),d(1,"Analisi"),c())}function M3(n,t){if(n&1&&(u(0,"div",41)(1,"div",42)(2,"div",43),d(3),c(),u(4,"div",44),d(5),c()()()),n&2){let e=b(2);h(3),be("",e.currentUser==null?null:e.currentUser.first_name," ",e.currentUser==null?null:e.currentUser.last_name),h(2),R(e.currentUser==null?null:e.currentUser.role)}}function A3(n,t){if(n&1){let e=J();Hr(0),u(1,"div",3)(2,"aside",4,1)(4,"div",5)(5,"div",6),O(6,"img",7),c(),u(7,"div",8)(8,"button",9),T("click",function(){N(e);let i=b();return P(i.toggleTheme())}),u(9,"span",10),d(10),c()(),x(11,w3,3,0,"button",11),c()(),u(12,"nav",12)(13,"div",13),x(14,E3,2,0,"div",14),u(15,"a",15),T("click",function(){N(e);let i=b();return P(i.onNavItemClicked())}),u(16,"span",10),d(17,"dashboard"),c(),u(18,"span",16),d(19,"Dashboard"),c()()(),x(20,S3,12,1,"div",17),u(21,"div",13),x(22,D3,2,0,"div",14),u(23,"a",18),T("click",function(){N(e);let i=b();return P(i.onNavItemClicked())}),u(24,"span",10),d(25,"schedule"),c(),u(26,"span",16),d(27,"Timbrature"),c()(),u(28,"a",19),T("click",function(){N(e);let i=b();return P(i.onNavItemClicked())}),u(29,"span",10),d(30,"add_circle"),c(),u(31,"span",16),d(32,"Nuova Timbratura"),c()(),u(33,"a",20),T("click",function(){N(e);let i=b();return P(i.onNavItemClicked())}),u(34,"span",10),d(35,"calendar_today"),c(),u(36,"span",16),d(37,"Calendario"),c()()(),x(38,I3,7,1,"div",17),u(39,"div",13),x(40,T3,2,0,"div",14),u(41,"a",21),T("click",function(){N(e);let i=b();return P(i.onNavItemClicked())}),u(42,"span",10),d(43,"insights"),c(),u(44,"span",16),d(45,"KPI"),c()()()(),u(46,"div",22)(47,"div",23)(48,"div",24),d(49),c(),x(50,M3,6,3,"div",25),u(51,"div",26)(52,"a",27),T("click",function(){N(e);let i=b();return P(i.onNavItemClicked())}),u(53,"span",10),d(54,"settings"),c()(),u(55,"button",28),T("click",function(){N(e);let i=b();return P(i.logout())}),u(56,"span",10),d(57,"logout"),c()()()()()(),u(58,"main",29)(59,"header",30)(60,"button",31),T("click",function(){N(e);let i=b();return P(i.toggleSidebar())}),u(61,"span",10),d(62,"menu"),c()(),u(63,"div",8)(64,"div",32),d(65),z(66,"date"),c(),u(67,"div",33),d(68),z(69,"date"),c()()(),u(70,"div",34),O(71,"router-outlet"),c()(),u(72,"div",35),T("click",function(){N(e);let i=b();return P(i.closeSidebar())}),c()(),Gr()}if(n&2){let e=b();h(),xe("sidebar-collapsed",e.isSidebarCollapsed),h(),xe("hidden",e.isSidebarCollapsed)("collapsed",e.isSidebarCollapsed&&!e.isMobileSidebarOpen),h(6),y("title",e.currentTheme()==="light"?"Attiva tema scuro":"Attiva tema chiaro"),h(2),M(" ",e.currentTheme()==="light"?"dark_mode":"light_mode"," "),h(),y("ngIf",!e.isSidebarCollapsed),h(3),y("ngIf",!e.isSidebarCollapsed),h(6),y("ngIf",e.hasRole("admin")||e.hasRole("manager")),h(2),y("ngIf",!e.isSidebarCollapsed),h(16),y("ngIf",e.hasRole("admin")||e.hasRole("manager")),h(2),y("ngIf",!e.isSidebarCollapsed),h(9),be(" ",e.currentUser==null||e.currentUser.first_name==null?null:e.currentUser.first_name.charAt(0),"",e.currentUser==null||e.currentUser.last_name==null?null:e.currentUser.last_name.charAt(0)," "),h(),y("ngIf",!e.isSidebarCollapsed),h(2),y("title","Impostazioni"),h(3),y("title","Logout"),h(10),R(W(66,23,e.currentTime,"HH:mm")),h(3),R(W(69,26,e.currentTime,"EEEE, d MMMM yyyy")),h(4),xe("active",e.isMobileSidebarOpen)}}function O3(n,t){n&1&&(u(0,"div",45),O(1,"router-outlet"),c())}var Up=class n{constructor(t,e){this.authService=t;this.router=e}sidebarRef;isSidebarCollapsed=!1;isMobileSidebarOpen=!1;currentTime=new Date;currentUser=null;isAuthRoute=!1;themeService=I(Vp);currentTheme=this.themeService.currentTheme;timeInterval;userSub;routeSub;authRoutes=["/login","/register","/forgot-password"];ngOnInit(){this.timeInterval=setInterval(()=>{this.currentTime=new Date},1e3),this.userSub=this.authService.currentUser$.subscribe(e=>{this.currentUser=e});let t=this.router.url.split("?")[0];this.isAuthRoute=this.authRoutes.includes(t),this.routeSub=this.router.events.pipe(lt(e=>e instanceof Kt)).subscribe(e=>{let r=e.urlAfterRedirects.split("?")[0];this.isAuthRoute=this.authRoutes.includes(r),this.isAuthRoute&&(this.isSidebarCollapsed=!0,this.isMobileSidebarOpen=!1)}),this.checkScreenSize()}onResize(){this.checkScreenSize()}checkScreenSize(){window.innerWidth<768?(this.isSidebarCollapsed=!0,this.isMobileSidebarOpen=!1):this.isMobileSidebarOpen=!1}toggleTheme(){this.themeService.toggleTheme()}toggleSidebar(){window.innerWidth<768?(this.isMobileSidebarOpen=!this.isMobileSidebarOpen,this.isSidebarCollapsed=!this.isMobileSidebarOpen):this.isSidebarCollapsed=!this.isSidebarCollapsed}closeSidebar(){window.innerWidth<768?(this.isMobileSidebarOpen=!1,this.isSidebarCollapsed=!0):this.isSidebarCollapsed=!0}onNavItemClicked(){setTimeout(()=>this.closeSidebar(),50)}handleDocumentClick(t){let e=t.target;e&&(e.closest(".sidebar")||e.closest(".sidebar-toggle")||e.closest(".sidebar-hamburger")||(this.isMobileSidebarOpen||!this.isSidebarCollapsed&&window.innerWidth>=768)&&this.closeSidebar())}hasRole(t){return this.authService.hasRole(t)}logout(){this.authService.logout(),this.router.navigate(["/login"])}ngOnDestroy(){this.timeInterval&&clearInterval(this.timeInterval),this.userSub?.unsubscribe(),this.routeSub?.unsubscribe()}static \u0275fac=function(e){return new(e||n)(C(ge),C(Ie))};static \u0275cmp=me({type:n,selectors:[["app-root"]],viewQuery:function(e,r){if(e&1&&qg(b3,7),e&2){let i;tl(i=nl())&&(r.sidebarRef=i.first)}},hostBindings:function(e,r){e&1&&T("resize",function(){return r.onResize()},mg)("click",function(o){return r.handleDocumentClick(o)},gg)},decls:3,vars:2,consts:[["authLayout",""],["sidebar",""],[4,"ngIf","ngIfElse"],[1,"app-container"],[1,"sidebar"],[1,"sidebar-header"],[1,"logo-container"],["src","/assets/logo.png","alt","Logo",1,"logo"],[1,"header-actions"],[1,"theme-toggle","icon-button",3,"click","title"],[1,"material-icons"],["class","sidebar-toggle icon-button",3,"click",4,"ngIf"],[1,"sidebar-nav"],[1,"nav-section"],["class","nav-label",4,"ngIf"],["routerLink","/home","routerLinkActive","active",1,"nav-item",3,"click"],[1,"nav-text"],["class","nav-section",4,"ngIf"],["routerLink","/timbrature","routerLinkActive","active",1,"nav-item",3,"click"],["routerLink","/crea-timbratura","routerLinkActive","active",1,"nav-item",3,"click"],["routerLink","/calendario","routerLinkActive","active",1,"nav-item",3,"click"],["routerLink","/kpi","routerLinkActive","active",1,"nav-item",3,"click"],[1,"sidebar-footer"],[1,"user-section"],[1,"user-avatar"],["class","user-info",4,"ngIf"],[1,"user-actions"],["routerLink","/impostazioni","routerLinkActive","active",1,"nav-item","compact",3,"click","title"],[1,"nav-item","compact","logout-btn",3,"click","title"],[1,"main-content"],[1,"top-header"],[1,"sidebar-hamburger",3,"click"],[1,"current-time"],[1,"current-date"],[1,"page-content"],[1,"mobile-overlay",3,"click"],[1,"sidebar-toggle","icon-button",3,"click"],[1,"nav-label"],["routerLink","/dipendenti","routerLinkActive","active",1,"nav-item",3,"click"],["routerLink","/profilo-aziendale","routerLinkActive","active",1,"nav-item",3,"click"],["routerLink","/report","routerLinkActive","active",1,"nav-item",3,"click"],[1,"user-info"],[1,"user-details"],[1,"user-name"],[1,"user-role","chip"],[1,"auth-layout"]],template:function(e,r){if(e&1&&x(0,A3,73,29,"ng-container",2)(1,O3,2,0,"ng-template",null,0,il),e&2){let i=ao(2);y("ngIf",!r.isAuthRoute)("ngIfElse",i)}},dependencies:[_e,Ne,Fl,Tt,Pt,dv,ut],styles:[".app-container[_ngcontent-%COMP%]{display:block;min-height:100vh;background:var(--background)}.app-container.sidebar-collapsed[_ngcontent-%COMP%]{grid-template-columns:0px 1fr}.sidebar[_ngcontent-%COMP%]{background:var(--sidebar-background);border-right:1px solid var(--smoke-color-1);display:flex;flex-direction:column;width:var(--grandezzasidebar);transition:all .4s cubic-bezier(.25,.8,.25,1);box-shadow:4px 0 20px var(--shadow);overflow:hidden;position:fixed;top:0;left:0;height:100vh;overflow-y:auto;z-index:1000;max-width:100vw;box-sizing:border-box;transform:translateZ(0);will-change:transform,width}.sidebar.hidden[_ngcontent-%COMP%]{width:0;border-right:none;box-shadow:none;transition:all .4s cubic-bezier(.25,.8,.25,1)}.sidebar.collapsed[_ngcontent-%COMP%]:not(.hidden){width:60px}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:var(--gutter-sm);border-bottom:1px solid var(--smoke-color-1);min-height:70px;flex-shrink:0;position:relative;overflow:hidden}.sidebar-header[_ngcontent-%COMP%]   .theme-toggle[_ngcontent-%COMP%]{background:var(--smoke-color-1);border:1px solid var(--smoke-color-2);color:var(--text-color);cursor:pointer;padding:var(--gutter-sm);border-radius:50%;transition:all .3s cubic-bezier(.25,.8,.25,1);display:flex;align-items:center;justify-content:center;width:40px;height:40px;position:relative;overflow:hidden;box-shadow:0 2px 4px var(--shadow)}.logo[_ngcontent-%COMP%]{height:50px;width:auto;object-fit:contain;flex-shrink:0;transition:all .3s cubic-bezier(.25,.8,.25,1);filter:brightness(1)}.logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);flex:1;min-width:0;transition:all .3s cubic-bezier(.25,.8,.25,1)}.app-name[_ngcontent-%COMP%]{font-weight:700;font-size:var(--fs-md);color:var(--primary);white-space:nowrap;opacity:1;padding:var(--gutter-sm);transition:opacity .3s ease}.sidebar.collapsed[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{opacity:0;width:0}.sidebar-toggle[_ngcontent-%COMP%]{background:var(--smoke-color-1);border:1px solid var(--smoke-color-2);color:var(--text-color);cursor:pointer;padding:var(--gutter-sm);border-radius:50%;transition:all .3s cubic-bezier(.25,.8,.25,1);display:flex;align-items:center;justify-content:center;width:40px;height:40px;box-shadow:0 2px 4px var(--shadow)}.sidebar-toggle[_ngcontent-%COMP%]:hover{background:var(--text-color);color:var(--background);border-color:var(--accent);transform:translateY(-1px);box-shadow:0 4px 12px color-mix(in srgb,var(--accent) 30%,transparent)}.sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:var(--gutter-lg) 0;overflow-y:auto}.nav-section[_ngcontent-%COMP%]{margin-bottom:var(--gutter-lg)}.nav-label[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:600;color:var(--text-color);opacity:.6;padding:0 var(--gutter-lg) var(--gutter-sm) var(--gutter-lg);text-transform:uppercase;letter-spacing:.5px;transition:opacity .3s ease}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{opacity:0;height:0;padding:0;margin:0}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-sm) var(--gutter-lg);color:var(--text-color);text-decoration:none;transition:all .2s ease;border-left:3px solid transparent;margin:2px var(--gutter-sm);border-radius:8px;white-space:nowrap;overflow:hidden}.nav-item[_ngcontent-%COMP%]:hover{background:var(--smoke-color-1);border-left-color:var(--primary)}.nav-item.active[_ngcontent-%COMP%]{background:var(--smoke-color-2);border-left-color:var(--primary);color:var(--primary);font-weight:600}.nav-item.compact[_ngcontent-%COMP%]{padding:var(--gutter-sm);justify-content:center;margin:0}.nav-text[_ngcontent-%COMP%]{transition:opacity .3s ease;opacity:1}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{opacity:0;width:0}.nav-text[_ngcontent-%COMP%], .app-name[_ngcontent-%COMP%], .user-info[_ngcontent-%COMP%], .nav-label[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.25,.8,.25,1)}.nav-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px;min-width:24px;text-align:center}.sidebar-footer[_ngcontent-%COMP%]{border-top:1px solid var(--smoke-color-1);padding:var(--gutter-sm);flex-shrink:0}.user-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);transition:all .3s ease}.user-avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:var(--gradiente);display:flex;align-items:center;justify-content:center;color:var(--background);font-weight:600;font-size:var(--fs-sm);flex-shrink:0}.user-info[_ngcontent-%COMP%]{flex:1;overflow:hidden;transition:opacity .3s ease;opacity:1}.sidebar.collapsed[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{opacity:0;width:0;margin:0}.user-details[_ngcontent-%COMP%]{min-width:0}.user-name[_ngcontent-%COMP%]{font-weight:600;font-size:var(--fs-sm);margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-role.chip[_ngcontent-%COMP%]{font-size:.7rem;padding:2px 8px}.user-actions[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm);margin-left:auto}.logout-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;text-align:left;font-family:inherit}.main-content[_ngcontent-%COMP%]{background:var(--background);display:flex;flex-direction:column;width:calc(100% - var(--grandezzasidebar));min-height:100vh;margin-left:var(--grandezzasidebar);transition:margin-left .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);box-sizing:border-box;max-width:100%;transform:translateZ(0);will-change:margin-left,width}.top-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:var(--gutter-md);background:var(--background);border-bottom:1px solid var(--smoke-color-1);position:sticky;top:0;z-index:100;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.sidebar-hamburger[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-color);cursor:pointer;padding:var(--gutter-sm);border-radius:8px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.sidebar-hamburger[_ngcontent-%COMP%]:hover{background:var(--smoke-color-1)}.sidebar-hamburger[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-md)}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);flex-shrink:0;transition:all .3s cubic-bezier(.25,.8,.25,1)}.current-time[_ngcontent-%COMP%]{font-size:var(--fs-md);font-weight:700;color:var(--primary)}.current-date[_ngcontent-%COMP%]{font-size:var(--fs-sm);color:var(--text-color);opacity:.7}.theme-toggle[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-color);cursor:pointer;padding:var(--gutter-sm);border-radius:8px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.theme-toggle[_ngcontent-%COMP%]:hover{background:var(--smoke-color-1);color:var(--primary)}.page-content[_ngcontent-%COMP%]{flex:1;padding:0;overflow-y:auto}.mobile-overlay[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:999;opacity:0;visibility:hidden;transition:all .3s cubic-bezier(.25,.8,.25,1);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.mobile-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}@media (max-width: 768px){.app-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:0;height:100vh;width:100%;transform:translate(-100%);z-index:1000;transition:transform .3s cubic-bezier(.25,.8,.25,1)}.sidebar[_ngcontent-%COMP%]:not(.hidden){transform:translate(0)}.mobile-overlay[_ngcontent-%COMP%]{display:block;background:#0006;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.header-actions[_ngcontent-%COMP%]{gap:var(--gutter-sm);align-items:flex-end}.current-time[_ngcontent-%COMP%]{font-size:var(--fs-sm)}.current-date[_ngcontent-%COMP%]{font-size:.8rem}}@media (max-width: 480px){.page-content[_ngcontent-%COMP%]{padding:var(--gutter-md)}.sidebar-footer[_ngcontent-%COMP%]{padding:var(--gutter-sm)}.user-section[_ngcontent-%COMP%], .user-actions[_ngcontent-%COMP%]{gap:var(--gutter-sm)}}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb);border-radius:var(--scrollbar-radius)}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-thumb-hover)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(-100%)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.app-container.sidebar-collapsed[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{width:100%;margin-left:0;max-width:100%;box-sizing:border-box}"]})};P0(Up,Z(A({},Ey),{providers:[...Ey.providers??[],{provide:gn,useClass:fl}]})).catch(n=>console.error(n));
