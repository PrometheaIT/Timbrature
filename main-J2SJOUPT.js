import{a as A,b as Q,c as sI,d as Ti,e as aI,f as lI,g as Mi,h as y,j as cy,k as uy,n as cI,o as dy}from"./chunk-7F6XFQYV.js";var Ri={};aI(Ri,{__addDisposableResource:()=>Ky,__assign:()=>xc,__asyncDelegator:()=>$y,__asyncGenerator:()=>Ac,__asyncValues:()=>Oc,__await:()=>er,__awaiter:()=>j,__classPrivateFieldGet:()=>Wy,__classPrivateFieldIn:()=>Yy,__classPrivateFieldSet:()=>qy,__createBinding:()=>Mc,__decorate:()=>Ay,__disposeResources:()=>Zy,__esDecorate:()=>Ry,__exportStar:()=>jy,__extends:()=>My,__generator:()=>Ly,__importDefault:()=>Gy,__importStar:()=>Hy,__makeTemplateObject:()=>zy,__metadata:()=>Fy,__param:()=>Oy,__propKey:()=>ky,__read:()=>Zh,__rest:()=>xr,__rewriteRelativeImportExtension:()=>Qy,__runInitializers:()=>Ny,__setFunctionName:()=>Py,__spread:()=>Vy,__spreadArray:()=>By,__spreadArrays:()=>Uy,__values:()=>Tc,default:()=>SI});function My(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Yh(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function xr(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e}function Ay(n,t,e,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}function Oy(n,t){return function(e,r){t(e,r,n)}}function Ry(n,t,e,r,i,o){function s(D){if(D!==void 0&&typeof D!="function")throw new TypeError("Function expected");return D}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",f=!t&&n?r.static?n:n.prototype:null,h=t||(f?Object.getOwnPropertyDescriptor(f,r.name):{}),m,v=!1,g=e.length-1;g>=0;g--){var E={};for(var S in r)E[S]=S==="access"?{}:r[S];for(var S in r.access)E.access[S]=r.access[S];E.addInitializer=function(D){if(v)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(D||null))};var w=(0,e[g])(a==="accessor"?{get:h.get,set:h.set}:h[l],E);if(a==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(m=s(w.get))&&(h.get=m),(m=s(w.set))&&(h.set=m),(m=s(w.init))&&i.unshift(m)}else(m=s(w))&&(a==="field"?i.unshift(m):h[l]=m)}f&&Object.defineProperty(f,r.name,h),v=!0}function Ny(n,t,e){for(var r=arguments.length>2,i=0;i<t.length;i++)e=r?t[i].call(n,e):t[i].call(n);return r?e:void 0}function ky(n){return typeof n=="symbol"?n:"".concat(n)}function Py(n,t,e){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:e?"".concat(e," ",t):t})}function Fy(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function j(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{f(r.next(h))}catch(m){s(m)}}function l(h){try{f(r.throw(h))}catch(m){s(m)}}function f(h){h.done?o(h.value):i(h.value).then(a,l)}f((r=r.apply(n,t||[])).next())})}function Ly(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(h){return l([f,h])}}function l(f){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(e=0)),e;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,i=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){e.label=f[1];break}if(f[0]===6&&e.label<o[1]){e.label=o[1],o=f;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(f);break}o[2]&&e.ops.pop(),e.trys.pop();continue}f=t.call(n,e)}catch(h){f=[6,h],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function jy(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&Mc(t,n,e)}function Tc(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zh(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return o}function Vy(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(Zh(arguments[t]));return n}function Uy(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var r=Array(n),i=0,t=0;t<e;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function By(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))}function er(n){return this instanceof er?(this.v=n,this):new er(n)}function Ac(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(E){return Promise.resolve(E).then(g,m)}}function a(g,E){r[g]&&(i[g]=function(S){return new Promise(function(w,D){o.push([g,S,w,D])>1||l(g,S)})},E&&(i[g]=E(i[g])))}function l(g,E){try{f(r[g](E))}catch(S){v(o[0][3],S)}}function f(g){g.value instanceof er?Promise.resolve(g.value.v).then(h,m):v(o[0][2],g)}function h(g){l("next",g)}function m(g){l("throw",g)}function v(g,E){g(E),o.shift(),o.length&&l(o[0][0],o[0][1])}}function $y(n){var t,e;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=n[i]?function(s){return(e=!e)?{value:er(n[i](s)),done:!1}:o?o(s):s}:o}}function Oc(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof Tc=="function"?Tc(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(f){o({value:f,done:a})},s)}}function zy(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}function Hy(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e=Kh(n),r=0;r<e.length;r++)e[r]!=="default"&&Mc(t,n,e[r]);return wI(t,n),t}function Gy(n){return n&&n.__esModule?n:{default:n}}function Wy(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)}function qy(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e}function Yy(n,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?t===n:n.has(t)}function Ky(n,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],e&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:t,dispose:r,async:e})}else e&&n.stack.push({async:!0});return t}function Zy(n){function t(o){n.error=n.hasError?new CI(o,n.error,"An error was suppressed during disposal."):o,n.hasError=!0}var e,r=0;function i(){for(;e=n.stack.pop();)try{if(!e.async&&r===1)return r=0,n.stack.push(e),Promise.resolve().then(i);if(e.dispose){var o=e.dispose.call(e.value);if(e.async)return r|=2,Promise.resolve(o).then(i,function(s){return t(s),i()})}else r|=1}catch(s){t(s)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function Qy(n,t){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,i,o,s){return r?t?".jsx":".js":i&&(!o||!s)?e:i+o+"."+s.toLowerCase()+"js"}):n}var Yh,xc,Mc,wI,Kh,CI,SI,ke=sI(()=>{"use strict";Yh=function(n,t){return Yh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},Yh(n,t)};xc=function(){return xc=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},xc.apply(this,arguments)};Mc=Object.create?function(n,t,e,r){r===void 0&&(r=e);var i=Object.getOwnPropertyDescriptor(t,e);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,r,i)}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]};wI=Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t},Kh=function(n){return Kh=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},Kh(n)};CI=typeof SuppressedError=="function"?SuppressedError:function(n,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=n,r.suppressed=t,r};SI={__extends:My,__assign:xc,__rest:xr,__decorate:Ay,__param:Oy,__esDecorate:Ry,__runInitializers:Ny,__propKey:ky,__setFunctionName:Py,__metadata:Fy,__awaiter:j,__generator:Ly,__createBinding:Mc,__exportStar:jy,__values:Tc,__read:Zh,__spread:Vy,__spreadArrays:Uy,__spreadArray:By,__await:er,__asyncGenerator:Ac,__asyncDelegator:$y,__asyncValues:Oc,__makeTemplateObject:zy,__importStar:Hy,__importDefault:Gy,__classPrivateFieldGet:Wy,__classPrivateFieldSet:qy,__classPrivateFieldIn:Yy,__addDisposableResource:Ky,__disposeResources:Zy,__rewriteRelativeImportExtension:Qy}});var y0=Ti(v0=>{"use strict";Object.defineProperty(v0,"__esModule",{value:!0});var g0=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};v0.default=g0});var E0=Ti(b0=>{"use strict";Object.defineProperty(b0,"__esModule",{value:!0});var uD=(ke(),Mi(Ri)),yP=uD.__importDefault((dy(),Mi(cI))),_P=uD.__importDefault(y0()),_0=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=yP.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(o=>y(this,null,function*(){var s,a,l,f;let h=null,m=null,v=null,g=o.status,E=o.statusText;if(o.ok){if(this.method!=="HEAD"){let G=yield o.text();G===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((s=this.headers.get("Accept"))===null||s===void 0)&&s.includes("application/vnd.pgrst.plan+text"))?m=G:m=JSON.parse(G))}let w=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),D=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&D&&D.length>1&&(v=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(h={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,v=null,g=406,E="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{let w=yield o.text();try{h=JSON.parse(w),Array.isArray(h)&&o.status===404&&(m=[],h=null,g=200,E="OK")}catch{o.status===404&&w===""?(g=204,E="No Content"):h={message:w}}if(h&&this.isMaybeSingle&&(!((f=h?.details)===null||f===void 0)&&f.includes("0 rows"))&&(h=null,g=200,E="OK"),h&&this.shouldThrowOnError)throw new _P.default(h)}return{error:h,data:m,count:v,status:g,statusText:E}}));return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,l;return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:`${(a=o?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}};b0.default=_0});var S0=Ti(C0=>{"use strict";Object.defineProperty(C0,"__esModule",{value:!0});var bP=(ke(),Mi(Ri)),EP=bP.__importDefault(E0()),w0=class extends EP.default{select(t){let e=!1,r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;let l=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),f=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${f}"; options=${l};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};C0.default=w0});var Tf=Ti(I0=>{"use strict";Object.defineProperty(I0,"__esModule",{value:!0});var wP=(ke(),Mi(Ri)),CP=wP.__importDefault(S0()),SP=new RegExp("[,()]"),D0=class extends CP.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(i=>typeof i=="string"&&SP.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};I0.default=D0});var M0=Ti(T0=>{"use strict";Object.defineProperty(T0,"__esModule",{value:!0});var DP=(ke(),Mi(Ri)),Wl=DP.__importDefault(Tf()),x0=class{constructor(t,{headers:e={},schema:r,fetch:i}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=i}select(t,e){let{head:r=!1,count:i}=e??{},o=r?"HEAD":"GET",s=!1,a=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",a),i&&this.headers.append("Prefer",`count=${i}`),new Wl.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var i;let o="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let s=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){let a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Wl.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){var s;let a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let l=t.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(l.length>0){let f=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new Wl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var r;let i="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Wl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;let r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Wl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}};T0.default=x0});var fD=Ti(O0=>{"use strict";Object.defineProperty(O0,"__esModule",{value:!0});var dD=(ke(),Mi(Ri)),IP=dD.__importDefault(M0()),xP=dD.__importDefault(Tf()),A0=class n{constructor(t,{headers:e={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(e),this.schemaName=r,this.fetch=i}from(t){let e=new URL(`${this.url}/${t}`);return new IP.default(e,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,l=new URL(`${this.url}/rpc/${t}`),f;r||i?(a=r?"HEAD":"GET",Object.entries(e).filter(([m,v])=>v!==void 0).map(([m,v])=>[m,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([m,v])=>{l.searchParams.append(m,v)})):(a="POST",f=e);let h=new Headers(this.headers);return o&&h.set("Prefer",`count=${o}`),new xP.default({method:a,url:l,headers:h,schema:this.schemaName,body:f,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};O0.default=A0});var _D=Ti(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.PostgrestError=Yt.PostgrestBuilder=Yt.PostgrestTransformBuilder=Yt.PostgrestFilterBuilder=Yt.PostgrestQueryBuilder=Yt.PostgrestClient=void 0;var Vs=(ke(),Mi(Ri)),hD=Vs.__importDefault(fD());Yt.PostgrestClient=hD.default;var pD=Vs.__importDefault(M0());Yt.PostgrestQueryBuilder=pD.default;var mD=Vs.__importDefault(Tf());Yt.PostgrestFilterBuilder=mD.default;var gD=Vs.__importDefault(S0());Yt.PostgrestTransformBuilder=gD.default;var vD=Vs.__importDefault(E0());Yt.PostgrestBuilder=vD.default;var yD=Vs.__importDefault(y0());Yt.PostgrestError=yD.default;Yt.default={PostgrestClient:hD.default,PostgrestQueryBuilder:pD.default,PostgrestFilterBuilder:mD.default,PostgrestTransformBuilder:gD.default,PostgrestBuilder:vD.default,PostgrestError:yD.default}});var Oh;function uc(){return Oh}function Xn(n){let t=Oh;return Oh=n,t}var fy=Symbol("NotFound");function Ao(n){return n===fy||n?.name==="\u0275NotFound"}var Tt=null,dc=!1,Rh=1,uI=null,Mt=Symbol("SIGNAL");function te(n){let t=Tt;return Tt=n,t}function mc(){return Tt}var Oo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ro(n){if(dc)throw new Error("");if(Tt===null)return;Tt.consumerOnSignalRead(n);let t=Tt.producersTail;if(t!==void 0&&t.producer===n)return;let e,r=Tt.recomputing;if(r&&(e=t!==void 0?t.nextProducer:Tt.producers,e!==void 0&&e.producer===n)){Tt.producersTail=e,e.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Tt&&(!r||fI(i,Tt)))return;let o=ko(Tt),s={producer:n,consumer:Tt,nextProducer:e,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Tt.producersTail=s,t!==void 0?t.nextProducer=s:Tt.producers=s,o&&gy(n,s)}function hy(){Rh++}function gc(n){if(!(ko(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Rh)){if(!n.producerMustRecompute(n)&&!la(n)){pc(n);return}n.producerRecomputeValue(n),pc(n)}}function Nh(n){if(n.consumers===void 0)return;let t=dc;dc=!0;try{for(let e=n.consumers;e!==void 0;e=e.nextConsumer){let r=e.consumer;r.dirty||dI(r)}}finally{dc=t}}function kh(){return Tt?.consumerAllowSignalWrites!==!1}function dI(n){n.dirty=!0,Nh(n),n.consumerMarkedDirty?.(n)}function pc(n){n.dirty=!1,n.lastCleanEpoch=Rh}function No(n){return n&&py(n),te(n)}function py(n){n.producersTail=void 0,n.recomputing=!0}function aa(n,t){te(t),n&&my(n)}function my(n){n.recomputing=!1;let t=n.producersTail,e=t!==void 0?t.nextProducer:n.producers;if(e!==void 0){if(ko(n))do e=Ph(e);while(e!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function la(n){for(let t=n.producers;t!==void 0;t=t.nextProducer){let e=t.producer,r=t.lastReadVersion;if(r!==e.version||(gc(e),r!==e.version))return!0}return!1}function ca(n){if(ko(n)){let t=n.producers;for(;t!==void 0;)t=Ph(t)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function gy(n,t){let e=n.consumersTail,r=ko(n);if(e!==void 0?(t.nextConsumer=e.nextConsumer,e.nextConsumer=t):(t.nextConsumer=void 0,n.consumers=t),t.prevConsumer=e,n.consumersTail=t,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)gy(i.producer,i)}function Ph(n){let t=n.producer,e=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!ko(t)){let o=t.producers;for(;o!==void 0;)o=Ph(o)}return e}function ko(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function vc(n){uI?.(n)}function fI(n,t){let e=t.producersTail;if(e!==void 0){let r=t.producers;do{if(r===n)return!0;if(r===e)break;r=r.nextProducer}while(r!==void 0)}return!1}function yc(n,t){return Object.is(n,t)}function _c(n,t){let e=Object.create(hI);e.computation=n,t!==void 0&&(e.equal=t);let r=()=>{if(gc(e),Ro(e),e.value===sa)throw e.error;return e.value};return r[Mt]=e,vc(e),r}var fc=Symbol("UNSET"),hc=Symbol("COMPUTING"),sa=Symbol("ERRORED"),hI=Q(A({},Oo),{value:fc,dirty:!0,error:null,equal:yc,kind:"computed",producerMustRecompute(n){return n.value===fc||n.value===hc},producerRecomputeValue(n){if(n.value===hc)throw new Error("");let t=n.value;n.value=hc;let e=No(n),r,i=!1;try{r=n.computation(),te(null),i=t!==fc&&t!==sa&&r!==sa&&n.equal(t,r)}catch(o){r=sa,n.error=o}finally{aa(n,e)}if(i){n.value=t;return}n.value=r,n.version++}});function pI(){throw new Error}var vy=pI;function yy(n){vy(n)}function Fh(n){vy=n}var mI=null;function Lh(n,t){let e=Object.create(bc);e.value=n,t!==void 0&&(e.equal=t);let r=()=>_y(e);return r[Mt]=e,vc(e),[r,s=>Po(e,s),s=>jh(e,s)]}function _y(n){return Ro(n),n.value}function Po(n,t){kh()||yy(n),n.equal(n.value,t)||(n.value=t,gI(n))}function jh(n,t){kh()||yy(n),Po(n,t(n.value))}var bc=Q(A({},Oo),{equal:yc,value:void 0,kind:"signal"});function gI(n){n.version++,hy(),Nh(n),mI?.(n)}function re(n){return typeof n=="function"}function Fo(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Ec=Fo(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function ua(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Je=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){t=o instanceof Ec?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{by(o)}catch(s){t=t??[],s instanceof Ec?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Ec(t)}}add(t){var e;if(t&&t!==this)if(this.closed)by(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&ua(e,t)}remove(t){let{_finalizers:e}=this;e&&ua(e,t),t instanceof n&&t._removeParent(this)}};Je.EMPTY=(()=>{let n=new Je;return n.closed=!0,n})();var Vh=Je.EMPTY;function wc(n){return n instanceof Je||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function by(n){re(n)?n():n.unsubscribe()}var Fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Lo={setTimeout(n,t,...e){let{delegate:r}=Lo;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=Lo;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Cc(n){Lo.setTimeout(()=>{let{onUnhandledError:t}=Fn;if(t)t(n);else throw n})}function da(){}var Ey=Uh("C",void 0,void 0);function wy(n){return Uh("E",void 0,n)}function Cy(n){return Uh("N",n,void 0)}function Uh(n,t,e){return{kind:n,value:t,error:e}}var Ai=null;function jo(n){if(Fn.useDeprecatedSynchronousErrorHandling){let t=!Ai;if(t&&(Ai={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=Ai;if(Ai=null,e)throw r}}else n()}function Sy(n){Fn.useDeprecatedSynchronousErrorHandling&&Ai&&(Ai.errorThrown=!0,Ai.error=n)}var Oi=class extends Je{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,wc(t)&&t.add(this)):this.destination=_I}static create(t,e,r){return new ei(t,e,r)}next(t){this.isStopped?$h(Cy(t),this):this._next(t)}error(t){this.isStopped?$h(wy(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?$h(Ey,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},vI=Function.prototype.bind;function Bh(n,t){return vI.call(n,t)}var zh=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){Sc(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){Sc(r)}else Sc(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Sc(e)}}},ei=class extends Oi{constructor(t,e,r){super();let i;if(re(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&Fn.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Bh(t.next,o),error:t.error&&Bh(t.error,o),complete:t.complete&&Bh(t.complete,o)}):i=t}this.destination=new zh(i)}};function Sc(n){Fn.useDeprecatedSynchronousErrorHandling?Sy(n):Cc(n)}function yI(n){throw n}function $h(n,t){let{onStoppedNotification:e}=Fn;e&&Lo.setTimeout(()=>e(n,t))}var _I={closed:!0,next:da,error:yI,complete:da};var Vo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ln(n){return n}function Hh(...n){return Gh(n)}function Gh(n){return n.length===0?ln:n.length===1?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}var de=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){let o=EI(e)?e:new ei(e,r,i);return jo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=Dy(r),new r((i,o)=>{let s=new ei({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[Vo](){return this}pipe(...e){return Gh(e)(this)}toPromise(e){return e=Dy(e),new e((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function Dy(n){var t;return(t=n??Fn.Promise)!==null&&t!==void 0?t:Promise}function bI(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function EI(n){return n&&n instanceof Oi||bI(n)&&wc(n)}function Wh(n){return re(n?.lift)}function ge(n){return t=>{if(Wh(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(n,t,e,r,i){return new qh(n,t,e,r,i)}var qh=class extends Oi{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Uo(){return ge((n,t)=>{let e=null;n._refCount++;let r=pe(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}var Bo=class extends de{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Wh(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Je;let e=this.getSubject();t.add(this.source.subscribe(pe(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Je.EMPTY)}return t}refCount(){return Uo()(this)}};var Iy=Fo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new Dc(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new Iy}next(e){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Vh:(this.currentObservers=null,o.push(e),new Je(()=>{this.currentObservers=null,ua(o,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){let e=new de;return e.source=this,e}}return n.create=(t,e)=>new Dc(t,e),n})(),Dc=class extends Ue{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:Vh}};var st=class extends Ue{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var At=new de(n=>n.complete());function xy(n){return n&&re(n.schedule)}function Ty(n){return n[n.length-1]}function Ic(n){return re(Ty(n))?n.pop():void 0}function ti(n){return xy(Ty(n))?n.pop():void 0}ke();var Rc=n=>n&&typeof n.length=="number"&&typeof n!="function";function Nc(n){return re(n?.then)}function kc(n){return re(n[Vo])}function Pc(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function Fc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function DI(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Lc=DI();function jc(n){return re(n?.[Lc])}ke();function Vc(n){return Ac(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:i}=yield er(e.read());if(i)return yield er(void 0);yield yield er(r)}}finally{e.releaseLock()}})}function Uc(n){return re(n?.getReader)}function Xe(n){if(n instanceof de)return n;if(n!=null){if(kc(n))return II(n);if(Rc(n))return xI(n);if(Nc(n))return TI(n);if(Pc(n))return Jy(n);if(jc(n))return MI(n);if(Uc(n))return AI(n)}throw Fc(n)}function II(n){return new de(t=>{let e=n[Vo]();if(re(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function xI(n){return new de(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function TI(n){return new de(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Cc)})}function MI(n){return new de(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function Jy(n){return new de(t=>{OI(n,t).catch(e=>t.error(e))})}function AI(n){return Jy(Vc(n))}function OI(n,t){var e,r,i,o;return j(this,void 0,void 0,function*(){try{for(e=Oc(n);r=yield e.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})}function Zt(n,t,e,r=0,i=!1){let o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Bc(n,t=0){return ge((e,r)=>{e.subscribe(pe(r,i=>Zt(r,n,()=>r.next(i),t),()=>Zt(r,n,()=>r.complete(),t),i=>Zt(r,n,()=>r.error(i),t)))})}function $c(n,t=0){return ge((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function Xy(n,t){return Xe(n).pipe($c(t),Bc(t))}function e_(n,t){return Xe(n).pipe($c(t),Bc(t))}function t_(n,t){return new de(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function n_(n,t){return new de(e=>{let r;return Zt(e,t,()=>{r=n[Lc](),Zt(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){e.error(s);return}o?e.complete():e.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function zc(n,t){if(!n)throw new Error("Iterable cannot be null");return new de(e=>{Zt(e,t,()=>{let r=n[Symbol.asyncIterator]();Zt(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function r_(n,t){return zc(Vc(n),t)}function i_(n,t){if(n!=null){if(kc(n))return Xy(n,t);if(Rc(n))return t_(n,t);if(Nc(n))return e_(n,t);if(Pc(n))return zc(n,t);if(jc(n))return n_(n,t);if(Uc(n))return r_(n,t)}throw Fc(n)}function Z(n,t){return t?i_(n,t):Xe(n)}function $(...n){let t=ti(n);return Z(n,t)}function $o(n,t){let e=re(n)?n:()=>n,r=i=>i.error(e());return new de(t?i=>t.schedule(r,0,i):r)}function Qh(n){return!!n&&(n instanceof de||re(n.lift)&&re(n.subscribe))}var cn=Fo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Jh(n,t){let e=typeof t=="object";return new Promise((r,i)=>{let o=!1,s;n.subscribe({next:a=>{s=a,o=!0},error:i,complete:()=>{o?r(s):e?r(t.defaultValue):i(new cn)}})})}function Ni(n,t){let e=typeof t=="object";return new Promise((r,i)=>{let o=new ei({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{e?r(t.defaultValue):i(new cn)}});n.subscribe(o)})}function ie(n,t){return ge((e,r)=>{let i=0;e.subscribe(pe(r,o=>{r.next(n.call(t,o,i++))}))})}var{isArray:RI}=Array;function NI(n,t){return RI(t)?n(...t):n(t)}function Hc(n){return ie(t=>NI(n,t))}var{isArray:kI}=Array,{getPrototypeOf:PI,prototype:FI,keys:LI}=Object;function Gc(n){if(n.length===1){let t=n[0];if(kI(t))return{args:t,keys:null};if(jI(t)){let e=LI(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function jI(n){return n&&typeof n=="object"&&PI(n)===FI}function Wc(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function fa(...n){let t=ti(n),e=Ic(n),{args:r,keys:i}=Gc(n);if(r.length===0)return Z([],t);let o=new de(VI(r,t,i?s=>Wc(i,s):ln));return e?o.pipe(Hc(e)):o}function VI(n,t,e=ln){return r=>{o_(t,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)o_(t,()=>{let f=Z(n[l],t),h=!1;f.subscribe(pe(r,m=>{o[l]=m,h||(h=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function o_(n,t,e){n?Zt(e,n,t):t()}function s_(n,t,e,r,i,o,s,a){let l=[],f=0,h=0,m=!1,v=()=>{m&&!l.length&&!f&&t.complete()},g=S=>f<r?E(S):l.push(S),E=S=>{o&&t.next(S),f++;let w=!1;Xe(e(S,h++)).subscribe(pe(t,D=>{i?.(D),o?g(D):t.next(D)},()=>{w=!0},void 0,()=>{if(w)try{for(f--;l.length&&f<r;){let D=l.shift();s?Zt(t,s,()=>E(D)):E(D)}v()}catch(D){t.error(D)}}))};return n.subscribe(pe(t,g,()=>{m=!0,v()})),()=>{a?.()}}function Ke(n,t,e=1/0){return re(t)?Ke((r,i)=>ie((o,s)=>t(r,o,i,s))(Xe(n(r,i))),e):(typeof t=="number"&&(e=t),ge((r,i)=>s_(r,i,n,e)))}function ni(n=1/0){return Ke(ln,n)}function a_(){return ni(1)}function zo(...n){return a_()(Z(n,ti(n)))}function ha(n){return new de(t=>{Xe(n()).subscribe(t)})}function Xh(...n){let t=Ic(n),{args:e,keys:r}=Gc(n),i=new de(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,f=s;for(let h=0;h<s;h++){let m=!1;Xe(e[h]).subscribe(pe(o,v=>{m||(m=!0,f--),a[h]=v},()=>l--,void 0,()=>{(!l||!m)&&(f||o.next(r?Wc(r,a):a),o.complete())}))}});return t?i.pipe(Hc(t)):i}function at(n,t){return ge((e,r)=>{let i=0;e.subscribe(pe(r,o=>n.call(t,o,i++)&&r.next(o)))})}function Tr(n){return ge((t,e)=>{let r=null,i=!1,o;r=t.subscribe(pe(e,void 0,void 0,s=>{o=Xe(n(s,Tr(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function l_(n,t,e,r,i){return(o,s)=>{let a=e,l=t,f=0;o.subscribe(pe(s,h=>{let m=f++;l=a?n(l,h,m):(a=!0,h),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function tr(n,t){return re(t)?Ke(n,t,1):Ke(n,1)}function ri(n){return ge((t,e)=>{let r=!1;t.subscribe(pe(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function Et(n){return n<=0?()=>At:ge((t,e)=>{let r=0;t.subscribe(pe(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function qc(n=UI){return ge((t,e)=>{let r=!1;t.subscribe(pe(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function UI(){return new cn}function ki(n){return ge((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function Mr(n,t){let e=arguments.length>=2;return r=>r.pipe(n?at((i,o)=>n(i,o,r)):ln,Et(1),e?ri(t):qc(()=>new cn))}function Ho(n){return n<=0?()=>At:ge((t,e)=>{let r=[];t.subscribe(pe(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function ep(n,t){let e=arguments.length>=2;return r=>r.pipe(n?at((i,o)=>n(i,o,r)):ln,Ho(1),e?ri(t):qc(()=>new cn))}function tp(n,t){return ge(l_(n,t,arguments.length>=2,!0))}function np(...n){let t=ti(n);return ge((e,r)=>{(t?zo(n,e,t):zo(n,e)).subscribe(r)})}function Ve(n,t){return ge((e,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();e.subscribe(pe(r,l=>{i?.unsubscribe();let f=0,h=o++;Xe(n(l,h)).subscribe(i=pe(r,m=>r.next(t?t(l,m,h,f++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ln(n){return ge((t,e)=>{Xe(n).subscribe(pe(e,()=>e.complete(),da)),!e.closed&&t.subscribe(e)})}function mt(n,t,e){let r=re(n)||t||e?{next:n,error:t,complete:e}:n;return r?ge((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(pe(o,l=>{var f;(f=r.next)===null||f===void 0||f.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var f;a=!1,(f=r.error)===null||f===void 0||f.call(r,l),o.error(l)},()=>{var l,f;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):ln}function c_(n){let t=te(null);try{return n()}finally{te(t)}}var Qc="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",N=class extends Error{code;constructor(t,e){super(Nr(t,e)),this.code=t}};function BI(n){return`NG0${Math.abs(n)}`}function Nr(n,t){return`${BI(n)}${t?": "+t:""}`}var kr=globalThis;function Ce(n){for(let t in n)if(n[t]===Ce)return t;throw Error("")}function f_(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Or(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Or).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r>=0?e.slice(0,r):e}function Jc(n,t){return n?t?`${n} ${t}`:n:t||""}var $I=Ce({__forward_ref__:Ce});function gt(n){return n.__forward_ref__=gt,n.toString=function(){return Or(this())},n}function wt(n){return pp(n)?n():n}function pp(n){return typeof n=="function"&&n.hasOwnProperty($I)&&n.__forward_ref__===gt}function k(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function un(n){return{providers:n.providers||[],imports:n.imports||[]}}function va(n){return zI(n,Xc)}function mp(n){return va(n)!==null}function zI(n,t){return n.hasOwnProperty(t)&&n[t]||null}function HI(n){let t=n?.[Xc]??null;return t||null}function ip(n){return n&&n.hasOwnProperty(Kc)?n[Kc]:null}var Xc=Ce({\u0275prov:Ce}),Kc=Ce({\u0275inj:Ce}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=k({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function gp(n){return n&&!!n.\u0275providers}var vp=Ce({\u0275cmp:Ce}),yp=Ce({\u0275dir:Ce}),_p=Ce({\u0275pipe:Ce}),bp=Ce({\u0275mod:Ce}),ma=Ce({\u0275fac:Ce}),Vi=Ce({__NG_ELEMENT_ID__:Ce}),u_=Ce({__NG_ENV_ID__:Ce});function nr(n){return typeof n=="string"?n:n==null?"":String(n)}function h_(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():nr(n)}var p_=Ce({ngErrorCode:Ce}),GI=Ce({ngErrorMessage:Ce}),WI=Ce({ngTokenPath:Ce});function Ep(n,t){return m_("",-200,t)}function eu(n,t){throw new N(-201,!1)}function m_(n,t,e){let r=new N(t,n);return r[p_]=t,r[GI]=n,e&&(r[WI]=e),r}function qI(n){return n[p_]}var op;function g_(){return op}function Ut(n){let t=op;return op=n,t}function wp(n,t,e){let r=va(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&8)return null;if(t!==void 0)return t;eu(n,"Injector")}var YI={},Pi=YI,KI="__NG_DI_FLAG__",sp=class{injector;constructor(t){this.injector=t}retrieve(t,e){let r=Fi(e)||0;try{return this.injector.get(t,r&8?null:Pi,r)}catch(i){if(Ao(i))return i;throw i}}};function ZI(n,t=0){let e=uc();if(e===void 0)throw new N(-203,!1);if(e===null)return wp(n,void 0,t);{let r=QI(t),i=e.retrieve(n,r);if(Ao(i)){if(r.optional)return null;throw i}return i}}function V(n,t=0){return(g_()||ZI)(wt(n),t)}function I(n,t){return V(n,Fi(t))}function Fi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function QI(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function ap(n){let t=[];for(let e=0;e<n.length;e++){let r=wt(n[e]);if(Array.isArray(r)){if(r.length===0)throw new N(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=JI(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}t.push(V(i,o))}else t.push(V(r))}return t}function JI(n){return n[KI]}function ii(n,t){let e=n.hasOwnProperty(ma);return e?n[ma]:null}function v_(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function y_(n){return n.flat(Number.POSITIVE_INFINITY)}function tu(n,t){n.forEach(e=>Array.isArray(e)?tu(e,t):t(e))}function Cp(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function ya(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function __(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(i===1)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;){let o=i-2;n[i]=n[o],i--}n[t]=e,n[t+1]=r}}function nu(n,t,e){let r=Wo(n,t);return r>=0?n[r|1]=e:(r=~r,__(n,r,t,e)),r}function ru(n,t){let e=Wo(n,t);if(e>=0)return n[e|1]}function Wo(n,t){return XI(n,t,1)}function XI(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}var si={},Bt=[],Pr=new U(""),Sp=new U("",-1),Dp=new U(""),ga=class{get(t,e=Pi){if(e===Pi){let i=m_("",-201);throw i.name="\u0275NotFound",i}return e}};function Ip(n){return n[bp]||null}function Fr(n){return n[vp]||null}function xp(n){return n[yp]||null}function b_(n){return n[_p]||null}function rr(n){return{\u0275providers:n}}function E_(n){return rr([{provide:Pr,multi:!0,useValue:n}])}function w_(...n){return{\u0275providers:Tp(!0,n),\u0275fromNgModule:!0}}function Tp(n,...t){let e=[],r=new Set,i,o=s=>{e.push(s)};return tu(t,s=>{let a=s;Zc(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&C_(i,o),e}function C_(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:i}=n[e];Mp(i,o=>{t(o,r)})}}function Zc(n,t,e,r){if(n=wt(n),!n)return!1;let i=null,o=ip(n),s=!o&&Fr(n);if(!o&&!s){let l=n.ngModule;if(o=ip(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let f of l)Zc(f,t,e,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let f;try{tu(o.imports,h=>{Zc(h,t,e,r)&&(f||=[],f.push(h))})}finally{}f!==void 0&&C_(f,t)}if(!a){let f=ii(i)||(()=>new i);t({provide:i,useFactory:f,deps:Bt},i),t({provide:Dp,useValue:i,multi:!0},i),t({provide:Pr,useValue:()=>V(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let f=n;Mp(l,h=>{t(h,f)})}}else return!1;return i!==n&&n.providers!==void 0}function Mp(n,t){for(let e of n)gp(e)&&(e=e.\u0275providers),Array.isArray(e)?Mp(e,t):t(e)}var ex=Ce({provide:String,useValue:Ce});function S_(n){return n!==null&&typeof n=="object"&&ex in n}function tx(n){return!!(n&&n.useExisting)}function nx(n){return!!(n&&n.useFactory)}function Li(n){return typeof n=="function"}function D_(n){return!!n.useClass}var _a=new U(""),Yc={},d_={},rp;function ba(){return rp===void 0&&(rp=new ga),rp}var Ze=class{},ji=class extends Ze{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,cp(t,s=>this.processProvider(s)),this.records.set(Sp,Go(void 0,this)),i.has("environment")&&this.records.set(Ze,Go(void 0,this));let o=this.records.get(_a);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Dp,Bt,{self:!0}))}retrieve(t,e){let r=Fi(e)||0;try{return this.get(t,Pi,r)}catch(i){if(Ao(i))return i;throw i}}destroy(){pa(this),this._destroyed=!0;let t=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(t)}}onDestroy(t){return pa(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){pa(this);let e=Xn(this),r=Ut(void 0),i;try{return t()}finally{Xn(e),Ut(r)}}get(t,e=Pi,r){if(pa(this),t.hasOwnProperty(u_))return t[u_](this);let i=Fi(r),o,s=Xn(this),a=Ut(void 0);try{if(!(i&4)){let f=this.records.get(t);if(f===void 0){let h=ax(t)&&va(t);h&&this.injectableDefInScope(h)?f=Go(lp(t),Yc):f=null,this.records.set(t,f)}if(f!=null)return this.hydrate(t,f,i)}let l=i&2?ba():this.parent;return e=i&8&&e===Pi?null:e,l.get(t,e)}catch(l){let f=qI(l);throw f===-200||f===-201?new N(f,null):l}finally{Ut(a),Xn(s)}}resolveInjectorInitializers(){let t=te(null),e=Xn(this),r=Ut(void 0),i;try{let o=this.get(Pr,Bt,{self:!0});for(let s of o)s()}finally{Xn(e),Ut(r),te(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(Or(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=wt(t);let e=Li(t)?t:wt(t&&t.provide),r=ix(t);if(!Li(t)&&t.multi===!0){let i=this.records.get(e);i||(i=Go(void 0,Yc,!0),i.factory=()=>ap(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e,r){let i=te(null);try{if(e.value===d_)throw Ep(Or(t));return e.value===Yc&&(e.value=d_,e.value=e.factory(void 0,r)),typeof e.value=="object"&&e.value&&sx(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{te(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=wt(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function lp(n){let t=va(n),e=t!==null?t.factory:ii(n);if(e!==null)return e;if(n instanceof U)throw new N(204,!1);if(n instanceof Function)return rx(n);throw new N(204,!1)}function rx(n){if(n.length>0)throw new N(204,!1);let e=HI(n);return e!==null?()=>e.factory(n):()=>new n}function ix(n){if(S_(n))return Go(void 0,n.useValue);{let t=Ap(n);return Go(t,Yc)}}function Ap(n,t,e){let r;if(Li(n)){let i=wt(n);return ii(i)||lp(i)}else if(S_(n))r=()=>wt(n.useValue);else if(nx(n))r=()=>n.useFactory(...ap(n.deps||[]));else if(tx(n))r=(i,o)=>V(wt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=wt(n&&(n.useClass||n.provide));if(ox(n))r=()=>new i(...ap(n.deps));else return ii(i)||lp(i)}return r}function pa(n){if(n.destroyed)throw new N(205,!1)}function Go(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function ox(n){return!!n.deps}function sx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function ax(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function cp(n,t){for(let e of n)Array.isArray(e)?cp(e,t):e&&gp(e)?cp(e.\u0275providers,t):t(e)}function vt(n,t){let e;n instanceof ji?(pa(n),e=n):e=new sp(n);let r,i=Xn(e),o=Ut(void 0);try{return t()}finally{Xn(i),Ut(o)}}function I_(){return g_()!==void 0||uc()!=null}var Vn=0,q=1,ne=2,lt=3,_n=4,bn=5,qo=6,Yo=7,Qe=8,ai=9,ir=10,Me=11,Ko=12,Op=13,Ui=14,dn=15,li=16,Bi=17,or=18,Ea=19,Rp=20,Ar=21,iu=22,wa=23,fn=24,$i=25,zi=26,Be=27,x_=1,Np=6,ci=7,Ca=8,Hi=9,et=10;function sr(n){return Array.isArray(n)&&typeof n[x_]=="object"}function Un(n){return Array.isArray(n)&&n[x_]===!0}function kp(n){return(n.flags&4)!==0}function Lr(n){return n.componentOffset>-1}function Zo(n){return(n.flags&1)===1}function ar(n){return!!n.template}function Qo(n){return(n[ne]&512)!==0}function Gi(n){return(n[ne]&256)===256}var T_="svg",M_="math";function En(n){for(;Array.isArray(n);)n=n[Vn];return n}function Pp(n,t){return En(t[n])}function wn(n,t){return En(t[n.index])}function Sa(n,t){return n.data[t]}function ou(n,t){return n[t]}function Fp(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}function Cn(n,t){let e=t[n];return sr(e)?e:e[Vn]}function A_(n){return(n[ne]&4)===4}function su(n){return(n[ne]&128)===128}function O_(n){return Un(n[lt])}function Sn(n,t){return t==null?null:n[t]}function Lp(n){n[Bi]=0}function jp(n){n[ne]&1024||(n[ne]|=1024,su(n)&&Jo(n))}function R_(n,t){for(;n>0;)t=t[Ui],n--;return t}function Da(n){return!!(n[ne]&9216||n[fn]?.dirty)}function au(n){n[ir].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),Da(n)&&Jo(n)}function Jo(n){n[ir].changeDetectionScheduler?.notify(0);let t=oi(n);for(;t!==null&&!(t[ne]&8192||(t[ne]|=8192,!su(t)));)t=oi(t)}function Vp(n,t){if(Gi(n))throw new N(911,!1);n[Ar]===null&&(n[Ar]=[]),n[Ar].push(t)}function N_(n,t){if(n[Ar]===null)return;let e=n[Ar].indexOf(t);e!==-1&&n[Ar].splice(e,1)}function oi(n){let t=n[lt];return Un(t)?t[lt]:t}function Up(n){return n[Yo]??=[]}function Bp(n){return n.cleanup??=[]}function k_(n,t,e,r){let i=Up(t);i.push(e),n.firstCreatePass&&Bp(n).push(r,i.length-1)}var ae={lFrame:q_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var up=!1;function P_(){return ae.lFrame.elementDepthCount}function F_(){ae.lFrame.elementDepthCount++}function $p(){ae.lFrame.elementDepthCount--}function lu(){return ae.bindingsEnabled}function L_(){return ae.skipHydrationRootTNode!==null}function zp(n){return ae.skipHydrationRootTNode===n}function Hp(){ae.skipHydrationRootTNode=null}function K(){return ae.lFrame.lView}function Pe(){return ae.lFrame.tView}function F(n){return ae.lFrame.contextLView=n,n[Qe]}function L(n){return ae.lFrame.contextLView=null,n}function tt(){let n=Gp();for(;n!==null&&n.type===64;)n=n.parent;return n}function Gp(){return ae.lFrame.currentTNode}function j_(){let n=ae.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function Xo(n,t){let e=ae.lFrame;e.currentTNode=n,e.isParent=t}function Wp(){return ae.lFrame.isParent}function V_(){ae.lFrame.isParent=!1}function U_(){return ae.lFrame.contextLView}function qp(){return up}function Yp(n){let t=up;return up=n,t}function Ia(){let n=ae.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Kp(){return ae.lFrame.bindingIndex}function B_(n){return ae.lFrame.bindingIndex=n}function jr(){return ae.lFrame.bindingIndex++}function xa(n){let t=ae.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function $_(){return ae.lFrame.inI18n}function z_(n,t){let e=ae.lFrame;e.bindingIndex=e.bindingRootIndex=n,cu(t)}function H_(){return ae.lFrame.currentDirectiveIndex}function cu(n){ae.lFrame.currentDirectiveIndex=n}function G_(n){let t=ae.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function Zp(){return ae.lFrame.currentQueryIndex}function uu(n){ae.lFrame.currentQueryIndex=n}function lx(n){let t=n[q];return t.type===2?t.declTNode:t.type===1?n[bn]:null}function Qp(n,t,e){if(e&4){let i=t,o=n;for(;i=i.parent,i===null&&!(e&1);)if(i=lx(o),i===null||(o=o[Ui],i.type&10))break;if(i===null)return!1;t=i,n=o}let r=ae.lFrame=W_();return r.currentTNode=t,r.lView=n,!0}function du(n){let t=W_(),e=n[q];ae.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function W_(){let n=ae.lFrame,t=n===null?null:n.child;return t===null?q_(n):t}function q_(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function Y_(){let n=ae.lFrame;return ae.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Jp=Y_;function fu(){let n=Y_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function K_(n){return(ae.lFrame.contextLView=R_(n,ae.lFrame.contextLView))[Qe]}function Bn(){return ae.lFrame.selectedIndex}function ui(n){ae.lFrame.selectedIndex=n}function es(){let n=ae.lFrame;return Sa(n.tView,n.selectedIndex)}function Z_(){return ae.lFrame.currentNamespace}var Q_=!0;function hu(){return Q_}function Ta(n){Q_=n}function dp(n,t=null,e=null,r){let i=Xp(n,t,e,r);return i.resolveInjectorInitializers(),i}function Xp(n,t=null,e=null,r,i=new Set){let o=[e||Bt,w_(n)];return r=r||(typeof n=="object"?void 0:Or(n)),new ji(o,t||ba(),r||null,i)}var $t=class n{static THROW_IF_NOT_FOUND=Pi;static NULL=new ga;static create(t,e){if(Array.isArray(t))return dp({name:""},e,t,"");{let r=t.name??"";return dp({name:r},t.parent,t.providers,r)}}static \u0275prov=k({token:n,providedIn:"any",factory:()=>V(Sp)});static __NG_ELEMENT_ID__=-1},$e=new U(""),$n=(()=>{class n{static __NG_ELEMENT_ID__=cx;static __NG_ENV_ID__=e=>e}return n})(),fp=class extends $n{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Gi(this._lView)}onDestroy(t){let e=this._lView;return Vp(e,t),()=>N_(e,t)}};function cx(){return new fp(K())}var jn=class{_console=console;handleError(t){this._console.error("ERROR",t)}},zt=new U("",{providedIn:"root",factory:()=>{let n=I(Ze),t;return e=>{n.destroyed&&!t?setTimeout(()=>{throw e}):(t??=n.get(jn),t.handleError(e))}}}),J_={provide:Pr,useValue:()=>void I(jn),multi:!0},ux=new U("",{providedIn:"root",factory:()=>{let n=I($e).defaultView;if(!n)return;let t=I(zt),e=o=>{t(o.reason),o.preventDefault()},r=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",e),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),I($n).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",e)})}});function em(){return rr([E_(()=>void I(ux))])}function tm(n){return typeof n=="function"&&n[Mt]!==void 0}function ct(n,t){let[e,r,i]=Lh(n,t?.equal),o=e,s=o[Mt];return o.set=r,o.update=i,o.asReadonly=X_.bind(o),o}function X_(){let n=this[Mt];if(n.readonlyFn===void 0){let t=()=>this();t[Mt]=n,n.readonlyFn=t}return n.readonlyFn}function nm(n){return tm(n)&&typeof n.set=="function"}var pu=(()=>{class n{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=dx}return n})();function dx(){return new pu(K(),tt())}var Rr=class{},Ma=new U("",{providedIn:"root",factory:()=>!1});var rm=new U(""),im=new U(""),lr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new st(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new de(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})(),mu=(()=>{class n{internalPendingTasks=I(lr);scheduler=I(Rr);errorHandler=I(zt);add(){let e=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(e)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(e))}}run(e){let r=this.add();e().catch(this.errorHandler).finally(r)}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})();function Aa(...n){}var om=(()=>{class n{static \u0275prov=k({token:n,providedIn:"root",factory:()=>new hp})}return n})(),hp=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let e=t.zone,r=this.queues.get(e);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[e,r]of this.queues)e===null?t||=this.flushQueue(r):t||=e.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let e=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,e=!0,r.run());return e}};function Va(n){return{toString:n}.toString()}function _x(n){return typeof n=="function"}var Su=class{previousValue;currentValue;firstChange;constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ab(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}var hn=(()=>{let n=()=>Ob;return n.ngInherit=!0,n})();function Ob(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ex),bx}function bx(){let n=Nb(this),t=n?.current;if(t){let e=n.previous;if(e===si)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function Ex(n,t,e,r,i){let o=this.declaredInputs[r],s=Nb(n)||wx(n,{previous:si,current:null}),a=s.current||(s.current={}),l=s.previous,f=l[o];a[o]=new Su(f&&f.currentValue,e,l===si),Ab(n,t,i,e)}var Rb="__ngSimpleChanges__";function Nb(n){return n[Rb]||null}function wx(n,t){return n[Rb]=t}var eb=[];var De=function(n,t=null,e){for(let r=0;r<eb.length;r++){let i=eb[r];i(n,t,e)}};function Cx(n,t,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=Ob(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}i&&(e.preOrderHooks??=[]).push(0-n,i),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function kb(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:f,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),f&&((n.viewHooks??=[]).push(e,f),(n.viewCheckHooks??=[]).push(e,f)),h!=null&&(n.destroyHooks??=[]).push(e,h)}}function _u(n,t,e){Pb(n,t,3,e)}function bu(n,t,e,r){(n[ne]&3)===e&&Pb(n,t,e,r)}function sm(n,t){let e=n[ne];(e&3)===t&&(e&=16383,e+=1,n[ne]=e)}function Pb(n,t,e,r){let i=r!==void 0?n[Bi]&65535:0,o=r??-1,s=t.length-1,a=0;for(let l=i;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],r!=null&&a>=r)break}else t[l]<0&&(n[Bi]+=65536),(a<o||o==-1)&&(Sx(n,e,t,l),n[Bi]=(n[Bi]&4294901760)+l+2),l++}function tb(n,t){De(4,n,t);let e=te(null);try{t.call(n)}finally{te(e),De(5,n,t)}}function Sx(n,t,e,r){let i=e[r]<0,o=e[r+1],s=i?-e[r]:e[r],a=n[s];i?n[ne]>>14<n[Bi]>>16&&(n[ne]&3)===t&&(n[ne]+=16384,tb(a,o)):tb(a,o)}var ns=-1,qi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=e,this.injectImpl=r}};function Dx(n){return(n.flags&8)!==0}function Ix(n){return(n.flags&16)!==0}function xx(n,t,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{let o=i,s=e[++r];Tx(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function Fb(n){return n===3||n===4||n===6}function Tx(n){return n.charCodeAt(0)===64}function rs(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?nb(n,e,i,null,t[++r]):nb(n,e,i,null,null))}}return n}function nb(n,t,e,r,i){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i)}function Lb(n){return n!==ns}function Du(n){return n&32767}function Mx(n){return n>>16}function Iu(n,t){let e=Mx(n),r=t;for(;e>0;)r=r[Ui],e--;return r}var vm=!0;function xu(n){let t=vm;return vm=n,t}var Ax=256,jb=Ax-1,Vb=5,Ox=0,cr={};function Rx(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(Vi)&&(r=e[Vi]),r==null&&(r=e[Vi]=Ox++);let i=r&jb,o=1<<i;t.data[n+(i>>Vb)]|=o}function Tu(n,t){let e=Ub(n,t);if(e!==-1)return e;let r=t[q];r.firstCreatePass&&(n.injectorIndex=t.length,am(r.data,n),am(t,null),am(r.blueprint,null));let i=Ym(n,t),o=n.injectorIndex;if(Lb(i)){let s=Du(i),a=Iu(i,t),l=a[q].data;for(let f=0;f<8;f++)t[o+f]=a[s+f]|l[s+f]}return t[o+8]=i,o}function am(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Ub(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function Ym(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;i!==null;){if(r=Gb(i),r===null)return ns;if(e++,i=i[Ui],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return ns}function ym(n,t,e){Rx(n,t,e)}function Nx(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let r=e.length,i=0;for(;i<r;){let o=e[i];if(Fb(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof e[i]=="string";)i++;else{if(o===t)return e[i+1];i=i+2}}}return null}function Bb(n,t,e){if(e&8||n!==void 0)return n;eu(t,"NodeInjector")}function $b(n,t,e,r){if(e&8&&r===void 0&&(r=null),(e&3)===0){let i=n[ai],o=Ut(void 0);try{return i?i.get(t,r,e&8):wp(t,r,e&8)}finally{Ut(o)}}return Bb(r,t,e)}function zb(n,t,e,r=0,i){if(n!==null){if(t[ne]&2048&&!(r&2)){let s=Lx(n,t,e,r,cr);if(s!==cr)return s}let o=Hb(n,t,e,r,cr);if(o!==cr)return o}return $b(t,e,r,i)}function Hb(n,t,e,r,i){let o=Px(e);if(typeof o=="function"){if(!Qp(t,n,r))return r&1?Bb(i,e,r):$b(t,e,r,i);try{let s;if(s=o(r),s==null&&!(r&8))eu(e);else return s}finally{Jp()}}else if(typeof o=="number"){let s=null,a=Ub(n,t),l=ns,f=r&1?t[dn][bn]:null;for((a===-1||r&4)&&(l=a===-1?Ym(n,t):t[a+8],l===ns||!ib(r,!1)?a=-1:(s=t[q],a=Du(l),t=Iu(l,t)));a!==-1;){let h=t[q];if(rb(o,a,h.data)){let m=kx(a,t,e,s,r,f);if(m!==cr)return m}l=t[a+8],l!==ns&&ib(r,t[q].data[a+8]===f)&&rb(o,a,t)?(s=h,a=Du(l),t=Iu(l,t)):a=-1}}return i}function kx(n,t,e,r,i,o){let s=t[q],a=s.data[n+8],l=r==null?Lr(a)&&vm:r!=s&&(a.type&3)!==0,f=i&1&&o===a,h=Eu(a,s,e,l,f);return h!==null?Na(t,s,h,a,i):cr}function Eu(n,t,e,r,i){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,f=n.directiveEnd,h=o>>20,m=r?a:a+h,v=i?a+h:f;for(let g=m;g<v;g++){let E=s[g];if(g<l&&e===E||g>=l&&E.type===e)return g}if(i){let g=s[l];if(g&&ar(g)&&g.type===e)return l}return null}function Na(n,t,e,r,i){let o=n[e],s=t.data;if(o instanceof qi){let a=o;if(a.resolving){let g=h_(s[e]);throw Ep(g)}let l=xu(a.canSeeViewProviders);a.resolving=!0;let f=s[e].type||s[e],h,m=a.injectImpl?Ut(a.injectImpl):null,v=Qp(n,r,0);try{o=n[e]=a.factory(void 0,i,s,n,r),t.firstCreatePass&&e>=r.directiveStart&&Cx(e,s[e],t)}finally{m!==null&&Ut(m),xu(l),a.resolving=!1,Jp()}}return o}function Px(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Vi)?n[Vi]:void 0;return typeof t=="number"?t>=0?t&jb:Fx:t}function rb(n,t,e){let r=1<<n;return!!(e[t+(n>>Vb)]&r)}function ib(n,t){return!(n&2)&&!(n&1&&t)}var Wi=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return zb(this._tNode,this._lView,t,Fi(r),e)}};function Fx(){return new Wi(tt(),K())}function Dn(n){return Va(()=>{let t=n.prototype.constructor,e=t[ma]||_m(t),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ma]||_m(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function _m(n){return pp(n)?()=>{let t=_m(wt(n));return t&&t()}:ii(n)}function Lx(n,t,e,r,i){let o=n,s=t;for(;o!==null&&s!==null&&s[ne]&2048&&!Qo(s);){let a=Hb(o,s,e,r|2,cr);if(a!==cr)return a;let l=o.parent;if(!l){let f=s[Rp];if(f){let h=f.get(e,cr,r);if(h!==cr)return h}l=Gb(s),s=s[Ui]}o=l}return i}function Gb(n){let t=n[q],e=t.type;return e===2?t.declTNode:e===1?n[bn]:null}function Ua(n){return Nx(tt(),n)}function jx(){return as(tt(),K())}function as(n,t){return new yt(wn(n,t))}var yt=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=jx}return n})();function Vx(n){return n instanceof yt?n.nativeElement:n}function Ux(){return this._results[Symbol.iterator]()}var Mu=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ue}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let r=y_(t);(this._changesDetected=!v_(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Ux};function Wb(n){return(n.flags&128)===128}var Km=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Km||{}),qb=new Map,Bx=0;function $x(){return Bx++}function zx(n){qb.set(n[Ea],n)}function bm(n){qb.delete(n[Ea])}var ob="__ngContext__";function is(n,t){sr(t)?(n[ob]=t[Ea],zx(t)):n[ob]=t}function Yb(n){return Zb(n[Ko])}function Kb(n){return Zb(n[_n])}function Zb(n){for(;n!==null&&!Un(n);)n=n[_n];return n}var Em;function Zm(n){Em=n}function Qb(){if(Em!==void 0)return Em;if(typeof document<"u")return document;throw new N(210,!1)}var Wu=new U("",{providedIn:"root",factory:()=>Hx}),Hx="ng",qu=new U(""),ls=new U("",{providedIn:"platform",factory:()=>"unknown"});var Yu=new U("",{providedIn:"root",factory:()=>Qb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Gx="h",Wx="b";var Jb="r";var Xb="di";var eE=!1,tE=new U("",{providedIn:"root",factory:()=>eE});var Qm=new U("");var qx=(n,t,e,r)=>{};function Yx(n,t,e,r){qx(n,t,e,r)}function Jm(n){return(n.flags&32)===32}var Kx=()=>null;function nE(n,t,e=!1){return Kx(n,t,e)}function rE(n,t){let e=n.contentQueries;if(e!==null){let r=te(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s!==-1){let a=n.data[s];uu(o),a.contentQueries(2,t[s],s)}}}finally{te(r)}}}function wm(n,t,e){uu(0);let r=te(null);try{t(n,e)}finally{te(r)}}function Xm(n,t,e){if(kp(t)){let r=te(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{te(r)}}}var Vr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Vr||{});var gu;function Zx(){if(gu===void 0&&(gu=null,kr.trustedTypes))try{gu=kr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gu}function sb(n){return Zx()?.createScriptURL(n)||n}var Au=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qc})`}};function cs(n){return n instanceof Au?n.changingThisBreaksApplicationSecurity:n}function eg(n,t){let e=iE(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Qc})`)}return e===t}function iE(n){return n instanceof Au&&n.getTypeName()||null}var Qx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function oE(n){return n=String(n),n.match(Qx)?n:"unsafe:"+n}var Ku=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Ku||{});function Zu(n){let t=aE();return t?t.sanitize(Ku.URL,n)||"":eg(n,"URL")?cs(n):oE(nr(n))}function sE(n){let t=aE();if(t)return sb(t.sanitize(Ku.RESOURCE_URL,n)||"");if(eg(n,"ResourceURL"))return sb(cs(n));throw new N(904,!1)}function Jx(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?sE:Zu}function tg(n,t,e){return Jx(t,e)(n)}function aE(){let n=K();return n&&n[ir].sanitizer}var Xx=/^>|^->|<!--|-->|--!>|<!-$/g,eT=/(<|>)/g,tT="\u200B$1\u200B";function nT(n){return n.replace(Xx,t=>t.replace(eT,tT))}function ng(n){return n.ownerDocument.defaultView}function rg(n){return n.ownerDocument}function lE(n){return n instanceof Function?n():n}function rT(n,t,e){let r=n.length;for(;;){let i=n.indexOf(t,e);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}var cE="ng-template";function iT(n,t,e,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&rT(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(ig(n))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function ig(n){return n.type===4&&n.value!==cE}function oT(n,t,e){let r=n.type===4&&!e?cE:n.value;return t===r}function sT(n,t,e){let r=4,i=n.attrs,o=i!==null?cT(i):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!zn(r)&&!zn(l))return!1;if(s&&zn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!oT(n,l,e)||l===""&&t.length===1){if(zn(r))return!1;s=!0}}else if(r&8){if(i===null||!iT(n,i,l,e)){if(zn(r))return!1;s=!0}}else{let f=t[++a],h=aT(l,i,ig(n),e);if(h===-1){if(zn(r))return!1;s=!0;continue}if(f!==""){let m;if(h>o?m="":m=i[h+1].toLowerCase(),r&2&&f!==m){if(zn(r))return!1;s=!0}}}}return zn(r)||s}function zn(n){return(n&1)===0}function aT(n,t,e,r){if(t===null)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){let s=t[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return uT(t,n)}function lT(n,t,e=!1){for(let r=0;r<t.length;r++)if(sT(n,t[r],e))return!0;return!1}function cT(n){for(let t=0;t<n.length;t++){let e=n[t];if(Fb(e))return t}return n.length}function uT(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function ab(n,t){return n?":not("+t.trim()+")":t}function dT(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(r&2){let a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!zn(s)&&(t+=ab(o,i),i=""),r=s,o=o||!zn(r);e++}return i!==""&&(t+=ab(o,i)),t}function fT(n){return n.map(dT).join(",")}function hT(n){let t=[],e=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&t.push(o,n[++r]):i===8&&e.push(o);else{if(!zn(i))break;i=o}r++}return e.length&&t.push(1,...e),t}var Ct={};function pT(n,t){return n.createText(t)}function mT(n,t,e){n.setValue(t,e)}function gT(n,t){return n.createComment(nT(t))}function uE(n,t,e){return n.createElement(t,e)}function Ou(n,t,e,r,i){n.insertBefore(t,e,r,i)}function dE(n,t,e){n.appendChild(t,e)}function lb(n,t,e,r,i){r!==null?Ou(n,t,e,r,i):dE(n,t,e)}function fE(n,t,e,r){n.removeChild(null,t,e,r)}function vT(n,t,e){n.setAttribute(t,"style",e)}function yT(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function hE(n,t,e){let{mergedAttrs:r,classes:i,styles:o}=e;r!==null&&xx(n,t,r),i!==null&&yT(n,t,i),o!==null&&vT(n,t,o)}function og(n,t,e,r,i,o,s,a,l,f,h){let m=Be+r,v=m+i,g=_T(m,v),E=typeof f=="function"?f():f;return g[q]={type:n,blueprint:g,template:e,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:E,incompleteFirstPass:!1,ssrId:h}}function _T(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:Ct);return e}function bT(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=og(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function sg(n,t,e,r,i,o,s,a,l,f,h){let m=t.blueprint.slice();return m[Vn]=i,m[ne]=r|4|128|8|64|1024,(f!==null||n&&n[ne]&2048)&&(m[ne]|=2048),Lp(m),m[lt]=m[Ui]=n,m[Qe]=e,m[ir]=s||n&&n[ir],m[Me]=a||n&&n[Me],m[ai]=l||n&&n[ai]||null,m[bn]=o,m[Ea]=$x(),m[qo]=h,m[Rp]=f,m[dn]=t.type==2?n[dn]:m,m}function ET(n,t,e){let r=wn(t,n),i=bT(e),o=n[ir].rendererFactory,s=ag(n,sg(n,i,null,pE(e),r,t,null,o.createRenderer(r,e),null,null,null));return n[t.index]=s}function pE(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function mE(n,t,e,r){if(e===0)return-1;let i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function ag(n,t){return n[Ko]?n[Op][_n]=t:n[Ko]=t,n[Op]=t,t}function p(n=1){gE(Pe(),K(),Bn()+n,!1)}function gE(n,t,e,r){if(!r)if((t[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&_u(t,o,e)}else{let o=n.preOrderHooks;o!==null&&bu(t,o,0,e)}ui(e)}var Qu=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Qu||{});function Cm(n,t,e,r){let i=te(null);try{let[o,s,a]=n.inputs[e],l=null;(s&Qu.SignalBased)!==0&&(l=t[o][Mt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(t,r)),n.setInput!==null?n.setInput(t,l,r,e,o):Ab(t,l,o,r)}finally{te(i)}}var Gn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Gn||{}),wT;function lg(n,t){return wT(n,t)}var os=new Set,Ju=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ju||{}),Ji=new U(""),cb=new Set;function Wn(n){cb.has(n)||(cb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var vE=!1,Sm=class extends Ue{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,I_()&&(this.destroyRef=I($n,{optional:!0})??void 0,this.pendingTasks=I(lr,{optional:!0})??void 0)}emit(t){let e=te(null);try{super.next(t)}finally{te(e)}}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&typeof t=="object"){let l=t;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof Je&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Fe=Sm;function yE(n){let t,e;function r(){n=Aa;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ub(n){return queueMicrotask(()=>n()),()=>{n=Aa}}var cg="isAngularZone",Ru=cg+"_ID",CT=0,He=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Fe(!1);onMicrotaskEmpty=new Fe(!1);onStable=new Fe(!1);onError=new Fe(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=vE}=t;if(typeof Zone>"u")throw new N(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,IT(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(cg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new N(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new N(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,ST,Aa,Aa);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},ST={};function ug(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function DT(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){yE(()=>{n.callbackScheduled=!1,Dm(n),n.isCheckStableRunning=!0,ug(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),Dm(n)}function IT(n){let t=()=>{DT(n)},e=CT++;n._inner=n._inner.fork({name:"angular",properties:{[cg]:!0,[Ru]:e,[Ru+e]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(xT(l))return r.invokeTask(o,s,a,l);try{return db(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),fb(n)}},onInvoke:(r,i,o,s,a,l,f)=>{try{return db(n),r.invoke(o,s,a,l,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!TT(l)&&t(),fb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Dm(n),ug(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Dm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function db(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function fb(n){n._nesting--,ug(n)}var Nu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Fe;onMicrotaskEmpty=new Fe;onStable=new Fe;onError=new Fe;run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function xT(n){return _E(n,"__ignore_ng_zone__")}function TT(n){return _E(n,"__scheduler_tick__")}function _E(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var dg=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})(),bE=[0,1,2,3],EE=(()=>{class n{ngZone=I(He);scheduler=I(Rr);errorHandler=I(jn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){I(Ji,{optional:!0})}execute(){let e=this.sequences.size>0;e&&De(16),this.executing=!0;for(let r of bE)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&De(17)}register(e){let{view:r}=e;r!==void 0?((r[$i]??=[]).push(e),Jo(r),r[ne]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,r){return r?r.run(Ju.AFTER_NEXT_RENDER,e):e()}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})(),ku=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,r,i,o,s=null){this.impl=t,this.hooks=e,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[$i];t&&(this.view[$i]=t.filter(e=>e!==this))}};function Ba(n,t){let e=t?.injector??I($t);return Wn("NgAfterNextRender"),AT(n,e,t,!0)}function MT(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function AT(n,t,e,r){let i=t.get(dg);i.impl??=t.get(EE);let o=t.get(Ji,null,{optional:!0}),s=e?.manualCleanup!==!0?t.get($n):null,a=t.get(pu,null,{optional:!0}),l=new ku(i.impl,MT(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var OT=new U("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function wE(n,t){let e=n.get(OT);if(Array.isArray(t))for(let r of t)e.queue.add(r);else e.queue.add(t);e.scheduler&&e.scheduler(n)}function RT(n,t){for(let[e,r]of t)wE(n,r.animateFns)}function hb(n,t,e,r){let i=n?.[zi]?.enter;t!==null&&i&&i.has(e.index)&&RT(r,i)}function ts(n,t,e,r,i,o,s,a){if(i!=null){let l,f=!1;Un(i)?l=i:sr(i)&&(f=!0,i=i[Vn]);let h=En(i);n===0&&r!==null?(hb(a,r,o,e),s==null?dE(t,r,h):Ou(t,r,h,s||null,!0)):n===1&&r!==null?(hb(a,r,o,e),Ou(t,r,h,s||null,!0)):n===2?pb(a,o,e,m=>{fE(t,h,f,m)}):n===3&&pb(a,o,e,()=>{t.destroyNode(h)}),l!=null&&GT(t,n,e,l,o,r,s)}}function NT(n,t){CE(n,t),t[Vn]=null,t[bn]=null}function kT(n,t,e,r,i,o){r[Vn]=i,r[bn]=t,ed(n,r,e,1,i,o)}function CE(n,t){t[ir].changeDetectionScheduler?.notify(9),ed(n,t,t[Me],2,null,null)}function PT(n){let t=n[Ko];if(!t)return lm(n[q],n);for(;t;){let e=null;if(sr(t))e=t[Ko];else{let r=t[et];r&&(e=r)}if(!e){for(;t&&!t[_n]&&t!==n;)sr(t)&&lm(t[q],t),t=t[lt];t===null&&(t=n),sr(t)&&lm(t[q],t),e=t&&t[_n]}t=e}}function fg(n,t){let e=n[Hi],r=e.indexOf(t);e.splice(r,1)}function Xu(n,t){if(Gi(t))return;let e=t[Me];e.destroyNode&&ed(n,t,e,3,null,null),PT(t)}function lm(n,t){if(Gi(t))return;let e=te(null);try{t[ne]&=-129,t[ne]|=256,t[fn]&&ca(t[fn]),jT(n,t),LT(n,t),t[q].type===1&&t[Me].destroy();let r=t[li];if(r!==null&&Un(t[lt])){r!==t[lt]&&fg(r,t);let i=t[or];i!==null&&i.detachView(n)}bm(t)}finally{te(e)}}function pb(n,t,e,r){let i=n?.[zi];if(i==null||i.leave==null||!i.leave.has(t.index))return r(!1);if(i.skipLeaveAnimations)return i.skipLeaveAnimations=!1,r(!1);n&&os.add(n),wE(e,()=>{if(i.leave&&i.leave.has(t.index)){let s=i.leave.get(t.index),a=[];if(s)for(let l=0;l<s.animateFns.length;l++){let f=s.animateFns[l],{promise:h}=f();a.push(h)}i.running=Promise.allSettled(a),FT(n,r)}else n&&os.delete(n),r(!1)})}function FT(n,t){let e=n[zi]?.running;if(e){e.then(()=>{n[zi].running=void 0,os.delete(n),t(!0)});return}t(!1)}function LT(n,t){let e=n.cleanup,r=t[Yo];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(t[Yo]=null);let i=t[Ar];if(i!==null){t[Ar]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[wa];if(o!==null){t[wa]=null;for(let s of o)s.destroy()}}function jT(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=t[e[r]];if(!(i instanceof qi)){let o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];De(4,a,l);try{l.call(a)}finally{De(5,a,l)}}else{De(4,i,o);try{o.call(i)}finally{De(5,i,o)}}}}}function VT(n,t,e){return UT(n,t.parent,e)}function UT(n,t,e){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return e[Vn];if(Lr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Vr.None||i===Vr.Emulated)return null}return wn(r,e)}function BT(n,t,e){return zT(n,t,e)}function $T(n,t,e){return n.type&40?wn(n,e):null}var zT=$T,mb;function hg(n,t,e,r){let i=VT(n,r,t),o=t[Me],s=r.parent||t[bn],a=BT(s,r,t);if(i!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)lb(o,i,e[l],a,!1);else lb(o,i,e,a,!1);mb!==void 0&&mb(o,r,t,e,i)}function Oa(n,t){if(t!==null){let e=t.type;if(e&3)return wn(t,n);if(e&4)return Im(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return Oa(n,r);{let i=n[t.index];return Un(i)?Im(-1,i):En(i)}}else{if(e&128)return Oa(n,t.next);if(e&32)return lg(t,n)()||En(n[t.index]);{let r=SE(n,t);if(r!==null){if(Array.isArray(r))return r[0];let i=oi(n[dn]);return Oa(i,r)}else return Oa(n,t.next)}}}return null}function SE(n,t){if(t!==null){let r=n[dn][bn],i=t.projection;return r.projection[i]}return null}function Im(n,t){let e=et+n+1;if(e<t.length){let r=t[e],i=r[q].firstChild;if(i!==null)return Oa(r,i)}return t[ci]}function pg(n,t,e,r,i,o,s){for(;e!=null;){let a=r[ai];if(e.type===128){e=e.next;continue}let l=r[e.index],f=e.type;if(s&&t===0&&(l&&is(En(l),r),e.flags|=2),!Jm(e))if(f&8)pg(n,t,e.child,r,i,o,!1),ts(t,n,a,i,l,e,o,r);else if(f&32){let h=lg(e,r),m;for(;m=h();)ts(t,n,a,i,m,e,o,r);ts(t,n,a,i,l,e,o,r)}else f&16?HT(n,t,r,e,i,o):ts(t,n,a,i,l,e,o,r);e=s?e.projectionNext:e.next}}function ed(n,t,e,r,i,o){pg(e,r,n.firstChild,t,i,o,!1)}function HT(n,t,e,r,i,o){let s=e[dn],l=s[bn].projection[r.projection];if(Array.isArray(l))for(let f=0;f<l.length;f++){let h=l[f];ts(t,n,e[ai],i,h,r,o,e)}else{let f=l,h=s[lt];Wb(r)&&(f.flags|=128),pg(n,t,f,h,i,o,!0)}}function GT(n,t,e,r,i,o,s){let a=r[ci],l=En(r);a!==l&&ts(t,n,e,o,a,i,s);for(let f=et;f<r.length;f++){let h=r[f];ed(h[q],h,n,t,o,a)}}function WT(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=r.indexOf("-")===-1?void 0:Gn.DashCase;i==null?n.removeStyle(e,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Gn.Important),n.setStyle(e,r,i,o))}}function DE(n,t,e,r,i){let o=Bn(),s=r&2;try{ui(-1),s&&t.length>Be&&gE(n,t,Be,!1),De(s?2:0,i,e),e(r,i)}finally{ui(o),De(s?3:1,i,e)}}function td(n,t,e){QT(n,t,e),(e.flags&64)===64&&JT(n,t,e)}function $a(n,t,e=wn){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?e(t,n):n[s];n[i++]=a}}}function qT(n,t,e,r){let o=r.get(tE,eE)||e===Vr.ShadowDom,s=n.selectRootElement(t,o);return YT(s),s}function YT(n){KT(n)}var KT=()=>null;function ZT(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function IE(n,t,e,r,i,o){let s=t[q];if(nd(n,s,t,e,r)){Lr(n)&&TE(t,n.index);return}n.type&3&&(e=ZT(e)),xE(n,t,e,r,i,o)}function xE(n,t,e,r,i,o){if(n.type&3){let s=wn(n,t);r=o!=null?o(r,n.value||"",e):r,i.setProperty(s,e,r)}else n.type&12}function TE(n,t){let e=Cn(t,n);e[ne]&16||(e[ne]|=64)}function QT(n,t,e){let r=e.directiveStart,i=e.directiveEnd;Lr(e)&&ET(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||Tu(e,t);let o=e.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=Na(t,n,s,e);if(is(l,t),o!==null&&tM(t,s-r,l,a,e,o),ar(a)){let f=Cn(e.index,t);f[Qe]=Na(t,n,s,e)}}}function JT(n,t,e){let r=e.directiveStart,i=e.directiveEnd,o=e.index,s=H_();try{ui(o);for(let a=r;a<i;a++){let l=n.data[a],f=t[a];cu(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&XT(l,f)}}finally{ui(-1),cu(s)}}function XT(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function mg(n,t){let e=n.directiveRegistry,r=null;if(e)for(let i=0;i<e.length;i++){let o=e[i];lT(t,o.selectors,!1)&&(r??=[],ar(o)?r.unshift(o):r.push(o))}return r}function eM(n,t,e,r,i,o){let s=wn(n,t);ME(t[Me],s,o,n.value,e,r,i)}function ME(n,t,e,r,i,o,s){if(o==null)n.removeAttribute(t,i,e);else{let a=s==null?nr(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}function tM(n,t,e,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],f=s[a+1];Cm(r,e,l,f)}}function gg(n,t,e,r,i){let o=Be+e,s=t[q],a=i(s,t,n,r,e);t[o]=a,Xo(n,!0);let l=n.type===2;return l?(hE(t[Me],a,n),(P_()===0||Zo(n))&&is(a,t),F_()):is(a,t),hu()&&(!l||!Jm(n))&&hg(s,t,a,n),n}function vg(n){let t=n;return Wp()?V_():(t=t.parent,Xo(t,!1)),t}function nM(n,t){let e=n[ai];if(!e)return;let r;try{r=e.get(zt,null)}catch{r=null}r?.(t)}function nd(n,t,e,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let f=s[l],h=s[l+1],m=t.data[f];Cm(m,e[f],h,i),a=!0}if(o)for(let l of o){let f=e[l],h=t.data[l];Cm(h,f,r,i),a=!0}return a}function rM(n,t){let e=Cn(t,n),r=e[q];iM(r,e);let i=e[Vn];i!==null&&e[qo]===null&&(e[qo]=nE(i,e[ai])),De(18),yg(r,e,e[Qe]),De(19,e[Qe])}function iM(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function yg(n,t,e){du(t);try{let r=n.viewQuery;r!==null&&wm(1,r,e);let i=n.template;i!==null&&DE(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[or]?.finishViewCreation(n),n.staticContentQueries&&rE(n,t),n.staticViewQueries&&wm(2,n.viewQuery,e);let o=n.components;o!==null&&oM(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[ne]&=-5,fu()}}function oM(n,t){for(let e=0;e<t.length;e++)rM(n,t[e])}function rd(n,t,e,r){let i=te(null);try{let o=t.tView,a=n[ne]&4096?4096:16,l=sg(n,o,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),f=n[t.index];l[li]=f;let h=n[or];return h!==null&&(l[or]=h.createEmbeddedView(o)),yg(o,l,e),l}finally{te(i)}}function ka(n,t){return!t||t.firstChild===null||Wb(n)}function Pa(n,t,e,r,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&r.push(En(o)),Un(o)&&AE(o,r);let s=e.type;if(s&8)Pa(n,t,e.child,r);else if(s&32){let a=lg(e,t),l;for(;l=a();)r.push(l)}else if(s&16){let a=SE(t,e);if(Array.isArray(a))r.push(...a);else{let l=oi(t[dn]);Pa(l[q],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function AE(n,t){for(let e=et;e<n.length;e++){let r=n[e],i=r[q].firstChild;i!==null&&Pa(r[q],r,i,t)}n[ci]!==n[Vn]&&t.push(n[ci])}function OE(n){if(n[$i]!==null){for(let t of n[$i])t.impl.addSequence(t);n[$i].length=0}}var RE=[];function sM(n){return n[fn]??aM(n)}function aM(n){let t=RE.pop()??Object.create(cM);return t.lView=n,t}function lM(n){n.lView[fn]!==n&&(n.lView=null,RE.push(n))}var cM=Q(A({},Oo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Jo(n.lView)},consumerOnSignalRead(){this.lView[fn]=this}});function uM(n){let t=n[fn]??Object.create(dM);return t.lView=n,t}var dM=Q(A({},Oo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=oi(n.lView);for(;t&&!NE(t[q]);)t=oi(t);t&&jp(t)},consumerOnSignalRead(){this.lView[fn]=this}});function NE(n){return n.type!==2}function kE(n){if(n[wa]===null)return;let t=!0;for(;t;){let e=!1;for(let r of n[wa])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=e&&!!(n[ne]&8192)}}var fM=100;function PE(n,t=0){let r=n[ir].rendererFactory,i=!1;i||r.begin?.();try{hM(n,t)}finally{i||r.end?.()}}function hM(n,t){let e=qp();try{Yp(!0),xm(n,t);let r=0;for(;Da(n);){if(r===fM)throw new N(103,!1);r++,xm(n,1)}}finally{Yp(e)}}function pM(n,t,e,r){if(Gi(t))return;let i=t[ne],o=!1,s=!1;du(t);let a=!0,l=null,f=null;o||(NE(n)?(f=sM(t),l=No(f)):mc()===null?(a=!1,f=uM(t),l=No(f)):t[fn]&&(ca(t[fn]),t[fn]=null));try{Lp(t),B_(n.bindingStartIndex),e!==null&&DE(n,t,e,2,r);let h=(i&3)===3;if(!o)if(h){let g=n.preOrderCheckHooks;g!==null&&_u(t,g,null)}else{let g=n.preOrderHooks;g!==null&&bu(t,g,0,null),sm(t,0)}if(s||mM(t),kE(t),FE(t,0),n.contentQueries!==null&&rE(n,t),!o)if(h){let g=n.contentCheckHooks;g!==null&&_u(t,g)}else{let g=n.contentHooks;g!==null&&bu(t,g,1),sm(t,1)}vM(n,t);let m=n.components;m!==null&&jE(t,m,0);let v=n.viewQuery;if(v!==null&&wm(2,v,r),!o)if(h){let g=n.viewCheckHooks;g!==null&&_u(t,g)}else{let g=n.viewHooks;g!==null&&bu(t,g,2),sm(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[iu]){for(let g of t[iu])g();t[iu]=null}o||(OE(t),t[ne]&=-73)}catch(h){throw o||Jo(t),h}finally{f!==null&&(aa(f,l),a&&lM(f)),fu()}}function FE(n,t){for(let e=Yb(n);e!==null;e=Kb(e))for(let r=et;r<e.length;r++){let i=e[r];LE(i,t)}}function mM(n){for(let t=Yb(n);t!==null;t=Kb(t)){if(!(t[ne]&2))continue;let e=t[Hi];for(let r=0;r<e.length;r++){let i=e[r];jp(i)}}}function gM(n,t,e){De(18);let r=Cn(t,n);LE(r,e),De(19,r[Qe])}function LE(n,t){su(n)&&xm(n,t)}function xm(n,t){let r=n[q],i=n[ne],o=n[fn],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&la(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)pM(r,n,r.template,n[Qe]);else if(i&8192){let a=te(null);try{kE(n),FE(n,1);let l=r.components;l!==null&&jE(n,l,1),OE(n)}finally{te(a)}}}function jE(n,t,e){for(let r=0;r<t.length;r++)gM(n,t[r],e)}function vM(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)ui(~i);else{let o=i,s=e[++r],a=e[++r];z_(s,o);let l=t[o];De(24,l),a(2,l),De(25,l)}}}finally{ui(-1)}}function _g(n,t){let e=qp()?64:1088;for(n[ir].changeDetectionScheduler?.notify(t);n;){n[ne]|=e;let r=oi(n);if(Qo(n)&&!r)return n;n=r}return null}function VE(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function UE(n,t){let e=et+t;if(e<n.length)return n[e]}function id(n,t,e,r=!0){let i=t[q];if(yM(i,t,n,e),r){let s=Im(e,n),a=t[Me],l=a.parentNode(n[ci]);l!==null&&kT(i,n[bn],a,t,l,s)}let o=t[qo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function BE(n,t){let e=Fa(n,t);return e!==void 0&&Xu(e[q],e),e}function Fa(n,t){if(n.length<=et)return;let e=et+t,r=n[e];if(r){let i=r[li];i!==null&&i!==n&&fg(i,r),t>0&&(n[e-1][_n]=r[_n]);let o=ya(n,et+t);NT(r[q],r);let s=o[or];s!==null&&s.detachView(o[q]),r[lt]=null,r[_n]=null,r[ne]&=-129}return r}function yM(n,t,e,r){let i=et+r,o=e.length;r>0&&(e[i-1][_n]=t),r<o-et?(t[_n]=e[i],Cp(e,et+r,t)):(e.push(t),t[_n]=null),t[lt]=e;let s=t[li];s!==null&&e!==s&&$E(s,t);let a=t[or];a!==null&&a.insertView(n),au(t),t[ne]|=128}function $E(n,t){let e=n[Hi],r=t[lt];if(sr(r))n[ne]|=2;else{let i=r[lt][dn];t[dn]!==i&&(n[ne]|=2)}e===null?n[Hi]=[t]:e.push(t)}var di=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,e=t[q];return Pa(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e}get context(){return this._lView[Qe]}set context(t){this._lView[Qe]=t}get destroyed(){return Gi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[lt];if(Un(t)){let e=t[Ca],r=e?e.indexOf(this):-1;r>-1&&(Fa(t,r),ya(e,r))}this._attachedToViewContainer=!1}Xu(this._lView[q],this._lView)}onDestroy(t){Vp(this._lView,t)}markForCheck(){_g(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){au(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,PE(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new N(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Qo(this._lView),e=this._lView[li];e!==null&&!t&&fg(e,this._lView),CE(this._lView[q],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new N(902,!1);this._appRef=t;let e=Qo(this._lView),r=this._lView[li];r!==null&&!e&&$E(r,this._lView),au(this._lView)}};var fi=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=_M;constructor(e,r,i){this._declarationLView=e,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,r){return this.createEmbeddedViewImpl(e,r)}createEmbeddedViewImpl(e,r,i){let o=rd(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:r,dehydratedView:i});return new di(o)}}return n})();function _M(){return od(tt(),K())}function od(n,t){return n.type&4?new fi(t,n,as(n,t)):null}function za(n,t,e,r,i){let o=n.data[t];if(o===null)o=bM(n,t,e,r,i),$_()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=r,o.attrs=i;let s=j_();o.injectorIndex=s===null?-1:s.injectorIndex}return Xo(o,!0),o}function bM(n,t,e,r,i){let o=Gp(),s=Wp(),a=s?o:o&&o.parent,l=n.data[t]=wM(n,a,e,t,r,i);return EM(n,l,o,s),l}function EM(n,t,e,r){n.firstChild===null&&(n.firstChild=t),e!==null&&(r?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function wM(n,t,e,r,i,o){let s=t?t.injectorIndex:-1,a=0;return L_()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var d8=new RegExp(`^(\\d+)*(${Wx}|${Gx})*(.*)`);function CM(n){let t=n[Np]??[],r=n[lt][Me],i=[];for(let o of t)o.data[Xb]!==void 0?i.push(o):SM(o,r);n[Np]=i}function SM(n,t){let e=0,r=n.firstChild;if(r){let i=n.data[Jb];for(;e<i;){let o=r.nextSibling;fE(t,r,!1),r=o,e++}}}var DM=()=>null,IM=()=>null;function Tm(n,t){return DM(n,t)}function zE(n,t,e){return IM(n,t,e)}var HE=class{},sd=class{},Mm=class{resolveComponentFactory(t){throw new N(917,!1)}},Ha=class{static NULL=new Mm},Yi=class{},Jt=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>xM()}return n})();function xM(){let n=K(),t=tt(),e=Cn(t.index,n);return(sr(e)?e:n)[Me]}var GE=(()=>{class n{static \u0275prov=k({token:n,providedIn:"root",factory:()=>null})}return n})();var wu={},Am=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){let i=this.injector.get(t,wu,r);return i!==wu||e===wu?i:this.parentInjector.get(t,e,r)}};function Pu(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Jc(i,a);else if(o==2){let l=a,f=t[++s];r=Jc(r,l+": "+f+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}function C(n,t=0){let e=K();if(e===null)return V(n,t);let r=tt();return zb(r,e,wt(n),t)}function bg(){let n="invalid";throw new Error(n)}function WE(n,t,e,r,i){let o=r===null?null:{"":-1},s=i(n,e);if(s!==null){let a=s,l=null,f=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,l,f]=h.resolveHostDirectives(s);break}AM(n,t,e,a,o,l,f)}o!==null&&r!==null&&TM(e,r,o)}function TM(n,t,e){let r=n.localNames=[];for(let i=0;i<t.length;i+=2){let o=e[t[i+1]];if(o==null)throw new N(-301,!1);r.push(t[i],o)}}function MM(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function AM(n,t,e,r,i,o,s){let a=r.length,l=!1;for(let v=0;v<a;v++){let g=r[v];!l&&ar(g)&&(l=!0,MM(n,e,v)),ym(Tu(e,t),n,g.type)}FM(e,n.data.length,a);for(let v=0;v<a;v++){let g=r[v];g.providersResolver&&g.providersResolver(g)}let f=!1,h=!1,m=mE(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let v=0;v<a;v++){let g=r[v];if(e.mergedAttrs=rs(e.mergedAttrs,g.hostAttrs),RM(n,e,t,m,g),PM(m,g,i),s!==null&&s.has(g)){let[S,w]=s.get(g);e.directiveToIndex.set(g.type,[m,S+e.directiveStart,w+e.directiveStart])}else(o===null||!o.has(g))&&e.directiveToIndex.set(g.type,m);g.contentQueries!==null&&(e.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(e.flags|=64);let E=g.type.prototype;!f&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),f=!0),!h&&(E.ngOnChanges||E.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),h=!0),m++}OM(n,e,o)}function OM(n,t,e){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=n.data[r];if(e===null||!e.has(i))gb(0,t,i,r),gb(1,t,i,r),yb(t,r,!1);else{let o=e.get(i);vb(0,t,o,r),vb(1,t,o,r),yb(t,r,!0)}}}function gb(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),qE(t,o)}}function vb(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),qE(t,s)}}function qE(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function yb(n,t,e){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!e&&i===null||e&&o===null||ig(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&i.hasOwnProperty(l)){let f=i[l];for(let h of f)if(h===t){s??=[],s.push(l,r[a+1]);break}}else if(e&&o.hasOwnProperty(l)){let f=o[l];for(let h=0;h<f.length;h+=2)if(f[h]===t){s??=[],s.push(f[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function RM(n,t,e,r,i){n.data[r]=i;let o=i.factory||(i.factory=ii(i.type,!0)),s=new qi(o,ar(i),C,null);n.blueprint[r]=s,e[r]=s,NM(n,t,r,mE(n,e,i.hostVars,Ct),i)}function NM(n,t,e,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;kM(s)!=a&&s.push(a),s.push(e,r,o)}}function kM(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function PM(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;ar(t)&&(e[""]=n)}}function FM(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function Eg(n,t,e,r,i,o,s,a){let l=t[q],f=l.consts,h=Sn(f,s),m=za(l,n,e,r,h);return o&&WE(l,t,m,Sn(f,a),i),m.mergedAttrs=rs(m.mergedAttrs,m.attrs),m.attrs!==null&&Pu(m,m.attrs,!1),m.mergedAttrs!==null&&Pu(m,m.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,m),m}function wg(n,t){kb(n,t),kp(t)&&n.queries.elementEnd(t)}function LM(n,t,e,r,i,o){let s=t.consts,a=Sn(s,i),l=za(t,n,e,r,a);if(l.mergedAttrs=rs(l.mergedAttrs,l.attrs),o!=null){let f=Sn(s,o);l.localNames=[];for(let h=0;h<f.length;h+=2)l.localNames.push(f[h],-1)}return l.attrs!==null&&Pu(l,l.attrs,!1),l.mergedAttrs!==null&&Pu(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function Cg(n){return ad(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function YE(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),r;for(;!(r=e.next()).done;)t(r.value)}}function ad(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Sg(n,t,e){return n[t]=e}function jM(n,t){return n[t]}function Qt(n,t,e){if(e===Ct)return!1;let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function Dg(n,t,e,r){let i=Qt(n,t,e);return Qt(n,t+1,r)||i}function VM(n,t,e,r,i){let o=Dg(n,t,e,r);return Qt(n,t+2,i)||o}function Cu(n,t,e){return function r(i){let o=Lr(n)?Cn(n.index,t):t;_g(o,5);let s=t[Qe],a=_b(t,s,e,i),l=r.__ngNextListenerFn__;for(;l;)a=_b(t,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function _b(n,t,e,r){let i=te(null);try{return De(6,t,e),e(r)!==!1}catch(o){return nM(n,o),!1}finally{De(7,t,e),te(i)}}function KE(n,t,e,r,i,o,s,a){let l=Zo(n),f=!1,h=null;if(!r&&l&&(h=BM(t,e,o,n.index)),h!==null){let m=h.__ngLastListenerFn__||h;m.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,f=!0}else{let m=wn(n,e),v=r?r(m):m;Yx(e,v,o,a);let g=i.listen(v,o,a);if(!UM(o)){let E=r?S=>r(En(S[n.index])):n.index;ZE(E,t,e,o,a,g,!1)}}return f}function UM(n){return n.startsWith("animation")||n.startsWith("transition")}function BM(n,t,e,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===e&&i[o+1]===r){let a=t[Yo],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function ZE(n,t,e,r,i,o,s){let a=t.firstCreatePass?Bp(t):null,l=Up(e),f=l.length;l.push(i,o),a&&a.push(r,n,f,(f+1)*(s?-1:1))}function bb(n,t,e,r,i,o){let s=t[e],a=t[q],f=a.data[e].outputs[r],m=s[f].subscribe(o);ZE(n.index,a,t,i,o,m,!0)}var Om=Symbol("BINDING");var Fu=class extends Ha{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Fr(t);return new Ki(e,this.ngModule)}};function $M(n){return Object.keys(n).map(t=>{let[e,r,i]=n[t],o={propName:e,templateName:t,isSignal:(r&Qu.SignalBased)!==0};return i&&(o.transform=i),o})}function zM(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function HM(n,t,e){let r=t instanceof Ze?t:t?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Am(e,r):e}function GM(n){let t=n.get(Yi,null);if(t===null)throw new N(407,!1);let e=n.get(GE,null),r=n.get(Rr,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:r,ngReflect:!1}}function WM(n,t){let e=QE(n);return uE(t,e,e==="svg"?T_:e==="math"?M_:null)}function QE(n){return(n.selectors[0][0]||"div").toLowerCase()}var Ki=class extends sd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=$M(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=zM(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=fT(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,r,i,o,s){De(22);let a=te(null);try{let l=this.componentDef,f=qM(r,l,s,o),h=HM(l,i||this.ngModule,t),m=GM(h),v=m.rendererFactory.createRenderer(null,l),g=r?qT(v,r,l.encapsulation,h):WM(l,v),E=s?.some(Eb)||o?.some(D=>typeof D!="function"&&D.bindings.some(Eb)),S=sg(null,f,null,512|pE(l),null,null,m,v,h,null,nE(g,h,!0));S[Be]=g,du(S);let w=null;try{let D=Eg(Be,S,2,"#host",()=>f.directiveRegistry,!0,0);hE(v,g,D),is(g,S),td(f,S,D),Xm(f,D,S),wg(f,D),e!==void 0&&KM(D,this.ngContentSelectors,e),w=Cn(D.index,S),S[Qe]=w[Qe],yg(f,S,null)}catch(D){throw w!==null&&bm(w),bm(S),D}finally{De(23),fu()}return new Lu(this.componentType,S,!!E)}finally{te(a)}}};function qM(n,t,e,r){let i=n?["ng-version","20.3.7"]:hT(t.selectors[0]),o=null,s=null,a=0;if(e)for(let h of e)a+=h[Om].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let m=r[h];if(typeof m!="function")for(let v of m.bindings){a+=v[Om].requiredVars;let g=h+1;v.create&&(v.targetIdx=g,(o??=[]).push(v)),v.update&&(v.targetIdx=g,(s??=[]).push(v))}}let l=[t];if(r)for(let h of r){let m=typeof h=="function"?h:h.type,v=xp(m);l.push(v)}return og(0,null,YM(o,s),1,a,l,null,null,null,[i],null)}function YM(n,t){return!n&&!t?null:e=>{if(e&1&&n)for(let r of n)r.create();if(e&2&&t)for(let r of t)r.update()}}function Eb(n){let t=n[Om].kind;return t==="input"||t==="twoWay"}var Lu=class extends HE{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e,r){super(),this._rootLView=e,this._hasInputBindings=r,this._tNode=Sa(e[q],Be),this.location=as(this._tNode,e),this.instance=Cn(this._tNode.index,e)[Qe],this.hostView=this.changeDetectorRef=new di(e,void 0),this.componentType=t}setInput(t,e){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let i=this._rootLView,o=nd(r,i[q],i,t,e);this.previousInputValues.set(t,e);let s=Cn(r.index,i);_g(s,1)}get injector(){return new Wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function KM(n,t,e){let r=n.projection=[];for(let i=0;i<t.length;i++){let o=e[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ur=(()=>{class n{static __NG_ELEMENT_ID__=ZM}return n})();function ZM(){let n=tt();return XE(n,K())}var QM=Ur,JE=class extends QM{_lContainer;_hostTNode;_hostLView;constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return as(this._hostTNode,this._hostLView)}get injector(){return new Wi(this._hostTNode,this._hostLView)}get parentInjector(){let t=Ym(this._hostTNode,this._hostLView);if(Lb(t)){let e=Iu(t,this._hostLView),r=Du(t),i=e[q].data[r+8];return new Wi(i,e)}else return new Wi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=wb(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-et}createEmbeddedView(t,e,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Tm(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,i,ka(this._hostTNode,s)),a}createComponent(t,e,r,i,o,s,a){let l=t&&!_x(t),f;if(l)f=e;else{let w=e||{};f=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef,s=w.directives,a=w.bindings}let h=l?t:new Ki(Fr(t)),m=r||this.parentInjector;if(!o&&h.ngModule==null){let D=(l?m:this.parentInjector).get(Ze,null);D&&(o=D)}let v=Fr(h.componentType??{}),g=Tm(this._lContainer,v?.id??null),E=g?.firstChild??null,S=h.create(m,i,E,o,s,a);return this.insertImpl(S.hostView,f,ka(this._hostTNode,g)),S}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(O_(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=i[lt],f=new JE(l,l[bn],l[lt]);f.detach(f.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return id(s,i,o,r),t.attachToViewContainerRef(),Cp(cm(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=wb(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=Fa(this._lContainer,e);r&&(ya(cm(this._lContainer),e),Xu(r[q],r))}detach(t){let e=this._adjustIndex(t,-1),r=Fa(this._lContainer,e);return r&&ya(cm(this._lContainer),e)!=null?new di(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function wb(n){return n[Ca]}function cm(n){return n[Ca]||(n[Ca]=[])}function XE(n,t){let e,r=t[n.index];return Un(r)?e=r:(e=VE(r,t,null,n),t[n.index]=e,ag(t,e)),XM(e,t,n,r),new JE(e,n,t)}function JM(n,t){let e=n[Me],r=e.createComment(""),i=wn(t,n),o=e.parentNode(i);return Ou(e,o,r,e.nextSibling(i),!1),r}var XM=nA,eA=()=>!1;function tA(n,t,e){return eA(n,t,e)}function nA(n,t,e,r){if(n[ci])return;let i;e.type&8?i=En(r):i=JM(t,e),n[ci]=i}var Rm=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Nm=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let r=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)Ig(t,e).matches!==null&&this.queries[e].setDirty()}},ju=class{flags;read;predicate;constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=uA(t):this.predicate=t}},km=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){let i=e!==null?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Pm=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,e,rA(e,o)),this.matchTNodeWithReadOption(t,e,Eu(e,t,o,!1,!1))}else r===fi?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Eu(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===yt||i===Ur||i===fi&&e.type&4)this.addMatch(e.index,-2);else{let o=Eu(e,t,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function rA(n,t){let e=n.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1]}return null}function iA(n,t){return n.type&11?as(n,t):n.type&4?od(n,t):null}function oA(n,t,e,r){return e===-1?iA(t,n):e===-2?sA(n,t,r):Na(n,n[q],e,t)}function sA(n,t,e){if(e===yt)return as(t,n);if(e===fi)return od(t,n);if(e===Ur)return XE(t,n)}function ew(n,t,e,r){let i=t[or].queries[r];if(i.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let f=s[l];if(f<0)a.push(null);else{let h=o[f];a.push(oA(t,h,s[l+1],e.metadata.read))}}i.matches=a}return i.matches}function Fm(n,t,e,r){let i=n.queries.getByIndex(e),o=i.matches;if(o!==null){let s=ew(n,t,i,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let f=o[a+1],h=t[-l];for(let m=et;m<h.length;m++){let v=h[m];v[li]===v[lt]&&Fm(v[q],v,f,r)}if(h[Hi]!==null){let m=h[Hi];for(let v=0;v<m.length;v++){let g=m[v];Fm(g[q],g,f,r)}}}}}return r}function aA(n,t){return n[or].queries[t].queryList}function tw(n,t,e){let r=new Mu((e&4)===4);return k_(n,t,r,r.destroy),(t[or]??=new Nm).queries.push(new Rm(r))-1}function lA(n,t,e){let r=Pe();return r.firstCreatePass&&(nw(r,new ju(n,t,e),-1),(t&2)===2&&(r.staticViewQueries=!0)),tw(r,K(),t)}function cA(n,t,e,r){let i=Pe();if(i.firstCreatePass){let o=tt();nw(i,new ju(t,e,r),o.index),dA(i,n),(e&2)===2&&(i.staticContentQueries=!0)}return tw(i,K(),e)}function uA(n){return n.split(",").map(t=>t.trim())}function nw(n,t,e){n.queries===null&&(n.queries=new km),n.queries.track(new Pm(t,e))}function dA(n,t){let e=n.contentQueries||(n.contentQueries=[]),r=e.length?e[e.length-1]:-1;t!==r&&e.push(n.queries.length-1,t)}function Ig(n,t){return n.queries.getByIndex(t)}function fA(n,t){let e=n[q],r=Ig(e,t);return r.crossesNgTemplate?Fm(e,n,t,[]):ew(e,n,r,t)}var Zi=class{},ld=class{};var Vu=class extends Zi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Fu(this);constructor(t,e,r,i=!0){super(),this.ngModuleType=t,this._parent=e;let o=Ip(t);this._bootstrapComponents=lE(o.bootstrap),this._r3Injector=Xp(t,e,[{provide:Zi,useValue:this},{provide:Ha,useValue:this.componentFactoryResolver},...r],Or(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Uu=class extends ld{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Vu(this.moduleType,t,[])}};var La=class extends Zi{injector;componentFactoryResolver=new Fu(this);instance=null;constructor(t){super();let e=new ji([...t.providers,{provide:Zi,useValue:this},{provide:Ha,useValue:this.componentFactoryResolver}],t.parent||ba(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function us(n,t,e=null){return new La({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var hA=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=Tp(!1,e.type),i=r.length>0?us([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=k({token:n,providedIn:"environment",factory:()=>new n(V(Ze))})}return n})();function fe(n){return Va(()=>{let t=rw(n),e=Q(A({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Km.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(hA).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Vr.Emulated,styles:n.styles||Bt,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&Wn("NgStandalone"),iw(e);let r=n.dependencies;return e.directiveDefs=Cb(r,pA),e.pipeDefs=Cb(r,b_),e.id=vA(e),e})}function pA(n){return Fr(n)||xp(n)}function In(n){return Va(()=>({type:n.type,bootstrap:n.bootstrap||Bt,declarations:n.declarations||Bt,imports:n.imports||Bt,exports:n.exports||Bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function mA(n,t){if(n==null)return si;let e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=Qu.None,l=null),e[o]=[r,a,l],t[o]=s}return e}function gA(n){if(n==null)return si;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function ve(n){return Va(()=>{let t=rw(n);return iw(t),t})}function Ga(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function rw(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||si,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Bt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:mA(n.inputs,t),outputs:gA(n.outputs),debugInfo:null}}function iw(n){n.features?.forEach(t=>t(n))}function Cb(n,t){return n?()=>{let e=typeof n=="function"?n():n,r=[];for(let i of e){let o=t(i);o!==null&&r.push(o)}return r}:null}function vA(n){let t=0,e=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function yA(n){return Object.getPrototypeOf(n.prototype).constructor}function nt(n){let t=yA(n.type),e=!0,r=[n];for(;t;){let i;if(ar(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new N(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);let s=n;s.inputs=um(n.inputs),s.declaredInputs=um(n.declaredInputs),s.outputs=um(n.outputs);let a=i.hostBindings;a&&CA(n,a);let l=i.viewQuery,f=i.contentQueries;if(l&&EA(n,l),f&&wA(n,f),_A(n,i),f_(n.outputs,i.outputs),ar(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===nt&&(e=!1)}}t=Object.getPrototypeOf(t)}bA(r)}function _A(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let r=t.inputs[e];r!==void 0&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e])}}function bA(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=rs(i.hostAttrs,e=rs(e,i.hostAttrs))}}function um(n){return n===si?{}:n===Bt?[]:n}function EA(n,t){let e=n.viewQuery;e?n.viewQuery=(r,i)=>{t(r,i),e(r,i)}:n.viewQuery=t}function wA(n,t){let e=n.contentQueries;e?n.contentQueries=(r,i,o)=>{t(r,i,o),e(r,i,o)}:n.contentQueries=t}function CA(n,t){let e=n.hostBindings;e?n.hostBindings=(r,i)=>{t(r,i),e(r,i)}:n.hostBindings=t}function ow(n,t,e,r,i,o,s,a){if(e.firstCreatePass){n.mergedAttrs=rs(n.mergedAttrs,n.attrs);let h=n.tView=og(2,n,i,o,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,n),h.queries=e.queries.embeddedTView(n))}a&&(n.flags|=a),Xo(n,!1);let l=DA(e,t,n,r);hu()&&hg(e,t,l,n),is(l,t);let f=VE(l,t,l,n);t[r+Be]=f,ag(t,f),tA(f,n,t)}function SA(n,t,e,r,i,o,s,a,l,f,h){let m=e+Be,v;return t.firstCreatePass?(v=za(t,m,4,s||null,a||null),lu()&&WE(t,n,v,Sn(t.consts,f),mg),kb(t,v)):v=t.data[m],ow(v,n,t,e,r,i,o,l),Zo(v)&&td(t,n,v),f!=null&&$a(n,v,h),v}function Bu(n,t,e,r,i,o,s,a,l,f,h){let m=e+Be,v;if(t.firstCreatePass){if(v=za(t,m,4,s||null,a||null),f!=null){let g=Sn(t.consts,f);v.localNames=[];for(let E=0;E<g.length;E+=2)v.localNames.push(g[E],-1)}}else v=t.data[m];return ow(v,n,t,e,r,i,o,l),f!=null&&$a(n,v,h),v}function x(n,t,e,r,i,o,s,a){let l=K(),f=Pe(),h=Sn(f.consts,o);return SA(l,f,n,t,e,r,i,h,void 0,s,a),x}var DA=IA;function IA(n,t,e,r){return Ta(!0),t[Me].createComment("")}var xg=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Tg=new U("");function hi(n){return!!n&&typeof n.then=="function"}function Mg(n){return!!n&&typeof n.subscribe=="function"}var Ag=new U("");function cd(n){return rr([{provide:Ag,multi:!0,useValue:n}])}var Og=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=I(Ag,{optional:!0})??[];injector=I($t);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=vt(this.injector,i);if(hi(o))e.push(o);else if(Mg(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wa=new U("");function sw(){Fh(()=>{let n="";throw new N(600,n)})}function aw(n){return n.isBoundToModule}var xA=10;var Br=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=I(zt);afterRenderManager=I(dg);zonelessEnabled=I(Ma);rootEffectScheduler=I(om);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ue;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=I(lr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ie(e=>!e))}constructor(){I(Ji,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=I(Ze);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){return this.bootstrapImpl(e,r)}bootstrapImpl(e,r,i=$t.NULL){return this._injector.get(He).run(()=>{De(10);let s=e instanceof sd;if(!this._injector.get(Og).done){let E="";throw new N(405,E)}let l;s?l=e:l=this._injector.get(Ha).resolveComponentFactory(e),this.componentTypes.push(l.componentType);let f=aw(l)?void 0:this._injector.get(Zi),h=r||l.selector,m=l.create(i,[],h,f),v=m.location.nativeElement,g=m.injector.get(Tg,null);return g?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),Ra(this.components,m),g?.unregisterApplication(v)}),this._loadComponent(m),De(11,m),m})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){De(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ju.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new N(101,!1);let e=te(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,te(e),this.afterTick.next(),De(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Yi,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<xA;)De(14),this.synchronizeOnce(),De(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Da(i))continue;let o=r&&!this.zonelessEnabled?0:1;PE(i,o),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Da(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;Ra(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(e),this._injector.get(Wa,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Ra(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new N(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ra(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function ds(n,t){let e=K(),r=jr();if(Qt(e,r,t)){let i=Pe(),o=es();if(nd(o,i,e,n,t))Lr(o)&&TE(e,o.index);else{let a=wn(o,e);ME(e[Me],a,null,o.value,n,t,null)}}return ds}function fs(n,t,e,r){let i=K(),o=jr();if(Qt(i,o,t)){let s=Pe(),a=es();eM(a,i,n,t,e,r)}return fs}var y8=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Lm=class{destroy(t){}updateValue(t,e){}swap(t,e){let r=Math.min(t,e),i=Math.max(t,e),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(t,e){this.attach(e,this.detach(t,!0))}};function dm(n,t,e,r,i){return n===e&&Object.is(t,r)?1:Object.is(i(n,t),i(e,r))?-1:0}function TA(n,t,e){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(t)){let l=t.length-1;for(;o<=s&&o<=l;){let f=n.at(o),h=t[o],m=dm(o,f,o,h,e);if(m!==0){m<0&&n.updateValue(o,h),o++;continue}let v=n.at(s),g=t[l],E=dm(s,v,l,g,e);if(E!==0){E<0&&n.updateValue(s,g),s--,l--;continue}let S=e(o,f),w=e(s,v),D=e(o,h);if(Object.is(D,w)){let G=e(l,g);Object.is(G,S)?(n.swap(o,s),n.updateValue(s,g),l--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new $u,i??=Db(n,o,s,e),jm(n,r,o,D))n.updateValue(o,h),o++,s++;else if(i.has(D))r.set(S,n.detach(o)),s--;else{let G=n.create(o,t[o]);n.attach(o,G),o++,s++}}for(;o<=l;)Sb(n,r,e,o,t[o]),o++}else if(t!=null){let l=t[Symbol.iterator](),f=l.next();for(;!f.done&&o<=s;){let h=n.at(o),m=f.value,v=dm(o,h,o,m,e);if(v!==0)v<0&&n.updateValue(o,m),o++,f=l.next();else{r??=new $u,i??=Db(n,o,s,e);let g=e(o,m);if(jm(n,r,o,g))n.updateValue(o,m),o++,s++,f=l.next();else if(!i.has(g))n.attach(o,n.create(o,m)),o++,s++,f=l.next();else{let E=e(o,h);r.set(E,n.detach(o)),s--}}}for(;!f.done;)Sb(n,r,e,n.length,f.value),f=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function jm(n,t,e,r){return t!==void 0&&t.has(r)?(n.attach(e,t.get(r)),t.delete(r),!0):!1}function Sb(n,t,e,r,i){if(jm(n,t,r,e(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function Db(n,t,e,r){let i=new Set;for(let o=t;o<=e;o++)i.add(r(o,n.at(o)));return i}var $u=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,r]of this.kvMap)if(t(r,e),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,e)}}};function J(n,t,e,r,i,o,s,a){Wn("NgControlFlow");let l=K(),f=Pe(),h=Sn(f.consts,o);return Bu(l,f,n,t,e,r,i,h,256,s,a),Rg}function Rg(n,t,e,r,i,o,s,a){Wn("NgControlFlow");let l=K(),f=Pe(),h=Sn(f.consts,o);return Bu(l,f,n,t,e,r,i,h,512,s,a),Rg}function X(n,t){Wn("NgControlFlow");let e=K(),r=jr(),i=e[r]!==Ct?e[r]:-1,o=i!==-1?zu(e,Be+i):void 0,s=0;if(Qt(e,r,n)){let a=te(null);try{if(o!==void 0&&BE(o,s),n!==-1){let l=Be+n,f=zu(e,l),h=$m(e[q],l),m=zE(f,h,e),v=rd(e,h,t,{dehydratedView:m});id(f,v,s,ka(h,m))}}finally{te(a)}}else if(o!==void 0){let a=UE(o,s);a!==void 0&&(a[Qe]=t)}}var Vm=class{lContainer;$implicit;$index;constructor(t,e,r){this.lContainer=t,this.$implicit=e,this.$index=r}get $count(){return this.lContainer.length-et}};function Ng(n){return n}function pi(n,t){return t}var Um=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,e,r){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=r}};function St(n,t,e,r,i,o,s,a,l,f,h,m,v){Wn("NgControlFlow");let g=K(),E=Pe(),S=l!==void 0,w=K(),D=a?s.bind(w[dn][Qe]):s,G=new Um(S,D);w[Be+n]=G,Bu(g,E,n+1,t,e,r,i,Sn(E.consts,o),256),S&&Bu(g,E,n+2,l,f,h,m,Sn(E.consts,v),512)}var Bm=class extends Lm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,e,r){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=r}get length(){return this.lContainer.length-et}at(t){return this.getLView(t)[Qe].$implicit}attach(t,e){let r=e[qo];this.needsIndexUpdate||=t!==this.length,id(this.lContainer,e,t,ka(this.templateTNode,r))}detach(t,e){return this.needsIndexUpdate||=t!==this.length-1,e&&MA(this.lContainer,t),AA(this.lContainer,t)}create(t,e){let r=Tm(this.lContainer,this.templateTNode.tView.ssrId),i=rd(this.hostLView,this.templateTNode,new Vm(this.lContainer,e,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){Xu(t[q],t),this.operationsCounter?.recordDestroy()}updateValue(t,e){this.getLView(t)[Qe].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Qe].$index=t}getLView(t){return OA(this.lContainer,t)}};function Dt(n){let t=te(null),e=Bn();try{let r=K(),i=r[q],o=r[e],s=e+1,a=zu(r,s);if(o.liveCollection===void 0){let f=$m(i,s);o.liveCollection=new Bm(a,r,f)}else o.liveCollection.reset();let l=o.liveCollection;if(TA(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let f=jr(),h=l.length===0;if(Qt(r,f,h)){let m=e+2,v=zu(r,m);if(h){let g=$m(i,m),E=zE(v,g,r),S=rd(r,g,void 0,{dehydratedView:E});id(v,S,0,ka(g,E))}else i.firstUpdatePass&&CM(v),BE(v,0)}}}finally{te(t)}}function zu(n,t){return n[t]}function MA(n,t){if(n.length<=et)return;let e=et+t,r=n[e];r&&r[zi]&&(r[zi].skipLeaveAnimations=!0)}function AA(n,t){return Fa(n,t)}function OA(n,t){return UE(n,t)}function $m(n,t){return Sa(n,t)}function _(n,t,e){let r=K(),i=jr();if(Qt(r,i,t)){let o=Pe(),s=es();IE(s,r,n,t,r[Me],e)}return _}function zm(n,t,e,r,i){nd(t,n,e,i?"class":"style",r)}function u(n,t,e,r){let i=K(),o=i[q],s=n+Be,a=o.firstCreatePass?Eg(s,i,2,t,mg,lu(),e,r):o.data[s];if(gg(a,i,n,t,lw),Zo(a)){let l=i[q];td(l,i,a),Xm(l,a,i)}return r!=null&&$a(i,a),u}function c(){let n=Pe(),t=tt(),e=vg(t);return n.firstCreatePass&&wg(n,e),zp(e)&&Hp(),$p(),e.classesWithoutHost!=null&&Dx(e)&&zm(n,e,K(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Ix(e)&&zm(n,e,K(),e.stylesWithoutHost,!1),c}function O(n,t,e,r){return u(n,t,e,r),c(),O}function Ae(n,t,e,r){let i=K(),o=i[q],s=n+Be,a=o.firstCreatePass?LM(s,o,2,t,e,r):o.data[s];return gg(a,i,n,t,lw),r!=null&&$a(i,a),Ae}function Ge(){let n=tt(),t=vg(n);return zp(t)&&Hp(),$p(),Ge}function hs(n,t,e,r){return Ae(n,t,e,r),Ge(),hs}var lw=(n,t,e,r,i)=>(Ta(!0),uE(t[Me],r,Z_()));function ud(n,t,e){let r=K(),i=r[q],o=n+Be,s=i.firstCreatePass?Eg(o,r,8,"ng-container",mg,lu(),t,e):i.data[o];if(gg(s,r,n,"ng-container",RA),Zo(s)){let a=r[q];td(a,r,s),Xm(a,s,r)}return e!=null&&$a(r,s),ud}function dd(){let n=Pe(),t=tt(),e=vg(t);return n.firstCreatePass&&wg(n,e),dd}var RA=(n,t,e,r,i)=>(Ta(!0),gT(t[Me],""));function se(){return K()}function fd(n,t,e){let r=K(),i=jr();if(Qt(r,i,t)){let o=Pe(),s=es();xE(s,r,n,t,r[Me],e)}return fd}var vu=void 0;function NA(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var kA=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vu,"{1} 'at' {0}",vu],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",NA],fm={};function Xt(n){let t=PA(n),e=Ib(t);if(e)return e;let r=t.split("-")[0];if(e=Ib(r),e)return e;if(r==="en")return kA;throw new N(701,!1)}function Ib(n){return n in fm||(fm[n]=kr.ng&&kr.ng.common&&kr.ng.common.locales&&kr.ng.common.locales[n]),fm[n]}var We=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(We||{});function PA(n){return n.toLowerCase().replace(/_/g,"-")}var qa="en-US";var FA=qa;function cw(n){typeof n=="string"&&(FA=n.toLowerCase().replace(/_/g,"-"))}function T(n,t,e){let r=K(),i=Pe(),o=tt();return uw(i,r,r[Me],o,n,t,e),T}function Xi(n,t,e){let r=K(),i=Pe(),o=tt();return(o.type&3||e)&&KE(o,i,r,e,r[Me],n,t,Cu(o,r,t)),Xi}function uw(n,t,e,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=Cu(r,t,o),KE(r,n,t,s,e,i,o,l)&&(a=!1)),a){let f=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let m=0;m<h.length;m+=2){let v=h[m],g=h[m+1];l??=Cu(r,t,o),bb(r,t,v,g,i,l)}if(f&&f.length)for(let m of f)l??=Cu(r,t,o),bb(r,t,m,i,i,l)}}function b(n=1){return K_(n)}function kg(n,t,e,r){cA(n,t,e,r)}function Pg(n,t,e){lA(n,t,e)}function Ya(n){let t=K(),e=Pe(),r=Zp();uu(r+1);let i=Ig(e,r);if(n.dirty&&A_(t)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=fA(t,r);n.reset(o,Vx),n.notifyOnChanges()}return!0}return!1}function Ka(){return aA(K(),Zp())}function eo(n){let t=U_();return ou(t,Be+n)}function yu(n,t){return n<<17|t<<2}function Qi(n){return n>>17&32767}function LA(n){return(n&2)==2}function jA(n,t){return n&131071|t<<17}function Hm(n){return n|2}function ss(n){return(n&131068)>>2}function hm(n,t){return n&-131069|t<<2}function VA(n){return(n&1)===1}function Gm(n){return n|1}function UA(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Qi(s),l=ss(s);n[r]=e;let f=!1,h;if(Array.isArray(e)){let m=e;h=m[1],(h===null||Wo(m,h)>0)&&(f=!0)}else h=e;if(i)if(l!==0){let v=Qi(n[a+1]);n[r+1]=yu(v,a),v!==0&&(n[v+1]=hm(n[v+1],r)),n[a+1]=jA(n[a+1],r)}else n[r+1]=yu(a,0),a!==0&&(n[a+1]=hm(n[a+1],r)),a=r;else n[r+1]=yu(l,0),a===0?a=r:n[l+1]=hm(n[l+1],r),l=r;f&&(n[r+1]=Hm(n[r+1])),xb(n,h,r,!0),xb(n,h,r,!1),BA(t,h,n,r,o),s=yu(a,l),o?t.classBindings=s:t.styleBindings=s}function BA(n,t,e,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&Wo(o,t)>=0&&(e[r+1]=Gm(e[r+1]))}function xb(n,t,e,r){let i=n[e+1],o=t===null,s=r?Qi(i):ss(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],f=n[s+1];$A(l,t)&&(a=!0,n[s+1]=r?Gm(f):Hm(f)),s=r?Qi(f):ss(f)}a&&(n[e+1]=r?Hm(i):Gm(i))}function $A(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?Wo(n,t)>=0:!1}var Hn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zA(n){return n.substring(Hn.key,Hn.keyEnd)}function HA(n){return GA(n),dw(n,fw(n,0,Hn.textEnd))}function dw(n,t){let e=Hn.textEnd;return e===t?-1:(t=Hn.keyEnd=WA(n,Hn.key=t,e),fw(n,t,e))}function GA(n){Hn.key=0,Hn.keyEnd=0,Hn.value=0,Hn.valueEnd=0,Hn.textEnd=n.length}function fw(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function WA(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function ur(n,t,e){return hw(n,t,e,!1),ur}function Ie(n,t){return hw(n,t,null,!0),Ie}function mi(n){YA(eO,qA,n,!0)}function qA(n,t){for(let e=HA(t);e>=0;e=dw(t,e))nu(n,zA(t),!0)}function hw(n,t,e,r){let i=K(),o=Pe(),s=xa(2);if(o.firstUpdatePass&&mw(o,n,s,r),t!==Ct&&Qt(i,s,t)){let a=o.data[Bn()];gw(o,a,i,i[Me],n,i[s+1]=nO(t,e),r,s)}}function YA(n,t,e,r){let i=Pe(),o=xa(2);i.firstUpdatePass&&mw(i,null,o,r);let s=K();if(e!==Ct&&Qt(s,o,e)){let a=i.data[Bn()];if(vw(a,r)&&!pw(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=Jc(l,e||"")),zm(i,a,s,e,r)}else tO(i,a,s,s[Me],s[o+1],s[o+1]=XA(n,t,e),r,o)}}function pw(n,t){return t>=n.expandoStartIndex}function mw(n,t,e,r){let i=n.data;if(i[e+1]===null){let o=i[Bn()],s=pw(n,e);vw(o,r)&&t===null&&!s&&(t=!1),t=KA(i,o,t,r),UA(i,o,t,e,s,r)}}function KA(n,t,e,r){let i=G_(n),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(e=pm(null,n,t,e,r),e=ja(e,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==i)if(e=pm(i,n,t,e,r),o===null){let l=ZA(n,t,r);l!==void 0&&Array.isArray(l)&&(l=pm(null,n,t,l[1],r),l=ja(l,t.attrs,r),QA(n,t,r,l))}else o=JA(n,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),e}function ZA(n,t,e){let r=e?t.classBindings:t.styleBindings;if(ss(r)!==0)return n[Qi(r)]}function QA(n,t,e,r){let i=e?t.classBindings:t.styleBindings;n[Qi(i)]=r}function JA(n,t,e){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ja(r,s,e)}return ja(r,t.attrs,e)}function pm(n,t,e,r,i){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],r=ja(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),r}function ja(n,t,e){let r=e?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),nu(n,s,e?!0:t[++o]))}return n===void 0?null:n}function XA(n,t,e){if(e==null||e==="")return Bt;let r=[],i=cs(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function eO(n,t,e){let r=String(t);r!==""&&!r.includes(" ")&&nu(n,r,e)}function tO(n,t,e,r,i,o,s,a){i===Ct&&(i=Bt);let l=0,f=0,h=0<i.length?i[0]:null,m=0<o.length?o[0]:null;for(;h!==null||m!==null;){let v=l<i.length?i[l+1]:void 0,g=f<o.length?o[f+1]:void 0,E=null,S;h===m?(l+=2,f+=2,v!==g&&(E=m,S=g)):m===null||h!==null&&h<m?(l+=2,E=h):(f+=2,E=m,S=g),E!==null&&gw(n,t,e,r,E,S,s,a),h=l<i.length?i[l]:null,m=f<o.length?o[f]:null}}function gw(n,t,e,r,i,o,s,a){if(!(t.type&3))return;let l=n.data,f=l[a+1],h=VA(f)?Tb(l,t,e,i,ss(f),s):void 0;if(!Hu(h)){Hu(o)||LA(f)&&(o=Tb(l,null,e,i,a,s));let m=Pp(Bn(),e);WT(r,s,m,i,o)}}function Tb(n,t,e,r,i,o){let s=t===null,a;for(;i>0;){let l=n[i],f=Array.isArray(l),h=f?l[1]:l,m=h===null,v=e[i+1];v===Ct&&(v=m?Bt:void 0);let g=m?ru(v,r):h===r?v:void 0;if(f&&!Hu(g)&&(g=ru(l,r)),Hu(g)&&(a=g,s))return a;let E=n[i+1];i=s?Qi(E):ss(E)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=ru(l,r))}return a}function Hu(n){return n!==void 0}function nO(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=Or(cs(n)))),n}function vw(n,t){return(n.flags&(t?8:16))!==0}function d(n,t=""){let e=K(),r=Pe(),i=n+Be,o=r.firstCreatePass?za(r,i,1,t,null):r.data[i],s=rO(r,e,o,t,n);e[i]=s,hu()&&hg(r,e,s,o),Xo(o,!1)}var rO=(n,t,e,r,i)=>(Ta(!0),pT(t[Me],r));function yw(n,t,e,r=""){return Qt(n,jr(),e)?t+nr(e)+r:Ct}function iO(n,t,e,r,i,o=""){let s=Kp(),a=Dg(n,s,e,i);return xa(2),a?t+nr(e)+r+nr(i)+o:Ct}function oO(n,t,e,r,i,o,s,a=""){let l=Kp(),f=VM(n,l,e,i,s);return xa(3),f?t+nr(e)+r+nr(i)+o+nr(s)+a:Ct}function R(n){return M("",n),R}function M(n,t,e){let r=K(),i=yw(r,n,t,e);return i!==Ct&&Fg(r,Bn(),i),M}function be(n,t,e,r,i){let o=K(),s=iO(o,n,t,e,r,i);return s!==Ct&&Fg(o,Bn(),s),be}function hd(n,t,e,r,i,o,s){let a=K(),l=oO(a,n,t,e,r,i,o,s);return l!==Ct&&Fg(a,Bn(),l),hd}function Fg(n,t,e){let r=Pp(t,n);mT(n[Me],r,e)}function ce(n,t,e){nm(t)&&(t=t());let r=K(),i=jr();if(Qt(r,i,t)){let o=Pe(),s=es();IE(s,r,n,t,r[Me],e)}return ce}function he(n,t){let e=nm(n);return e&&n.set(t),e}function ue(n,t){let e=K(),r=Pe(),i=tt();return uw(r,e,e[Me],i,n,t),ue}function Za(n,t,e=""){return yw(K(),n,t,e)}function sO(n,t,e){let r=Pe();if(r.firstCreatePass){let i=ar(n);Wm(e,r.data,r.blueprint,i,!0),Wm(t,r.data,r.blueprint,i,!1)}}function Wm(n,t,e,r,i){if(n=wt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Wm(n[o],t,e,r,i);else{let o=Pe(),s=K(),a=tt(),l=Li(n)?n:wt(n.provide),f=Ap(n),h=a.providerIndexes&1048575,m=a.directiveStart,v=a.providerIndexes>>20;if(Li(n)||!n.multi){let g=new qi(f,i,C,null),E=gm(l,t,i?h:h+v,m);E===-1?(ym(Tu(a,s),o,l),mm(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(g),s.push(g)):(e[E]=g,s[E]=g)}else{let g=gm(l,t,h+v,m),E=gm(l,t,h,h+v),S=g>=0&&e[g],w=E>=0&&e[E];if(i&&!w||!i&&!S){ym(Tu(a,s),o,l);let D=cO(i?lO:aO,e.length,i,r,f,n);!i&&w&&(e[E].providerFactory=D),mm(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(D),s.push(D)}else{let D=_w(e[i?E:g],f,!i&&r);mm(o,n,g>-1?g:E,D)}!i&&r&&w&&e[E].componentProviders++}}}function mm(n,t,e,r){let i=Li(t),o=D_(t);if(i||o){let l=(o?wt(t.useClass):t).prototype.ngOnDestroy;if(l){let f=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){let h=f.indexOf(e);h===-1?f.push(e,[r,l]):f[h+1].push(r,l)}else f.push(e,l)}}}function _w(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function gm(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function aO(n,t,e,r,i){return qm(this.multi,[])}function lO(n,t,e,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Na(r,r[q],this.providerFactory.index,i);s=l.slice(0,a),qm(o,s);for(let f=a;f<l.length;f++)s.push(l[f])}else s=[],qm(o,s);return s}function qm(n,t){for(let e=0;e<n.length;e++){let r=n[e];t.push(r())}return t}function cO(n,t,e,r,i,o){let s=new qi(n,e,C,null);return s.multi=[],s.index=t,s.componentProviders=0,_w(s,i,r&&!e),s}function Ht(n,t=[]){return e=>{e.providersResolver=(r,i)=>sO(r,i?i(n):n,t)}}function to(n,t,e){let r=Ia()+n,i=K();return i[r]===Ct?Sg(i,r,e?t.call(e):t()):jM(i,r)}function Lg(n,t,e,r){return Ew(K(),Ia(),n,t,e,r)}function bw(n,t){let e=n[t];return e===Ct?void 0:e}function Ew(n,t,e,r,i,o){let s=t+e;return Qt(n,s,i)?Sg(n,s+1,o?r.call(o,i):r(i)):bw(n,s+1)}function uO(n,t,e,r,i,o,s){let a=t+e;return Dg(n,a,i,o)?Sg(n,a+2,s?r.call(s,i,o):r(i,o)):bw(n,a+2)}function H(n,t){let e=Pe(),r,i=n+Be;e.firstCreatePass?(r=dO(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks??=[]).push(i,r.onDestroy)):r=e.data[i];let o=r.factory||(r.factory=ii(r.type,!0)),s,a=Ut(C);try{let l=xu(!1),f=o();return xu(l),Fp(e,K(),i,f),f}finally{Ut(a)}}function dO(n,t){if(t)for(let e=t.length-1;e>=0;e--){let r=t[e];if(n===r.name)return r}}function $r(n,t,e){let r=n+Be,i=K(),o=ou(i,r);return ww(i,r)?Ew(i,Ia(),t,o.transform,e,o):o.transform(e)}function Y(n,t,e,r){let i=n+Be,o=K(),s=ou(o,i);return ww(o,i)?uO(o,Ia(),t,s.transform,e,r,s):s.transform(e,r)}function ww(n,t){return n[q].data[t].pure}function Qa(n,t){return od(n,t)}var Gu=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},jg=(()=>{class n{compileModuleSync(e){return new Uu(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=Ip(e),o=lE(i.declarations).reduce((s,a)=>{let l=Fr(a);return l&&s.push(new Ki(l)),s},[]);return new Gu(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fO=(()=>{class n{zone=I(He);changeDetectionScheduler=I(Rr);applicationRef=I(Br);applicationErrorHandler=I(zt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(e){this.applicationErrorHandler(e)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cw=new U("",{factory:()=>!1});function Vg({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new He(Q(A({},Bg()),{scheduleInRootZone:e})),[{provide:He,useFactory:n},{provide:Pr,multi:!0,useFactory:()=>{let r=I(fO,{optional:!0});return()=>r.initialize()}},{provide:Pr,multi:!0,useFactory:()=>{let r=I(hO);return()=>{r.initialize()}}},t===!0?{provide:rm,useValue:!0}:[],{provide:im,useValue:e??vE},{provide:zt,useFactory:()=>{let r=I(He),i=I(Ze),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(jn),o.handleError(s))})}}}]}function Ug(n){let t=n?.ignoreChangesOutsideZone,e=n?.scheduleInRootZone,r=Vg({ngZoneFactory:()=>{let i=Bg(n);return i.scheduleInRootZone=e,i.shouldCoalesceEventChangeDetection&&Wn("NgZone_CoalesceEvent"),new He(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return rr([{provide:Cw,useValue:!0},{provide:Ma,useValue:!1},r])}function Bg(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var hO=(()=>{class n{subscription=new Je;initialized=!1;zone=I(He);pendingTasks=I(lr);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{He.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{He.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Sw=(()=>{class n{applicationErrorHandler=I(zt);appRef=I(Br);taskService=I(lr);ngZone=I(He);zonelessEnabled=I(Ma);tracing=I(Ji,{optional:!0});disableScheduling=I(rm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ru):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(I(im,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Nu||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let r=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?ub:yE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ru+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(e),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ub(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pO(){return typeof $localize<"u"&&$localize.locale||qa}var no=new U("",{providedIn:"root",factory:()=>I(no,{optional:!0,skipSelf:!0})||pO()});function _t(n){return c_(n)}function ps(n,t){return _c(n,t?.equal)}var Dw=class{[Mt];constructor(t){this[Mt]=t}destroy(){this[Mt].destroy()}};var Rw=Symbol("InputSignalNode#UNSET"),IO=Q(A({},bc),{transformFn:void 0,applyValueToInputSignal(n,t){Po(n,t)}});function Nw(n,t){let e=Object.create(IO);e.value=n,e.transformFn=t?.transform;function r(){if(Ro(e),e.value===Rw){let i=null;throw new N(-950,i)}return e.value}return r[Mt]=e,r}var md=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Ua(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},xO=new U("");xO.__NG_ELEMENT_ID__=n=>{let t=tt();if(t===null)throw new N(204,!1);if(t.type&2)return t.value;if(n&8)return null;throw new N(204,!1)};function Iw(n,t){return Nw(n,t)}function TO(n){return Nw(Rw,n)}var kw=(Iw.required=TO,Iw);var $g=new U(""),MO=new U("");function Ja(n){return!n.moduleRef}function AO(n){let t=Ja(n)?n.r3Injector:n.moduleRef.injector,e=t.get(He);return e.run(()=>{Ja(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=t.get(zt),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:r})}),Ja(n)){let o=()=>t.destroy(),s=n.platformInjector.get($g);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get($g);s.add(o),n.moduleRef.onDestroy(()=>{Ra(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return RO(r,e,()=>{let o=t.get(lr),s=o.add(),a=t.get(Og);return a.runInitializers(),a.donePromise.then(()=>{let l=t.get(no,qa);if(cw(l||qa),!t.get(MO,!0))return Ja(n)?t.get(Br):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ja(n)){let h=t.get(Br);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return OO?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var OO;function RO(n,t,e){try{let r=e();return hi(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n(r)),r}}var pd=null;function NO(n=[],t){return $t.create({name:t,providers:[{provide:_a,useValue:"platform"},{provide:$g,useValue:new Set([()=>pd=null])},...n]})}function kO(n=[]){if(pd)return pd;let t=NO(n);return pd=t,sw(),PO(t),t}function PO(n){let t=n.get(qu,null);vt(n,()=>{t?.forEach(e=>e())})}var zr=(()=>{class n{static __NG_ELEMENT_ID__=FO}return n})();function FO(n){return LO(tt(),K(),(n&16)===16)}function LO(n,t,e){if(Lr(n)&&!e){let r=Cn(n.index,t);return new di(r,r)}else if(n.type&175){let r=t[dn];return new di(r,t)}return null}var zg=class{constructor(){}supports(t){return Cg(t)}create(t){return new Hg(t)}},jO=(n,t)=>t,Hg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||jO}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){let s=!r||e&&e.currentIndex<xw(r,i,o)?e:r,a=xw(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)i++;else{o||(o=[]);let f=a-i,h=l-i;if(f!=h){for(let v=0;v<f;v++){let g=v<o.length?o[v]:o[v]=0,E=g+v;h<=E&&E<f&&(o[v]=g+1)}let m=s.previousIndex;o[m]=h-f}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!Cg(t))throw new N(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else i=0,YE(t,a=>{s=this._trackByFn(i,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,i),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new Gg(e,r),o,i)),t}_verifyReinsertion(t,e,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new gd),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new gd),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Gg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},Wg=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},gd=class{map=new Map;put(t){let e=t.trackById,r=this.map.get(e);r||(r=new Wg,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,i=this.map.get(r);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function xw(n,t,e){let r=n.previousIndex;if(r===null)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}var qg=class{constructor(){}supports(t){return t instanceof Map||ad(t)}create(){return new Yg}},Yg=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||ad(t)))throw new N(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let i=this._records.get(t);this._maybeAddToChanges(i,e);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Kg(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}},Kg=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(t){this.key=t}};function Tw(){return new Zg([new zg])}var Zg=(()=>{class n{factories;static \u0275prov=k({token:n,providedIn:"root",factory:Tw});constructor(e){this.factories=e}static create(e,r){if(r!=null){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:()=>{let r=I(n,{optional:!0,skipSelf:!0});return n.create(e,r||Tw())}}}find(e){let r=this.factories.find(i=>i.supports(e));if(r!=null)return r;throw new N(901,!1)}}return n})();function Mw(){return new Qg([new qg])}var Qg=(()=>{class n{static \u0275prov=k({token:n,providedIn:"root",factory:Mw});factories;constructor(e){this.factories=e}static create(e,r){if(r){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:()=>{let r=I(n,{optional:!0,skipSelf:!0});return n.create(e,r||Mw())}}}find(e){let r=this.factories.find(i=>i.supports(e));if(r)return r;throw new N(901,!1)}}return n})();function Pw(n){let{rootComponent:t,appProviders:e,platformProviders:r,platformRef:i}=n;De(8);try{let o=i?.injector??kO(r),s=[Vg({}),{provide:Rr,useExisting:Sw},J_,...e||[]],a=new La({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return AO({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{De(9)}}function ro(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Fw(n){let t=Fr(n);if(!t)return null;let e=new Ki(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var Vw=null;function xn(){return Vw}function Jg(n){Vw??=n}var Xa=class{},el=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(Uw),providedIn:"platform"})}return n})(),Xg=new U(""),Uw=(()=>{class n extends el{_location;_history;_doc=I($e);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xn().getBaseHref(this._doc)}onPopState(e){let r=xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function vd(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function Lw(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function qn(n){return n&&n[0]!=="?"?`?${n}`:n}var pn=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(_d),providedIn:"root"})}return n})(),yd=new U(""),_d=(()=>{class n extends pn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??I($e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return vd(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+qn(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+qn(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+qn(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(V(el),V(yd,8))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gi=(()=>{class n{_subject=new Ue;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=BO(Lw(jw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+qn(r))}normalize(e){return n.stripTrailingSlash(UO(this._basePath,jw(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+qn(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+qn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=qn;static joinWithSlash=vd;static stripTrailingSlash=Lw;static \u0275fac=function(r){return new(r||n)(V(pn))};static \u0275prov=k({token:n,factory:()=>VO(),providedIn:"root"})}return n})();function VO(){return new gi(V(pn))}function UO(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function jw(n){return n.replace(/\/index.html$/,"")}function BO(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var ol=(()=>{class n extends pn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=vd(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+qn(o))||this._platformLocation.pathname;this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+qn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(V(el),V(yd,8))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();var Md=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(Md||{});var Ot=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Ot||{}),Oe=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Oe||{}),en=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(en||{}),bt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ww(n){return Xt(n)[We.LocaleId]}function qw(n,t,e){let r=Xt(n),i=[r[We.DayPeriodsFormat],r[We.DayPeriodsStandalone]],o=Mn(i,t);return Mn(o,e)}function Yw(n,t,e){let r=Xt(n),i=[r[We.DaysFormat],r[We.DaysStandalone]],o=Mn(i,t);return Mn(o,e)}function Kw(n,t,e){let r=Xt(n),i=[r[We.MonthsFormat],r[We.MonthsStandalone]],o=Mn(i,t);return Mn(o,e)}function Zw(n,t){let r=Xt(n)[We.Eras];return Mn(r,t)}function tl(n,t){let e=Xt(n);return Mn(e[We.DateFormat],t)}function nl(n,t){let e=Xt(n);return Mn(e[We.TimeFormat],t)}function rl(n,t){let r=Xt(n)[We.DateTimeFormat];return Mn(r,t)}function Tn(n,t){let e=Xt(n),r=e[We.NumberSymbols][t];if(typeof r>"u"){if(t===bt.CurrencyDecimal)return e[We.NumberSymbols][bt.Decimal];if(t===bt.CurrencyGroup)return e[We.NumberSymbols][bt.Group]}return r}function sv(n,t){return Xt(n)[We.NumberFormats][t]}function Qw(n){if(!n[We.ExtraData])throw new N(2303,!1)}function Jw(n){let t=Xt(n);return Qw(t),(t[We.ExtraData][2]||[]).map(r=>typeof r=="string"?ev(r):[ev(r[0]),ev(r[1])])}function Xw(n,t,e){let r=Xt(n);Qw(r);let i=[r[We.ExtraData][0],r[We.ExtraData][1]],o=Mn(i,t)||[];return Mn(o,e)||[]}function Mn(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new N(2304,!1)}function ev(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var $O=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,bd={},zO=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function eC(n,t,e,r){let i=JO(n);t=Hr(e,t)||t;let s=[],a;for(;t;)if(a=zO.exec(t),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;t=h}else{s.push(t);break}let l=i.getTimezoneOffset();r&&(l=nC(r,l),i=QO(i,r));let f="";return s.forEach(h=>{let m=KO(h);f+=m?m(i,e,l):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function Dd(n,t,e){let r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function Hr(n,t){let e=Ww(n);if(bd[e]??={},bd[e][t])return bd[e][t];let r="";switch(t){case"shortDate":r=tl(n,en.Short);break;case"mediumDate":r=tl(n,en.Medium);break;case"longDate":r=tl(n,en.Long);break;case"fullDate":r=tl(n,en.Full);break;case"shortTime":r=nl(n,en.Short);break;case"mediumTime":r=nl(n,en.Medium);break;case"longTime":r=nl(n,en.Long);break;case"fullTime":r=nl(n,en.Full);break;case"short":let i=Hr(n,"shortTime"),o=Hr(n,"shortDate");r=Ed(rl(n,en.Short),[i,o]);break;case"medium":let s=Hr(n,"mediumTime"),a=Hr(n,"mediumDate");r=Ed(rl(n,en.Medium),[s,a]);break;case"long":let l=Hr(n,"longTime"),f=Hr(n,"longDate");r=Ed(rl(n,en.Long),[l,f]);break;case"full":let h=Hr(n,"fullTime"),m=Hr(n,"fullDate");r=Ed(rl(n,en.Full),[h,m]);break}return r&&(bd[e][t]=r),r}function Ed(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return t!=null&&r in t?t[r]:e})),n}function Yn(n,t,e="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function HO(n,t){return Yn(n,3).substring(0,t)}function rt(n,t,e=0,r=!1,i=!1){return function(o,s){let a=GO(n,o);if((e>0||a>-e)&&(a+=e),n===3)a===0&&e===-12&&(a=12);else if(n===6)return HO(a,t);let l=Tn(s,bt.MinusSign);return Yn(a,t,l,r,i)}}function GO(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new N(2301,!1)}}function Ne(n,t,e=Ot.Format,r=!1){return function(i,o){return WO(i,o,n,t,e,r)}}function WO(n,t,e,r,i,o){switch(e){case 2:return Kw(t,i,r)[n.getMonth()];case 1:return Yw(t,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let f=Jw(t),h=Xw(t,i,r),m=f.findIndex(v=>{if(Array.isArray(v)){let[g,E]=v,S=s>=g.hours&&a>=g.minutes,w=s<E.hours||s===E.hours&&a<E.minutes;if(g.hours<E.hours){if(S&&w)return!0}else if(S||w)return!0}else if(v.hours===s&&v.minutes===a)return!0;return!1});if(m!==-1)return h[m]}return qw(t,i,r)[s<12?0:1];case 3:return Zw(t,r)[n.getFullYear()<=0?0:1];default:let l=e;throw new N(2302,!1)}}function wd(n){return function(t,e,r){let i=-1*r,o=Tn(e,bt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Yn(s,2,o)+Yn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Yn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Yn(s,2,o)+":"+Yn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Yn(s,2,o)+":"+Yn(Math.abs(i%60),2,o);default:throw new N(2310,!1)}}}var qO=0,Sd=4;function YO(n){let t=Dd(n,qO,1).getDay();return Dd(n,0,1+(t<=Sd?Sd:Sd+7)-t)}function tC(n){let t=n.getDay(),e=t===0?-3:Sd-t;return Dd(n.getFullYear(),n.getMonth(),n.getDate()+e)}function tv(n,t=!1){return function(e,r){let i;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();i=1+Math.floor((s+o)/7)}else{let o=tC(e),s=YO(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Yn(i,n,Tn(r,bt.MinusSign))}}function Cd(n,t=!1){return function(e,r){let o=tC(e).getFullYear();return Yn(o,n,Tn(r,bt.MinusSign),t)}}var nv={};function KO(n){if(nv[n])return nv[n];let t;switch(n){case"G":case"GG":case"GGG":t=Ne(3,Oe.Abbreviated);break;case"GGGG":t=Ne(3,Oe.Wide);break;case"GGGGG":t=Ne(3,Oe.Narrow);break;case"y":t=rt(0,1,0,!1,!0);break;case"yy":t=rt(0,2,0,!0,!0);break;case"yyy":t=rt(0,3,0,!1,!0);break;case"yyyy":t=rt(0,4,0,!1,!0);break;case"Y":t=Cd(1);break;case"YY":t=Cd(2,!0);break;case"YYY":t=Cd(3);break;case"YYYY":t=Cd(4);break;case"M":case"L":t=rt(1,1,1);break;case"MM":case"LL":t=rt(1,2,1);break;case"MMM":t=Ne(2,Oe.Abbreviated);break;case"MMMM":t=Ne(2,Oe.Wide);break;case"MMMMM":t=Ne(2,Oe.Narrow);break;case"LLL":t=Ne(2,Oe.Abbreviated,Ot.Standalone);break;case"LLLL":t=Ne(2,Oe.Wide,Ot.Standalone);break;case"LLLLL":t=Ne(2,Oe.Narrow,Ot.Standalone);break;case"w":t=tv(1);break;case"ww":t=tv(2);break;case"W":t=tv(1,!0);break;case"d":t=rt(2,1);break;case"dd":t=rt(2,2);break;case"c":case"cc":t=rt(7,1);break;case"ccc":t=Ne(1,Oe.Abbreviated,Ot.Standalone);break;case"cccc":t=Ne(1,Oe.Wide,Ot.Standalone);break;case"ccccc":t=Ne(1,Oe.Narrow,Ot.Standalone);break;case"cccccc":t=Ne(1,Oe.Short,Ot.Standalone);break;case"E":case"EE":case"EEE":t=Ne(1,Oe.Abbreviated);break;case"EEEE":t=Ne(1,Oe.Wide);break;case"EEEEE":t=Ne(1,Oe.Narrow);break;case"EEEEEE":t=Ne(1,Oe.Short);break;case"a":case"aa":case"aaa":t=Ne(0,Oe.Abbreviated);break;case"aaaa":t=Ne(0,Oe.Wide);break;case"aaaaa":t=Ne(0,Oe.Narrow);break;case"b":case"bb":case"bbb":t=Ne(0,Oe.Abbreviated,Ot.Standalone,!0);break;case"bbbb":t=Ne(0,Oe.Wide,Ot.Standalone,!0);break;case"bbbbb":t=Ne(0,Oe.Narrow,Ot.Standalone,!0);break;case"B":case"BB":case"BBB":t=Ne(0,Oe.Abbreviated,Ot.Format,!0);break;case"BBBB":t=Ne(0,Oe.Wide,Ot.Format,!0);break;case"BBBBB":t=Ne(0,Oe.Narrow,Ot.Format,!0);break;case"h":t=rt(3,1,-12);break;case"hh":t=rt(3,2,-12);break;case"H":t=rt(3,1);break;case"HH":t=rt(3,2);break;case"m":t=rt(4,1);break;case"mm":t=rt(4,2);break;case"s":t=rt(5,1);break;case"ss":t=rt(5,2);break;case"S":t=rt(6,1);break;case"SS":t=rt(6,2);break;case"SSS":t=rt(6,3);break;case"Z":case"ZZ":case"ZZZ":t=wd(0);break;case"ZZZZZ":t=wd(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=wd(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=wd(2);break;default:return null}return nv[n]=t,t}function nC(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function ZO(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function QO(n,t,e){let i=n.getTimezoneOffset(),o=nC(t,i);return ZO(n,-1*(o-i))}function JO(n){if(Bw(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Dd(i,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match($O))return XO(r)}let t=new Date(n);if(!Bw(t))throw new N(2311,!1);return t}function XO(n){let t=new Date(0),e=0,r=0,i=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-r,l=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,f),t}function Bw(n){return n instanceof Date&&!isNaN(n.valueOf())}var eR=/^(\d+)?\.((\d+)(-(\d+))?)?$/,$w=22,Id=".",il="0",tR=";",nR=",",rv="#";var rR="%";function rC(n,t,e,r,i,o,s=!1){let a="",l=!1;if(!isFinite(n))a=Tn(e,bt.Infinity);else{let f=oR(n);s&&(f=iR(f));let h=t.minInt,m=t.minFrac,v=t.maxFrac;if(o){let G=o.match(eR);if(G===null)throw new N(2306,!1);let B=G[1],P=G[3],le=G[5];B!=null&&(h=iv(B)),P!=null&&(m=iv(P)),le!=null?v=iv(le):P!=null&&m>v&&(v=m)}sR(f,m,v);let g=f.digits,E=f.integerLen,S=f.exponent,w=[];for(l=g.every(G=>!G);E<h;E++)g.unshift(0);for(;E<0;E++)g.unshift(0);E>0?w=g.splice(E,g.length):(w=g,g=[0]);let D=[];for(g.length>=t.lgSize&&D.unshift(g.splice(-t.lgSize,g.length).join(""));g.length>t.gSize;)D.unshift(g.splice(-t.gSize,g.length).join(""));g.length&&D.unshift(g.join("")),a=D.join(Tn(e,r)),w.length&&(a+=Tn(e,i)+w.join("")),S&&(a+=Tn(e,bt.Exponential)+"+"+S)}return n<0&&!l?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function iC(n,t,e){let r=sv(t,Md.Percent),i=sC(r,Tn(t,bt.MinusSign));return rC(n,i,t,bt.Group,bt.Decimal,e,!0).replace(new RegExp(rR,"g"),Tn(t,bt.PercentSign))}function oC(n,t,e){let r=sv(t,Md.Decimal),i=sC(r,Tn(t,bt.MinusSign));return rC(n,i,t,bt.Group,bt.Decimal,e)}function sC(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(tR),i=r[0],o=r[1],s=i.indexOf(Id)!==-1?i.split(Id):[i.substring(0,i.lastIndexOf(il)+1),i.substring(i.lastIndexOf(il)+1)],a=s[0],l=s[1]||"";e.posPre=a.substring(0,a.indexOf(rv));for(let h=0;h<l.length;h++){let m=l.charAt(h);m===il?e.minFrac=e.maxFrac=h+1:m===rv?e.maxFrac=h+1:e.posSuf+=m}let f=a.split(nR);if(e.gSize=f[1]?f[1].length:0,e.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let h=i.length-e.posPre.length-e.posSuf.length,m=o.indexOf(rv);e.negPre=o.substring(0,m).replace(/'/g,""),e.negSuf=o.slice(m+h).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function iR(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function oR(n){let t=Math.abs(n)+"",e=0,r,i,o,s,a;for((i=t.indexOf(Id))>-1&&(t=t.replace(Id,"")),(o=t.search(/e/i))>0?(i<0&&(i=o),i+=+t.slice(o+1),t=t.substring(0,o)):i<0&&(i=t.length),o=0;t.charAt(o)===il;o++);if(o===(a=t.length))r=[0],i=1;else{for(a--;t.charAt(a)===il;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(t.charAt(o))}return i>$w&&(r=r.splice(0,$w-1),e=i-1,i=1),{digits:r,exponent:e,integerLen:i}}function sR(n,t,e){if(t>e)throw new N(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(t,i),e),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let m=s;m<r.length;m++)r[m]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let m=1;m<s;m++)r[m]=0}if(a>=5)if(s-1<0){for(let m=0;m>s;m--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,f=t+n.integerLen,h=r.reduceRight(function(m,v,g,E){return v=v+m,E[g]=v<10?v:v-10,l&&(E[g]===0&&g>=f?E.pop():l=!1),v>=10?1:0},0);h&&(r.unshift(h),n.integerLen++)}function iv(n){let t=parseInt(n);if(isNaN(t))throw new N(2305,!1);return t}var ov=/\s+/,zw=[],av=(()=>{class n{_ngEl;_renderer;initialClasses=zw;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(ov):zw}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(ov):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(ov).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(C(yt),C(Jt))};static \u0275dir=ve({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var xd=class{$implicit;ngForOf;index;count;constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},it=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new xd(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Hw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Hw(o,i)})}static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(C(Ur),C(fi),C(Zg))};static \u0275dir=ve({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Hw(n,t){n.context.$implicit=t.item}var Le=(()=>{class n{_viewContainer;_context=new Td;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,r){this._viewContainer=e,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Gw(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Gw(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(C(Ur),C(fi))};static \u0275dir=ve({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Td=class{$implicit=null;ngIf=null};function Gw(n,t){if(n&&!n.createEmbeddedView)throw new N(2020,!1)}var lv=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,r,i){this._ngEl=e,this._differs=r,this._renderer=i}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){let[i,o]=e.split("."),s=i.indexOf("-")===-1?void 0:Gn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(C(yt),C(Qg),C(Jt))};static \u0275dir=ve({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function cv(n,t){return new N(2100,!1)}var aR="mediumDate",aC=new U(""),lC=new U(""),ut=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,r,i){this.locale=e,this.defaultTimezone=r,this.defaultOptions=i}transform(e,r,i,o){if(e==null||e===""||e!==e)return null;try{let s=r??this.defaultOptions?.dateFormat??aR,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return eC(e,s,o||this.locale,a)}catch(s){throw cv(n,s.message)}}static \u0275fac=function(r){return new(r||n)(C(no,16),C(aC,24),C(lC,24))};static \u0275pipe=Ga({name:"date",type:n,pure:!0})}return n})();var mn=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,r,i){if(!cC(e))return null;i||=this._locale;try{let o=uC(e);return oC(o,i,r)}catch(o){throw cv(n,o.message)}}static \u0275fac=function(r){return new(r||n)(C(no,16))};static \u0275pipe=Ga({name:"number",type:n,pure:!0})}return n})(),sl=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,r,i){if(!cC(e))return null;i||=this._locale;try{let o=uC(e);return iC(o,i,r)}catch(o){throw cv(n,o.message)}}static \u0275fac=function(r){return new(r||n)(C(no,16))};static \u0275pipe=Ga({name:"percent",type:n,pure:!0})}return n})();function cC(n){return!(n==null||n===""||n!==n)}function uC(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new N(2309,!1);return n}var _e=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=In({type:n});static \u0275inj=un({})}return n})();function al(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,o]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var io=class{};var dC="browser";var fC=(()=>{class n{static \u0275prov=k({token:n,providedIn:"root",factory:()=>new uv(I($e),window)})}return n})(),uv=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,e){this.window.scrollTo(Q(A({},e),{left:t[0],top:t[1]}))}scrollToAnchor(t,e){let r=lR(this.document,t);r&&(this.scrollToElement(r,e),r.focus())}setHistoryScrollRestoration(t){try{this.window.history.scrollRestoration=t}catch{console.warn(Nr(2400,!1))}}scrollToElement(t,e){let r=t.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Q(A({},e),{left:i-s[0],top:o-s[1]}))}};function lR(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}var ll=class{_doc;constructor(t){this._doc=t}manager},Ad=(()=>{class n extends ll{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,o){return e.addEventListener(r,i,o),()=>this.removeEventListener(e,r,i,o)}removeEventListener(e,r,i,o){return e.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(V($e))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),Rd=new U(""),mv=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(s=>{s.manager=this});let i=e.filter(s=>!(s instanceof Ad));this._plugins=i.slice().reverse();let o=e.find(s=>s instanceof Ad);o&&this._plugins.push(o)}addEventListener(e,r,i,o){return this._findPluginFor(r).addEventListener(e,r,i,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new N(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(V(Rd),V(He))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),dv="ng-app-id";function hC(n){for(let t of n)t.remove()}function pC(n,t){let e=t.createElement("style");return e.textContent=n,e}function cR(n,t,e,r){let i=n.head?.querySelectorAll(`style[${dv}="${t}"],link[${dv}="${t}"]`);if(i)for(let o of i)o.removeAttribute(dv),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function hv(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var gv=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,cR(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,pC);r?.forEach(i=>this.addUsage(i,this.external,hv))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let o=r.get(e);o?o.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(hC(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])hC(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,pC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,hv(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(V($e),V(Wu),V(Yu,8),V(ls))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),fv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},vv=/%COMP%/g;var gC="%COMP%",uR=`_nghost-${gC}`,dR=`_ngcontent-${gC}`,fR=!0,hR=new U("",{providedIn:"root",factory:()=>fR});function pR(n){return dR.replace(vv,n)}function mR(n){return uR.replace(vv,n)}function vC(n,t){return t.map(e=>e.replace(vv,n))}var yv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,o,s,a,l,f=null,h=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=f,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new cl(e,s,l,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(e,r);return i instanceof Od?i.applyToHost(e):i instanceof ul&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,f=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.platformIsServer,v=this.tracingService;switch(r.encapsulation){case Vr.Emulated:o=new Od(l,f,r,this.appId,h,s,a,m,v);break;case Vr.ShadowDom:return new pv(l,f,e,r,s,a,this.nonce,m,v);default:o=new ul(l,f,r,h,s,a,m,v);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(V(mv),V(gv),V(Wu),V(hR),V($e),V(ls),V(He),V(Yu),V(Ji,8))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),cl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(fv[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(mC(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(mC(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new N(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let o=fv[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=fv[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(Gn.DashCase|Gn.Important)?t.style.setProperty(e,r,i&Gn.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Gn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=xn().getGlobalEventTarget(this.doc,t),!t))throw new N(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function mC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var pv=class extends cl{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,i,o,s,a,l,f){super(t,o,s,l,f),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=vC(i.id,h);for(let v of h){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=v,this.shadowRoot.appendChild(g)}let m=i.getExternalStyles?.();if(m)for(let v of m){let g=hv(v,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ul=class extends cl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,o,s,a,l,f){super(t,o,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=f?vC(f,h):h,this.styleUrls=r.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&os.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Od=class extends ul{contentAttr;hostAttr;constructor(t,e,r,i,o,s,a,l,f){let h=i+"-"+r.id;super(t,e,r,o,s,a,l,f,h),this.contentAttr=pR(h),this.hostAttr=mR(h)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}};var Nd=class n extends Xa{supportsDOMEvents=!0;static makeCurrent(){Jg(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=gR();return e==null?null:vR(e)}resetBaseElement(){dl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return al(document.cookie,t)}},dl=null;function gR(){return dl=dl||document.head.querySelector("base"),dl?dl.getAttribute("href"):null}function vR(n){return new URL(n,document.baseURI).pathname}var yR=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),yC=["alt","control","meta","shift"],_R={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bR={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},_C=(()=>{class n extends ll{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xn().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),yC.forEach(f=>{let h=r.indexOf(f);h>-1&&(r.splice(h,1),s+=f+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let i=_R[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),yC.forEach(s=>{if(s!==i){let a=bR[s];a(e)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(V($e))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();function _v(n,t,e){let r=A({rootComponent:n,platformRef:e?.platformRef},ER(t));return Pw(r)}function ER(n){return{appProviders:[...IR,...n?.providers??[]],platformProviders:DR}}function wR(){Nd.makeCurrent()}function CR(){return new jn}function SR(){return Zm(document),document}var DR=[{provide:ls,useValue:dC},{provide:qu,useValue:wR,multi:!0},{provide:$e,useFactory:SR}];var IR=[{provide:_a,useValue:"root"},{provide:jn,useFactory:CR},{provide:Rd,useClass:Ad,multi:!0,deps:[$e]},{provide:Rd,useClass:_C,multi:!0,deps:[$e]},yv,gv,mv,{provide:Yi,useExisting:yv},{provide:io,useClass:yR},[]];var vs=class{},fl=class{},dr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),o=e.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let i=(t.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Pd=class{encodeKey(t){return bC(t)}encodeValue(t){return bC(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function xR(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var TR=/%(\d[a-f0-9])/gi,MR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bC(n){return encodeURIComponent(n).replace(TR,(t,e)=>MR[e]??t)}function kd(n){return`${n}`}var Gr=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Pd,t.fromString){if(t.fromObject)throw new N(2805,!1);this.map=xR(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],i=Array.isArray(r)?r.map(kd):[kd(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(kd(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(kd(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Fd=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function AR(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function EC(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function wC(n){return typeof Blob<"u"&&n instanceof Blob}function CC(n){return typeof FormData<"u"&&n instanceof FormData}function OR(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var SC="Content-Type",DC="Accept",IC="X-Request-URL",xC="text/plain",TC="application/json",RR=`${TC}, ${xC}, */*`,ms=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,e,r,i){this.url=e,this.method=t.toUpperCase();let o;if(AR(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new N(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new dr,this.context??=new Fd,!this.params)this.params=new Gr,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||EC(this.body)||wC(this.body)||CC(this.body)||OR(this.body)?this.body:this.body instanceof Gr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||CC(this.body)?null:wC(this.body)?this.body.type||null:EC(this.body)?null:typeof this.body=="string"?xC:this.body instanceof Gr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?TC:null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.keepalive??this.keepalive,s=t.priority||this.priority,a=t.cache||this.cache,l=t.mode||this.mode,f=t.redirect||this.redirect,h=t.credentials||this.credentials,m=t.referrer||this.referrer,v=t.integrity||this.integrity,g=t.transferCache??this.transferCache,E=t.timeout??this.timeout,S=t.body!==void 0?t.body:this.body,w=t.withCredentials??this.withCredentials,D=t.reportProgress??this.reportProgress,G=t.headers||this.headers,B=t.params||this.params,P=t.context??this.context;return t.setHeaders!==void 0&&(G=Object.keys(t.setHeaders).reduce((le,pt)=>le.set(pt,t.setHeaders[pt]),G)),t.setParams&&(B=Object.keys(t.setParams).reduce((le,pt)=>le.set(pt,t.setParams[pt]),B)),new n(e,r,S,{params:B,headers:G,context:P,reportProgress:D,responseType:i,withCredentials:w,transferCache:g,keepalive:o,cache:a,priority:s,timeout:E,mode:l,redirect:f,credentials:h,referrer:m,integrity:v})}},oo=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(oo||{}),ys=class{headers;status;statusText;url;ok;type;redirected;constructor(t,e=200,r="OK"){this.headers=t.headers||new dr,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.redirected=t.redirected,this.ok=this.status>=200&&this.status<300}},Ld=class n extends ys{constructor(t={}){super(t)}type=oo.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},hl=class n extends ys{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=oo.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected})}},gs=class extends ys{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},NR=200,kR=204;function bv(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var fr=(()=>{class n{handler;constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof ms)o=e;else{let l;i.headers instanceof dr?l=i.headers:l=new dr(i.headers);let f;i.params&&(i.params instanceof Gr?f=i.params:f=new Gr({fromObject:i.params})),o=new ms(e,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:f,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let s=$(o).pipe(tr(l=>this.handler.handle(l)));if(e instanceof ms||i.observe==="events")return s;let a=s.pipe(at(l=>l instanceof hl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ie(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new N(2806,!1);return l.body}));case"blob":return a.pipe(ie(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new N(2807,!1);return l.body}));case"text":return a.pipe(ie(l=>{if(l.body!==null&&typeof l.body!="string")throw new N(2808,!1);return l.body}));case"json":default:return a.pipe(ie(l=>l.body))}case"response":return a;default:throw new N(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new Gr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,bv(i,r))}post(e,r,i={}){return this.request("POST",e,bv(i,r))}put(e,r,i={}){return this.request("PUT",e,bv(i,r))}static \u0275fac=function(r){return new(r||n)(V(vs))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();var PR=new U("");function FR(n,t){return t(n)}function LR(n,t,e){return(r,i)=>vt(e,()=>t(r,o=>n(o,i)))}var MC=new U(""),AC=new U(""),OC=new U("",{providedIn:"root",factory:()=>!0});var jd=(()=>{class n extends vs{backend;injector;chain=null;pendingTasks=I(mu);contributeToStability=I(OC);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(MC),...this.injector.get(AC,[])]));this.chain=r.reduceRight((i,o)=>LR(i,o,this.injector),FR)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(ki(r))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(V(fl),V(Ze))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();var jR=/^\)\]\}',?\n/,VR=RegExp(`^${IC}:`,"m");function UR(n){return"responseURL"in n&&n.responseURL?n.responseURL:VR.test(n.getAllResponseHeaders())?n.getResponseHeader(IC):null}var Ev=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new N(-2800,!1);let r=this.xhrFactory;return $(null).pipe(Ve(()=>new de(o=>{let s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((w,D)=>s.setRequestHeader(w,D.join(","))),e.headers.has(DC)||s.setRequestHeader(DC,RR),!e.headers.has(SC)){let w=e.detectContentTypeHeader();w!==null&&s.setRequestHeader(SC,w)}if(e.timeout&&(s.timeout=e.timeout),e.responseType){let w=e.responseType.toLowerCase();s.responseType=w!=="json"?w:"text"}let a=e.serializeBody(),l=null,f=()=>{if(l!==null)return l;let w=s.statusText||"OK",D=new dr(s.getAllResponseHeaders()),G=UR(s)||e.url;return l=new Ld({headers:D,status:s.status,statusText:w,url:G}),l},h=()=>{let{headers:w,status:D,statusText:G,url:B}=f(),P=null;D!==kR&&(P=typeof s.response>"u"?s.responseText:s.response),D===0&&(D=P?NR:0);let le=D>=200&&D<300;if(e.responseType==="json"&&typeof P=="string"){let pt=P;P=P.replace(jR,"");try{P=P!==""?JSON.parse(P):null}catch(Te){P=pt,le&&(le=!1,P={error:Te,text:P})}}le?(o.next(new hl({body:P,headers:w,status:D,statusText:G,url:B||void 0})),o.complete()):o.error(new gs({error:P,headers:w,status:D,statusText:G,url:B||void 0}))},m=w=>{let{url:D}=f(),G=new gs({error:w,status:s.status||0,statusText:s.statusText||"Unknown Error",url:D||void 0});o.error(G)},v=m;e.timeout&&(v=w=>{let{url:D}=f(),G=new gs({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:D||void 0});o.error(G)});let g=!1,E=w=>{g||(o.next(f()),g=!0);let D={type:oo.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(D.total=w.total),e.responseType==="text"&&s.responseText&&(D.partialText=s.responseText),o.next(D)},S=w=>{let D={type:oo.UploadProgress,loaded:w.loaded};w.lengthComputable&&(D.total=w.total),o.next(D)};return s.addEventListener("load",h),s.addEventListener("error",m),s.addEventListener("timeout",v),s.addEventListener("abort",m),e.reportProgress&&(s.addEventListener("progress",E),a!==null&&s.upload&&s.upload.addEventListener("progress",S)),s.send(a),o.next({type:oo.Sent}),()=>{s.removeEventListener("error",m),s.removeEventListener("abort",m),s.removeEventListener("load",h),s.removeEventListener("timeout",v),e.reportProgress&&(s.removeEventListener("progress",E),a!==null&&s.upload&&s.upload.removeEventListener("progress",S)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(V(io))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),RC=new U(""),BR="XSRF-TOKEN",$R=new U("",{providedIn:"root",factory:()=>BR}),zR="X-XSRF-TOKEN",HR=new U("",{providedIn:"root",factory:()=>zR}),pl=class{},GR=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r){this.doc=e,this.cookieName=r}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=al(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||n)(V($e),V($R))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();function WR(n,t){let e=n.url.toLowerCase();if(!I(RC)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let r=I(pl).getToken(),i=I(HR);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}function wv(...n){let t=[fr,Ev,jd,{provide:vs,useExisting:jd},{provide:fl,useFactory:()=>I(PR,{optional:!0})??I(Ev)},{provide:MC,useValue:WR,multi:!0},{provide:RC,useValue:!0},{provide:pl,useClass:GR}];for(let e of n)t.push(...e.\u0275providers);return rr(t)}var NC=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(V($e))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oe="primary",xl=Symbol("RouteTitle"),xv=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function lo(n){return new xv(n)}function BC(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function YR(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!hr(n[e],t[e]))return!1;return!0}function hr(n,t){let e=n?Tv(n):void 0,r=t?Tv(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!$C(n[i],t[i]))return!1;return!0}function Tv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function $C(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}else return n===t}function zC(n){return n.length>0?n[n.length-1]:null}function Wr(n){return Qh(n)?n:hi(n)?Z(Promise.resolve(n)):$(n)}var KR={exact:GC,subset:WC},HC={exact:ZR,subset:QR,ignored:()=>!0};function kC(n,t,e){return KR[e.paths](n.root,t.root,e.matrixParams)&&HC[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function ZR(n,t){return hr(n,t)}function GC(n,t,e){if(!so(n.segments,t.segments)||!$d(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!GC(n.children[r],t.children[r],e))return!1;return!0}function QR(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>$C(n[e],t[e]))}function WC(n,t,e){return qC(n,t,t.segments,e)}function qC(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!so(i,e)||t.hasChildren()||!$d(i,e,r))}else if(n.segments.length===e.length){if(!so(n.segments,e)||!$d(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!WC(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!so(n.segments,i)||!$d(n.segments,i,r)||!n.children[oe]?!1:qC(n.children[oe],t,o,r)}}function $d(n,t,e){return t.every((r,i)=>HC[e](n[i].parameters,r.parameters))}var mr=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Ee([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=lo(this.queryParams),this._queryParamMap}toString(){return eN.serialize(this)}},Ee=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zd(this)}},vi=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=lo(this.parameters),this._parameterMap}toString(){return KC(this)}};function JR(n,t){return so(n,t)&&n.every((e,r)=>hr(e.parameters,t[r].parameters))}function so(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function XR(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(e=e.concat(t(i,r)))}),e}var co=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>new yi,providedIn:"root"})}return n})(),yi=class{parse(t){let e=new Av(t);return new mr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${ml(t.root,!0)}`,r=rN(t.queryParams),i=typeof t.fragment=="string"?`#${tN(t.fragment)}`:"";return`${e}${r}${i}`}},eN=new yi;function zd(n){return n.segments.map(t=>KC(t)).join("/")}function ml(n,t){if(!n.hasChildren())return zd(n);if(t){let e=n.children[oe]?ml(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${ml(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=XR(n,(r,i)=>i===oe?[ml(n.children[oe],!1)]:[`${i}:${ml(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${zd(n)}/${e[0]}`:`${zd(n)}/(${e.join("//")})`}}function YC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ud(n){return YC(n).replace(/%3B/gi,";")}function tN(n){return encodeURI(n)}function Mv(n){return YC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hd(n){return decodeURIComponent(n)}function PC(n){return Hd(n.replace(/\+/g,"%20"))}function KC(n){return`${Mv(n.path)}${nN(n.parameters)}`}function nN(n){return Object.entries(n).map(([t,e])=>`;${Mv(t)}=${Mv(e)}`).join("")}function rN(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${Ud(e)}=${Ud(i)}`).join("&"):`${Ud(e)}=${Ud(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var iN=/^[^\/()?;#]+/;function Cv(n){let t=n.match(iN);return t?t[0]:""}var oN=/^[^\/()?;=#]+/;function sN(n){let t=n.match(oN);return t?t[0]:""}var aN=/^[^=?&#]+/;function lN(n){let t=n.match(aN);return t?t[0]:""}var cN=/^[^&#]+/;function uN(n){let t=n.match(cN);return t?t[0]:""}var Av=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[oe]=new Ee(t,e)),r}parseSegment(){let t=Cv(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new N(4009,!1);return this.capture(t),new vi(Hd(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=sN(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=Cv(this.remaining);i&&(r=i,this.capture(r))}t[Hd(e)]=Hd(r)}parseQueryParam(t){let e=lN(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=uN(this.remaining);s&&(r=s,this.capture(r))}let i=PC(e),o=PC(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Cv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new N(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=oe);let s=this.parseChildren();e[o]=Object.keys(s).length===1&&s[oe]?s[oe]:new Ee([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new N(4011,!1)}};function ZC(n){return n.segments.length>0?new Ee([],{[oe]:n}):n}function QC(n){let t={};for(let[r,i]of Object.entries(n.children)){let o=QC(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let e=new Ee(n.segments,t);return dN(e)}function dN(n){if(n.numberOfChildren===1&&n.children[oe]){let t=n.children[oe];return new Ee(n.segments.concat(t.segments),t.children)}return n}function _i(n){return n instanceof mr}function JC(n,t,e=null,r=null){let i=XC(n);return eS(i,t,e,r)}function XC(n){let t;function e(o){let s={};for(let l of o.children){let f=e(l);s[l.outlet]=f}let a=new Ee(o.url,s);return o===n&&(t=a),a}let r=e(n.root),i=ZC(r);return t??i}function eS(n,t,e,r){let i=n;for(;i.parent;)i=i.parent;if(t.length===0)return Sv(i,i,i,e,r);let o=fN(t);if(o.toRoot())return Sv(i,i,new Ee([],{}),e,r);let s=hN(o,i,n),a=s.processChildren?vl(s.segmentGroup,s.index,o.commands):nS(s.segmentGroup,s.index,o.commands);return Sv(i,s.segmentGroup,a,e,r)}function Gd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function _l(n){return typeof n=="object"&&n!=null&&n.outlets}function Sv(n,t,e,r,i){let o={};r&&Object.entries(r).forEach(([l,f])=>{o[l]=Array.isArray(f)?f.map(h=>`${h}`):`${f}`});let s;n===t?s=e:s=tS(n,t,e);let a=ZC(QC(s));return new mr(a,o,i)}function tS(n,t,e){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===t?r[i]=e:r[i]=tS(o,t,e)}),new Ee(n.segments,r)}var Wd=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Gd(r[0]))throw new N(4003,!1);let i=r.find(_l);if(i&&i!==zC(r))throw new N(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fN(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Wd(!0,0,n);let t=0,e=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,f])=>{a[l]=typeof f=="string"?f.split("/"):f}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Wd(e,t,r)}var Es=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function hN(n,t,e){if(n.isAbsolute)return new Es(t,!0,0);if(!e)return new Es(t,!1,NaN);if(e.parent===null)return new Es(e,!0,0);let r=Gd(n.commands[0])?0:1,i=e.segments.length-1+r;return pN(e,i,n.numberOfDoubleDots)}function pN(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new N(4005,!1);i=r.segments.length}return new Es(r,!1,i-o)}function mN(n){return _l(n[0])?n[0].outlets:{[oe]:n}}function nS(n,t,e){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return vl(n,t,e);let r=gN(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ee(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new Ee(n.segments.slice(r.pathIndex),n.children),vl(o,0,i)}else return r.match&&i.length===0?new Ee(n.segments,{}):r.match&&!n.hasChildren()?Ov(n,t,e):r.match?vl(n,0,i):Ov(n,t,e)}function vl(n,t,e){if(e.length===0)return new Ee(n.segments,{});{let r=mN(e),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=vl(n.children[oe],t,e);return new Ee(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=nS(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ee(n.segments,i)}}function gN(n,t,e){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;let s=n.segments[i],a=e[r];if(_l(a))break;let l=`${a}`,f=r<e.length-1?e[r+1]:null;if(i>0&&l===void 0)break;if(l&&f&&typeof f=="object"&&f.outlets===void 0){if(!LC(l,f,s))return o;r+=2}else{if(!LC(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ov(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let o=e[i];if(_l(o)){let l=vN(o.outlets);return new Ee(r,l)}if(i===0&&Gd(e[0])){let l=n.segments[t];r.push(new vi(l.path,FC(e[0]))),i++;continue}let s=_l(o)?o.outlets[oe]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&Gd(a)?(r.push(new vi(s,FC(a))),i+=2):(r.push(new vi(s,{})),i++)}return new Ee(r,{})}function vN(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=Ov(new Ee([],{}),0,r))}),t}function FC(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function LC(n,t,e){return n==e.path&&hr(t,e.parameters)}var ws="imperative",dt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(dt||{}),vn=class{id;url;constructor(t,e){this.id=t,this.url=e}},bi=class extends vn{type=dt.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Wt=class extends vn{urlAfterRedirects;type=dt.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Gt||{}),Ss=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Ss||{}),pr=class extends vn{reason;code;type=dt.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gr=class extends vn{reason;code;type=dt.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},Ds=class extends vn{error;target;type=dt.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bl=class extends vn{urlAfterRedirects;state;type=dt.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qd=class extends vn{urlAfterRedirects;state;type=dt.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yd=class extends vn{urlAfterRedirects;state;shouldActivate;type=dt.GuardsCheckEnd;constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Kd=class extends vn{urlAfterRedirects;state;type=dt.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zd=class extends vn{urlAfterRedirects;state;type=dt.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qd=class{route;type=dt.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jd=class{route;type=dt.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xd=class{snapshot;type=dt.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ef=class{snapshot;type=dt.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tf=class{snapshot;type=dt.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nf=class{snapshot;type=dt.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Is=class{routerEvent;position;anchor;type=dt.Scroll;constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},El=class{},xs=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function yN(n){return!(n instanceof El)&&!(n instanceof xs)}function _N(n,t){return n.providers&&!n._injector&&(n._injector=us(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Kn(n){return n.outlet||oe}function bN(n,t){let e=n.filter(r=>Kn(r)===t);return e.push(...n.filter(r=>Kn(r)!==t)),e}function As(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var rf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return As(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new uo(this.rootInjector)}},uo=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new rf(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(V(Ze))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),of=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Rv(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=Rv(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Nv(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Nv(t,this._root).map(e=>e.value)}};function Rv(n,t){if(n===t.value)return t;for(let e of t.children){let r=Rv(n,e);if(r)return r}return null}function Nv(n,t){if(n===t.value)return[t];for(let e of t.children){let r=Nv(n,e);if(r.length)return r.unshift(t),r}return[]}var gn=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function bs(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var wl=class extends of{snapshot;constructor(t,e){super(t),this.snapshot=e,Bv(this,t)}toString(){return this.snapshot.toString()}};function rS(n){let t=EN(n),e=new st([new vi("",{})]),r=new st({}),i=new st({}),o=new st({}),s=new st(""),a=new tn(e,r,o,s,i,oe,n,t.root);return a.snapshot=t.root,new wl(new gn(a,[]),t)}function EN(n){let t={},e={},r={},o=new ao([],t,r,"",e,oe,n,null,{});return new Cl("",new gn(o,[]))}var tn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ie(f=>f[xl]))??$(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(t=>lo(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(t=>lo(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function sf(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:A(A({},t.params),n.params),data:A(A({},t.data),n.data),resolve:A(A(A(A({},n.data),t.data),i?.data),n._resolvedData)}:r={params:A({},n.params),data:A({},n.data),resolve:A(A({},n.data),n._resolvedData??{})},i&&oS(i)&&(r.resolve[xl]=i.title),r}var ao=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[xl]}constructor(t,e,r,i,o,s,a,l,f){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=lo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=lo(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Cl=class extends of{url;constructor(t,e){super(e),this.url=t,Bv(this,e)}toString(){return iS(this._root)}};function Bv(n,t){t.value._routerState=n,t.children.forEach(e=>Bv(n,e))}function iS(n){let t=n.children.length>0?` { ${n.children.map(iS).join(", ")} } `:"";return`${n.value}${t}`}function Dv(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,hr(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),hr(t.params,e.params)||n.paramsSubject.next(e.params),YR(t.url,e.url)||n.urlSubject.next(e.url),hr(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function kv(n,t){let e=hr(n.params,t.params)&&JR(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||kv(n.parent,t.parent))}function oS(n){return typeof n.title=="string"||n.title===null}var sS=new U(""),Tl=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=oe;activateEvents=new Fe;deactivateEvents=new Fe;attachEvents=new Fe;detachEvents=new Fe;routerOutletData=kw(void 0);parentContexts=I(uo);location=I(Ur);changeDetector=I(zr);inputBinder=I(Ml,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new N(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new N(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new N(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new N(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Pv(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ve({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[hn]})}return n})(),Pv=class{route;childContexts;parent;outletData;constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===tn?this.route:t===uo?this.childContexts:t===sS?this.outletData:this.parent.get(t,e)}},Ml=new U(""),$v=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,i=fa([r.queryParams,r.params,r.data]).pipe(Ve(([o,s,a],l)=>(a=A(A(A({},o),s),a),l===0?$(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let s=Fw(r.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),zv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=fe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&O(0,"router-outlet")},dependencies:[Tl],encapsulation:2})}return n})();function Hv(n){let t=n.children&&n.children.map(Hv),e=t?Q(A({},n),{children:t}):A({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==oe&&(e.component=zv),e}function wN(n,t,e){let r=Sl(n,t._root,e?e._root:void 0);return new wl(r,t)}function Sl(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=CN(n,t,e);return new gn(r,i)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Sl(n,a)),s}}let r=SN(t.value),i=t.children.map(o=>Sl(n,o));return new gn(r,i)}}function CN(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Sl(n,r,i);return Sl(n,r)})}function SN(n){return new tn(new st(n.url),new st(n.params),new st(n.queryParams),new st(n.fragment),new st(n.data),n.outlet,n.component,n)}var Ts=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},aS="ngNavigationCancelingError";function af(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=_i(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=lS(!1,Gt.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function lS(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[aS]=!0,e.cancellationCode=t,e}function DN(n){return cS(n)&&_i(n.url)}function cS(n){return!!n&&n[aS]}var IN=(n,t,e,r)=>ie(i=>(new Fv(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),Fv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Dv(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=bs(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=bs(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=bs(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=bs(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new nf(o.value.snapshot))}),t.children.length&&this.forwardEvent(new ef(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(Dv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Dv(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},lf=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Cs=class{component;route;constructor(t,e){this.component=t,this.route=e}};function xN(n,t,e){let r=n._root,i=t?t._root:null;return gl(r,i,e,[r.value])}function TN(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Os(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!mp(n)?n:t.get(n):r}function gl(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=bs(t);return n.children.forEach(s=>{MN(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>yl(a,e.getContext(s),i)),i}function MN(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=AN(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new lf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?gl(n,t,a?a.children:null,r,i):gl(n,t,e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Cs(a.outlet.component,s))}else s&&yl(t,a,i),i.canActivateChecks.push(new lf(r)),o.component?gl(n,null,a?a.children:null,r,i):gl(n,null,e,r,i);return i}function AN(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!so(n.url,t.url);case"pathParamsOrQueryParamsChange":return!so(n.url,t.url)||!hr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kv(n,t)||!hr(n.queryParams,t.queryParams);case"paramsChange":default:return!kv(n,t)}}function yl(n,t,e){let r=bs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?t?yl(s,t.children.getContext(o),e):yl(s,null,e):yl(s,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Cs(t.outlet.component,i)):e.canDeactivateChecks.push(new Cs(null,i)):e.canDeactivateChecks.push(new Cs(null,i))}function Al(n){return typeof n=="function"}function ON(n){return typeof n=="boolean"}function RN(n){return n&&Al(n.canLoad)}function NN(n){return n&&Al(n.canActivate)}function kN(n){return n&&Al(n.canActivateChild)}function PN(n){return n&&Al(n.canDeactivate)}function FN(n){return n&&Al(n.canMatch)}function uS(n){return n instanceof cn||n?.name==="EmptyError"}var Bd=Symbol("INITIAL_VALUE");function Ms(){return Ve(n=>fa(n.map(t=>t.pipe(Et(1),np(Bd)))).pipe(ie(t=>{for(let e of t)if(e!==!0){if(e===Bd)return Bd;if(e===!1||LN(e))return e}return!0}),at(t=>t!==Bd),Et(1)))}function LN(n){return _i(n)||n instanceof Ts}function jN(n,t){return Ke(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?$(Q(A({},e),{guardsResult:!0})):VN(s,r,i,n).pipe(Ke(a=>a&&ON(a)?UN(r,o,n,t):$(a)),ie(a=>Q(A({},e),{guardsResult:a})))})}function VN(n,t,e,r){return Z(n).pipe(Ke(i=>GN(i.component,i.route,e,t,r)),Mr(i=>i!==!0,!0))}function UN(n,t,e,r){return Z(t).pipe(tr(i=>zo($N(i.route.parent,r),BN(i.route,r),HN(n,i.path,e),zN(n,i.route,e))),Mr(i=>i!==!0,!0))}function BN(n,t){return n!==null&&t&&t(new tf(n)),$(!0)}function $N(n,t){return n!==null&&t&&t(new Xd(n)),$(!0)}function zN(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return $(!0);let i=r.map(o=>ha(()=>{let s=As(t)??e,a=Os(o,s),l=NN(a)?a.canActivate(t,n):vt(s,()=>a(t,n));return Wr(l).pipe(Mr())}));return $(i).pipe(Ms())}function HN(n,t,e){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>TN(s)).filter(s=>s!==null).map(s=>ha(()=>{let a=s.guards.map(l=>{let f=As(s.node)??e,h=Os(l,f),m=kN(h)?h.canActivateChild(r,n):vt(f,()=>h(r,n));return Wr(m).pipe(Mr())});return $(a).pipe(Ms())}));return $(o).pipe(Ms())}function GN(n,t,e,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return $(!0);let s=o.map(a=>{let l=As(t)??i,f=Os(a,l),h=PN(f)?f.canDeactivate(n,t,e,r):vt(l,()=>f(n,t,e,r));return Wr(h).pipe(Mr())});return $(s).pipe(Ms())}function WN(n,t,e,r){let i=t.canLoad;if(i===void 0||i.length===0)return $(!0);let o=i.map(s=>{let a=Os(s,n),l=RN(a)?a.canLoad(t,e):vt(n,()=>a(t,e));return Wr(l)});return $(o).pipe(Ms(),dS(r))}function dS(n){return Hh(mt(t=>{if(typeof t!="boolean")throw af(n,t)}),ie(t=>t===!0))}function qN(n,t,e,r){let i=t.canMatch;if(!i||i.length===0)return $(!0);let o=i.map(s=>{let a=Os(s,n),l=FN(a)?a.canMatch(t,e):vt(n,()=>a(t,e));return Wr(l)});return $(o).pipe(Ms(),dS(r))}var Dl=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Il=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function _s(n){return $o(new Dl(n))}function YN(n){return $o(new N(4e3,!1))}function KN(n){return $o(lS(!1,Gt.GuardRejected))}var Lv=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return $(r);if(i.numberOfChildren>1||!i.children[oe])return YN(`${t.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(t,e,r,i,o){return ZN(e,i,o).pipe(ie(s=>{if(s instanceof mr)throw new Il(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new Il(a);return a}))}applyRedirectCreateUrlTree(t,e,r,i){let o=this.createSegmentGroup(t,e.root,r,i);return new mr(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,i){let o=this.createSegments(t,e.segments,r,i),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,r,i)}),new Ee(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new N(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}};function ZN(n,t,e){if(typeof n=="string")return $(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,params:f,data:h,title:m}=t;return Wr(vt(e,()=>r({params:f,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,title:m})))}var jv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function QN(n,t,e,r,i){let o=fS(n,t,e);return o.matched?(r=_N(t,r),qN(r,t,e,i).pipe(ie(s=>s===!0?o:A({},jv)))):$(o)}function fS(n,t,e){if(t.path==="**")return JN(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?A({},jv):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||BC)(e,n,t);if(!i)return A({},jv);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?A(A({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function JN(n){return{matched:!0,parameters:n.length>0?zC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function jC(n,t,e,r){return e.length>0&&tk(n,e,r)?{segmentGroup:new Ee(t,ek(r,new Ee(e,n.children))),slicedSegments:[]}:e.length===0&&nk(n,e,r)?{segmentGroup:new Ee(n.segments,XN(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:e}}function XN(n,t,e,r){let i={};for(let o of e)if(uf(n,t,o)&&!r[Kn(o)]){let s=new Ee([],{});i[Kn(o)]=s}return A(A({},r),i)}function ek(n,t){let e={};e[oe]=t;for(let r of n)if(r.path===""&&Kn(r)!==oe){let i=new Ee([],{});e[Kn(r)]=i}return e}function tk(n,t,e){return e.some(r=>uf(n,t,r)&&Kn(r)!==oe)}function nk(n,t,e){return e.some(r=>uf(n,t,r))}function uf(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function rk(n,t,e){return t.length===0&&!n.children[e]}var Vv=class{};function ik(n,t,e,r,i,o,s="emptyOnly"){return new Uv(n,t,e,r,i,s,o).recognize()}var ok=31,Uv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Lv(this.urlSerializer,this.urlTree)}noMatchError(t){return new N(4002,`'${t.segmentGroup}'`)}recognize(){let t=jC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ie(({children:e,rootSnapshot:r})=>{let i=new gn(r,e),o=new Cl("",i),s=JC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new ao([],Object.freeze({}),Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,oe,e).pipe(ie(r=>({children:r,rootSnapshot:e})),Tr(r=>{if(r instanceof Il)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Dl?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,o):this.processSegment(t,e,r,r.segments,i,!0,o).pipe(ie(s=>s instanceof gn?[s]:[]))}processChildren(t,e,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Z(o).pipe(tr(s=>{let a=r.children[s],l=bN(e,s);return this.processSegmentGroup(t,l,a,s,i)}),tp((s,a)=>(s.push(...a),s)),ri(null),ep(),Ke(s=>{if(s===null)return _s(r);let a=hS(s);return sk(a),$(a)}))}processSegment(t,e,r,i,o,s,a){return Z(e).pipe(tr(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,r,i,o,s,a).pipe(Tr(f=>{if(f instanceof Dl)return $(null);throw f}))),Mr(l=>!!l),Tr(l=>{if(uS(l))return rk(r,i,o)?$(new Vv):_s(r);throw l}))}processSegmentAgainstRoute(t,e,r,i,o,s,a,l){return Kn(r)!==s&&(s===oe||!uf(i,o,r))?_s(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,o,s,l):_s(i)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s,a){let{matched:l,parameters:f,consumedSegments:h,positionalParamSegments:m,remainingSegments:v}=fS(e,i,o);if(!l)return _s(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ok&&(this.allowRedirects=!1));let g=new ao(o,f,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,VC(i),Kn(i),i.component??i._loadedComponent??null,i,UC(i)),E=sf(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(E.params),g.data=Object.freeze(E.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,m,g,t).pipe(Ve(w=>this.applyRedirects.lineralizeSegments(i,w)),Ke(w=>this.processSegment(t,r,e,w.concat(v),s,!1,a)))}matchSegmentAgainstRoute(t,e,r,i,o,s){let a=QN(e,r,i,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(Ve(l=>l.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Ve(({routes:f})=>{let h=r._loadedInjector??t,{parameters:m,consumedSegments:v,remainingSegments:g}=l,E=new ao(v,m,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,VC(r),Kn(r),r.component??r._loadedComponent??null,r,UC(r)),S=sf(E,s,this.paramsInheritanceStrategy);E.params=Object.freeze(S.params),E.data=Object.freeze(S.data);let{segmentGroup:w,slicedSegments:D}=jC(e,v,g,f);if(D.length===0&&w.hasChildren())return this.processChildren(h,f,w,E).pipe(ie(B=>new gn(E,B)));if(f.length===0&&D.length===0)return $(new gn(E,[]));let G=Kn(r)===o;return this.processSegment(h,f,w,D,G?oe:o,!0,E).pipe(ie(B=>new gn(E,B instanceof gn?[B]:[])))}))):_s(e)))}getChildConfig(t,e,r){return e.children?$({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?$({routes:e._loadedRoutes,injector:e._loadedInjector}):WN(t,e,r,this.urlSerializer).pipe(Ke(i=>i?this.configLoader.loadChildren(t,e).pipe(mt(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):KN(e))):$({routes:[],injector:t})}};function sk(n){n.sort((t,e)=>t.value.outlet===oe?-1:e.value.outlet===oe?1:t.value.outlet.localeCompare(e.value.outlet))}function ak(n){let t=n.value.routeConfig;return t&&t.path===""}function hS(n){let t=[],e=new Set;for(let r of n){if(!ak(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=hS(r.children);t.push(new gn(r.value,i))}return t.filter(r=>!e.has(r))}function VC(n){return n.data||{}}function UC(n){return n.resolve||{}}function lk(n,t,e,r,i,o){return Ke(s=>ik(n,t,e,r,s.extractedUrl,i,o).pipe(ie(({state:a,tree:l})=>Q(A({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function ck(n,t){return Ke(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return $(e);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let f of pS(l))s.add(f);let a=0;return Z(s).pipe(tr(l=>o.has(l)?uk(l,r,n,t):(l.data=sf(l,l.parent,n).resolve,$(void 0))),mt(()=>a++),Ho(1),Ke(l=>a===s.size?$(e):At))})}function pS(n){let t=n.children.map(e=>pS(e)).flat();return[n,...t]}function uk(n,t,e,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!oS(i)&&(o[xl]=i.title),ha(()=>(n.data=sf(n,n.parent,e).resolve,dk(o,n,t,r).pipe(ie(s=>(n._resolvedData=s,n.data=A(A({},n.data),s),null)))))}function dk(n,t,e,r){let i=Tv(n);if(i.length===0)return $({});let o={};return Z(i).pipe(Ke(s=>fk(n[s],t,e,r).pipe(Mr(),mt(a=>{if(a instanceof Ts)throw af(new yi,a);o[s]=a}))),Ho(1),ie(()=>o),Tr(s=>uS(s)?At:$o(s)))}function fk(n,t,e,r){let i=As(t)??r,o=Os(n,i),s=o.resolve?o.resolve(t,e):vt(i,()=>o(t,e));return Wr(s)}function Iv(n){return Ve(t=>{let e=n(t);return e?Z(e).pipe(ie(()=>t)):$(t)})}var Gv=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(e){return e.data[xl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(mS),providedIn:"root"})}return n})(),mS=(()=>{class n extends Gv{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(V(NC))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ei=new U("",{providedIn:"root",factory:()=>({})}),fo=new U(""),df=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=I(jg);loadComponent(e,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return $(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Wr(vt(e,()=>r.loadComponent())).pipe(ie(vS),Ve(yS),mt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ki(()=>{this.componentLoaders.delete(r)})),o=new Bo(i,()=>new Ue).pipe(Uo());return this.componentLoaders.set(r,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=gS(r,this.compiler,e,this.onLoadEndListener).pipe(ki(()=>{this.childrenLoaders.delete(r)})),s=new Bo(o,()=>new Ue).pipe(Uo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gS(n,t,e,r){return Wr(vt(e,()=>n.loadChildren())).pipe(ie(vS),Ve(yS),Ke(i=>i instanceof ld||Array.isArray(i)?$(i):Z(t.compileModuleAsync(i))),ie(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(e).injector,s=o.get(fo,[],{optional:!0,self:!0}).flat()),{routes:s.map(Hv),injector:o}}))}function hk(n){return n&&typeof n=="object"&&"default"in n}function vS(n){return hk(n)?n.default:n}function yS(n){return $(n)}var ff=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(pk),providedIn:"root"})}return n})(),pk=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wv=new U(""),qv=new U("");function _S(n,t,e){let r=n.get(qv),i=n.get($e);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,s=new Promise(f=>{o=f}),a=i.startViewTransition(()=>(o(),mk(n)));a.ready.catch(f=>{});let{onViewTransitionCreated:l}=r;return l&&vt(n,()=>l({transition:a,from:t,to:e})),s}function mk(n){return new Promise(t=>{Ba({read:()=>setTimeout(t)},{injector:n})})}var Yv=new U(""),hf=(()=>{class n{currentNavigation=ct(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ue;transitionAbortWithErrorSubject=new Ue;configLoader=I(df);environmentInjector=I(Ze);destroyRef=I($n);urlSerializer=I(co);rootContexts=I(uo);location=I(gi);inputBindingEnabled=I(Ml,{optional:!0})!==null;titleStrategy=I(Gv);options=I(Ei,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=I(ff);createViewTransition=I(Wv,{optional:!0});navigationErrorHandler=I(Yv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>$(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new Qd(i)),r=i=>this.events.next(new Jd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;_t(()=>{this.transitions?.next(Q(A({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(e){return this.transitions=new st(null),this.transitions.pipe(at(r=>r!==null),Ve(r=>{let i=!1;return $(r).pipe(Ve(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Gt.SupersededByNewNavigation),At;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Q(A({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new gr(o.id,this.urlSerializer.serialize(o.rawUrl),"",Ss.IgnoredSameUrlNavigation)),o.resolve(!1),At;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return $(o).pipe(Ve(l=>(this.events.next(new bi(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?At:Promise.resolve(l))),lk(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),mt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=l.urlAfterRedirects,h));let f=new bl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:f,source:h,restoredState:m,extras:v}=o,g=new bi(l,this.urlSerializer.serialize(f),h,m);this.events.next(g);let E=rS(this.rootComponentType).snapshot;return this.currentTransition=r=Q(A({},o),{targetSnapshot:E,urlAfterRedirects:f,extras:Q(A({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(S=>(S.finalUrl=f,S)),$(r)}else return this.events.next(new gr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Ss.IgnoredByUrlHandlingStrategy)),o.resolve(!1),At}),mt(o=>{let s=new qd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ie(o=>(this.currentTransition=r=Q(A({},o),{guards:xN(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),jN(this.environmentInjector,o=>this.events.next(o)),mt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw af(this.urlSerializer,o.guardsResult);let s=new Yd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),at(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Gt.GuardRejected),!1)),Iv(o=>{if(o.guards.canActivateChecks.length!==0)return $(o).pipe(mt(s=>{let a=new Kd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ve(s=>{let a=!1;return $(s).pipe(ck(this.paramsInheritanceStrategy,this.environmentInjector),mt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Gt.NoDataFromResolver)}}))}),mt(s=>{let a=new Zd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Iv(o=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let f=As(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(f,a.routeConfig).pipe(mt(h=>{a.component=h}),ie(()=>{})))}for(let f of a.children)l.push(...s(f));return l};return fa(s(o.targetSnapshot.root)).pipe(ri(null),Et(1))}),Iv(()=>this.afterPreactivation()),Ve(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Z(a).pipe(ie(()=>r)):$(r)}),ie(o=>{let s=wN(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Q(A({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),mt(()=>{this.events.next(new El)}),IN(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Et(1),Ln(new de(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(at(()=>!i&&!r.targetRouterState),mt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Gt.Aborted)}))),mt({next:o=>{i=!0,this.lastSuccessfulNavigation=_t(this.currentNavigation),this.events.next(new Wt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ln(this.transitionAbortWithErrorSubject.pipe(mt(o=>{throw o}))),ki(()=>{i||this.cancelNavigationTransition(r,"",Gt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Tr(o=>{if(this.destroyed)return r.resolve(!1),At;if(i=!0,cS(o))this.events.next(new pr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),DN(o)?this.events.next(new xs(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ds(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=vt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Ts){let{message:l,cancellationCode:f}=af(this.urlSerializer,a);this.events.next(new pr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,f)),this.events.next(new xs(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return At}))}))}cancelNavigationTransition(e,r,i){let o=new pr(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=_t(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return e.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gk(n){return n!==ws}var bS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(vk),providedIn:"root"})}return n})(),cf=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},vk=(()=>{class n extends cf{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Dn(n)))(i||n)}})();static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ES=(()=>{class n{urlSerializer=I(co);options=I(Ei,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=I(gi);urlHandlingStrategy=I(ff);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new mr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,s=i??o;return s instanceof mr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=rS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(yk),providedIn:"root"})}return n})(),yk=(()=>{class n extends ES{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof bi?this.updateStateMemento():e instanceof gr?this.commitTransition(r):e instanceof bl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof El?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof pr&&e.code!==Gt.SupersededByNewNavigation&&e.code!==Gt.Redirect?this.restoreHistory(r):e instanceof Ds?this.restoreHistory(r,!0):e instanceof Wt&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(e)||o){let a=this.browserPageId,l=A(A({},s),this.generateNgRouterState(i,a));this.location.replaceState(e,"",l)}else{let a=A(A({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Dn(n)))(i||n)}})();static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pf(n,t){n.events.pipe(at(e=>e instanceof Wt||e instanceof pr||e instanceof Ds||e instanceof gr),ie(e=>e instanceof Wt||e instanceof gr?0:(e instanceof pr?e.code===Gt.Redirect||e.code===Gt.SupersededByNewNavigation:!1)?2:1),at(e=>e!==2),Et(1)).subscribe(()=>{t()})}var _k={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=I(xg);stateManager=I(ES);options=I(Ei,{optional:!0})||{};pendingTasks=I(lr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=I(hf);urlSerializer=I(co);location=I(gi);urlHandlingStrategy=I(ff);injector=I(Ze);_events=new Ue;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=I(bS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=I(fo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!I(Ml,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Je;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=_t(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof pr&&r.code!==Gt.Redirect&&r.code!==Gt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Wt)this.navigated=!0;else if(r instanceof xs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=A({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||gk(i.source)},s);this.scheduleNavigation(a,ws,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}yN(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ws,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=A({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,o).catch(l=>{this.disposed||this.injector.get(zt)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return _t(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Hv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,f=l?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=A(A({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let m;try{let v=i?i.snapshot:this.routerState.snapshot.root;m=XC(v)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),m=this.currentUrlTree.root}return eS(m,e,h,f??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=_i(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ws,null,r)}navigate(e,r={skipLocationChange:!1}){return Ek(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(Nr(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=A({},_k):r===!1?i=A({},bk):i=r,_i(e))return kC(this.currentUrlTree,e,i);let o=this.parseUrl(e);return kC(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,f;s?(a=s.resolve,l=s.reject,f=s.promise):f=new Promise((m,v)=>{a=m,l=v});let h=this.pendingTasks.add();return pf(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ek(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new N(4008,!1)}var Nt=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=ct(null);get href(){return _t(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ue;applicationErrorHandler=I(zt);options=I(Ei,{optional:!0});constructor(e,r,i,o,s,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(I(new md("href"),{optional:!0}));let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,r=i=>i==="merge"||i==="preserve";e||=r(this.queryParamsHandling),e||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Wt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(_i(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l)?.catch(f=>{this.applicationErrorHandler(f)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:_i(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(C(xe),C(tn),Ua("tabindex"),C(Jt),C(yt),C(pn))};static \u0275dir=ve({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&T("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&fs("href",i.reactiveHref(),tg)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ro],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ro],replaceUrl:[2,"replaceUrl","replaceUrl",ro],routerLink:"routerLink"},features:[hn]})}return n})(),Zv=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Fe;constructor(e,r,i,o,s){this.router=e,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof Wt&&this.update()})}ngAfterContentInit(){$(this.links.changes,$(null)).pipe(ni()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Z(e).pipe(ni()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=wk(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?e.isActive(o,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||n)(C(xe),C(yt),C(Jt),C(zr),C(Nt,8))};static \u0275dir=ve({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&kg(o,Nt,5),r&2){let s;Ya(s=Ka())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[hn]})}return n})();function wk(n){return!!n.paths}var Ol=class{};var wS=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,i,o){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(at(e=>e instanceof Wt),tr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=us(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Z(i).pipe(ni())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(e,r):i=$(null);let o=i.pipe(Ke(s=>s===null?$(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(e,r);return Z([o,s]).pipe(ni())}else return o})}static \u0275fac=function(r){return new(r||n)(V(xe),V(Ze),V(Ol),V(df))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CS=new U(""),Ck=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=ws;restoredId=0;store={};constructor(e,r,i,o,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof bi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Wt?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof gr&&e.code===Ss.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{if(!(e instanceof Is))return;let r={behavior:"instant"};e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position,r):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>y(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Is(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){bg()};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();function Qv(n,...t){return rr([{provide:fo,multi:!0,useValue:n},[],{provide:tn,useFactory:SS,deps:[xe]},{provide:Wa,multi:!0,useFactory:DS},t.map(e=>e.\u0275providers)])}function SS(n){return n.routerState.root}function Rl(n,t){return{\u0275kind:n,\u0275providers:t}}function DS(){let n=I($t);return t=>{let e=n.get(Br);if(t!==e.components[0])return;let r=n.get(xe),i=n.get(IS);n.get(Jv)===1&&r.initialNavigation(),n.get(MS,null,{optional:!0})?.setUpPreloading(),n.get(CS,null,{optional:!0})?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var IS=new U("",{factory:()=>new Ue}),Jv=new U("",{providedIn:"root",factory:()=>1});function xS(){let n=[{provide:Qm,useValue:!0},{provide:Jv,useValue:0},cd(()=>{let t=I($t);return t.get(Xg,Promise.resolve()).then(()=>new Promise(r=>{let i=t.get(xe),o=t.get(IS);pf(i,()=>{r(!0)}),t.get(hf).afterPreactivation=()=>(r(!0),o.closed?$(void 0):o),i.initialNavigation()}))})];return Rl(2,n)}function TS(){let n=[cd(()=>{I(xe).setUpLocationChangeListener()}),{provide:Jv,useValue:2}];return Rl(3,n)}var MS=new U("");function AS(n){return Rl(0,[{provide:MS,useExisting:wS},{provide:Ol,useExisting:n}])}function OS(){return Rl(8,[$v,{provide:Ml,useExisting:$v}])}function RS(n){Wn("NgRouterViewTransitions");let t=[{provide:Wv,useValue:_S},{provide:qv,useValue:A({skipNextTransition:!!n?.skipInitialTransition},n)}];return Rl(9,t)}var NS=[gi,{provide:co,useClass:yi},xe,uo,{provide:tn,useFactory:SS,deps:[xe]},df,[]],xt=(()=>{class n{constructor(){}static forRoot(e,r){return{ngModule:n,providers:[NS,[],{provide:fo,multi:!0,useValue:e},[],r?.errorHandler?{provide:Yv,useValue:r.errorHandler}:[],{provide:Ei,useValue:r||{}},r?.useHash?Dk():Ik(),Sk(),r?.preloadingStrategy?AS(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?xk(r):[],r?.bindToComponentInputs?OS().\u0275providers:[],r?.enableViewTransitions?RS().\u0275providers:[],Tk()]}}static forChild(e){return{ngModule:n,providers:[{provide:fo,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=In({type:n});static \u0275inj=un({})}return n})();function Sk(){return{provide:CS,useFactory:()=>{let n=I(fC),t=I(He),e=I(Ei),r=I(hf),i=I(co);return e.scrollOffset&&n.setOffset(e.scrollOffset),new Ck(i,r,n,t,e)}}}function Dk(){return{provide:pn,useClass:ol}}function Ik(){return{provide:pn,useClass:_d}}function xk(n){return[n.initialNavigation==="disabled"?TS().\u0275providers:[],n.initialNavigation==="enabledBlocking"?xS().\u0275providers:[]]}var Kv=new U("");function Tk(){return[{provide:Kv,useFactory:DS},{provide:Wa,multi:!0,useExisting:Kv}]}var $S=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(C(Jt),C(yt))};static \u0275dir=ve({type:n})}return n})(),Ps=(()=>{class n extends $S{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Dn(n)))(i||n)}})();static \u0275dir=ve({type:n,features:[nt]})}return n})(),qr=new U(""),Mk={provide:qr,useExisting:gt(()=>Vl),multi:!0},Vl=(()=>{class n extends Ps{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Dn(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&T("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ht([Mk]),nt]})}return n})(),Ak={provide:qr,useExisting:gt(()=>qe),multi:!0};function Ok(){let n=xn()?xn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Rk=new U(""),qe=(()=>{class n extends $S{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Ok())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(C(Jt),C(yt),C(Rk,8))};static \u0275dir=ve({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&T("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Ht([Ak]),nt]})}return n})();function r0(n){return n==null||i0(n)===0}function i0(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var ho=new U(""),Fs=new U(""),Nk=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,z=class{static min(t){return zS(t)}static max(t){return kk(t)}static required(t){return Pk(t)}static requiredTrue(t){return Fk(t)}static email(t){return Lk(t)}static minLength(t){return jk(t)}static maxLength(t){return Vk(t)}static pattern(t){return Uk(t)}static nullValidator(t){return gf()}static compose(t){return KS(t)}static composeAsync(t){return QS(t)}};function zS(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function kk(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function Pk(n){return r0(n.value)?{required:!0}:null}function Fk(n){return n.value===!0?null:{required:!0}}function Lk(n){return r0(n.value)||Nk.test(n.value)?null:{email:!0}}function jk(n){return t=>{let e=t.value?.length??i0(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function Vk(n){return t=>{let e=t.value?.length??i0(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function Uk(n){if(!n)return gf;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(r0(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function gf(n){return null}function HS(n){return n!=null}function GS(n){return hi(n)?Z(n):n}function WS(n){let t={};return n.forEach(e=>{t=e!=null?A(A({},t),e):t}),Object.keys(t).length===0?null:t}function qS(n,t){return t.map(e=>e(n))}function Bk(n){return!n.validate}function YS(n){return n.map(t=>Bk(t)?t:e=>t.validate(e))}function KS(n){if(!n)return null;let t=n.filter(HS);return t.length==0?null:function(e){return WS(qS(e,t))}}function ZS(n){return n!=null?KS(YS(n)):null}function QS(n){if(!n)return null;let t=n.filter(HS);return t.length==0?null:function(e){let r=qS(e,t).map(GS);return Xh(r).pipe(ie(WS))}}function JS(n){return n!=null?QS(YS(n)):null}function kS(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function XS(n){return n._rawValidators}function eD(n){return n._rawAsyncValidators}function Xv(n){return n?Array.isArray(n)?n:[n]:[]}function vf(n,t){return Array.isArray(n)?n.includes(t):n===t}function PS(n,t){let e=Xv(t);return Xv(n).forEach(i=>{vf(e,i)||e.push(i)}),e}function FS(n,t){return Xv(t).filter(e=>!vf(n,e))}var yf=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ZS(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=JS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},yn=class extends yf{name;get formDirective(){return null}get path(){return null}},yr=class extends yf{_parent=null;name=null;valueAccessor=null},_f=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},$k={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},LK=Q(A({},$k),{"[class.ng-submitted]":"isSubmitted"}),Ye=(()=>{class n extends _f{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(C(yr,2))};static \u0275dir=ve({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ie("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[nt]})}return n})(),_r=(()=>{class n extends _f{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(C(yn,10))};static \u0275dir=ve({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ie("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[nt]})}return n})();var Nl="VALID",mf="INVALID",Rs="PENDING",kl="DISABLED",wi=class{},bf=class extends wi{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Pl=class extends wi{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Fl=class extends wi{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Ns=class extends wi{status;source;constructor(t,e){super(),this.status=t,this.source=e}},e0=class extends wi{source;constructor(t){super(),this.source=t}},jl=class extends wi{source;constructor(t){super(),this.source=t}};function o0(n){return(If(n)?n.validators:n)||null}function zk(n){return Array.isArray(n)?ZS(n):n||null}function s0(n,t){return(If(t)?t.asyncValidators:n)||null}function Hk(n){return Array.isArray(n)?JS(n):n||null}function If(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function tD(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new N(1e3,"");if(!r[e])throw new N(1001,"")}function nD(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new N(1002,"")})}var ks=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return _t(this.statusReactive)}set status(t){_t(()=>this.statusReactive.set(t))}_status=ps(()=>this.statusReactive());statusReactive=ct(void 0);get valid(){return this.status===Nl}get invalid(){return this.status===mf}get pending(){return this.status==Rs}get disabled(){return this.status===kl}get enabled(){return this.status!==kl}errors;get pristine(){return _t(this.pristineReactive)}set pristine(t){_t(()=>this.pristineReactive.set(t))}_pristine=ps(()=>this.pristineReactive());pristineReactive=ct(!0);get dirty(){return!this.pristine}get touched(){return _t(this.touchedReactive)}set touched(t){_t(()=>this.touchedReactive.set(t))}_touched=ps(()=>this.touchedReactive());touchedReactive=ct(!1);get untouched(){return!this.touched}_events=new Ue;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(PS(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(PS(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(FS(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(FS(t,this._rawAsyncValidators))}hasValidator(t){return vf(this._rawValidators,t)}hasAsyncValidator(t){return vf(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Q(A({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Fl(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new Fl(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Q(A({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Pl(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new Pl(!0,r))}markAsPending(t={}){this.status=Rs;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ns(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Q(A({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=kl,this.errors=null,this._forEachChild(i=>{i.disable(Q(A({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new bf(this.value,r)),this._events.next(new Ns(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Q(A({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Nl,this._forEachChild(r=>{r.enable(Q(A({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Q(A({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nl||this.status===Rs)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new bf(this.value,e)),this._events.next(new Ns(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Q(A({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?kl:Nl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Rs,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let r=GS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Ns(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new Fe,this.statusChanges=new Fe}_calculateStatus(){return this._allControlsDisabled()?kl:this.errors?mf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rs)?Rs:this._anyControlsHaveStatus(mf)?mf:Nl}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new Pl(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Fl(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){If(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=zk(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Hk(this._rawAsyncValidators)}},Ef=class extends ks{constructor(t,e,r){super(o0(e),s0(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){nD(this,!0,t),Object.keys(t).forEach(r=>{tD(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new jl(this))}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var t0=class extends Ef{};var Ls=new U("",{providedIn:"root",factory:()=>Ul}),Ul="always";function xf(n,t){return[...t.path,n]}function wf(n,t,e=Ul){a0(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),Wk(n,t),Yk(n,t),qk(n,t),Gk(n,t)}function Cf(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Df(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Sf(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Gk(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function a0(n,t){let e=XS(n);t.validator!==null?n.setValidators(kS(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=eD(n);t.asyncValidator!==null?n.setAsyncValidators(kS(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Sf(t._rawValidators,i),Sf(t._rawAsyncValidators,i)}function Df(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=XS(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let i=eD(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Sf(t._rawValidators,r),Sf(t._rawAsyncValidators,r),e}function Wk(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&rD(n,t)})}function qk(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&rD(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function rD(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Yk(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Kk(n,t){n==null,a0(n,t)}function Zk(n,t){return Df(n,t)}function l0(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Qk(n){return Object.getPrototypeOf(n.constructor)===Ps}function Jk(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function c0(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(o=>{o.constructor===qe?e=o:Qk(o)?r=o:i=o}),i||r||e||null}function Xk(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function LS(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function jS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Ll=class extends ks{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(o0(e),s0(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),If(e)&&(e.nonNullable||e.initialValueIsDefault)&&(jS(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new jl(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){LS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){LS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){jS(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var eP=n=>n instanceof Ll,tP=(()=>{class n extends yn{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return xf(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Dn(n)))(i||n)}})();static \u0275dir=ve({type:n,standalone:!1,features:[nt]})}return n})();var nP={provide:yr,useExisting:gt(()=>qt)},VS=Promise.resolve(),qt=(()=>{class n extends yr{_changeDetectorRef;callSetDisabledState;control=new Ll;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Fe;constructor(e,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=c0(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),l0(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){wf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){VS.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,i=r!==0&&ro(r);VS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?xf(e,this._parent):[e]}static \u0275fac=function(r){return new(r||n)(C(yn,9),C(ho,10),C(Fs,10),C(qr,10),C(zr,8),C(Ls,8))};static \u0275dir=ve({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ht([nP]),nt,hn]})}return n})();var br=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ve({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),rP={provide:qr,useExisting:gt(()=>u0),multi:!0},u0=(()=>{class n extends Ps{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Dn(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&T("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ht([rP]),nt]})}return n})(),iP={provide:qr,useExisting:gt(()=>d0),multi:!0};var oP=(()=>{class n{_accessors=[];add(e,r){this._accessors.push([e,r])}remove(e){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===e){this._accessors.splice(r,1);return}}select(e){this._accessors.forEach(r=>{this._isSameGroup(r,e)&&r[1]!==e&&r[1].fireUncheck(e.value)})}_isSameGroup(e,r){return e[0].control?e[0]._parent===r._control._parent&&e[1].name===r.name:!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),d0=(()=>{class n extends Ps{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=I(Ls,{optional:!0})??Ul;constructor(e,r,i,o){super(e,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(yr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(C(Jt),C(yt),C(oP),C($t))};static \u0275dir=ve({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&T("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Ht([iP]),nt]})}return n})();var f0=new U(""),sP={provide:yr,useExisting:gt(()=>h0)},h0=(()=>{class n extends yr{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(e){}model;update=new Fe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(e),this._setAsyncValidators(r),this.valueAccessor=c0(this,i)}ngOnChanges(e){if(this._isControlChanged(e)){let r=e.form.previousValue;r&&Cf(r,this,!1),wf(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}l0(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Cf(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(C(ho,10),C(Fs,10),C(qr,10),C(f0,8),C(Ls,8))};static \u0275dir=ve({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[Ht([sP]),nt,hn]})}return n})(),aP={provide:yn,useExisting:gt(()=>An)},An=(()=>{class n extends yn{callSetDisabledState;get submitted(){return _t(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=ps(()=>this._submittedReactive());_submittedReactive=ct(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Fe;constructor(e,r,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Df(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return wf(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Cf(e.control||null,e,!1),Xk(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),Jk(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new e0(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0,r={}){this.form.reset(e,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&(Cf(r||null,e),eP(i)&&(wf(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);Kk(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&Zk(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){a0(this.form,this),this._oldForm&&Df(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(C(ho,10),C(Fs,10),C(Ls,8))};static \u0275dir=ve({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&T("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ht([aP]),nt,hn]})}return n})(),lP={provide:yn,useExisting:gt(()=>js)},js=(()=>{class n extends tP{name=null;constructor(e,r,i){super(),this._parent=e,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){oD(this._parent)}static \u0275fac=function(r){return new(r||n)(C(yn,13),C(ho,10),C(Fs,10))};static \u0275dir=ve({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[Ht([lP]),nt]})}return n})(),cP={provide:yn,useExisting:gt(()=>iD)},iD=(()=>{class n extends yn{_parent;name=null;constructor(e,r,i){super(),this._parent=e,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){oD(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return xf(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||n)(C(yn,13),C(ho,10),C(Fs,10))};static \u0275dir=ve({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[Ht([cP]),nt]})}return n})();function oD(n){return!(n instanceof js)&&!(n instanceof An)&&!(n instanceof iD)}var uP={provide:yr,useExisting:gt(()=>Zn)},Zn=(()=>{class n extends yr{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new Fe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=c0(this,o)}ngOnChanges(e){this._added||this._setUpControl(),l0(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return xf(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(C(yn,13),C(ho,10),C(Fs,10),C(qr,10),C(f0,8))};static \u0275dir=ve({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ht([uP]),nt,hn]})}return n})();var dP={provide:qr,useExisting:gt(()=>kt),multi:!0};function sD(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function fP(n){return n.split(":")[0]}var kt=(()=>{class n extends Ps{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=I(Br).injector;destroyRef=I($n);cdr=I(zr);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ba({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let r=this._getOptionId(e),i=sD(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){let r=fP(e);return this._optionMap.has(r)?this._optionMap.get(r):e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Dn(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&T("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ht([dP]),nt]})}return n})(),nn=(()=>{class n{_element;_renderer;_select;id;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(sD(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(C(yt),C(Jt),C(kt,9))};static \u0275dir=ve({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),hP={provide:qr,useExisting:gt(()=>aD),multi:!0};function US(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function pP(n){return n.split(":")[0]}var aD=(()=>{class n extends Ps{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r;if(Array.isArray(e)){let i=e.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],f=this._getOptionValue(l.value);i.push(f)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let f=this._getOptionValue(l.value);i.push(f)}}}this.value=i,e(i)}}_registerOption(e){let r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){let r=pP(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Dn(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&T("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ht([hP]),nt]})}return n})(),rn=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(US(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(US(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(C(yt),C(Jt),C(aD,9))};static \u0275dir=ve({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function mP(n){return typeof n=="number"?n:parseFloat(n)}var gP=(()=>{class n{_validator=gf;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):gf,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ve({type:n,features:[hn]})}return n})();var vP={provide:ho,useExisting:gt(()=>p0),multi:!0},p0=(()=>{class n extends gP{min;inputName="min";normalizeInput=e=>mP(e);createValidator=e=>zS(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=Dn(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&fs("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Ht([vP]),nt]})}return n})();var lD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=In({type:n});static \u0275inj=un({})}return n})(),n0=class extends ks{constructor(t,e,r){super(o0(e),s0(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){Array.isArray(t)?t.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){nD(this,!1,t),t.forEach((r,i)=>{tD(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new jl(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function BS(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Er=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,r=null){let i=this._reduceControls(e),o={};return BS(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Ef(i,o)}record(e,r=null){let i=this._reduceControls(e);return new t0(i,r)}control(e,r,i){let o={};return this.useNonNullable?(BS(r)?o=r:(o.validators=r,o.asyncValidators=i),new Ll(e,Q(A({},o),{nonNullable:!0}))):new Ll(e,r,i)}array(e,r,i){let o=e.map(s=>this._createControl(s));return new n0(o,r,i)}_reduceControls(e){let r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){if(e instanceof Ll)return e;if(e instanceof ks)return e;if(Array.isArray(e)){let r=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(r,i,o)}else return this.control(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var on=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ls,useValue:e.callSetDisabledState??Ul}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=In({type:n});static \u0275inj=un({imports:[lD]})}return n})(),wr=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:f0,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Ls,useValue:e.callSetDisabledState??Ul}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=In({type:n});static \u0275inj=un({imports:[lD]})}return n})();ke();var cD=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-HXKWO5LS.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var Bl=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},$l=class extends Bl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},zl=class extends Bl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Hl=class extends Bl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},m0=(function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n})(m0||{});var Gl=class{constructor(t,{headers:e={},customFetch:r,region:i=m0.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=cD(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return j(this,arguments,void 0,function*(e,r={}){var i;try{let{headers:o,method:s,body:a,signal:l}=r,f={},{region:h}=r;h||(h=this.region);let m=new URL(`${this.url}/${e}`);h&&h!=="any"&&(f["x-region"]=h,m.searchParams.set("forceFunctionRegion",h));let v;a&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=a):typeof a=="string"?(f["Content-Type"]="text/plain",v=a):typeof FormData<"u"&&a instanceof FormData?v=a:(f["Content-Type"]="application/json",v=JSON.stringify(a)):v=a;let g=yield this.fetch(m.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:v,signal:l}).catch(D=>{throw D.name==="AbortError"?D:new $l(D)}),E=g.headers.get("x-relay-error");if(E&&E==="true")throw new zl(g);if(!g.ok)throw new Hl(g);let S=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return S==="application/json"?w=yield g.json():S==="application/octet-stream"||S==="application/pdf"?w=yield g.blob():S==="text/event-stream"?w=g:S==="multipart/form-data"?w=yield g.formData():w=yield g.text(),{data:w,error:null,response:g}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new $l(o)}:{data:null,error:o,response:o instanceof Hl||o instanceof zl?o.context:void 0}}})}};var R0=lI(_D(),1),{PostgrestClient:bD,PostgrestQueryBuilder:nZ,PostgrestFilterBuilder:rZ,PostgrestTransformBuilder:iZ,PostgrestBuilder:oZ,PostgrestError:TP}=R0.default||R0;var N0=class{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){let e=process.versions;if(e&&e.node){let r=e.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){let r=this.getWebSocketConstructor();return new r(t,e)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},k0=N0;var ED="2.77.0";var wD=`realtime-js/${ED}`,CD="1.0.0";var ql=1e4,SD=1e3,DD=100,Yl=(function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n})(Yl||{}),ft=(function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n})(ft||{}),On=(function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n})(On||{}),P0=(function(n){return n.websocket="websocket",n})(P0||{}),po=(function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n})(po||{});var Mf=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let i=e.getUint8(1),o=e.getUint8(2),s=this.HEADER_LENGTH+2,a=r.decode(t.slice(s,s+i));s=s+i;let l=r.decode(t.slice(s,s+o));s=s+o;let f=JSON.parse(r.decode(t.slice(s,t.byteLength)));return{ref:null,topic:a,event:l,payload:f}}};var Us=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var je=(function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n})(je||{}),L0=(n,t,e={})=>{var r;let i=(r=e.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,s)=>(o[s]=MP(s,n,t,i),o),{}):{}},MP=(n,t,e,r)=>{let i=t.find(a=>a.name===n),o=i?.type,s=e[n];return o&&!r.includes(o)?ID(o,s):F0(s)},ID=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return NP(t,e)}switch(n){case je.bool:return AP(t);case je.float4:case je.float8:case je.int2:case je.int4:case je.int8:case je.numeric:case je.oid:return OP(t);case je.json:case je.jsonb:return RP(t);case je.timestamp:return kP(t);case je.abstime:case je.date:case je.daterange:case je.int4range:case je.int8range:case je.money:case je.reltime:case je.text:case je.time:case je.timestamptz:case je.timetz:case je.tsrange:case je.tstzrange:return F0(t);default:return F0(t)}},F0=n=>n,AP=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},OP=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},RP=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},NP=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let o,s=n.slice(1,e);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>ID(t,a))}return n},kP=n=>typeof n=="string"?n.replace(" ","T"):n,Af=n=>{let t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var Bs=class{constructor(t,e,r={},i=ql){this.channel=t,this.event=e,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Kl=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,o,s),this.pendingDiffs.forEach(l=>{this.state=n.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,i){let o=this.cloneDeep(t),s=this.transformState(e),a={},l={};return this.map(o,(f,h)=>{s[f]||(l[f]=h)}),this.map(s,(f,h)=>{let m=o[f];if(m){let v=h.map(w=>w.presence_ref),g=m.map(w=>w.presence_ref),E=h.filter(w=>g.indexOf(w.presence_ref)<0),S=m.filter(w=>v.indexOf(w.presence_ref)<0);E.length>0&&(a[f]=E),S.length>0&&(l[f]=S)}else a[f]=h}),this.syncDiff(o,{joins:a,leaves:l},r,i)}static syncDiff(t,e,r,i){let{joins:o,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var f;let h=(f=t[a])!==null&&f!==void 0?f:[];if(t[a]=this.cloneDeep(l),h.length>0){let m=t[a].map(g=>g.presence_ref),v=h.filter(g=>m.indexOf(g.presence_ref)<0);t[a].unshift(...v)}r(a,h,l)}),this.map(s,(a,l)=>{let f=t[a];if(!f)return;let h=l.map(m=>m.presence_ref);f=f.filter(m=>h.indexOf(m.presence_ref)<0),t[a]=f,i(a,f,l),f.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let i=t[r];return"metas"in i?e[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):e[r]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Zl=(function(n){return n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",n})(Zl||{}),Yr=(function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n})(Yr||{});var Ql=class n{constructor(t,e={config:{}},r){var i,o;if(this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new Bs(this,On.join,this.params,this.timeout),this.rejoinTimer=new Us(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(On.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Kl(this),this.broadcastEndpointURL=Af(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){let{config:{broadcast:s,presence:a,private:l}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Zl.PRESENCE]&&this.bindings[Zl.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,m={},v={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:h}),postgres_changes:f,private:l};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(g=>t?.(Yr.CHANNEL_ERROR,g)),this._onClose(()=>t?.(Yr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",E=>y(this,[E],function*({postgres_changes:g}){var S;if(this.socket.setAuth(),g===void 0){t?.(Yr.SUBSCRIBED);return}else{let w=this.bindings.postgres_changes,D=(S=w?.length)!==null&&S!==void 0?S:0,G=[];for(let B=0;B<D;B++){let P=w[B],{filter:{event:le,schema:pt,table:Te,filter:ot}}=P,Xr=g&&g[B];if(Xr&&Xr.event===le&&Xr.schema===pt&&Xr.table===Te&&Xr.filter===ot)G.push(Object.assign(Object.assign({},P),{id:Xr.id}));else{this.unsubscribe(),this.state=ft.errored,t?.(Yr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=G,t&&t(Yr.SUBSCRIBED);return}})).receive("error",g=>{this.state=ft.errored,t?.(Yr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t?.(Yr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return y(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return y(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,r){return this.state===ft.joined&&t===Zl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,r)}httpSend(i,o){return y(this,arguments,function*(t,e,r={}){var s;let a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(e==null)return Promise.reject("Payload is required for httpSend()");let l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:e,private:this.private}]})},f=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(f.status===202)return{success:!0};let h=f.statusText;try{let m=yield f.json();h=m.error||m.message||h}catch{}return Promise.reject(new Error(h))})}send(r){return y(this,arguments,function*(t,e={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:s,payload:a}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{let h=yield this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=e.timeout)!==null&&i!==void 0?i:this.timeout);return yield(o=h.body)===null||o===void 0?void 0:o.cancel(),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,f;let h=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||f===void 0)&&f.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ft.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(On.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Bs(this,On.leave,{},t),r.receive("ok",()=>{e(),i("ok")}).receive("timeout",()=>{e(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}_fetchWithTimeout(t,e,r){return y(this,null,function*(){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(o),s})}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Bs(this,t,e,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>DD){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:l,leave:f,join:h}=On;if(r&&[a,l,f,h].indexOf(s)>=0&&r!==this._joinRef())return;let v=this._onMessage(s,e,r);if(e&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var E,S,w;return((E=g.filter)===null||E===void 0?void 0:E.event)==="*"||((w=(S=g.filter)===null||S===void 0?void 0:S.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===s}).map(g=>g.callback(v,r)):(o=this.bindings[s])===null||o===void 0||o.filter(g=>{var E,S,w,D,G,B;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in g){let P=g.id,le=(E=g.filter)===null||E===void 0?void 0:E.event;return P&&((S=e.ids)===null||S===void 0?void 0:S.includes(P))&&(le==="*"||le?.toLocaleLowerCase()===((w=e.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{let P=(G=(D=g?.filter)===null||D===void 0?void 0:D.event)===null||G===void 0?void 0:G.toLocaleLowerCase();return P==="*"||P===((B=e?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===s}).map(g=>{if(typeof v=="object"&&"ids"in v){let E=v.data,{schema:S,table:w,commit_timestamp:D,type:G,errors:B}=E;v=Object.assign(Object.assign({},{schema:S,table:w,commit_timestamp:D,eventType:G,new:{},old:{},errors:B}),this._getPayloadRecords(E))}g.callback(v,r)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let i=t.toLocaleLowerCase(),o={type:i,filter:e,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&n.isEqual(i.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(On.close,{},t)}_onError(t){this._on(On.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=L0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=L0(t.columns,t.old_record)),e}};var j0=()=>{},Of={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},FP=[1e3,2e3,5e3,1e4],LP=1e4,jP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Jl=class{constructor(t,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ql,this.transport=null,this.heartbeatIntervalMs=Of.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=j0,this.ref=0,this.reconnectTimer=null,this.logger=j0,this.conn=null,this.sendBuffer=[],this.serializer=new Mf,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...s)=>import("./chunk-HXKWO5LS.js").then(({default:a})=>a(...s)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...s)=>o(...s)},!(!((r=e?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${P0.websocket}`,this.httpEndpoint=Af(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=k0.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:CD}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,e??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){return y(this,null,function*(){let e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return y(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Yl.connecting:return po.Connecting;case Yl.open:return po.Open;case Yl.closing:return po.Closing;default:return po.Closed}}isConnected(){return this.connectionState()===po.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){let r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new Ql(`realtime:${t}`,e,this);return this.channels.push(o),o}}push(t){let{topic:e,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(t=null){return y(this,null,function*(){this._authPromise=this._performAuth(t);try{yield this._authPromise}finally{this._authPromise=null}})}sendHeartbeat(){return y(this,null,function*(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(SD,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},Of.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply")try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:r,event:i,payload:o,ref:s}=e,a=s?`(${s})`:"",l=o.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,o,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(On.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${r}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([jP],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}_performAuth(t=null){return y(this,null,function*(){let e;t?e=t:this.accessToken?e=yield this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(r=>{let i={access_token:e,version:wD};e&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(On.access_token,{access_token:e})}))})}_waitForAuthIfNeeded(){return y(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(e)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Us(()=>y(this,null,function*(){setTimeout(()=>y(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),Of.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(t){var e,r,i,o,s,a,l,f,h;if(this.transport=(e=t?.transport)!==null&&e!==void 0?e:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:ql,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Of.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:j0,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t?.reconnectAfterMs)!==null&&l!==void 0?l:m=>FP[m-1]||LP,this.encode=(f=t?.encode)!==null&&f!==void 0?f:(m,v)=>v(JSON.stringify(m)),this.decode=(h=t?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};ke();var $s=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Re(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Rf=class extends $s{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},mo=class extends $s{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};ke();ke();var zs=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-HXKWO5LS.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},xD=()=>j(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-HXKWO5LS.js")).Response:Response}),Nf=n=>{if(Array.isArray(n))return n.map(e=>Nf(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let i=e.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Nf(r)}),t},TD=n=>{if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var V0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),VP=(n,t,e)=>j(void 0,void 0,void 0,function*(){let r=yield xD();n instanceof r&&!e?.noResolveJson?n.json().then(i=>{let o=n.status||500,s=i?.statusCode||o+"";t(new Rf(V0(i),o,s))}).catch(i=>{t(new mo(V0(i),i))}):t(new mo(V0(n),n))}),UP=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"||!r?i:(TD(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),e))};function Xl(n,t,e,r,i,o){return j(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,UP(t,r,i,o)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>VP(l,a,r))})})}function Ci(n,t,e,r){return j(this,void 0,void 0,function*(){return Xl(n,"GET",t,e,r)})}function sn(n,t,e,r,i){return j(this,void 0,void 0,function*(){return Xl(n,"POST",t,r,i,e)})}function ec(n,t,e,r,i){return j(this,void 0,void 0,function*(){return Xl(n,"PUT",t,r,i,e)})}function MD(n,t,e,r){return j(this,void 0,void 0,function*(){return Xl(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function Hs(n,t,e,r,i){return j(this,void 0,void 0,function*(){return Xl(n,"DELETE",t,r,i,e)})}ke();ke();var kf=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return j(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Re(t))return{data:null,error:t};throw t}})}};var AD,U0=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[AD]="BlobDownloadBuilder",this.promise=null}asStream(){return new kf(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return j(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Re(t))return{data:null,error:t};throw t}})}};AD=Symbol.toStringTag;var OD=U0;var BP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},RD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Pf=class{constructor(t,e={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=zs(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,r,i){return j(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},RD),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)}),l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let f=this._removeEmptyFolders(e),h=this._getFinalPath(f),m=yield(t=="PUT"?ec:sn)(this.fetch,`${this.url}/object/${h}`,o,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:f,id:m.Id,fullPath:m.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Re(o))return{data:null,error:o};throw o}})}upload(t,e,r){return j(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,i){return j(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l,f=Object.assign({upsert:RD.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",f.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",f.cacheControl)):(l=r,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);let m=yield ec(this.fetch,a.toString(),l,{headers:h});return{data:{path:o,fullPath:m.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Re(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return j(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let o=yield sn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new $s("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Re(r))return{data:null,error:r};throw r}})}update(t,e,r){return j(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return j(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Re(i))return{data:null,error:i};throw i}})}copy(t,e,r){return j(this,void 0,void 0,function*(){try{return{data:{path:(yield sn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Re(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,r){return j(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield sn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Re(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,r){return j(this,void 0,void 0,function*(){try{let i=yield sn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Re(i))return{data:null,error:i};throw i}})}download(t,e){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),s=o?`?${o}`:"",a=this._getFinalPath(t),l=()=>Ci(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new OD(l,this.shouldThrowOnError)}info(t){return j(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield Ci(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Nf(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Re(r))return{data:null,error:r};throw r}})}exists(t){return j(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield MD(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Re(r)&&r instanceof mo){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);let a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&i.push(l);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${f}`)}}}remove(t){return j(this,void 0,void 0,function*(){try{return{data:yield Hs(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}list(t,e,r){return j(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},BP),e),{prefix:t||""});return{data:yield sn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Re(i))return{data:null,error:i};throw i}})}listV2(t,e){return j(this,void 0,void 0,function*(){try{let r=Object.assign({},t);return{data:yield sn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Re(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};ke();var Ff="2.77.0";var Lf={"X-Client-Info":`storage-js/${Ff}`};var jf=class{constructor(t,e={},r,i){this.shouldThrowOnError=!1;let o=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lf),e),this.fetch=zs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return j(this,void 0,void 0,function*(){try{let e=this.listBucketOptionsToQueryString(t);return{data:yield Ci(this.fetch,`${this.url}/bucket${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}getBucket(t){return j(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}createBucket(t){return j(this,arguments,void 0,function*(e,r={public:!1}){try{return{data:yield sn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Re(i))return{data:null,error:i};throw i}})}updateBucket(t,e){return j(this,void 0,void 0,function*(){try{return{data:yield ec(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Re(r))return{data:null,error:r};throw r}})}emptyBucket(t){return j(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}deleteBucket(t){return j(this,void 0,void 0,function*(){try{return{data:yield Hs(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(t){let e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}};ke();var Vf=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lf),e),this.fetch=zs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return j(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}listBuckets(t){return j(this,void 0,void 0,function*(){try{let e=new URLSearchParams;t?.limit!==void 0&&e.set("limit",t.limit.toString()),t?.offset!==void 0&&e.set("offset",t.offset.toString()),t?.sortColumn&&e.set("sortColumn",t.sortColumn),t?.sortOrder&&e.set("sortOrder",t.sortOrder),t?.search&&e.set("search",t.search);let r=e.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Ci(this.fetch,i,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}deleteBucket(t){return j(this,void 0,void 0,function*(){try{return{data:yield Hs(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Re(e))return{data:null,error:e};throw e}})}};ke();ke();var Gs={"X-Client-Info":`storage-js/${Ff}`,"Content-Type":"application/json"};var Uf=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Pt(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var Ws=class extends Uf{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Bf=class extends Uf{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};ke();var qs=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-HXKWO5LS.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var ND=n=>{if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var kD=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),$P=(n,t,e)=>j(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!e?.noResolveJson){let i=n.status||500,o=n;if(typeof o.json=="function")o.json().then(s=>{let a=s?.statusCode||s?.code||i+"";t(new Ws(kD(s),i,a))}).catch(()=>{let s=i+"",a=o.statusText||`HTTP ${i} error`;t(new Ws(a,i,s))});else{let s=i+"",a=o.statusText||`HTTP ${i} error`;t(new Ws(a,i,s))}}else t(new Bf(kD(n),n))}),zP=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"||!r?i:(ND(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),e))};function HP(n,t,e,r,i,o){return j(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,zP(t,r,i,o)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;let f=l.headers.get("content-type");return!f||!f.includes("application/json")?{}:l.json()}).then(l=>s(l)).catch(l=>$P(l,a,r))})})}function Ft(n,t,e,r,i){return j(this,void 0,void 0,function*(){return HP(n,"POST",t,r,i,e)})}var $f=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gs),e),this.fetch=qs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return j(this,void 0,void 0,function*(){try{return{data:(yield Ft(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}getIndex(t,e){return j(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}listIndexes(t){return j(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}deleteIndex(t,e){return j(this,void 0,void 0,function*(){try{return{data:(yield Ft(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}};ke();var zf=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gs),e),this.fetch=qs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return j(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ft(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}getVectors(t){return j(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}listVectors(t){return j(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Ft(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}queryVectors(t){return j(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}deleteVectors(t){return j(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ft(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}};ke();var Hf=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gs),e),this.fetch=qs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return j(this,void 0,void 0,function*(){try{return{data:(yield Ft(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}getBucket(t){return j(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}listBuckets(){return j(this,arguments,void 0,function*(t={}){try{return{data:yield Ft(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}deleteBucket(t){return j(this,void 0,void 0,function*(){try{return{data:(yield Ft(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}};var tc=class extends Hf{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Gf(this.url,this.headers,t,this.fetch)}},Gf=class extends $f{constructor(t,e,r,i){super(t,e,i),this.vectorBucketName=r}createIndex(t){let e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return j(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return j(this,arguments,void 0,function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){let e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return j(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){let e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return j(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Wf(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Wf=class extends zf{constructor(t,e,r,i,o){super(t,e,o),this.vectorBucketName=r,this.indexName=i}putVectors(t){let e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return j(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){let e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return j(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return j(this,arguments,void 0,function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){let e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return j(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){let e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return j(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}};var nc=class extends jf{constructor(t,e={},r,i){super(t,e,r,i)}from(t){return new Pf(this.url,this.headers,t,this.fetch)}get vectors(){return new tc(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Vf(this.url+"/iceberg",this.headers,this.fetch)}};var PD="2.77.0";var rc="";typeof Deno<"u"?rc="deno":typeof document<"u"?rc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rc="react-native":rc="node";var GP={"X-Client-Info":`supabase-js-${rc}/${PD}`},FD={headers:GP},LD={schema:"public"},jD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},VD={};dy();var WP=n=>{let t;return n?t=n:typeof fetch>"u"?t=cy:t=fetch,(...e)=>t(...e)},qP=()=>typeof Headers>"u"?uy:Headers,UD=(n,t,e)=>{let r=WP(e),i=qP();return(o,s)=>y(null,null,function*(){var a;let l=(a=yield t())!==null&&a!==void 0?a:n,f=new i(s?.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},s),{headers:f}))})};function YP(n){return n.endsWith("/")?n:n+"/"}function BD(n,t){var e,r;let{db:i,auth:o,realtime:s,global:a}=n,{db:l,auth:f,realtime:h,global:m}=t,v={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},h),s),storage:{},global:Object.assign(Object.assign(Object.assign({},m),a),{headers:Object.assign(Object.assign({},(e=m?.headers)!==null&&e!==void 0?e:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>y(null,null,function*(){return""})};return n.accessToken?v.accessToken=n.accessToken:delete v.accessToken,v}function $D(n){let t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(YP(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}ke();ke();var qf="2.77.0";var go=30*1e3,Yf=3,Kf=Yf*go,zD="http://localhost:9999",HD="supabase.auth.token";var GD={"X-Client-Info":`gotrue-js/${qf}`};var ic="X-Supabase-Api-Version",B0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},WD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qD=600*1e3;var Si=class extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}};function W(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var Zf=class extends Si{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}};function YD(n){return W(n)&&n.name==="AuthApiError"}var Rn=class extends Si{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},Cr=class extends Si{constructor(t,e,r,i){super(t,r,i),this.name=e,this.status=r}},Nn=class extends Cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function KD(n){return W(n)&&n.name==="AuthSessionMissingError"}var Kr=class extends Cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},vo=class extends Cr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},yo=class extends Cr{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function ZD(n){return W(n)&&n.name==="AuthImplicitGrantRedirectError"}var oc=class extends Cr{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ys=class extends Cr{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function Qf(n){return W(n)&&n.name==="AuthRetryableFetchError"}var sc=class extends Cr{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}};var _o=class extends Cr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var Jf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),QD=` 	
\r=`.split(""),KP=(()=>{let n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<QD.length;t+=1)n[QD[t].charCodeAt(0)]=-2;for(let t=0;t<Jf.length;t+=1)n[Jf[t].charCodeAt(0)]=t;return n})();function JD(n,t,e){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(Jf[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(Jf[r]),t.queuedBits-=6}}function XD(n,t,e){let r=KP[n];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function $0(n){let t=[],e=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{JP(s,r,e)};for(let s=0;s<n.length;s+=1)XD(n.charCodeAt(s),i,o);return t.join("")}function ZP(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function QP(n,t){for(let e=0;e<n.length;e+=1){let r=n.charCodeAt(e);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(n.charCodeAt(e+1)-56320&65535|i)+65536,e+=1}ZP(r,t)}}function JP(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function Di(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<n.length;i+=1)XD(n.charCodeAt(i),e,r);return new Uint8Array(t)}function e1(n){let t=[];return QP(n,e=>t.push(e)),new Uint8Array(t)}function Zr(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};return n.forEach(i=>JD(i,e,r)),JD(null,e,r),t.join("")}function t1(n){return Math.round(Date.now()/1e3)+n}function n1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var Kt=()=>typeof window<"u"&&typeof document<"u",bo={tested:!1,writable:!1},Xf=()=>{if(!Kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bo.tested)return bo.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),bo.tested=!0,bo.writable=!0}catch{bo.tested=!0,bo.writable=!1}return bo.writable};function r1(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return e.searchParams.forEach((r,i)=>{t[i]=r}),t}var eh=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-HXKWO5LS.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},i1=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Eo=(n,t,e)=>y(null,null,function*(){yield n.setItem(t,JSON.stringify(e))}),Ii=(n,t)=>y(null,null,function*(){let e=yield n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),Qr=(n,t)=>y(null,null,function*(){yield n.removeItem(t)}),ac=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};ac.promiseConstructor=Promise;function th(n){let t=n.split(".");if(t.length!==3)throw new _o("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!WD.test(t[r]))throw new _o("JWT not in base64url format");return{header:JSON.parse($0(t[0])),payload:JSON.parse($0(t[1])),signature:Di(t[2]),raw:{header:t[0],payload:t[1]}}}function o1(n){return y(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})}function s1(n,t){return new Promise((r,i)=>{y(null,null,function*(){for(let o=0;o<1/0;o++)try{let s=yield n(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})})}function XP(n){return("0"+n.toString(16)).substr(-2)}function eF(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,i="";for(let o=0;o<56;o++)i+=e.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,XP).join("")}function tF(n){return y(this,null,function*(){let e=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",e),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")})}function nF(n){return y(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=yield tF(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function wo(n,t,e=!1){return y(this,null,function*(){let r=eF(),i=r;e&&(i+="/PASSWORD_RECOVERY"),yield Eo(n,`${t}-code-verifier`,i);let o=yield nF(r);return[o,r===o?"plain":"s256"]})}var rF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function a1(n){let t=n.headers.get(ic);if(!t||!t.match(rF))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function l1(n){if(!n)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function c1(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var iF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Co(n){if(!iF.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nh(){let n={};return new Proxy(n,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){let r=e.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function z0(n){return JSON.parse(JSON.stringify(n))}var So=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),oF=[502,503,504];function u1(n){return y(this,null,function*(){var t;if(!i1(n))throw new Ys(So(n),0);if(oF.includes(n.status))throw new Ys(So(n),n.status);let e;try{e=yield n.json()}catch(o){throw new Rn(So(o),o)}let r,i=a1(n);if(i&&i.getTime()>=B0["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?r=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(r=e.error_code),r){if(r==="weak_password")throw new sc(So(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Nn}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new sc(So(e),n.status,e.weak_password.reasons);throw new Zf(So(e),n.status||500,r)})}var sF=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),e))};function ee(n,t,e,r){return y(this,null,function*(){var i;let o=Object.assign({},r?.headers);o[ic]||(o[ic]=B0["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield aF(n,t,e+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}})}function aF(n,t,e,r,i,o){return y(this,null,function*(){let s=sF(t,r,i,o),a;try{a=yield n(e,Object.assign({},s))}catch(l){throw console.error(l),new Ys(So(l),0)}if(a.ok||(yield u1(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield u1(l)}})}function kn(n){var t;let e=null;lF(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=t1(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function H0(n){let t=kn(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Sr(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function d1(n){return{data:n,error:null}}function f1(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o}=n,s=xr(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function G0(n){return n}function lF(n){return n.access_token&&n.refresh_token&&n.expires_in}var rh=["global","local","others"];var Ks=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=eh(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(r){return y(this,arguments,function*(t,e=rh[0]){if(rh.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rh.join(", ")}`);try{return yield ee(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(W(i))return{data:null,error:i};throw i}})}inviteUserByEmail(r){return y(this,arguments,function*(t,e={}){try{return yield ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Sr})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}})}generateLink(t){return y(this,null,function*(){try{let{options:e}=t,r=xr(t,["options"]),i=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),yield ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:f1,redirectTo:e?.redirectTo})}catch(e){if(W(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return y(this,null,function*(){try{return yield ee(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Sr})}catch(e){if(W(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return y(this,null,function*(){var e,r,i,o,s,a,l;try{let f={nextPage:null,lastPage:0,total:0},h=yield ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:G0});if(h.error)throw h.error;let m=yield h.json(),v=(s=h.headers.get("x-total-count"))!==null&&s!==void 0?s:0,g=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(E=>{let S=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(E.split(";")[1].split("=")[1]);f[`${w}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(W(f))return{data:{users:[]},error:f};throw f}})}getUserById(t){return y(this,null,function*(){Co(t);try{return yield ee(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Sr})}catch(e){if(W(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return y(this,null,function*(){Co(t);try{return yield ee(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:Sr})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}})}deleteUser(t,e=!1){return y(this,null,function*(){Co(t);try{return yield ee(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:Sr})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}})}_listFactors(t){return y(this,null,function*(){Co(t.userId);try{let{data:e,error:r}=yield ee(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:r}}catch(e){if(W(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return y(this,null,function*(){Co(t.userId),Co(t.id);try{return{data:yield ee(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(W(e))return{data:null,error:e};throw e}})}_listOAuthClients(t){return y(this,null,function*(){var e,r,i,o,s,a,l;try{let f={nextPage:null,lastPage:0,total:0},h=yield ee(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:G0});if(h.error)throw h.error;let m=yield h.json(),v=(s=h.headers.get("x-total-count"))!==null&&s!==void 0?s:0,g=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(E=>{let S=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(E.split(";")[1].split("=")[1]);f[`${w}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(W(f))return{data:{clients:[]},error:f};throw f}})}_createOAuthClient(t){return y(this,null,function*(){try{return yield ee(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(W(e))return{data:null,error:e};throw e}})}_getOAuthClient(t){return y(this,null,function*(){try{return yield ee(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(W(e))return{data:null,error:e};throw e}})}_deleteOAuthClient(t){return y(this,null,function*(){try{return yield ee(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(W(e))return{data:null,error:e};throw e}})}_regenerateOAuthClientSecret(t){return y(this,null,function*(){try{return yield ee(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(W(e))return{data:null,error:e};throw e}})}};function W0(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}var Do={debug:!!(globalThis&&Xf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},lc=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},ih=class extends lc{};function q0(n,t,e){return y(this,null,function*(){Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Do.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},i=>y(null,null,function*(){if(i){Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield e()}finally{Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(t===0)throw Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new ih(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Do.debug)try{let o=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}})))})}function h1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Y0(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function p1(n){return parseInt(n,16)}function m1(n){let t=new TextEncoder().encode(n);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function g1(n){var t;let{chainId:e,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:l,resources:f,scheme:h,uri:m,version:v}=n;{if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}let g=Y0(n.address),E=h?`${h}://${r}`:r,S=n.statement?`${n.statement}
`:"",w=`${E} wants you to sign in with your Ethereum account:
${g}

${S}`,D=`URI: ${m}
Version: ${v}
Chain ID: ${e}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(D+=`
Expiration Time: ${i.toISOString()}`),a&&(D+=`
Not Before: ${a.toISOString()}`),l&&(D+=`
Request ID: ${l}`),f){let G=`
Resources:`;for(let B of f){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);G+=`
- ${B}`}D+=G}return`${w}
${D}`}ke();var ze=class extends Error{constructor({message:t,code:e,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=e}},Io=class extends ze{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}};function v1({error:n,options:t}){var e,r,i;let{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ze({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((e=o.authenticatorSelection)===null||e===void 0?void 0:e.requireResidentKey)===!0)return new ze({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ze({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ze({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new ze({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new ze({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ze({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new ze({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){let s=window.location.hostname;if(K0(s)){if(o.rp.id!==s)return new ze({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ze({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new ze({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function y1({error:n,options:t}){let{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ze({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new ze({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){let r=window.location.hostname;if(K0(r)){if(e.rpId!==r)return new ze({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new ze({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var Z0=class{createNewAbortSignal(){if(this.controller){let e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},cF=new Z0;function b1(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);let{challenge:t,user:e,excludeCredentials:r}=n,i=xr(n,["challenge","user","excludeCredentials"]),o=Di(t).buffer,s=Object.assign(Object.assign({},e),{id:Di(e.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){let f=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},f),{id:Di(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return a}function E1(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);let{challenge:t,allowCredentials:e}=n,r=xr(n,["challenge","allowCredentials"]),i=Di(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(e&&e.length>0){o.allowCredentials=new Array(e.length);for(let s=0;s<e.length;s++){let a=e[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Di(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function w1(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let e=n;return{id:n.id,rawId:n.id,response:{attestationObject:Zr(new Uint8Array(n.response.attestationObject)),clientDataJSON:Zr(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function C1(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let e=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Zr(new Uint8Array(i.authenticatorData)),clientDataJSON:Zr(new Uint8Array(i.clientDataJSON)),signature:Zr(new Uint8Array(i.signature)),userHandle:i.userHandle?Zr(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function K0(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function _1(){var n,t;return!!(Kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}function uF(n){return y(this,null,function*(){try{let t=yield navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Io("Browser returned unexpected credential type",t)}:{data:null,error:new Io("Empty credential response",t)}}catch(t){return{data:null,error:v1({error:t,options:n})}}})}function dF(n){return y(this,null,function*(){try{let t=yield navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Io("Browser returned unexpected credential type",t)}:{data:null,error:new Io("Empty credential response",t)}}catch(t){return{data:null,error:y1({error:t,options:n})}}})}var fF={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},hF={userVerification:"preferred",hints:["security-key"]};function oh(...n){let t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),e=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of n)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(e(s))r[o]=s;else if(t(s)){let a=r[o];t(a)?r[o]=oh(a,s):r[o]=oh(s)}else r[o]=s}return r}function pF(n,t){return oh(fF,n,t||{})}function mF(n,t){return oh(hF,n,t||{})}var sh=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(t){return y(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))})}_challenge(s,a){return y(this,arguments,function*({factorId:t,webauthn:e,friendlyName:r,signal:i},o){try{let{data:l,error:f}=yield this.client.mfa.challenge({factorId:t,webauthn:e});if(!l)return{data:null,error:f};let h=i??cF.createNewAbortSignal();if(l.webauthn.type==="create"){let{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${r}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{let m=pF(l.webauthn.credential_options.publicKey,o?.create),{data:v,error:g}=yield uF({publicKey:m,signal:h});return v?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}case"request":{let m=mF(l.webauthn.credential_options.publicKey,o?.request),{data:v,error:g}=yield dF(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:h}));return v?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}}}catch(l){return W(l)?{data:null,error:l}:{data:null,error:new Rn("Unexpected error in challenge",l)}}})}_verify(i){return y(this,arguments,function*({challengeId:t,factorId:e,webauthn:r}){return this.client.mfa.verify({factorId:e,challengeId:t,webauthn:r})})}_authenticate(s,a){return y(this,arguments,function*({factorId:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!e)return{data:null,error:new Si("rpId is required for WebAuthn authentication")};try{if(!_1())return{data:null,error:new Rn("Browser does not support WebAuthn",null)};let{data:l,error:f}=yield this.challenge({factorId:t,webauthn:{rpId:e,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:f};let{webauthn:h}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:h.type,rpId:e,rpOrigins:r,credential_response:h.credential_response}})}catch(l){return W(l)?{data:null,error:l}:{data:null,error:new Rn("Unexpected error in authenticate",l)}}})}_register(s,a){return y(this,arguments,function*({friendlyName:t,rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!e)return{data:null,error:new Si("rpId is required for WebAuthn registration")};try{if(!_1())return{data:null,error:new Rn("Browser does not support WebAuthn",null)};let{data:l,error:f}=yield this._enroll({friendlyName:t});if(!l)return yield this.client.mfa.listFactors().then(v=>{var g;return(g=v.data)===null||g===void 0?void 0:g.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===t&&E.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:f};let{data:h,error:m}=yield this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:e,rpOrigins:r},signal:i},{create:o});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:e,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(l){return W(l)?{data:null,error:l}:{data:null,error:new Rn("Unexpected error in register",l)}}})}};h1();var gF={url:zD,storageKey:HD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:GD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function S1(n,t,e){return y(this,null,function*(){return yield e()})}var Zs={},vF=(()=>{class n{get jwks(){var e,r;return(r=(e=Zs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Zs[this.storageKey]=Object.assign(Object.assign({},Zs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Zs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zs[this.storageKey]=Object.assign(Object.assign({},Zs[this.storageKey]),{cachedAt:e})}constructor(e){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&Kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let o=Object.assign(Object.assign({},gF),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Ks({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=eh(o.fetch),this.lock=o.lock||S1,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Kt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=q0:this.lock=S1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new sh(this)},this.persistSession?(o.storage?this.storage=o.storage:Xf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=W0(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=W0(this.memoryStorage)),Kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",s=>y(this,null,function*(){this._debug("received broadcast notification from other tab or client",s),yield this._notifyAllSubscribers(s.data.event,s.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qf}) ${new Date().toISOString()}`,...e),this}initialize(){return y(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=y(this,null,function*(){return yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return y(this,null,function*(){var e;try{let r=r1(window.location.href),i="none";if(this._isImplicitGrantCallback(r)?i="implicit":(yield this._isPKCECallback(r))&&(i="pkce"),Kt()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=yield this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),ZD(s)){let f=(e=s.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:s}}return yield this._removeSession(),{error:s}}let{session:a,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),yield this._saveSession(a),setTimeout(()=>y(this,null,function*(){l==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return W(r)?{error:r}:{error:new Rn("Unexpected error during initialization",r)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return y(this,null,function*(){var r,i,o;try{let s=yield ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:kn}),{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};let f=a.session,h=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(s){if(W(s))return{data:{user:null,session:null},error:s};throw s}})}signUp(e){return y(this,null,function*(){var r,i,o;try{let s;if("email"in e){let{email:m,password:v,options:g}=e,E=null,S=null;this.flowType==="pkce"&&([E,S]=yield wo(this.storage,this.storageKey)),s=yield ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:m,password:v,data:(r=g?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:E,code_challenge_method:S},xform:kn})}else if("phone"in e){let{phone:m,password:v,options:g}=e;s=yield ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:v,data:(i=g?.data)!==null&&i!==void 0?i:{},channel:(o=g?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:kn})}else throw new vo("You must provide either an email or phone number and a password");let{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};let f=a.session,h=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(s){if(W(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithPassword(e){return y(this,null,function*(){try{let r;if("email"in e){let{email:s,password:a,options:l}=e;r=yield ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:H0})}else if("phone"in e){let{phone:s,password:a,options:l}=e;r=yield ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:H0})}else throw new vo("You must provide either an email or phone number and a password");let{data:i,error:o}=r;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Kr}:(i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(e){return y(this,null,function*(){var r,i,o,s;return yield this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(e){return y(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>y(this,null,function*(){return this._exchangeCodeForSession(e)}))})}signInWithWeb3(e){return y(this,null,function*(){let{chain:r}=e;switch(r){case"ethereum":return yield this.signInWithEthereum(e);case"solana":return yield this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}})}signInWithEthereum(e){return y(this,null,function*(){var r,i,o,s,a,l,f,h,m,v,g;let E,S;if("message"in e)E=e.message,S=e.signature;else{let{chain:w,wallet:D,statement:G,options:B}=e,P;if(Kt())if(typeof D=="object")P=D;else{let Ir=window;if("ethereum"in Ir&&typeof Ir.ethereum=="object"&&"request"in Ir.ethereum&&typeof Ir.ethereum.request=="function")P=Ir.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=D}let le=new URL((r=B?.url)!==null&&r!==void 0?r:window.location.href),pt=yield P.request({method:"eth_requestAccounts"}).then(Ir=>Ir).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!pt||pt.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let Te=Y0(pt[0]),ot=(i=B?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ot){let Ir=yield P.request({method:"eth_chainId"});ot=p1(Ir)}let Xr={domain:le.host,address:Te,statement:G,uri:le.href,version:"1",chainId:ot,nonce:(o=B?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=B?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=B?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(f=B?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=B?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(m=B?.signInWithEthereum)===null||m===void 0?void 0:m.resources};E=g1(Xr),S=yield P.request({method:"personal_sign",params:[m1(E),Te]})}try{let{data:w,error:D}=yield ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:S},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:kn});if(D)throw D;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Kr}:(w.session&&(yield this._saveSession(w.session),yield this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:D})}catch(w){if(W(w))return{data:{user:null,session:null},error:w};throw w}})}signInWithSolana(e){return y(this,null,function*(){var r,i,o,s,a,l,f,h,m,v,g,E;let S,w;if("message"in e)S=e.message,w=e.signature;else{let{chain:D,wallet:G,statement:B,options:P}=e,le;if(Kt())if(typeof G=="object")le=G;else{let Te=window;if("solana"in Te&&typeof Te.solana=="object"&&("signIn"in Te.solana&&typeof Te.solana.signIn=="function"||"signMessage"in Te.solana&&typeof Te.solana.signMessage=="function"))le=Te.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof G!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");le=G}let pt=new URL((r=P?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in le&&le.signIn){let Te=yield le.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P?.signInWithSolana),{version:"1",domain:pt.host,uri:pt.href}),B?{statement:B}:null)),ot;if(Array.isArray(Te)&&Te[0]&&typeof Te[0]=="object")ot=Te[0];else if(Te&&typeof Te=="object"&&"signedMessage"in Te&&"signature"in Te)ot=Te;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ot&&"signature"in ot&&(typeof ot.signedMessage=="string"||ot.signedMessage instanceof Uint8Array)&&ot.signature instanceof Uint8Array)S=typeof ot.signedMessage=="string"?ot.signedMessage:new TextDecoder().decode(ot.signedMessage),w=ot.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in le)||typeof le.signMessage!="function"||!("publicKey"in le)||typeof le!="object"||!le.publicKey||!("toBase58"in le.publicKey)||typeof le.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${pt.host} wants you to sign in with your Solana account:`,le.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${pt.href}`,`Issued At: ${(o=(i=P?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=P?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((a=P?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((l=P?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((f=P?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((h=P?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((v=(m=P?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||v===void 0)&&v.length?["Resources",...P.signInWithSolana.resources.map(ot=>`- ${ot}`)]:[]].join(`
`);let Te=yield le.signMessage(new TextEncoder().encode(S),"utf8");if(!Te||!(Te instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=Te}}try{let{data:D,error:G}=yield ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Zr(w)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:kn});if(G)throw G;return!D||!D.session||!D.user?{data:{user:null,session:null},error:new Kr}:(D.session&&(yield this._saveSession(D.session),yield this._notifyAllSubscribers("SIGNED_IN",D.session)),{data:Object.assign({},D),error:G})}catch(D){if(W(D))return{data:{user:null,session:null},error:D};throw D}})}_exchangeCodeForSession(e){return y(this,null,function*(){let r=yield Ii(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{let{data:s,error:a}=yield ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:kn});if(yield Qr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Kr}:(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(W(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}})}signInWithIdToken(e){return y(this,null,function*(){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=e,l=yield ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:kn}),{data:f,error:h}=l;return h?{data:{user:null,session:null},error:h}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Kr}:(f.session&&(yield this._saveSession(f.session),yield this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:h})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(e){return y(this,null,function*(){var r,i,o,s,a;try{if("email"in e){let{email:l,options:f}=e,h=null,m=null;this.flowType==="pkce"&&([h,m]=yield wo(this.storage,this.storageKey));let{error:v}=yield ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=f?.data)!==null&&r!==void 0?r:{},create_user:(i=f?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:h,code_challenge_method:m},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){let{phone:l,options:f}=e,{data:h,error:m}=yield ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=f?.data)!==null&&o!==void 0?o:{},create_user:(s=f?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(a=f?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:m}}throw new vo("You must provide either an email or phone number.")}catch(l){if(W(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(e){return y(this,null,function*(){var r,i;try{let o,s;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:l}=yield ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:kn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let f=a.session,h=a.user;return f?.access_token&&(yield this._saveSession(f),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(o){if(W(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithSSO(e){return y(this,null,function*(){var r,i,o;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=yield wo(this.storage,this.storageKey)),yield ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:d1})}catch(s){if(W(s))return{data:null,error:s};throw s}})}reauthenticate(){return y(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return y(this,null,function*(){try{return yield this._useSession(e=>y(this,null,function*(){let{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new Nn;let{error:o}=yield ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}}))}catch(e){if(W(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return y(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in e){let{email:i,type:o,options:s}=e,{error:a}=yield ee(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:i,type:o,options:s}=e,{data:a,error:l}=yield ee(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new vo("You must provide either an email or phone number and a type")}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return y(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return this._useSession(r=>y(this,null,function*(){return r}))}))})}_acquireLock(e,r){return y(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=y(this,null,function*(){return yield i,yield r()});return this.pendingInLock.push(y(this,null,function*(){try{yield o}catch{}})),o}return yield this.lock(`lock:${this.storageKey}`,e,()=>y(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push(y(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return y(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield e(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return y(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=yield Ii(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at*1e3-Date.now()<Kf:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){let a=yield Ii(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=nh()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,h,m)=>(!a&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,h,m))})}return{data:{session:e},error:null}}let{data:o,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return y(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return y(this,null,function*(){try{return e?yield ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Sr}):yield this._useSession(r=>y(this,null,function*(){var i,o,s;let{data:a,error:l}=r;if(l)throw l;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nn}:yield ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:Sr})}))}catch(r){if(W(r))return KD(r)&&(yield this._removeSession(),yield Qr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}})}updateUser(i){return y(this,arguments,function*(e,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._updateUser(e,r)}))})}_updateUser(i){return y(this,arguments,function*(e,r={}){try{return yield this._useSession(o=>y(this,null,function*(){let{data:s,error:a}=o;if(a)throw a;if(!s.session)throw new Nn;let l=s.session,f=null,h=null;this.flowType==="pkce"&&e.email!=null&&([f,h]=yield wo(this.storage,this.storageKey));let{data:m,error:v}=yield ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:h}),jwt:l.access_token,xform:Sr});if(v)throw v;return l.user=m.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}}))}catch(o){if(W(o))return{data:{user:null},error:o};throw o}})}setSession(e){return y(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return y(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new Nn;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=th(e.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:l,error:f}=yield this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!l)return{data:{user:null,session:null},error:null};s=l}else{let{data:l,error:f}=yield this._getUser(e.access_token);if(f)throw f;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:i-r,expires_at:i},yield this._saveSession(s),yield this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(W(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(e){return y(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i;if(!e){let{data:a,error:l}=r;if(l)throw l;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Nn;let{data:o,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(e,r){return y(this,null,function*(){try{if(!Kt())throw new yo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new yo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new oc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new oc("No code detected.");let{data:B,error:P}=yield this._exchangeCodeForSession(e.code);if(P)throw P;let le=new URL(window.location.href);return le.searchParams.delete("code"),window.history.replaceState(window.history.state,"",le.toString()),{data:{session:B.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:l,expires_at:f,token_type:h}=e;if(!s||!l||!a||!h)throw new yo("No session defined in URL");let m=Math.round(Date.now()/1e3),v=parseInt(l),g=m+v;f&&(g=parseInt(f));let E=g-m;E*1e3<=go&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${v}s`);let S=g-v;m-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,g,m):m-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,g,m);let{data:w,error:D}=yield this._getUser(s);if(D)throw D;let G={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:v,expires_at:g,refresh_token:a,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:G,redirectType:e.type},error:null}}catch(i){if(W(i))return{data:{session:null,redirectType:null},error:i};throw i}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return y(this,null,function*(){let r=yield Ii(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)})}signOut(){return y(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return y(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(r=>y(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return{error:s};let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:l}=yield this.admin.signOut(a,e);if(l&&!(YD(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(yield this._removeSession(),yield Qr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){let r=n1(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),y(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:i}}}_emitInitialSession(e){return y(this,null,function*(){return yield this._useSession(r=>y(this,null,function*(){var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;yield(i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){yield(o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}}))})}resetPasswordForEmail(i){return y(this,arguments,function*(e,r={}){let o=null,s=null;this.flowType==="pkce"&&([o,s]=yield wo(this.storage,this.storageKey,!0));try{return yield ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(W(a))return{data:null,error:a};throw a}})}getUserIdentities(){return y(this,null,function*(){var e;try{let{data:r,error:i}=yield this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}})}linkIdentity(e){return y(this,null,function*(){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)})}linkIdentityOAuth(e){return y(this,null,function*(){var r;try{let{data:i,error:o}=yield this._useSession(s=>y(this,null,function*(){var a,l,f,h,m;let{data:v,error:g}=s;if(g)throw g;let E=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return yield ee(this.fetch,"GET",E,{headers:this.headers,jwt:(m=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:void 0})}));if(o)throw o;return Kt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(W(i))return{data:{provider:e.provider,url:null},error:i};throw i}})}linkIdentityIdToken(e){return y(this,null,function*(){return yield this._useSession(r=>y(this,null,function*(){var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:l,token:f,access_token:h,nonce:m}=e,v=yield ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:l,id_token:f,access_token:h,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:kn}),{data:g,error:E}=v;return E?{data:{user:null,session:null},error:E}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Kr}:(g.session&&(yield this._saveSession(g.session),yield this._notifyAllSubscribers("USER_UPDATED",g.session)),{data:g,error:E})}catch(o){if(W(o))return{data:{user:null,session:null},error:o};throw o}}))})}unlinkIdentity(e){return y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i,o;let{data:s,error:a}=r;if(a)throw a;return yield ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})}))}catch(r){if(W(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return y(this,null,function*(){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return yield s1(o=>y(this,null,function*(){return o>0&&(yield o1(200*Math.pow(2,o-1))),this._debug(r,"refreshing attempt",o),yield ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kn})}),(o,s)=>{let a=200*Math.pow(2,o);return s&&Qf(s)&&Date.now()+a-i<go})}catch(i){if(this._debug(r,"error",i),W(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){return y(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),Kt()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})}_recoverAndRefresh(){return y(this,null,function*(){var e,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=yield Ii(this.storage,this.storageKey);if(o&&this.userStorage){let a=yield Ii(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},yield Eo(this.userStorage,this.storageKey+"-user",a)),o.user=(e=a?.user)!==null&&e!==void 0?e:nh()}else if(o&&!o.user&&!o.user){let a=yield Ii(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,yield Qr(this.storage,this.storageKey+"-user"),yield Eo(this.storage,this.storageKey,o)):o.user=nh()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&(yield this._removeSession());return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Kf;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${Kf}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=yield this._callRefreshToken(o.refresh_token);a&&(console.error(a),Qf(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:l}=yield this._getUser(o.access_token);!l&&a?.user?(o.user=a.user,yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}})}_callRefreshToken(e){return y(this,null,function*(){var r,i;if(!e)throw new Nn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new ac;let{data:s,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Nn;yield this._saveSession(s.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),W(s)){let a={data:null,error:s};return Qf(s)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(e,r,i=!0){return y(this,null,function*(){let o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(l=>y(this,null,function*(){try{yield l.callback(e,r)}catch(f){s.push(f)}}));if(yield Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}})}_saveSession(e){return y(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;let r=Object.assign({},e),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&(yield Eo(this.userStorage,this.storageKey+"-user",{user:r.user}));let o=Object.assign({},r);delete o.user;let s=z0(o);yield Eo(this.storage,this.storageKey,s)}else{let o=z0(r);yield Eo(this.storage,this.storageKey,o)}})}_removeSession(){return y(this,null,function*(){this._debug("#_removeSession()"),yield Qr(this.storage,this.storageKey),yield Qr(this.storage,this.storageKey+"-code-verifier"),yield Qr(this.storage,this.storageKey+"-user"),this.userStorage&&(yield Qr(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Kt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return y(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),go);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>y(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return y(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return y(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return y(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return y(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>y(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(r=>y(this,null,function*(){let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-e)/go);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${go}ms, refresh threshold is ${Yf} ticks`),o<=Yf&&(yield this._callRefreshToken(i.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof lc)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return y(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Kt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>y(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return y(this,null,function*(){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,r,i){return y(this,null,function*(){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=yield wo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(l.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`})}_unenroll(e){return y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i;let{data:o,error:s}=r;return s?{data:null,error:s}:yield ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(W(r))return{data:null,error:r};throw r}})}_enroll(e){return y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i,o;let{data:s,error:a}=r;if(a)return{data:null,error:a};let l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:h}=yield ee(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&f.type==="totp"&&(!((o=f?.totp)===null||o===void 0)&&o.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})}))}catch(r){if(W(r))return{data:null,error:r};throw r}})}_verify(e){return y(this,null,function*(){return this._acquireLock(-1,()=>y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return{data:null,error:s};let a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?w1(e.webauthn.credential_response):C1(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:f}=yield ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:f})}))}catch(r){if(W(r))return{data:null,error:r};throw r}}))})}_challenge(e){return y(this,null,function*(){return this._acquireLock(-1,()=>y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return{data:null,error:s};let a=yield ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:b1(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:E1(l.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(r){if(W(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(e){return y(this,null,function*(){let{data:r,error:i}=yield this._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})})}_listFactors(){return y(this,null,function*(){var e;let{data:{user:r},error:i}=yield this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(e=r?.factors)!==null&&e!==void 0?e:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}})}_getAuthenticatorAssuranceLevel(){return y(this,null,function*(){return this._acquireLock(-1,()=>y(this,null,function*(){return yield this._useSession(e=>y(this,null,function*(){var r,i;let{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=th(o.access_token),l=null;a.aal&&(l=a.aal);let f=l;((i=(r=o.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");let m=a.amr||[];return{data:{currentLevel:l,nextLevel:f,currentAuthenticationMethods:m},error:null}}))}))})}fetchJwk(i){return y(this,arguments,function*(e,r={keys:[]}){let o=r.keys.find(f=>f.kid===e);if(o)return o;let s=Date.now();if(o=this.jwks.keys.find(f=>f.kid===e),o&&this.jwks_cached_at+qD>s)return o;let{data:a,error:l}=yield ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,o=a.keys.find(f=>f.kid===e),!o)?null:o})}getClaims(i){return y(this,arguments,function*(e,r={}){try{let o=e;if(!o){let{data:S,error:w}=yield this.getSession();if(w||!S.session)return{data:null,error:w};o=S.session.access_token}let{header:s,payload:a,signature:l,raw:{header:f,payload:h}}=th(o);r?.allowExpired||l1(a.exp);let m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!m){let{error:S}=yield this.getUser(o);if(S)throw S;return{data:{claims:a,header:s,signature:l},error:null}}let v=c1(s.alg),g=yield crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!(yield crypto.subtle.verify(v,g,l,e1(`${f}.${h}`))))throw new _o("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(o){if(W(o))return{data:null,error:o};throw o}})}}return n.nextInstanceID=0,n})(),Q0=vF;var yF=Q0,J0=yF;var ah=class extends J0{constructor(t){super(t)}};var lh=class{constructor(t,e,r){var i,o,s;this.supabaseUrl=t,this.supabaseKey=e;let a=$D(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);let l=`sb-${a.hostname.split(".")[0]}-auth-token`,f={db:LD,realtime:VD,auth:Object.assign(Object.assign({},jD),{storageKey:l}),global:FD},h=BD(r??{},f);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=h.auth)!==null&&s!==void 0?s:{},this.headers,h.global.fetch),this.fetch=UD(e,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new bD(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new nc(this.storageUrl.href,this.headers,this.fetch,r?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Gl(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return y(this,null,function*(){var t,e;if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:s,flowType:a,lock:l,debug:f},h,m){let v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ah({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),h),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:o,flowType:a,lock:l,debug:f,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Jl(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var D1=(n,t,e)=>new lh(n,t,e);function _F(){if(typeof window<"u"||typeof process>"u")return!1;let n=process.version;if(n==null)return!1;let t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}_F()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var X0={production:!1,supabaseUrl:"https://qgtquamtmzqvytxwlwst.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFndHF1YW10bXpxdnl0eHdsd3N0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2NTU0NzMsImV4cCI6MjA3NzIzMTQ3M30.xR4HjqI1lYoFLgbZl1zJ4eLRXjM_uraIdK2l_6t2G4A"};var an=class n{supabase;constructor(){let t={getItem:e=>y(null,null,function*(){return localStorage.getItem(e)}),setItem:(e,r)=>y(null,null,function*(){localStorage.setItem(e,r)}),removeItem:e=>y(null,null,function*(){localStorage.removeItem(e)})};this.supabase=D1(X0.supabaseUrl,X0.supabaseKey,{auth:{storage:t,detectSessionInUrl:!1}})}getClient(){return this.supabase}static \u0275fac=function(e){return new(e||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var me=class n{constructor(t,e,r){this.http=t;this.router=e;this.supabaseService=r;this.checkStoredToken();let i=this.supabaseService.getClient();i.auth.getSession().then(({data:o})=>{let s=o.session?.user??null;s&&this.loadAndPublishUser(s.id)}).catch(o=>console.debug("[AuthService] getSession err",o)),i.auth.onAuthStateChange((o,s)=>{let a=s?.user??null;a?this.loadAndPublishUser(a.id):this.currentUserSubject.next(null)})}apiUrl="http://localhost:3000/api";currentUserSubject=new st(null);currentUser$=this.currentUserSubject.asObservable();loadAndPublishUser(t){return y(this,null,function*(){try{let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.from("users").select("*").eq("id",t).maybeSingle();if(i){console.error("[AuthService] load user error",i),this.currentUserSubject.next(null);return}let o=r??null;if(o&&!o.company_id){let{data:s,error:a}=yield e.from("companies").select("id").eq("admin_user_id",t).maybeSingle();if(!a&&s?.id){let{error:l}=yield e.from("users").update({company_id:s.id}).eq("id",t);l?console.warn("[AuthService] non ho potuto aggiornare users.company_id",l):o=Q(A({},o),{company_id:s.id})}o&&typeof o.company_id=="string"&&(o.company_id==="null"||o.company_id==="undefined"||o.company_id.trim()==="")&&(o=Q(A({},o),{company_id:null})),this.currentUserSubject.next(o),console.debug("[AuthService] loaded user row",o)}this.currentUserSubject.next(o),console.debug("[AuthService] loaded user row",o)}catch(e){console.error("[AuthService] unexpected error loadAndPublishUser",e),this.currentUserSubject.next(null)}})}register(t){return Z(this.registerWithSupabase(t))}login(t,e){return y(this,null,function*(){let r=this.supabaseService.getClient(),{data:i,error:o}=yield r.auth.signInWithPassword({email:t,password:e});if(o)throw o;if(!i||!i.user)throw new Error("Login fallito: nessun user restituito dal provider");let s=i.user.id,{data:a,error:l}=yield r.from("users").select("*").eq("id",s).maybeSingle();if(l)throw l;let f=a;if(!f){let{data:m,error:v}=yield r.from("users").insert([{id:s,company_id:null,first_name:i.user.user_metadata?.first_name||null,last_name:i.user.user_metadata?.last_name||null,email:i.user.email,phone:i.user.user_metadata?.phone||null,timezone:i.user.user_metadata?.timezone||"Europe/Rome",is_active:!0,role:i.user.user_metadata?.role||"employee"}]).select().maybeSingle();if(v)throw v;f=m}let h=i.session?.access_token??null;return h?this.storeAuthData({token:h,user:f}):localStorage.setItem("user_data",JSON.stringify(f)),this.currentUserSubject.next(f),{auth:i,user:f}})}loginWithSupabase(t){return y(this,null,function*(){let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.auth.signInWithPassword({email:t.email,password:t.password});if(i)throw i;if(r.user){let{data:o,error:s}=yield e.from("users").select("*").eq("id",r.user.id).single();if(s)throw s;this.storeAuthData({token:r.session.access_token,user:o}),this.currentUserSubject.next(o)}return r})}getAuthHeaders(){let t=this.getToken();return new dr({Authorization:`Bearer ${t}`,"Content-Type":"application/json"})}logout(){this.supabaseService.getClient().auth.signOut(),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),this.currentUserSubject.next(null),this.router.navigate(["/login"])}getToken(){return localStorage.getItem("auth_token")}isAuthenticated(){return!!this.getToken()}hasRole(t){return this.currentUserSubject.value?.role===t}storeAuthData(t){t.token&&localStorage.setItem("auth_token",t.token),t.user&&localStorage.setItem("user_data",JSON.stringify(t.user))}checkStoredToken(){let t=this.getToken(),e=localStorage.getItem("user_data");if(t&&e)try{let r=JSON.parse(e);this.currentUserSubject.next(r)}catch{this.logout()}}retryOnLock(t,e=4,r=120){return y(this,null,function*(){let i=0;for(;;)try{return yield t()}catch(o){let s=o?.name??"",a=o?.message??"";if(!(s==="NavigatorLockAcquireTimeoutError"||a.includes("NavigatorLock")||a.includes("acquire"))||i>=e-1)throw o;let f=r*Math.pow(2,i)+Math.round(Math.random()*r);yield new Promise(h=>setTimeout(h,f)),i++}})}registerAdmin(t){return Z(this.registerWithSupabase(t))}registerUser(t){return Z(this.registerUserWithSupabase(t))}registerWithSupabase(t){return y(this,null,function*(){let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.auth.signUp({email:t.admin.email,password:t.admin.password,options:{data:{first_name:t.admin.first_name,last_name:t.admin.last_name,role:"admin"}}});if(i)throw i;if(!r||!r.user)throw new Error("Auth provider non ha restituito user");let o=r.user.id;try{let{error:s}=yield e.from("users").insert([{id:o,company_id:null,first_name:t.admin.first_name,last_name:t.admin.last_name,email:t.admin.email,phone:t.admin.phone,timezone:t.admin.timezone||"Europe/Rome",is_active:!0,role:"admin"}]);if(s)throw s;let{data:a,error:l}=yield e.from("companies").insert([{name:t.company.name,vat:t.company.vat,address:t.company.address,city:t.company.city,province:t.company.province,civic_number:t.company.civic_number,website:t.company.website,legal_form:t.company.legal_form,category:t.company.category,opening_hours:t.company.opening_hours,admin_user_id:o}]).select().single();if(l)throw yield e.from("users").delete().eq("id",o),l;let{error:f}=yield e.from("users").update({company_id:a.id}).eq("id",o);if(f)throw yield e.from("companies").delete().eq("id",a.id),yield e.from("users").delete().eq("id",o),f;return{user:r.user,company:a}}catch(s){throw s}})}registerUserWithSupabase(t){return y(this,null,function*(){let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.from("companies").select("id").eq("vat",t.company_vat).single();if(i||!r)throw new Error("Azienda non trovata per la partita IVA fornita");let{data:o,error:s}=yield e.auth.signUp({email:t.user.email,password:t.user.password,options:{data:{first_name:t.user.first_name,last_name:t.user.last_name,role:"employee"}}});if(s)throw s;if(!o||!o.user)throw new Error("Registrazione fallita: impossibile creare l'utente (auth returned no user)");let a=o.user.id,{error:l}=yield e.from("users").insert([{id:a,company_id:r.id,first_name:t.user.first_name,last_name:t.user.last_name,email:t.user.email,phone:t.user.phone,timezone:t.user.timezone,is_active:!0,role:"employee"}]);if(l)throw l;return{user:o.user}})}updateUserProfile(t,e){return y(this,null,function*(){let r=this.supabaseService.getClient();try{let s=yield r.auth.getSession();console.debug("[AuthService] session user id:",s?.data?.session?.user?.id??null)}catch(s){console.debug("[AuthService] getSession failed",s)}console.debug("[AuthService] updateUserProfile patch:",e,"target userId:",t);let{data:i,error:o}=yield r.from("users").update(e).eq("id",t).select().maybeSingle();if(o)throw console.error("[AuthService] updateUserProfile error:",o),o;return i&&this.currentUserSubject.next(i),i})}static \u0275fac=function(e){return new(e||n)(V(fr),V(xe),V(an))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};function bF(n,t){if(n&1&&(u(0,"div",19),d(1),c()),n&2){let e=b();p(),M(" ",e.errorMessage," ")}}function EF(n,t){n&1&&(u(0,"span",22),d(1,"Email obbligatoria"),c())}function wF(n,t){n&1&&(u(0,"span",22),d(1,"Email non valida"),c())}function CF(n,t){if(n&1&&(u(0,"div",20),x(1,EF,2,0,"span",21)(2,wF,2,0,"span",21),c()),n&2){let e=b();p(),_("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.required),p(),_("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.email)}}function SF(n,t){n&1&&(u(0,"span",22),d(1,"Password obbligatoria"),c())}function DF(n,t){if(n&1&&(u(0,"span",22),d(1),c()),n&2){let e=b(2);p(),M(" Minimo ",e.password==null||e.password.errors==null?null:e.password.errors.minlength.requiredLength," caratteri ")}}function IF(n,t){if(n&1&&(u(0,"div",20),x(1,SF,2,0,"span",21)(2,DF,2,1,"span",21),c()),n&2){let e=b();p(),_("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.required),p(),_("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.minlength)}}function xF(n,t){n&1&&(u(0,"span"),d(1,"Accedi"),c())}function TF(n,t){n&1&&O(0,"div",23)}var ch=class n{constructor(t,e,r){this.fb=t;this.authService=e;this.router=r;this.loginForm=this.fb.group({email:["",[z.required,z.email]],password:["",[z.required,z.minLength(6)]]})}loginForm;isLoading=!1;errorMessage="";ngOnInit(){this.authService.isAuthenticated()&&this.router.navigate(["/home"])}onSubmit(){return y(this,null,function*(){if(this.loginForm.valid){this.isLoading=!0,this.errorMessage="";let t=this.loginForm.value;try{yield this.authService.login(t.email,t.password),this.isLoading=!1,yield this.router.navigate(["/home"])}catch(e){this.isLoading=!1,this.errorMessage=e?.message||e?.error?.message||"Errore durante il login. Riprova.",console.error("Login error:",e)}}else this.markFormGroupTouched()})}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(t=>{this.loginForm.get(t)?.markAsTouched()})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(e){return new(e||n)(C(Er),C(me),C(xe))};static \u0275cmp=fe({type:n,selectors:[["app-login"]],decls:30,vars:11,consts:[[1,"gradient-container"],[1,"form-card",2,"max-width","440px"],[1,"section-header"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"generic-form",3,"ngSubmit","formGroup"],["class","status-message error",4,"ngIf"],[1,"form-group"],[1,"form-label"],["type","email","formControlName","email","placeholder","inserisci@email.com",1,"form-input"],["class","error-messages",4,"ngIf"],["type","password","formControlName","password","placeholder","Inserisci la password",1,"form-input"],["type","submit",1,"promethea-button","login-button",3,"disabled"],[4,"ngIf"],["class","loading-spinner small",4,"ngIf"],[1,"form-footer"],["routerLink","/register",1,"link"],["routerLink","/forgot-password",1,"link","text-sm"],[1,"status-message","error"],[1,"error-messages"],["class","error",4,"ngIf"],[1,"error"],[1,"loading-spinner","small"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),d(5,"Accedi alla Piattaforma"),c(),u(6,"p",5),d(7,"Inserisci le tue credenziali per accedere"),c()()(),u(8,"form",6),T("ngSubmit",function(){return r.onSubmit()}),x(9,bF,2,1,"div",7),u(10,"div",8)(11,"label",9),d(12,"Email"),c(),O(13,"input",10),x(14,CF,3,2,"div",11),c(),u(15,"div",8)(16,"label",9),d(17,"Password"),c(),O(18,"input",12),x(19,IF,3,2,"div",11),c(),u(20,"button",13),x(21,xF,2,0,"span",14)(22,TF,1,0,"div",15),c(),u(23,"div",16)(24,"p",5),d(25," Non hai un account? "),u(26,"a",17),d(27,"Registrati"),c()(),u(28,"a",18),d(29,"Password dimenticata?"),c()()()()()),e&2&&(p(8),_("formGroup",r.loginForm),p(),_("ngIf",r.errorMessage),p(4),Ie("error",(r.email==null?null:r.email.invalid)&&(r.email==null?null:r.email.touched)),p(),_("ngIf",(r.email==null?null:r.email.invalid)&&(r.email==null?null:r.email.touched)),p(4),Ie("error",(r.password==null?null:r.password.invalid)&&(r.password==null?null:r.password.touched)),p(),_("ngIf",(r.password==null?null:r.password.invalid)&&(r.password==null?null:r.password.touched)),p(),_("disabled",r.isLoading),p(),_("ngIf",!r.isLoading),p(),_("ngIf",r.isLoading))},dependencies:[_e,Le,wr,br,qe,Ye,_r,An,Zn,Nt],encapsulation:2})};var Js=class n{constructor(t){this.supabaseService=t}listByCompany(t){let e=this.supabaseService.getClient();return Z(e.from("employee_invitations").select("*").eq("company_id",t).order("created_at",{ascending:!0}).then(r=>{if(r.error)throw r.error;return r.data||[]}))}addInvite(t,e,r){let i=this.supabaseService.getClient(),o={company_id:t,email:e.toLowerCase(),invited_by:r??null};return Z(i.from("employee_invitations").insert(o).single().then(s=>{if(s.error)throw s.error;return s.data}))}removeInviteById(t){let e=this.supabaseService.getClient();return Z(e.from("employee_invitations").delete().eq("id",t).then(r=>{if(r.error)throw r.error;return r}))}isEmailInvited(t,e){if(!t)return Z(Promise.resolve(!1));let r=this.supabaseService.getClient();return Z(r.from("employee_invitations").select("id").eq("company_id",t).ilike("email",e).limit(1).then(i=>{if(i.error)throw i.error;return i.data&&i.data.length>0}))}getInviteForEmail(t){let e=this.supabaseService.getClient();return Z(e.from("employee_invitations").select("*").ilike("email",t).limit(1).then(r=>{if(r.error)throw r.error;return r.data&&r.data.length?r.data[0]:null}))}markAccepted(t){let e=this.supabaseService.getClient();return Z(e.from("employee_invitations").update({accepted:!0}).eq("id",t).then(r=>{if(r.error)throw r.error;return r.data}))}static \u0275fac=function(e){return new(e||n)(V(an))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var jt=class n{constructor(t,e,r){this.http=t;this.authService=e;this.supabaseService=r}baseUrl="/api/companies";getAziendaByAdmin(t){if(!t||t==="null"||t==="undefined")return console.warn("[CompanyService] getAziendaByAdmin called with invalid adminUserId:",t),$(null);let r=this.supabaseService.getClient().from("companies").select("*").eq("admin_user_id",t).maybeSingle().then(i=>{if(console.log("[CompanyService] getAziendaByAdmin raw response",i),i.error)throw i.error;return i.data??null});return Z(r)}getAzienda(t){if(!t||t==="null"||t==="undefined")return console.warn("[CompanyService] getAzienda called with invalid id:",t),$(null);let r=this.supabaseService.getClient().from("companies").select("*").eq("id",t).maybeSingle().then(i=>{if(console.log("[CompanyService] getAzienda raw response",i),i.error)throw i.error;return i.data??null});return Z(r)}getAziendaForUser(t,e){return e&&e!=="null"&&e!=="undefined"?this.getAzienda(e):t&&t!=="null"&&t!=="undefined"?this.getAziendaByAdmin(t):$(null)}aggiornaAzienda(t,e){let r=this.supabaseService.getClient();return Z(y(this,null,function*(){let{data:i,error:o}=yield r.from("companies").update(e).eq("id",t).select().maybeSingle();if(o)throw o;return i}))}getDipendenti(t){let e=this.authService.getAuthHeaders();return this.http.get(`${this.baseUrl}/${t}/users`,{headers:e})}cambiaStatoDipendente(t,e){let r=this.authService.getAuthHeaders();return this.http.patch(`${this.baseUrl}/users/${t}`,{is_active:e},{headers:r})}eliminaDipendente(t){let e=this.authService.getAuthHeaders();return this.http.delete(`${this.baseUrl}/users/${t}`,{headers:e})}creaDipendente(t){let e=this.authService.getAuthHeaders(),r={company_vat:t.company_vat||t.company_vat_field||t.company?.vat||null,user:{first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone??null,timezone:t.timezone??"Europe/Rome",hire_date:t.hire_date??null,password:t.password??(()=>{let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%",o="";for(let s=0;s<12;s++)o+=i.charAt(Math.floor(Math.random()*i.length));return o})()}};return this.http.post(`${this.baseUrl}/users`,r,{headers:e})}static \u0275fac=function(e){return new(e||n)(V(fr),V(me),V(an))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};function MF(n,t){n&1&&(u(0,"span",42),d(1,"Obbligatorio"),c())}function AF(n,t){if(n&1&&(u(0,"div",40),x(1,MF,2,0,"span",41),c()),n&2){let e=b(2);p(),_("ngIf",e.company_name==null||e.company_name.errors==null?null:e.company_name.errors.required)}}function OF(n,t){n&1&&(u(0,"span",42),d(1,"Obbligatorio"),c())}function RF(n,t){n&1&&(u(0,"span",42),d(1,"Formato non valido"),c())}function NF(n,t){if(n&1&&(u(0,"div",40),x(1,OF,2,0,"span",41)(2,RF,2,0,"span",41),c()),n&2){let e=b(2);p(),_("ngIf",e.vat==null||e.vat.errors==null?null:e.vat.errors.required),p(),_("ngIf",e.vat==null||e.vat.errors==null?null:e.vat.errors.pattern)}}function kF(n,t){if(n&1&&(u(0,"option",43),d(1),c()),n&2){let e=t.$implicit;_("value",e),p(),R(e)}}function PF(n,t){if(n&1&&(u(0,"option",43),d(1),c()),n&2){let e=t.$implicit;_("value",e),p(),R(e)}}function FF(n,t){if(n&1&&(u(0,"div",44)(1,"div",45),d(2),c(),O(3,"input",46),u(4,"span",5),d(5,"\u2014"),c(),O(6,"input",47),u(7,"label",48),O(8,"input",49),u(9,"span",5),d(10,"Chiuso"),c()()()),n&2){let e,r,i,o=t.$implicit,s=b(2);Ie("closed",(e=s.registerForm.get("opening_hours."+o.key+".closed"))==null?null:e.value),_("formGroupName",o.key),p(2),R(o.label),p(),ds("aria-label",Za("",o.label," apertura")),_("disabled",(r=s.registerForm.get("opening_hours."+o.key+".closed"))==null?null:r.value),p(3),ds("aria-label",Za("",o.label," chiusura")),_("disabled",(i=s.registerForm.get("opening_hours."+o.key+".closed"))==null?null:i.value),p(2),ds("aria-label",Za("",o.label," chiuso"))}}function LF(n,t){if(n&1&&(u(0,"div",10)(1,"h2",4)(2,"span",22),d(3,"business"),c(),d(4," Dati Azienda"),c(),u(5,"div",23)(6,"div")(7,"label",24),d(8,"Nome Azienda *"),c(),O(9,"input",25),x(10,AF,2,1,"div",15),c(),u(11,"div")(12,"label",24),d(13,"Partita IVA *"),c(),O(14,"input",26),x(15,NF,3,2,"div",15),c(),u(16,"div")(17,"label",24),d(18,"Provincia"),c(),O(19,"input",27),c(),u(20,"div")(21,"label",24),d(22,"Citt\xE0"),c(),O(23,"input",28),c(),u(24,"div")(25,"label",24),d(26,"Indirizzo"),c(),O(27,"input",29),c(),u(28,"div")(29,"label",24),d(30,"Civico"),c(),O(31,"input",30),c(),u(32,"div")(33,"label",24),d(34,"Sito web"),c(),O(35,"input",31),c(),u(36,"div")(37,"label",24),d(38,"Forma legale"),c(),u(39,"select",32)(40,"option",33),d(41,"Seleziona forma legale"),c(),x(42,kF,2,2,"option",34),c()(),u(43,"div")(44,"label",24),d(45,"Categoria"),c(),u(46,"select",35)(47,"option",33),d(48,"Seleziona categoria"),c(),x(49,PF,2,2,"option",34),c()(),u(50,"div",36)(51,"label",24),d(52,"Orari settimanali"),c(),u(53,"div",37),x(54,FF,11,12,"div",38),c(),u(55,"div",39),d(56,' Lascia vuoto open/close per i giorni chiusi oppure seleziona "Chiuso". '),c()()()()),n&2){let e=b();p(10),_("ngIf",(e.company_name==null?null:e.company_name.invalid)&&(e.company_name==null?null:e.company_name.touched)),p(5),_("ngIf",(e.vat==null?null:e.vat.invalid)&&(e.vat==null?null:e.vat.touched)),p(27),_("ngForOf",e.companyLegalForms),p(7),_("ngForOf",e.companyCategories),p(5),_("ngForOf",e.days)}}function jF(n,t){if(n&1&&(u(0,"div",10)(1,"h2",4)(2,"span",22),d(3,"person"),c(),d(4),c(),u(5,"div",23)(6,"div")(7,"label",24),d(8,"Nome *"),c(),O(9,"input",50),c(),u(10,"div")(11,"label",24),d(12,"Cognome *"),c(),O(13,"input",51),c(),u(14,"div")(15,"label",24),d(16,"Email *"),c(),O(17,"input",52),c(),u(18,"div")(19,"label",24),d(20,"Telefono *"),c(),O(21,"input",53),c(),u(22,"div")(23,"label",24),d(24,"Partita IVA azienda (per associare utente) *"),c(),O(25,"input",54),c(),u(26,"div")(27,"label",24),d(28,"Password *"),c(),O(29,"input",55),c(),u(30,"div")(31,"label",24),d(32,"Conferma Password *"),c(),O(33,"input",56),c()()()),n&2){let e=b();p(4),M(" ",e.mode==="admin"?"Dati Amministratore":"Dati Utente"," ")}}function VF(n,t){n&1&&(u(0,"div",40)(1,"span",42),d(2,"Devi accettare i termini"),c()())}function UF(n,t){if(n&1&&(u(0,"div",57),d(1),c()),n&2){let e=b();p(),R(e.errorMessage)}}function BF(n,t){if(n&1&&(u(0,"div",58),d(1),c()),n&2){let e=b();p(),R(e.successMessage)}}function $F(n,t){n&1&&(u(0,"span"),d(1,"Registrati"),c())}function zF(n,t){n&1&&(u(0,"span"),d(1,"Attendere\u2026"),c())}var HF=["S.r.l.","S.r.l.s.","S.p.A.","S.a.s.","S.n.c.","S.s.","Ditta Individuale","Libero Professionista"],GF=["Agricoltura","Industria","Costruzioni","Commercio","Alimentare","Trasporti","Servizi","ICT","Professioni","Altro"],uh=class n{constructor(t,e,r,i,o,s){this.fb=t;this.authService=e;this.router=r;this.route=i;this.invitiService=o;this.companyService=s;let a=this.fb.group({});this.days.forEach(l=>{a.addControl(l.key,this.fb.group({open:[""],close:[""],closed:[!1]}))}),this.registerForm=this.fb.group({company_name:["",[z.required,z.minLength(2)]],vat:["",[z.required,z.pattern(/^[0-9]{11}$/)]],address:[""],city:[""],province:[""],civic_number:[""],website:[""],legal_form:[""],category:[""],opening_hours:a,first_name:["",[z.required,z.minLength(2)]],last_name:["",[z.required,z.minLength(2)]],email:["",[z.required,z.email]],phone:["",[z.required,z.pattern(/^[0-9+\s\-()]{6,20}$/)]],birth_date:[""],birth_place:[""],fiscal_code:[""],timezone:["Europe/Rome"],is_active:[!1],hire_date:[""],password:["",[z.required,z.minLength(8)]],confirmPassword:["",[z.required]],terms:[!1,[z.requiredTrue]],company_vat:[""]},{validators:this.passwordMatchValidator})}mode="admin";registerForm;isLoading=!1;errorMessage="";successMessage="";closed_days=[];weekDays=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];sub;companyLegalForms=HF;companyCategories=GF;days=[{key:"monday",label:"Luned\xEC"},{key:"tuesday",label:"Marted\xEC"},{key:"wednesday",label:"Mercoled\xEC"},{key:"thursday",label:"Gioved\xEC"},{key:"friday",label:"Venerd\xEC"},{key:"saturday",label:"Sabato"},{key:"sunday",label:"Domenica"}];ngOnInit(){let t=this.route.snapshot.queryParamMap.get("mode");(t==="user"||t==="admin")&&(this.mode=t),this.setMode(this.mode)}setMode(t){this.mode=t,t==="admin"?(this.registerForm.get("company_name")?.setValidators([z.required,z.minLength(2)]),this.registerForm.get("vat")?.setValidators([z.required,z.pattern(/^[0-9]{11}$/)]),this.registerForm.get("first_name")?.setValidators([z.required,z.minLength(2)]),this.registerForm.get("last_name")?.setValidators([z.required,z.minLength(2)]),this.registerForm.get("email")?.setValidators([z.required,z.email]),this.registerForm.get("phone")?.setValidators([z.required,z.pattern(/^[0-9+\s\-()]{6,20}$/)])):(this.registerForm.get("company_name")?.clearValidators(),this.registerForm.get("vat")?.clearValidators(),this.registerForm.get("first_name")?.setValidators([z.required,z.minLength(2)]),this.registerForm.get("last_name")?.setValidators([z.required,z.minLength(2)]),this.registerForm.get("email")?.setValidators([z.required,z.email]),this.registerForm.get("phone")?.setValidators([z.required,z.pattern(/^[0-9+\s\-()]{6,20}$/)]),this.registerForm.get("company_vat")?.setValidators([z.required,z.pattern(/^[0-9]{11}$/)])),Object.keys(this.registerForm.controls).forEach(e=>this.registerForm.get(e)?.updateValueAndValidity())}toggleClosedDay(t){let e=t.target,r=e.value;e.checked?this.closed_days.includes(r)||this.closed_days.push(r):this.closed_days=this.closed_days.filter(i=>i!==r)}passwordMatchValidator(t){let e=t.get("password")?.value,r=t.get("confirmPassword")?.value;return e&&r&&e!==r?{passwordMismatch:!0}:null}get company_name(){return this.registerForm.get("company_name")}get vat(){return this.registerForm.get("vat")}get first_name(){return this.registerForm.get("first_name")}get last_name(){return this.registerForm.get("last_name")}get email(){return this.registerForm.get("email")}get phone(){return this.registerForm.get("phone")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}get terms(){return this.registerForm.get("terms")}onSubmit(){if(console.log("onSubmit invoked",{mode:this.mode,valid:this.registerForm.valid}),this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.isLoading=!0;let t=this.registerForm.value;if(this.mode==="admin"){let e={company:{name:t.company_name,vat:t.vat,address:t.address||null,city:t.city||null,province:t.province||null,civic_number:t.civic_number||null,website:t.website||null,legal_form:t.legal_form||null,category:t.category||null,opening_hours:t.opening_hours},admin:{first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone||null,birth_date:t.birth_date||null,birth_place:t.birth_place||null,fiscal_code:t.fiscal_code||null,timezone:t.timezone||"Europe/Rome",is_active:!!t.is_active,hire_date:t.hire_date||null,password:t.password}};this.sub=this.authService.registerAdmin(e).subscribe({next:r=>{this.isLoading=!1,this.successMessage="Registrazione admin completata",setTimeout(()=>this.router.navigate(["/login"]),1500)},error:r=>{this.isLoading=!1,this.errorMessage=r?.message||"Errore",console.error(r)}})}else this.isLoading=!0,this.sub=this.invitiService.getInviteForEmail(t.email).pipe(Et(1),Ve(e=>e?this.companyService.getAzienda(e.company_id).pipe(Et(1),Ve(r=>{if(!r)throw new Error("Azienda associata all'invito non trovata.");let i={user:{first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone,password:t.password,timezone:t.timezone||"Europe/Rome"},company_vat:r.vat};return this.authService.registerUser(i).pipe(Et(1),Ve(o=>this.invitiService.markAccepted(e.id).pipe(Et(1),ie(()=>o))))})):(this.isLoading=!1,this.errorMessage="La tua email non \xE8 autorizzata. Contatta l'amministratore dell'azienda.",At))).subscribe({next:e=>{this.isLoading=!1,this.successMessage="Registrazione utente completata",setTimeout(()=>this.router.navigate(["/login"]),1500)},error:e=>{this.isLoading=!1,this.errorMessage=e?.message||"Errore durante la registrazione",console.error(e)}})}ngOnDestroy(){this.sub?.unsubscribe()}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(C(Er),C(me),C(xe),C(tn),C(Js),C(jt))};static \u0275cmp=fe({type:n,selectors:[["app-register"]],decls:36,vars:14,consts:[[1,"gradient-container"],[1,"form-card",2,"max-width","900px","margin","auto"],[1,"section-header"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"section-header",2,"justify-content","center","padding","var(--gutter-sm)"],["type","button",1,"promethea-button",3,"click"],["novalidate","",1,"generic-form",3,"ngSubmit","formGroup"],["class","form-section",4,"ngIf"],[1,"form-section"],[1,"form-group"],[1,"checkbox-label"],["type","checkbox","formControlName","terms",1,"checkbox-input"],["href","#",1,"link"],["class","error-messages",4,"ngIf"],["class","status-message error",4,"ngIf"],["class","status-message info",4,"ngIf"],[1,"form-footer",2,"display","flex","justify-content","flex-end","gap","var(--gutter-sm)","margin-top","var(--gutter-md)"],["type","button",1,"promethea-button","ghost",3,"click","disabled"],["type","submit",1,"promethea-button",3,"disabled"],[4,"ngIf"],[1,"material-icons"],[1,"grid-form"],[1,"form-label"],["type","text","formControlName","company_name","placeholder","Nome azienda",1,"form-input"],["type","text","formControlName","vat","placeholder","12345678901",1,"form-input"],["type","text","formControlName","province","placeholder","MI",1,"form-input"],["type","text","formControlName","city","placeholder","Milano",1,"form-input"],["type","text","formControlName","address","placeholder","Via Roma 1",1,"form-input"],["type","text","formControlName","civic_number","placeholder","1/A",1,"form-input"],["type","url","formControlName","website","placeholder","https://esempio.it",1,"form-input"],["formControlName","legal_form",1,"form-input"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","category",1,"form-input"],[1,"form-group",2,"grid-column","1 / -1"],["formGroupName","opening_hours",2,"display","flex","flex-direction","column","gap","0.5rem"],["class","opening-row","style","display:flex; gap:0.5rem; align-items:center;",3,"formGroupName","closed",4,"ngFor","ngForOf"],[1,"text-muted",2,"font-size","0.9rem","margin-top","0.35rem"],[1,"error-messages"],["class","error",4,"ngIf"],[1,"error"],[3,"value"],[1,"opening-row",2,"display","flex","gap","0.5rem","align-items","center",3,"formGroupName"],[2,"width","110px","font-weight","600"],["type","time","formControlName","open",1,"form-input",2,"width","140px",3,"disabled","aria-label"],["type","time","formControlName","close",1,"form-input",2,"width","140px",3,"disabled","aria-label"],[1,"closed-label",2,"display","flex","align-items","center","gap","0.3rem","margin-left","0.5rem"],["type","checkbox","formControlName","closed",3,"aria-label"],["type","text","formControlName","first_name",1,"form-input"],["type","text","formControlName","last_name",1,"form-input"],["type","email","formControlName","email",1,"form-input"],["type","tel","formControlName","phone",1,"form-input"],["type","text","formControlName","company_vat","placeholder","01234567890",1,"form-input"],["type","password","formControlName","password",1,"form-input"],["type","password","formControlName","confirmPassword",1,"form-input"],[1,"status-message","error"],[1,"status-message","info"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),d(5,"Crea il Tuo Account"),c(),u(6,"p",5),d(7,"Seleziona il tipo di registrazione"),c()()(),u(8,"div",6)(9,"button",7),T("click",function(){return r.setMode("admin")}),d(10,"Azienda / Admin"),c(),u(11,"button",7),T("click",function(){return r.setMode("user")}),d(12,"Dipendente"),c()(),u(13,"form",8),T("ngSubmit",function(){return r.onSubmit()}),x(14,LF,57,5,"div",9)(15,jF,34,1,"div",9),u(16,"div",10)(17,"div",11)(18,"label",12),O(19,"input",13),d(20," Accetto i "),u(21,"a",14),d(22,"Termini e Condizioni"),c(),d(23," e la "),u(24,"a",14),d(25,"Privacy"),c(),d(26," * "),c(),x(27,VF,3,0,"div",15),c()(),x(28,UF,2,1,"div",16)(29,BF,2,1,"div",17),u(30,"div",18)(31,"button",19),T("click",function(){return r.goToLogin()}),d(32,"Annulla"),c(),u(33,"button",20),x(34,$F,2,0,"span",21)(35,zF,2,0,"span",21),c()()()()()),e&2&&(p(9),Ie("active",r.mode==="admin"),p(2),Ie("active",r.mode==="user"),p(2),_("formGroup",r.registerForm),p(),_("ngIf",r.mode==="admin"),p(),_("ngIf",r.mode==="user"||r.mode==="admin"),p(12),_("ngIf",(r.terms==null?null:r.terms.invalid)&&(r.terms==null?null:r.terms.touched)),p(),_("ngIf",r.errorMessage),p(),_("ngIf",r.successMessage),p(2),_("disabled",r.isLoading),p(2),_("disabled",r.isLoading||r.registerForm.invalid),p(),_("ngIf",!r.isLoading),p(),_("ngIf",r.isLoading))},dependencies:[_e,it,Le,wr,br,nn,rn,qe,Vl,kt,Ye,_r,An,Zn,js],styles:[".opening-row[_ngcontent-%COMP%]{padding:.35rem 0;align-items:center;transition:opacity .18s ease,background-color .18s ease}.opening-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{height:40px;padding:.45rem .75rem}.opening-row.closed[_ngcontent-%COMP%]{opacity:.6;pointer-events:auto;background:color-mix(in srgb,var(--background) 92%,transparent);border-radius:8px;padding-left:.5rem}.opening-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:disabled{background:color-mix(in srgb,var(--smoke-color-1) 6%,var(--background));border-color:color-mix(in srgb,var(--smoke-color-1) 45%,transparent);color:color-mix(in srgb,var(--text-color) 60%,transparent);cursor:not-allowed;box-shadow:none}.closed-label[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-size:.92rem;color:color-mix(in srgb,var(--text-color) 60%,transparent);font-weight:600}@media (max-width: 640px){.opening-row[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.4rem}.opening-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;font-size:.95rem}.opening-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:48%;min-width:120px}}"]})};function WF(n,t){n&1&&d(0," Email obbligatoria ")}function qF(n,t){n&1&&d(0," Inserisci un indirizzo email valido ")}function YF(n,t){if(n&1&&(u(0,"div",14),J(1,WF,1,0),J(2,qF,1,0),c()),n&2){let e,r,i=b();p(),X(!((e=i.forgotPasswordForm.get("email"))==null||e.errors==null)&&e.errors.required?1:-1),p(),X(!((r=i.forgotPasswordForm.get("email"))==null||r.errors==null)&&r.errors.email?2:-1)}}function KF(n,t){if(n&1&&(u(0,"div",23)(1,"span",4),d(2,"error"),c(),d(3),c()),n&2){let e=b();p(3),M(" ",e.errorMessage," ")}}function ZF(n,t){if(n&1&&(u(0,"div",24)(1,"span",4),d(2,"check_circle"),c(),d(3),c()),n&2){let e=b();p(3),M(" ",e.successMessage," ")}}function QF(n,t){n&1&&(u(0,"span",4),d(1,"send"),c())}function JF(n,t){n&1&&O(0,"span",28)}var dh=class n{constructor(t,e,r){this.fb=t;this.authService=e;this.router=r;this.forgotPasswordForm=this.fb.group({email:["",[z.required,z.email]]})}forgotPasswordForm;isLoading=!1;errorMessage="";successMessage="";ngOnInit(){}onSubmit(){return y(this,null,function*(){if(this.forgotPasswordForm.invalid){this.markFormGroupTouched();return}this.isLoading=!0,this.errorMessage="",this.successMessage="";try{let t=this.forgotPasswordForm.get("email")?.value;yield this.simulaInvioEmailReset(t),this.successMessage="Email di recupero inviata! Controlla la tua casella di posta.",this.forgotPasswordForm.reset(),setTimeout(()=>{this.router.navigate(["/login"])},3e3)}catch(t){console.error("Errore nel recupero password:",t),this.errorMessage=this.getErrorMessage(t)}finally{this.isLoading=!1}})}markFormGroupTouched(){Object.keys(this.forgotPasswordForm.controls).forEach(t=>{this.forgotPasswordForm.get(t)?.markAsTouched()})}simulaInvioEmailReset(t){return y(this,null,function*(){return new Promise((e,r)=>{setTimeout(()=>{Math.random()<.1?r({code:"NETWORK_ERROR",message:"Errore di connessione. Riprova pi\xF9 tardi."}):e()},1500)})})}getErrorMessage(t){return t?.code==="NETWORK_ERROR"?t.message:t?.code==="USER_NOT_FOUND"?"Nessun account trovato con questa email.":t?.code==="TOO_MANY_REQUESTS"?"Troppi tentativi. Riprova pi\xF9 tardi.":"Si \xE8 verificato un errore. Riprova pi\xF9 tardi."}hasError(t,e){let r=this.forgotPasswordForm.get(t);return r?r.hasError(e)&&r.touched:!1}static \u0275fac=function(e){return new(e||n)(C(Er),C(me),C(xe))};static \u0275cmp=fe({type:n,selectors:[["app-forgot-password"]],decls:73,vars:8,consts:[[1,"gradient-container"],[1,"form-card"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"generic-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"grid-form"],[1,"filter-group"],[1,"form-label"],["type","email","formControlName","email","placeholder","inserisci la tua email","autocomplete","email"],[1,"error"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-content"],[1,"info-item"],[1,"contact-info"],[1,"info-label"],[1,"info-value"],[1,"status-message","error"],[1,"status-message","info"],[1,"form-actions"],["type","button","routerLink","/login",1,"promethea-button","ghost"],["type","submit",1,"promethea-button",3,"disabled"],[1,"loading-spinner"],[1,"form-footer"],["routerLink","/support",1,"link"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),d(5,"key"),c()(),u(6,"div",5)(7,"h1",6),d(8,"Recupera Password"),c(),u(9,"p",7),d(10,"Inserisci la tua email per reimpostare la password"),c()()(),u(11,"form",8),T("ngSubmit",function(){return r.onSubmit()}),u(12,"div",9)(13,"h2",6)(14,"span",4),d(15,"email"),c(),d(16," Informazioni Account "),c(),u(17,"div",10)(18,"div",11)(19,"label",12)(20,"span",4),d(21,"alternate_email"),c(),d(22," Email * "),c(),O(23,"input",13),J(24,YF,3,2,"div",14),c()()(),u(25,"div",9)(26,"div",15)(27,"div",16)(28,"span",4),d(29,"info"),c(),u(30,"h3",17),d(31,"Cosa succede dopo?"),c()(),u(32,"div",18)(33,"div",19)(34,"span",4),d(35,"send"),c(),u(36,"div",20)(37,"span",21),d(38,"Invio email"),c(),u(39,"span",22),d(40,"Riceverai un link per reimpostare la password"),c()()(),u(41,"div",19)(42,"span",4),d(43,"schedule"),c(),u(44,"div",20)(45,"span",21),d(46,"Validit\xE0"),c(),u(47,"span",22),d(48,"Il link scade dopo 24 ore"),c()()(),u(49,"div",19)(50,"span",4),d(51,"security"),c(),u(52,"div",20)(53,"span",21),d(54,"Sicurezza"),c(),u(55,"span",22),d(56,"Il link \xE8 personale e sicuro"),c()()()()()(),J(57,KF,4,1,"div",23),J(58,ZF,4,1,"div",24),u(59,"div",25)(60,"button",26)(61,"span",4),d(62,"arrow_back"),c(),d(63," Torna al Login "),c(),u(64,"button",27),J(65,QF,2,0,"span",4),J(66,JF,1,0,"span",28),d(67),c()(),u(68,"div",29)(69,"p",7),d(70," Problemi? "),u(71,"a",30),d(72,"Contatta il supporto"),c()()()()()()),e&2){let i;p(11),_("formGroup",r.forgotPasswordForm),p(13),X((i=r.forgotPasswordForm.get("email"))!=null&&i.invalid&&((i=r.forgotPasswordForm.get("email"))!=null&&i.touched)?24:-1),p(33),X(r.errorMessage?57:-1),p(),X(r.successMessage?58:-1),p(6),_("disabled",r.forgotPasswordForm.invalid||r.isLoading),p(),X(r.isLoading?-1:65),p(),X(r.isLoading?66:-1),p(),M(" ",r.isLoading?"Invio in corso...":"Invia Link di Reset"," ")}},dependencies:[_e,wr,br,qe,Ye,_r,An,Zn,xt,Nt],styles:["[_nghost-%COMP%]{display:block;width:100%}@media (max-width: 768px){.form-card[_ngcontent-%COMP%]{max-width:95%!important;padding:var(--gutter-lg)!important}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm)}.form-actions[_ngcontent-%COMP%]   .promethea-button[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var Vt=class n{constructor(t,e,r){this.http=t;this.authService=e;this.supabaseService=r}timbrature=ct([]);base="/api/timbrature";getRecent(t=10){let e=this.authService.getAuthHeaders();return this.http.get(`${this.base}?limit=${t}`,{headers:e})}approve(t){let e=this.authService.getAuthHeaders();return this.http.post(`${this.base}/${t}/approve`,{},{headers:e})}punchIn(){let t=this.authService.getAuthHeaders();return this.http.post(`${this.base}/punch-in`,{},{headers:t})}punchOut(){let t=this.authService.getAuthHeaders();return this.http.post(`${this.base}/punch-out`,{},{headers:t})}eliminaTimbratura(t){let e=this.authService.getAuthHeaders();return this.http.delete(`${this.base}/${t}`,{headers:e})}creaTimbraturaSupabase(t){return y(this,null,function*(){let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.from("timbrature").insert(t).select().maybeSingle();if(i)throw console.error("[TimbratureService] creaTimbraturaSupabase error",i),i;return r})}getTimbraturePerGiorno(t,e){return e.filter(r=>{let i=new Date(r.start_ts);return this.isStessoGiorno(i,t)})}isStessoGiorno(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}formattaOrarioTimbratura(t){let e=new Date(t.start_ts),r=t.end_ts?new Date(t.end_ts):null,i=e.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"});if(r){let o=r.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),s=t.total_minutes||Math.round((r.getTime()-e.getTime())/(1e3*60)),a=Math.floor(s/60),l=s%60;return`${i} - ${o} (${a}h ${l}m)`}else return`${i} - In corso`}getColoreTimbratura(t){return t.end_ts?"var(--primary)":"#ef4444"}getTimbratureUtente(t){return y(this,null,function*(){try{let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.from("timbrature").select("*, user:users(id,first_name,last_name,role)").eq("user_id",t).order("start_ts",{ascending:!1});if(i)throw console.error("[TimbratureService] getTimbratureUtente error",i),i;return r??[]}catch(e){throw console.error("[TimbratureService] getTimbratureUtente unexpected",e),e}})}getTimbratureAzienda(t){return y(this,null,function*(){try{let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.from("timbrature").select("*, user:users(id,first_name,last_name,role)").eq("company_id",t).order("start_ts",{ascending:!1});if(i)throw console.error("[TimbratureService] getTimbratureAzienda error",i),i;return r??[]}catch(e){throw console.error("[TimbratureService] getTimbratureAzienda unexpected",e),e}})}creaTimbratura(t){return y(this,null,function*(){try{let e=this.supabaseService.getClient(),{data:r,error:i}=yield e.from("timbrature").insert(t).select().maybeSingle();if(i)throw console.error("[TimbratureService] creaTimbratura error",i),i;return r}catch(e){throw console.error("[TimbratureService] creaTimbratura unexpected",e),e}})}getTimbraturePerCalendario(){return y(this,null,function*(){try{let t=this.supabaseService.getClient(),{data:e,error:r}=yield t.from("timbrature").select("*, user:users(id,first_name,last_name,role)").order("start_ts",{ascending:!1});if(r)throw console.error("[TimbratureService] getTimbraturePerCalendario error",r),r;return e??[]}catch(t){throw console.error("[TimbratureService] getTimbraturePerCalendario unexpected",t),t}})}static \u0275fac=function(e){return new(e||n)(V(fr),V(me),V(an))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};function XF(n,t){if(n&1&&(u(0,"p",9),d(1),c()),n&2){let e=b();p(),M("Benvenuto in ",e.company.name)}}function e2(n,t){n&1&&(u(0,"div",10),O(1,"div",11),u(2,"p"),d(3,"Caricamento dati..."),c()())}function t2(n,t){if(n&1&&(u(0,"div",14)(1,"h3",15),d(2,"Dipendenti Attivi"),c(),u(3,"div",16),d(4),c(),u(5,"p",9),d(6,"Nell'azienda"),c()()),n&2){let e=b(2);p(4),R(e.getDipendentiAttivi())}}function n2(n,t){n&1&&(u(0,"button",25)(1,"span",3),d(2,"people"),c(),d(3," Gestisci Dipendenti "),c())}function r2(n,t){if(n&1&&(u(0,"div",12)(1,"div",13)(2,"div",14)(3,"h3",15),d(4,"Ore Lavorate"),c(),u(5,"div",16),d(6),H(7,"number"),c(),u(8,"p",9),d(9,"Questa settimana"),c()(),u(10,"div",14)(11,"h3",15),d(12,"Timbrature Oggi"),c(),u(13,"div",16),d(14),c(),u(15,"p",9),d(16,"Timbrature di oggi"),c()(),x(17,t2,7,1,"div",17),u(18,"div",14)(19,"h3",15),d(20,"Stato"),c(),u(21,"div",16)(22,"span",18),d(23),c()(),u(24,"p",9),d(25,"Il tuo account"),c()()(),u(26,"div",19)(27,"h2",5)(28,"span",3),d(29,"flash_on"),c(),d(30," Azioni Rapide "),c(),u(31,"div",20)(32,"button",21)(33,"span",3),d(34,"add_circle"),c(),d(35," Nuova Timbratura "),c(),u(36,"button",22)(37,"span",3),d(38,"list"),c(),d(39," Vedi Timbrature "),c(),u(40,"button",23)(41,"span",3),d(42,"settings"),c(),d(43," Impostazioni "),c(),x(44,n2,4,0,"button",24),c()()()),n&2){let e=b();p(6),M("",Y(7,7,e.getOreLavorateSettimana(),"1.1-1"),"h"),p(8),R(e.getTimbratureOggi()),p(3),_("ngIf",e.hasRole("admin")||e.hasRole("manager")),p(5),mi(e.currentUser!=null&&e.currentUser.is_active?"active":"inactive"),p(),M(" ",e.currentUser!=null&&e.currentUser.is_active?"Attivo":"Inattivo"," "),p(21),_("ngIf",e.hasRole("admin"))}}var fh=class n{constructor(t,e,r){this.authService=t;this.companyService=e;this.timbratureService=r}currentUser=null;company=null;timbrature=[];dipendenti=[];isLoading=!0;ngOnInit(){this.authService.currentUser$.subscribe(t=>{this.currentUser=t,t&&this.caricaDatiHome(t.company_id)})}caricaDatiHome(t){this.isLoading=!0,this.companyService.getAzienda(t).subscribe({next:e=>{this.company=e},error:e=>{console.error("Errore nel caricamento dati azienda:",e)}}),this.timbratureService.getRecent().subscribe({next:e=>{this.timbrature=e},error:e=>{console.error("Errore nel caricamento timbrature:",e)}}),this.hasRole("admin")||this.hasRole("manager")?this.companyService.getDipendenti(t).subscribe({next:e=>{this.dipendenti=e,this.isLoading=!1},error:e=>{console.error("Errore nel caricamento dipendenti:",e),this.isLoading=!1}}):this.isLoading=!1}hasRole(t){return this.authService.hasRole(t)}getOreLavorateSettimana(){return this.timbrature.reduce((t,e)=>t+(e.total_minutes||0),0)/60}getTimbratureOggi(){let t=new Date().toDateString();return this.timbrature.filter(e=>new Date(e.start_ts).toDateString()===t).length}getDipendentiAttivi(){return this.dipendenti.filter(t=>t.is_active).length}static \u0275fac=function(e){return new(e||n)(C(me),C(jt),C(Vt))};static \u0275cmp=fe({type:n,selectors:[["app-home"]],decls:11,vars:3,consts:[[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],["class","text-muted",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","dashboard-grid",4,"ngIf"],[1,"text-muted"],[1,"loading-container"],[1,"loading-spinner"],[1,"dashboard-grid"],[1,"grid-cards"],[1,"card"],[1,"card-title"],[1,"card-number"],["class","card",4,"ngIf"],[1,"chip"],[1,"form-section"],[1,"grid-alternative"],["routerLink","/crea-timbratura",1,"promethea-button"],["routerLink","/timbrature",1,"promethea-button","outline"],["routerLink","/impostazioni",1,"promethea-button","secondary"],["class","promethea-button ghost","routerLink","/dipendenti",4,"ngIf"],["routerLink","/dipendenti",1,"promethea-button","ghost"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d(4,"dashboard"),c()(),u(5,"div",4)(6,"h1",5),d(7,"Dashboard"),c(),x(8,XF,2,1,"p",6),c()(),x(9,e2,4,0,"div",7)(10,r2,45,10,"div",8),c()),e&2&&(p(8),_("ngIf",r.company),p(),_("ngIf",r.isLoading),p(),_("ngIf",!r.isLoading))},dependencies:[_e,Le,xt,Nt,mn],encapsulation:2})};function i2(n,t){if(n&1&&(u(0,"span"),d(1),c()),n&2){let e=b().$implicit;p(),M(" ",e.breaks.length," ")}}function o2(n,t){n&1&&(u(0,"span"),d(1,"-"),c())}function s2(n,t){if(n&1&&(u(0,"span",29),d(1),c()),n&2){let e=b().$implicit,r=b();_("title",e.notes),p(),M(" ",r.troncaTesto(e.notes,30)," ")}}function a2(n,t){n&1&&(u(0,"span"),d(1,"-"),c())}function l2(n,t){if(n&1){let e=se();u(0,"tr")(1,"td"),d(2),H(3,"date"),c(),u(4,"td"),d(5),H(6,"date"),c(),u(7,"td"),d(8),H(9,"date"),c(),u(10,"td"),d(11),H(12,"number"),c(),u(13,"td"),x(14,i2,2,1,"span",24)(15,o2,2,0,"span",24),c(),u(16,"td"),x(17,s2,2,2,"span",25)(18,a2,2,0,"span",24),c(),u(19,"td")(20,"div",26)(21,"button",27),T("click",function(){let i=F(e).$implicit,o=b();return L(o.modificaTimbratura(i))}),u(22,"span",3),d(23,"edit"),c()(),u(24,"button",28),T("click",function(){let i=F(e).$implicit,o=b();return L(o.eliminaTimbratura(i))}),u(25,"span",3),d(26,"delete"),c()()()()()}if(n&2){let e=t.$implicit;p(2),R(Y(3,8,e.start_ts,"dd/MM/yyyy")),p(3),R(Y(6,11,e.start_ts,"HH:mm")),p(3),R(e.end_ts?Y(9,14,e.end_ts,"HH:mm"):"In corso..."),p(3),M("",Y(12,17,e.total_minutes/60,"1.1-1"),"h"),p(3),_("ngIf",e.breaks&&e.breaks.length>0),p(),_("ngIf",!e.breaks||e.breaks.length===0),p(2),_("ngIf",e.notes),p(),_("ngIf",!e.notes)}}function c2(n,t){n&1&&(u(0,"div",30)(1,"span",3),d(2,"inbox"),c(),u(3,"h3"),d(4,"Nessuna timbratura trovata"),c(),u(5,"p"),d(6,"Non sono state trovate timbrature con i filtri attuali."),c()())}function u2(n,t){if(n&1&&(u(0,"div",31)(1,"div",32),d(2),c()()),n&2){let e=b();p(2),be(" Mostrando ",e.timbratureFiltrate.length," di ",e.timbrature.length," timbrature ")}}var hh=class n{constructor(t,e,r,i){this.timbratureService=t;this.authService=e;this.companyService=r;this.router=i}timbrature=[];timbratureFiltrate=[];currentUser=null;isLoading=!1;filtroDataInizio="";filtroDataFine="";filtroStato="";ngOnInit(){this.authService.currentUser$.subscribe(t=>{this.currentUser=t,t?this.caricaTimbrature():(this.timbrature=[],this.timbratureFiltrate=[])})}caricaTimbrature(){return y(this,null,function*(){if(this.currentUser){this.isLoading=!0;try{let t=[],e=this.currentUser;if(e.role==="employee")t=yield this.timbratureService.getTimbratureUtente(e.id);else if(e.role==="admin")t=yield this.timbratureService.getTimbratureAzienda(e.company_id);else if(e.role==="manager"){let r=yield this.timbratureService.getTimbraturePerCalendario(),s=(((yield this.companyService.getAzienda(e.company_id).toPromise)?yield this.companyService.getAzienda(e.company_id).toPromise():yield this.companyService.getAzienda(e.company_id))?.manager_visibility??{})[e.id]??{mode:"self",user_ids:[],roles:[]};if(s.mode==="self")t=r.filter(a=>a.user_id===e.id);else if(s.mode==="selected_users"){let a=Array.isArray(s.user_ids)?s.user_ids:[];t=r.filter(l=>a.includes(l.user_id))}else if(s.mode==="roles"){let a=Array.isArray(s.roles)?s.roles:[];t=r.filter(l=>!!l.user&&a.includes(l.user.role))}else t=r.filter(a=>a.user_id===e.id)}else t=yield this.timbratureService.getTimbratureUtente(e.id);this.timbrature=t||[],this.applicaFiltri()}catch(t){console.error("Errore nel caricamento delle timbrature:",t)}finally{this.isLoading=!1}}})}applicaFiltri(){let t=this.timbrature;if(this.filtroDataInizio){let e=new Date(this.filtroDataInizio);t=t.filter(r=>new Date(r.start_ts)>=e)}if(this.filtroDataFine){let e=new Date(this.filtroDataFine);e.setHours(23,59,59,999),t=t.filter(r=>new Date(r.start_ts)<=e)}this.filtroStato&&(this.filtroStato==="attiva"?t=t.filter(e=>!e.end_ts):this.filtroStato==="completata"&&(t=t.filter(e=>!!e.end_ts))),this.timbratureFiltrate=t}nuovaTimbratura(){this.router.navigate(["/crea-timbratura"])}modificaTimbratura(t){this.router.navigate(["/modifica-timbratura",t.id])}eliminaTimbratura(t){confirm("Sei sicuro di voler eliminare questa timbratura?")&&console.log("Eliminazione timbratura:",t.id)}troncaTesto(t,e){return t?t.length<=e?t:t.substring(0,e)+"...":""}static \u0275fac=function(e){return new(e||n)(C(Vt),C(me),C(jt),C(xe))};static \u0275cmp=fe({type:n,selectors:[["app-lista-timbrature"]],decls:63,vars:6,consts:[[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"filters-section"],[1,"filters-container"],[1,"filter-group"],[1,"form-label"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],["value","attiva"],["value","completata"],[1,"actions-container"],[1,"promethea-button",3,"click"],[1,"table-section"],[1,"table-container"],[1,"crm-table"],[4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","pagination-container",4,"ngIf"],[4,"ngIf"],["class","notes-preview",3,"title",4,"ngIf"],[1,"action-buttons"],["title","Modifica",1,"icon-button",3,"click"],["title","Elimina",1,"icon-button",3,"click"],[1,"notes-preview",3,"title"],[1,"empty-state"],[1,"pagination-container"],[1,"pagination-info"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d(4,"view_list"),c()(),u(5,"div",4)(6,"h1",5),d(7,"Lista Timbrature"),c(),u(8,"p",6),d(9,"Visualizza e gestisci tutte le tue timbrature"),c()()(),u(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),d(14,"Data Inizio"),c(),u(15,"input",11),ue("ngModelChange",function(o){return he(r.filtroDataInizio,o)||(r.filtroDataInizio=o),o}),T("change",function(){return r.applicaFiltri()}),c()(),u(16,"div",9)(17,"label",10),d(18,"Data Fine"),c(),u(19,"input",11),ue("ngModelChange",function(o){return he(r.filtroDataFine,o)||(r.filtroDataFine=o),o}),T("change",function(){return r.applicaFiltri()}),c()(),u(20,"div",9)(21,"label",10),d(22,"Stato"),c(),u(23,"select",12),ue("ngModelChange",function(o){return he(r.filtroStato,o)||(r.filtroStato=o),o}),T("change",function(){return r.applicaFiltri()}),u(24,"option",13),d(25,"Tutti"),c(),u(26,"option",14),d(27,"Attive"),c(),u(28,"option",15),d(29,"Completate"),c()()()(),u(30,"div",16)(31,"button",17),T("click",function(){return r.nuovaTimbratura()}),u(32,"span",3),d(33,"add"),c(),d(34," Nuova Timbratura "),c()()(),u(35,"div",18)(36,"div",19)(37,"table",20)(38,"thead")(39,"tr")(40,"th"),d(41,"Data"),c(),u(42,"th"),d(43,"Ora Inizio"),c(),u(44,"th"),d(45,"Ora Fine"),c(),u(46,"th"),d(47,"Ore Totali"),c(),u(48,"th"),d(49,"Pause"),c(),u(50,"th"),d(51,"Note"),c(),u(52,"th"),d(53,"Azioni"),c()()(),u(54,"tbody"),x(55,l2,27,20,"tr",21),c()()(),x(56,c2,7,0,"div",22),u(57,"div",16)(58,"button",17),T("click",function(){return r.nuovaTimbratura()}),u(59,"span",3),d(60,"add"),c(),d(61," Crea la prima timbratura "),c()()(),x(62,u2,3,2,"div",23),c()),e&2&&(p(15),ce("ngModel",r.filtroDataInizio),p(4),ce("ngModel",r.filtroDataFine),p(4),ce("ngModel",r.filtroStato),p(32),_("ngForOf",r.timbratureFiltrate),p(),_("ngIf",r.timbratureFiltrate.length===0),p(6),_("ngIf",r.timbratureFiltrate.length>0))},dependencies:[_e,it,Le,xt,on,nn,rn,qe,kt,Ye,qt,mn,ut],encapsulation:2})};function d2(n,t){n&1&&(u(0,"div",14),d(1," Data obbligatoria "),c())}function f2(n,t){n&1&&(u(0,"div",14),d(1," Ora ingresso obbligatoria "),c())}function h2(n,t){if(n&1){let e=se();u(0,"div",18)(1,"div",10)(2,"div",11)(3,"label",12),d(4),c(),O(5,"input",30),c(),u(6,"div",11)(7,"label",12),d(8),c(),O(9,"input",30),c(),u(10,"div",11)(11,"label",12),d(12,"\xA0"),c(),u(13,"button",22),T("click",function(){let i=F(e).$index,o=b();return L(o.rimuoviPausa(i))}),u(14,"span",4),d(15,"delete"),c(),d(16," Rimuovi "),c()()()()}if(n&2){let e=t.$index,r=b();p(4),M("Inizio Pausa ",e+1),p(),_("formControl",r.getPausaControl(e,"inizio")),p(3),M("Fine Pausa ",e+1),p(),_("formControl",r.getPausaControl(e,"fine")),p(4),_("disabled",r.pause.length===1)}}function p2(n,t){n&1&&(u(0,"span",4),d(1,"my_location"),c())}function m2(n,t){n&1&&O(0,"span",23)}function g2(n,t){n&1&&(u(0,"div",24)(1,"span",4),d(2,"check_circle"),c(),d(3," Posizione ottenuta "),c())}function v2(n,t){if(n&1&&(u(0,"div",32)(1,"h3",33),d(2,"Pause"),c(),u(3,"div",34),d(4),H(5,"number"),c()()),n&2){let e=b(2);p(4),M("",Y(5,1,e.calcolaPauseTotali(),"1.1-1"),"h")}}function y2(n,t){if(n&1&&(u(0,"div",9)(1,"h2",6)(2,"span",4),d(3,"summarize"),c(),d(4," Riepilogo "),c(),u(5,"div",31)(6,"div",32)(7,"h3",33),d(8,"Ore Totali"),c(),u(9,"div",34),d(10),H(11,"number"),c()(),J(12,v2,6,4,"div",32),u(13,"div",32)(14,"h3",33),d(15,"Ore Lavorative"),c(),u(16,"div",34),d(17),H(18,"number"),c()()()()),n&2){let e=b();p(10),M("",Y(11,3,e.calcolaOreTotali(),"1.1-1"),"h"),p(2),X(e.calcolaPauseTotali()>0?12:-1),p(5),M("",Y(18,6,e.calcolaLavoroEffettivo(),"1.1-1"),"h")}}function _2(n,t){if(n&1&&(u(0,"div",25)(1,"span",4),d(2,"error"),c(),d(3),c()),n&2){let e=b();p(3),M(" ",e.errorMessage," ")}}function b2(n,t){if(n&1&&(u(0,"div",26)(1,"span",4),d(2,"check_circle"),c(),d(3),c()),n&2){let e=b();p(3),M(" ",e.successMessage," ")}}function E2(n,t){n&1&&(u(0,"span",4),d(1,"save"),c())}function w2(n,t){n&1&&O(0,"span",23)}var ph=class n{constructor(t,e,r,i){this.fb=t;this.timbratureService=e;this.authService=r;this.router=i;this.timbraturaForm=this.createForm()}timbraturaForm;isLoading=!1;errorMessage="";successMessage="";ottenendoPosizione=!1;posizioneAttuale=null;currentUser=null;ngOnInit(){let t=new Date().toISOString().split("T")[0];this.timbraturaForm.patchValue({data:t}),this.authService.currentUser$.subscribe(e=>{this.currentUser=e})}createForm(){return this.fb.group({data:["",z.required],ora_inizio:["",z.required],ora_fine:[""],notes:[""],pause:this.fb.array([this.creaPausaGroup()])})}creaPausaGroup(){return this.fb.group({inizio:[""],fine:[""]})}get pause(){return this.timbraturaForm.get("pause")}getPausaControl(t,e){return this.pause.at(t).get(e)}aggiungiPausa(){this.pause.push(this.creaPausaGroup())}rimuoviPausa(t){this.pause.length>1&&this.pause.removeAt(t)}ottieniPosizione(){if(this.ottenendoPosizione=!0,this.errorMessage="",!navigator.geolocation){this.errorMessage="Geolocalizzazione non supportata dal browser",this.ottenendoPosizione=!1;return}navigator.geolocation.getCurrentPosition(t=>{this.posizioneAttuale={lat:t.coords.latitude,lng:t.coords.longitude,timestamp:new Date},this.ottenendoPosizione=!1},t=>{switch(this.ottenendoPosizione=!1,t.code){case t.PERMISSION_DENIED:this.errorMessage="Permesso di localizzazione negato";break;case t.POSITION_UNAVAILABLE:this.errorMessage="Posizione non disponibile";break;case t.TIMEOUT:this.errorMessage="Timeout nella richiesta di posizione";break;default:this.errorMessage="Errore sconosciuto nel ottenere la posizione"}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}calcolaOreTotali(){let t=this.timbraturaForm.value;if(!t.ora_inizio||!t.ora_fine)return 0;let e=new Date(`2000-01-01T${t.ora_inizio}`),i=new Date(`2000-01-01T${t.ora_fine}`).getTime()-e.getTime();return Math.max(0,i/(1e3*60*60))}calcolaPauseTotali(){let t=0;return this.timbraturaForm.value.pause.forEach(r=>{if(r.inizio&&r.fine){let i=new Date(`2000-01-01T${r.inizio}`),s=new Date(`2000-01-01T${r.fine}`).getTime()-i.getTime();t+=Math.max(0,s/(1e3*60*60))}}),t}calcolaLavoroEffettivo(){let t=this.calcolaOreTotali(),e=this.calcolaPauseTotali();return Math.max(0,t-e)}preparaDatiTimbratura(){let t=this.timbraturaForm.value,e=new Date(`${t.data}T${t.ora_inizio}`),r=t.ora_fine?new Date(`${t.data}T${t.ora_fine}`):null,i=t.pause.filter(a=>a.inizio&&a.fine).map(a=>({start:new Date(`${t.data}T${a.inizio}`).toISOString(),end:new Date(`${t.data}T${a.fine}`).toISOString()})),o=this.posizioneAttuale?[{lat:this.posizioneAttuale.lat,lng:this.posizioneAttuale.lng,address:this.posizioneAttuale.indirizzo,timestamp:this.posizioneAttuale.timestamp.toISOString()}]:[],s=Math.round(this.calcolaLavoroEffettivo()*60);return{start_ts:e.toISOString(),end_ts:r?.toISOString()||null,breaks:i.length>0?i:null,locations:o.length>0?o:null,notes:t.notes||null,total_minutes:s,company_id:this.currentUser?.company_id||"",user_id:this.currentUser?.id||""}}onSubmit(){return y(this,null,function*(){if(this.timbraturaForm.invalid){this.timbraturaForm.markAllAsTouched();return}if(!this.currentUser||!this.currentUser.id){this.errorMessage="Utente non autenticato";return}this.isLoading=!0,this.errorMessage="",this.successMessage="";let t=this.preparaDatiTimbratura();if(!t.user_id||!t.company_id){this.isLoading=!1,this.errorMessage="Impossibile determinare utente o azienda";return}try{let e=yield this.timbratureService.creaTimbraturaSupabase(t);console.debug("timbratura creata",e),this.isLoading=!1,this.successMessage="Timbratura registrata con successo!",setTimeout(()=>this.router.navigate(["/lista-timbrature"]),1200)}catch(e){console.error("Errore creazione timbratura:",e),this.isLoading=!1,this.errorMessage=e?.message||e?.error?.message||"Errore durante il salvataggio della timbratura"}})}static \u0275fac=function(e){return new(e||n)(C(Er),C(Vt),C(me),C(xe))};static \u0275cmp=fe({type:n,selectors:[["app-crea-timbratura"]],decls:85,vars:15,consts:[[1,"gradient-container"],[1,"form-card"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"generic-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"grid-form"],[1,"filter-group"],[1,"form-label"],["type","date","formControlName","data"],[1,"error"],["type","time","formControlName","ora_inizio"],["type","time","formControlName","ora_fine"],[1,"pause-container"],[1,"pausa-item"],["type","button",1,"promethea-button","outline",3,"click"],["formControlName","notes","rows","4","placeholder","Note opzionali sulla timbratura..."],[1,"location-actions"],["type","button",1,"promethea-button","secondary",3,"click","disabled"],[1,"loading-spinner"],[1,"chip","location-chip"],[1,"status-message","error"],[1,"status-message","info"],[1,"form-actions"],["type","button","routerLink","/lista-timbrature",1,"promethea-button","ghost"],["type","submit",1,"promethea-button",3,"disabled"],["type","time",3,"formControl"],[1,"grid-cards"],[1,"card"],[1,"card-title"],[1,"card-number"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),d(5,"assignment_add"),c()(),u(6,"div",5)(7,"h1",6),d(8,"Nuova Timbratura"),c(),u(9,"p",7),d(10,"Registra la tua timbratura giornaliera"),c()()(),u(11,"form",8),T("ngSubmit",function(){return r.onSubmit()}),u(12,"div",9)(13,"h2",6)(14,"span",4),d(15,"schedule"),c(),d(16," Orario Timbratura "),c(),u(17,"div",10)(18,"div",11)(19,"label",12)(20,"span",4),d(21,"event"),c(),d(22," Data * "),c(),O(23,"input",13),J(24,d2,2,0,"div",14),c(),u(25,"div",11)(26,"label",12)(27,"span",4),d(28,"play_arrow"),c(),d(29," Ora Ingresso * "),c(),O(30,"input",15),J(31,f2,2,0,"div",14),c(),u(32,"div",11)(33,"label",12)(34,"span",4),d(35,"stop"),c(),d(36," Ora Uscita "),c(),O(37,"input",16),c()()(),u(38,"div",9)(39,"h2",6)(40,"span",4),d(41,"free_breakfast"),c(),d(42," Gestione Pause "),c(),u(43,"div",17),St(44,h2,17,5,"div",18,Ng),u(46,"button",19),T("click",function(){return r.aggiungiPausa()}),u(47,"span",4),d(48,"add"),c(),d(49," Aggiungi Pausa "),c()()(),u(50,"div",9)(51,"h2",6)(52,"span",4),d(53,"notes"),c(),d(54," Dettagli Aggiuntivi "),c(),u(55,"div",10)(56,"div",11)(57,"label",12)(58,"span",4),d(59,"sticky_note_2"),c(),d(60," Note "),c(),O(61,"textarea",20),c(),u(62,"div",11)(63,"label",12)(64,"span",4),d(65,"location_on"),c(),d(66," Posizione "),c(),u(67,"div",21)(68,"button",22),T("click",function(){return r.ottieniPosizione()}),J(69,p2,2,0,"span",4),J(70,m2,1,0,"span",23),d(71),c()(),J(72,g2,4,0,"div",24),c()()(),J(73,y2,19,9,"div",9),J(74,_2,4,1,"div",25),J(75,b2,4,1,"div",26),u(76,"div",27)(77,"button",28)(78,"span",4),d(79,"arrow_back"),c(),d(80," Torna alle Timbrature "),c(),u(81,"button",29),J(82,E2,2,0,"span",4),J(83,w2,1,0,"span",23),d(84),c()()()()()),e&2){let i,o;p(11),_("formGroup",r.timbraturaForm),p(13),X((i=r.timbraturaForm.get("data"))!=null&&i.invalid&&((i=r.timbraturaForm.get("data"))!=null&&i.touched)?24:-1),p(7),X((o=r.timbraturaForm.get("ora_inizio"))!=null&&o.invalid&&((o=r.timbraturaForm.get("ora_inizio"))!=null&&o.touched)?31:-1),p(13),Dt(r.pause.controls),p(24),_("disabled",r.ottenendoPosizione),p(),X(r.ottenendoPosizione?-1:69),p(),X(r.ottenendoPosizione?70:-1),p(),M(" ",r.ottenendoPosizione?"Ottenendo...":"Ottieni Posizione"," "),p(),X(r.posizioneAttuale?72:-1),p(),X(r.calcolaOreTotali()>0?73:-1),p(),X(r.errorMessage?74:-1),p(),X(r.successMessage?75:-1),p(6),_("disabled",r.timbraturaForm.invalid||r.isLoading),p(),X(r.isLoading?-1:82),p(),X(r.isLoading?83:-1),p(),M(" ",r.isLoading?"Salvando...":"Salva Timbratura"," ")}},dependencies:[_e,wr,br,qe,Ye,_r,h0,An,Zn,xt,Nt,mn],encapsulation:2})};function C2(n,t){if(n&1&&(u(0,"div",18)(1,"span",19),d(2,"Civico"),c(),u(3,"span",20),d(4),c()()),n&2){let e=b(2);p(4),R(e.azienda.civic_number)}}function S2(n,t){if(n&1&&(u(0,"div",11)(1,"div",16)(2,"span",4),d(3,"corporate_fare"),c(),u(4,"h3",12),d(5,"Informazioni Azienda"),c()(),u(6,"div",17)(7,"div",18)(8,"span",19),d(9,"Nome Azienda"),c(),u(10,"span",20),d(11),c()(),u(12,"div",18)(13,"span",19),d(14,"Partita IVA"),c(),u(15,"span",20),d(16),c()(),u(17,"div",18)(18,"span",19),d(19,"Forma Giuridica"),c(),u(20,"span",20),d(21),c()(),u(22,"div",18)(23,"span",19),d(24,"Settore"),c(),u(25,"span",20),d(26),c()(),x(27,C2,5,1,"div",21),c()()),n&2){let e=b();p(11),R(e.azienda.name),p(5),R(e.azienda.vat),p(5),R(e.azienda.legal_form||"Non specificata"),p(5),R(e.azienda.category||"Non specificato"),p(),_("ngIf",e.azienda.civic_number)}}function D2(n,t){if(n&1&&(u(0,"span",24),d(1),c()),n&2){let e=b(3);p(),be(" ",e.azienda.city," ",e.azienda.province," ")}}function I2(n,t){if(n&1&&(u(0,"div",18)(1,"span",4),d(2,"location_on"),c(),u(3,"div",22)(4,"span",19),d(5,"Indirizzo"),c(),u(6,"span",20),d(7),c(),x(8,D2,2,2,"span",23),c()()),n&2){let e=b(2);p(7),R(e.azienda.name),p(),_("ngIf",(e.azienda==null?null:e.azienda.city)||(e.azienda==null?null:e.azienda.province))}}function x2(n,t){if(n&1&&(u(0,"div",18)(1,"span",4),d(2,"web"),c(),u(3,"div",22)(4,"span",19),d(5,"Sito Web"),c(),u(6,"a",25),d(7),c()()()),n&2){let e=b(2);p(6),_("href",e.azienda.website,Zu),p(),R(e.azienda.website)}}function T2(n,t){if(n&1&&(u(0,"div",18)(1,"span",4),d(2,"person"),c(),u(3,"div",22)(4,"span",19),d(5,"Amministratore"),c(),u(6,"span",20),d(7),c(),u(8,"span",24),d(9),c()()()),n&2){let e=b(2);p(7),be("",e.adminAzienda.first_name," ",e.adminAzienda.last_name),p(2),R(e.adminAzienda.email)}}function M2(n,t){if(n&1&&(u(0,"div",11)(1,"div",16)(2,"span",4),d(3,"contact_page"),c(),u(4,"h3",12),d(5,"Contatti"),c()(),u(6,"div",17),x(7,I2,9,2,"div",21)(8,x2,8,2,"div",21)(9,T2,10,3,"div",21),c()()),n&2){let e=b();p(7),_("ngIf",e.azienda==null?null:e.azienda.address),p(),_("ngIf",e.azienda==null?null:e.azienda.website),p(),_("ngIf",e.adminAzienda)}}function A2(n,t){if(n&1&&(u(0,"div",18)(1,"span",19),d(2,"Orario Ufficio"),c(),u(3,"span",20),d(4),c()()),n&2){let e=b(2);p(4),be("",e.azienda.opening_time," - ",e.azienda.closing_time)}}function O2(n,t){if(n&1&&(u(0,"div",30)(1,"span",31),d(2),c(),u(3,"span",32),d(4),c()()),n&2){let e=t.$implicit,r=b(2);p(2),R(e.label),p(),Ie("closed",r.isGiornoChiuso(e.key)),p(),M(" ",r.getOrarioGiorno(e.key)," ")}}function R2(n,t){if(n&1&&(u(0,"div",11)(1,"div",16)(2,"span",4),d(3,"schedule"),c(),u(4,"h3",12),d(5,"Orari di Lavoro"),c()(),u(6,"div",17),x(7,A2,5,2,"div",21),u(8,"div",26)(9,"h4",27),d(10,"Orari Settimanali"),c(),u(11,"div",28),x(12,O2,5,4,"div",29),c()()()()),n&2){let e=b();p(7),_("ngIf",(e.azienda==null?null:e.azienda.opening_time)&&(e.azienda==null?null:e.azienda.closing_time)),p(5),_("ngForOf",e.giorniSettimana)}}function N2(n,t){if(n&1&&(u(0,"div",35)(1,"div",36),d(2),c(),u(3,"div",37)(4,"div",38),d(5),c(),u(6,"div",39),d(7),c()(),u(8,"div",40),d(9),c()()),n&2){let e=t.$implicit,r=b(2);p(2),be(" ",((e==null?null:e.first_name)||"")==null?null:((e==null?null:e.first_name)||"").charAt(0),"",((e==null?null:e.last_name)||"")==null?null:((e==null?null:e.last_name)||"").charAt(0)," "),p(3),be("",e==null?null:e.first_name," ",e==null?null:e.last_name),p(),mi("role-"+(e==null?null:e.role)),p(),M(" ",r.getRuoloLabel(e==null?null:e.role)," "),p(),Ie("active",e==null?null:e.is_active),p(),M(" ",e!=null&&e.is_active?"Attivo":"Inattivo"," ")}}function k2(n,t){if(n&1&&(u(0,"div",10)(1,"h2",6)(2,"span",4),d(3,"groups"),c(),d(4," Team Aziendale "),c(),u(5,"div",33),x(6,N2,10,10,"div",34),c()()),n&2){let e=b();p(6),_("ngForOf",e.dipendenti)}}function P2(n,t){n&1&&(u(0,"button",43)(1,"span",4),d(2,"add"),c(),d(3," Nuovo Annuncio "),c())}function F2(n,t){if(n&1&&(u(0,"div",46)(1,"div",47)(2,"h4",48),d(3),c(),u(4,"span",49),d(5),H(6,"date"),c()(),u(7,"p",50),d(8),c(),u(9,"div",51),d(10),c()()),n&2){let e=t.$implicit;p(3),R(e.title),p(2),R(Y(6,4,e.date,"dd/MM/yyyy")),p(3),R(e.content),p(2),M("Pubblicato da ",e.author)}}function L2(n,t){if(n&1&&(u(0,"div",44),x(1,F2,11,7,"div",45),c()),n&2){let e=b(2);p(),_("ngForOf",e.annunci)}}function j2(n,t){n&1&&(u(0,"div",52)(1,"span",4),d(2,"campaign"),c(),u(3,"h3"),d(4,"Nessun annuncio"),c(),u(5,"p"),d(6,"Non ci sono annunci aziendali al momento."),c()())}function V2(n,t){if(n&1&&(u(0,"div",10)(1,"div",2)(2,"h2",6)(3,"span",4),d(4,"announcement"),c(),d(5," Annunci Aziendali "),c(),x(6,P2,4,0,"button",41),c(),x(7,L2,2,1,"div",42)(8,j2,7,0,"ng-template",null,0,Qa),c()),n&2){let e=eo(9),r=b();p(6),_("ngIf",r.hasRole("admin")),p(),_("ngIf",r.annunci.length>0)("ngIfElse",e)}}function U2(n,t){n&1&&(u(0,"div",53),O(1,"div",54),u(2,"p"),d(3,"Caricamento informazioni aziendali..."),c()())}var mh=class n{constructor(t,e){this.authService=t;this.companyService=e}azienda=null;adminAzienda=null;dipendenti=[];statistiche=null;annunci=[];currentUser=null;isLoading=!0;giorniSettimana=[{key:"monday",label:"Luned\xEC"},{key:"tuesday",label:"Marted\xEC"},{key:"wednesday",label:"Mercoled\xEC"},{key:"thursday",label:"Gioved\xEC"},{key:"friday",label:"Venerd\xEC"},{key:"saturday",label:"Sabato"},{key:"sunday",label:"Domenica"}];ngOnInit(){this.authService.currentUser$.subscribe(t=>{this.currentUser=t,t&&this.caricaDatiAzienda(t.company_id)})}caricaDatiAzienda(t){this.isLoading=!0,this.companyService.getAzienda(t).subscribe(e=>{if(!e){console.warn("Nessuna azienda trovata per id",t),this.isLoading=!1;return}this.azienda=e,this.caricaDipendenti(t)},e=>{console.error("Errore nel caricamento dati azienda:",e),this.isLoading=!1})}caricaDipendenti(t){this.companyService.getDipendenti(t).subscribe({next:e=>{this.dipendenti=e,this.caricaAdminAzienda(e),this.caricaStatistiche(e),this.caricaAnnunci(),this.isLoading=!1},error:e=>{console.error("Errore nel caricamento dipendenti:",e),this.isLoading=!1}})}caricaAdminAzienda(t){let e=t.find(r=>r.role==="admin");e&&(this.adminAzienda=e)}caricaStatistiche(t){this.statistiche={dipendentiTotali:t.length,dipendentiAttivi:t.filter(e=>e.is_active).length,timbratureOggi:Math.floor(Math.random()*t.length)+1,presenzeOggi:Math.floor(Math.random()*t.filter(e=>e.is_active).length)+1}}caricaAnnunci(){this.annunci=[{title:"Nuovo Orario Estivo",content:"A partire dal 1 giugno, l'orario di lavoro sar\xE0 dalle 8:00 alle 16:00.",date:new Date("2024-05-15"),author:"Amministrazione"},{title:"Team Building",content:"Venerd\xEC prossimo giornata di team building. Partecipazione obbligatoria.",date:new Date("2024-05-10"),author:"Risorse Umane"}]}hasRole(t){return this.authService.hasRole(t)}isGiornoChiuso(t){return t?!!this.azienda?.closed_days?.includes(t):!1}getOrarioGiorno(t){if(!t)return"Non specificato";if(this.isGiornoChiuso(t))return"Chiuso";let r=this.azienda?.opening_hours?.[t];return r?r?.closed||!r?.open||!r?.close?"Chiuso":`${r.open} - ${r.close}`:this.azienda?.opening_time&&this.azienda?.closing_time?`${this.azienda.opening_time} - ${this.azienda.closing_time}`:"Non specificato"}getRuoloLabel(t){if(!t)return"Dipendente";switch(t){case"admin":return"Amministratore";case"manager":return"Manager";case"employee":return"Dipendente";default:return t.charAt(0).toUpperCase()+t.slice(1)}}static \u0275fac=function(e){return new(e||n)(C(me),C(jt))};static \u0275cmp=fe({type:n,selectors:[["app-profilo-aziendale"]],decls:51,vars:10,consts:[["noAnnunci",""],[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"grid-cards"],["class","card",4,"ngIf"],[1,"form-section"],[1,"card"],[1,"card-title"],[1,"card-number"],["class","form-section",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"card-header"],[1,"card-content"],[1,"info-item"],[1,"info-label"],[1,"info-value"],["class","info-item",4,"ngIf"],[1,"contact-info"],["class","info-detail",4,"ngIf"],[1,"info-detail"],["target","_blank",1,"info-link",3,"href"],[1,"opening-hours"],[1,"subsection-title"],[1,"hours-grid"],["class","hour-item",4,"ngFor","ngForOf"],[1,"hour-item"],[1,"day-label"],[1,"hour-value"],[1,"team-grid"],["class","team-member",4,"ngFor","ngForOf"],[1,"team-member"],[1,"member-avatar"],[1,"member-info"],[1,"member-name"],[1,"member-role","chip"],[1,"member-status"],["class","promethea-button outline",4,"ngIf"],["class","announcements-list",4,"ngIf","ngIfElse"],[1,"promethea-button","outline"],[1,"announcements-list"],["class","announcement-item",4,"ngFor","ngForOf"],[1,"announcement-item"],[1,"announcement-header"],[1,"announcement-title"],[1,"announcement-date"],[1,"announcement-content"],[1,"announcement-author"],[1,"empty-state"],[1,"loading-container"],[1,"loading-spinner"]],template:function(e,r){e&1&&(u(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),d(4,"business"),c()(),u(5,"div",5)(6,"h1",6),d(7,"Profilo Aziendale"),c(),u(8,"p",7),d(9,"Informazioni e contatti dell'azienda"),c()()(),u(10,"div",8),x(11,S2,28,5,"div",9)(12,M2,10,3,"div",9)(13,R2,13,2,"div",9),c(),u(14,"div",10)(15,"h2",6)(16,"span",4),d(17,"insights"),c(),d(18," Statistiche Aziendali "),c(),u(19,"div",8)(20,"div",11)(21,"h3",12),d(22,"Dipendenti Totali"),c(),u(23,"div",13),d(24),c(),u(25,"p",7),d(26,"Persone nell'azienda"),c()(),u(27,"div",11)(28,"h3",12),d(29,"Dipendenti Attivi"),c(),u(30,"div",13),d(31),c(),u(32,"p",7),d(33,"Attualmente attivi"),c()(),u(34,"div",11)(35,"h3",12),d(36,"Timbrature Oggi"),c(),u(37,"div",13),d(38),c(),u(39,"p",7),d(40,"Registrate oggi"),c()(),u(41,"div",11)(42,"h3",12),d(43,"Presenze Oggi"),c(),u(44,"div",13),d(45),c(),u(46,"p",7),d(47,"Dipendenti in ufficio"),c()()()(),x(48,k2,7,1,"div",14)(49,V2,10,3,"div",14)(50,U2,4,0,"div",15),c()),e&2&&(p(11),_("ngIf",r.azienda),p(),_("ngIf",r.azienda),p(),_("ngIf",r.azienda),p(11),R((r.statistiche==null?null:r.statistiche.dipendentiTotali)||0),p(7),R((r.statistiche==null?null:r.statistiche.dipendentiAttivi)||0),p(7),R((r.statistiche==null?null:r.statistiche.timbratureOggi)||0),p(7),R((r.statistiche==null?null:r.statistiche.presenzeOggi)||0),p(3),_("ngIf",((r.dipendenti==null?null:r.dipendenti.length)??0)>0),p(),_("ngIf",r.hasRole("admin")||r.hasRole("manager")),p(),_("ngIf",r.isLoading))},dependencies:[_e,it,Le,ut],encapsulation:2})};var ea=class n{message="";fullScreen=!0;size="64px";get style(){return{"--spinner-size":this.size}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=fe({type:n,selectors:[["app-loading-spinner"]],inputs:{message:"message",fullScreen:"fullScreen",size:"size"},decls:7,vars:4,consts:[["role","status","aria-live","polite","aria-busy","true",1,"spinner-overlay"],[1,"spinner-wrap",3,"ngStyle"],["aria-hidden","true",1,"loading-spinner"],[1,"spinner-message"],[1,"visually-hidden"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1),O(2,"div",2),u(3,"div",3),d(4),c(),u(5,"span",4),d(6,"Caricamento in corso"),c()()()),e&2&&(Ie("fullscreen",r.fullScreen),p(),_("ngStyle",r.style),p(3),R(r.message||"Caricamento in corso..."))},dependencies:[_e,lv],styles:[".spinner-overlay[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:var(--gutter-lg);width:100%;box-sizing:border-box;pointer-events:none}.spinner-overlay.fullscreen[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:9999;background:var(--background);pointer-events:auto}.spinner-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:calc(var(--gutter-sm) / 2);padding:calc(var(--gutter-sm));border-radius:12px;background:transparent}.visually-hidden[_ngcontent-%COMP%]{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px}.loading-spinner[_ngcontent-%COMP%]{min-width:48px;min-height:48px;width:var(--fs-xl);height:var(--fs-xl);border-radius:50%;border:6px solid color-mix(in srgb,var(--muted) 25%,transparent);border-top-color:var(--primary-color, #1976d2);box-sizing:border-box;animation:_ngcontent-%COMP%_spinner-rotate .9s linear infinite}.spinner-message[_ngcontent-%COMP%]{margin-top:8px;color:var(--text-muted);opacity:.95;text-align:center;max-width:min(320px,80vw);white-space:normal;line-height:1.2;font-weight:700;font-style:italic}@keyframes _ngcontent-%COMP%_spinner-rotate{to{transform:rotate(360deg)}}"]})};function B2(n,t){if(n&1&&(u(0,"div",17),d(1),c()),n&2){let e=b();p(),R(e.error)}}function $2(n,t){n&1&&(u(0,"div",18),d(1,"Nessun invito presente"),c())}function z2(n,t){if(n&1){let e=se();u(0,"li",19)(1,"div",20)(2,"strong",21),d(3),c(),u(4,"small",18),d(5),H(6,"date"),c()(),u(7,"div",22)(8,"button",23),T("click",function(){let i=F(e).$implicit,o=b();return L(o.rimuovi(i))}),u(9,"span",5),d(10,"delete"),c()()()()}if(n&2){let e=t.$implicit,r=b();p(3),R(e.email),p(2),R(Y(6,3,e.created_at,"dd/MM/yyyy")),p(3),_("disabled",r.loading)}}var ta=class n{constructor(t,e){this.invitiService=t;this.auth=e}companyId;closeModal=new Fe;inviti=[];newEmail="";loading=!1;error="";userSub;currentUserId=null;ngOnInit(){this.userSub=this.auth.currentUser$.subscribe(t=>{this.currentUserId=t?.id??null}),this.load()}ngOnDestroy(){this.userSub?.unsubscribe()}load(){this.companyId&&this.invitiService.listByCompany(this.companyId).subscribe({next:t=>this.inviti=t,error:t=>{console.error("Inviti load error",t),t?.message?.includes('relation "employee_invitations" does not exist')&&console.warn("La tabella employee_invitations non esiste ancora in Supabase. Esegui la migrazione SQL.")}})}aggiungi(){if(this.error="",!this.newEmail||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.newEmail)){this.error="Inserire una email valida";return}if(!this.companyId){this.error="Company non disponibile";return}this.loading=!0;let t=this.currentUserId;this.invitiService.addInvite(this.companyId,this.newEmail,t??void 0).subscribe({next:()=>{this.newEmail="",this.loading=!1,this.load()},error:e=>{this.loading=!1,this.error="Errore aggiunta",console.error("Errore addInvite:",e),e?.message?.includes('relation "employee_invitations" does not exist')&&(this.error="Tabella inviti non trovata nel DB. Esegui la migrazione SQL.")}})}rimuovi(t){confirm(`Rimuovere ${t.email}?`)&&(this.loading=!0,this.invitiService.removeInviteById(t.id).subscribe({next:()=>{this.loading=!1,this.load()},error:e=>{this.loading=!1,console.error(e)}}))}close(){this.closeModal.emit()}static \u0275fac=function(e){return new(e||n)(C(Js),C(me))};static \u0275cmp=fe({type:n,selectors:[["app-inviti-dipendenti"]],inputs:{companyId:"companyId"},outputs:{closeModal:"closeModal"},decls:23,vars:5,consts:[["tabindex","-1","role","dialog","aria-modal","true",1,"modal-overlay",3,"click"],[1,"modal-card",3,"click"],[1,"modal-header"],[1,"h3"],["aria-label","Chiudi",1,"icon-button",3,"click"],[1,"material-icons"],[1,"modal-body"],[1,"form-group"],[1,"form-label"],["type","email","placeholder","nome@esempio.it",1,"form-control",3,"ngModelChange","ngModel"],["class","text-error",4,"ngIf"],[1,"form-actions"],[1,"promethea-button",3,"click","disabled"],[1,"divider"],["class","text-muted",4,"ngIf"],[1,"invites-list"],["class","list-row",4,"ngFor","ngForOf"],[1,"text-error"],[1,"text-muted"],[1,"list-row"],[1,"invite-left"],[1,"invite-email"],[1,"invite-actions"],["aria-label","Rimuovi",1,"icon-button",3,"click","disabled"]],template:function(e,r){e&1&&(u(0,"div",0),T("click",function(){return r.close()}),u(1,"div",1),T("click",function(o){return o.stopPropagation()}),u(2,"header",2)(3,"h3",3),d(4,"Inviti dipendenti"),c(),u(5,"button",4),T("click",function(){return r.close()}),u(6,"span",5),d(7,"close"),c()()(),u(8,"section",6)(9,"div",7)(10,"label",8),d(11,"Email da invitare"),c(),u(12,"input",9),ue("ngModelChange",function(o){return he(r.newEmail,o)||(r.newEmail=o),o}),c(),x(13,B2,2,1,"div",10),c(),u(14,"div",11)(15,"button",12),T("click",function(){return r.aggiungi()}),u(16,"span",5),d(17,"person_add"),c(),d(18," Aggiungi "),c()(),O(19,"hr",13),x(20,$2,2,0,"div",14),u(21,"ul",15),x(22,z2,11,6,"li",16),c()()()()),e&2&&(p(12),ce("ngModel",r.newEmail),p(),_("ngIf",r.error),p(2),_("disabled",r.loading),p(5),_("ngIf",(r.inviti==null?null:r.inviti.length)===0),p(2),_("ngForOf",r.inviti))},dependencies:[_e,it,Le,on,qe,Ye,qt,ut],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:var(--gutter-lg, 20px);background:#0000006b;z-index:1200}.modal-card[_ngcontent-%COMP%]{width:100%;max-width:720px;background:var(--card-background, #fff);color:var(--text-color, #111);border-radius:12px;box-shadow:0 8px 28px #00000052;overflow:hidden}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:16px 18px;border-bottom:1px solid color-mix(in srgb,var(--muted, #ddd) 18%,transparent)}.modal-body[_ngcontent-%COMP%]{padding:14px 18px 20px}.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:600}.form-control[type=email][_ngcontent-%COMP%]{width:100%;max-width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;margin-bottom:12px}.invites-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.invites-list[_ngcontent-%COMP%]   .list-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 0;border-bottom:1px dashed color-mix(in srgb,var(--muted, #ddd) 12%,transparent)}.invite-left[_ngcontent-%COMP%]{min-width:0;flex:1 1 auto;overflow:hidden}.invite-email[_ngcontent-%COMP%]{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.invite-actions[_ngcontent-%COMP%]{flex:0 0 auto;margin-left:8px}@media (max-width:520px){.modal-card[_ngcontent-%COMP%]{max-width:calc(100% - 24px);margin:0 6px}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}.form-actions[_ngcontent-%COMP%]{flex-wrap:wrap;gap:8px}}"]})};var Pn=class n{constructor(t){this.supabaseService=t}getDipendenti(t){if(!t||t==="null"||t==="undefined")return console.warn("[Dipendenti] getDipendenti chiamato con companyId non valido:",t),$([]);let r=this.supabaseService.getClient().from("users").select("*").eq("company_id",t).then(i=>{if(console.log("[Dipendenti] getDipendenti raw response",i),i.error)throw i.error;return i.data??[]});return Z(r)}getDipendenteById(t){if(!t)return $(null);let r=this.supabaseService.getClient().from("users").select("*").eq("id",t).single().then(i=>{if(i.error)throw i.error;return i.data});return Z(r)}static \u0275fac=function(e){return new(e||n)(V(an))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var H2=()=>[],G2=n=>["chip",n];function W2(n,t){n&1&&O(0,"app-loading-spinner")}function q2(n,t){if(n&1){let e=se();u(0,"button",29),T("click",function(){F(e);let i=b();return L(i.openInvitiModal())}),u(1,"span",4),d(2,"person_add"),c(),d(3," Nuovo Dipendente "),c()}}function Y2(n,t){if(n&1){let e=se();u(0,"button",39),T("click",function(){F(e);let i=b().$implicit,o=b();return L(o.eliminaDipendente(i))}),u(1,"span",4),d(2,"delete"),c()()}}function K2(n,t){if(n&1){let e=se();u(0,"tr")(1,"td")(2,"div",30)(3,"div",31),d(4),c(),u(5,"div",32)(6,"a",33),T("click",function(i){let o=F(e).$implicit,s=b();return L(s.apriDettaglio(o.id,i))}),u(7,"strong"),d(8),c()()()()(),u(9,"td"),d(10),c(),u(11,"td")(12,"span",34),d(13),c()(),u(14,"td")(15,"span",34),d(16),c()(),u(17,"td"),d(18),c(),u(19,"td"),d(20),H(21,"date"),c(),u(22,"td")(23,"div",35)(24,"button",36),T("click",function(){let i=F(e).$implicit,o=b();return L(o.modificaDipendente(i))}),u(25,"span",4),d(26,"edit"),c()(),u(27,"button",37),T("click",function(){let i=F(e).$implicit,o=b();return L(o.cambiaStatoDipendente(i))}),u(28,"span",4),d(29),c()(),x(30,Y2,3,0,"button",38),c()()()}if(n&2){let e=t.$implicit,r=b();p(4),be(" ",(e.first_name||"")[0],"",(e.last_name||"")[0]," "),p(4),be("",e.first_name||"-"," ",e.last_name||"-"),p(2),R(e.email||"-"),p(2),_("ngClass",Lg(17,G2,"role-"+(e.role||"unknown"))),p(),M(" ",e.role||"\u2014"," "),p(2),_("ngClass",e!=null&&e.is_active?"chip active":"chip inactive"),p(),M(" ",e!=null&&e.is_active?"Attivo":"Inattivo"," "),p(2),R(e.phone||"-"),p(2),M(" ",e!=null&&e.hire_date?Y(21,14,e.hire_date,"dd/MM/yyyy"):"Non specificata"," "),p(7),_("title",e!=null&&e.is_active?"Disattiva":"Attiva"),p(2),R(e!=null&&e.is_active?"person_off":"person"),p(),_("ngIf",r.hasRole("admin"))}}function Z2(n,t){if(n&1){let e=se();u(0,"button",29),T("click",function(){F(e);let i=b(2);return L(i.openInvitiModal())}),u(1,"span",4),d(2,"person_add"),c(),d(3," Aggiungi il primo dipendente "),c()}}function Q2(n,t){if(n&1&&(u(0,"div",40)(1,"span",4),d(2,"group"),c(),u(3,"h3"),d(4,"Nessun dipendente trovato"),c(),u(5,"p",41),d(6,"Non sono stati trovati dipendenti con i filtri attuali."),c(),x(7,Z2,4,0,"button",21),c()),n&2){let e=b();p(7),_("ngIf",e.hasRole("admin"))}}function J2(n,t){if(n&1&&(u(0,"div",42)(1,"div",43),d(2),c()()),n&2){let e=b();p(2),be(" Mostrando ",e.dipendentiFiltrati.length," di ",e.dipendenti.length," dipendenti ")}}function X2(n,t){if(n&1){let e=se();u(0,"app-inviti-dipendenti",44),T("closeModal",function(){F(e);let i=b();return L(i.showInvitiModal=!1)}),c()}if(n&2){let e=b();_("companyId",(e.aziendaCorrente==null?null:e.aziendaCorrente.id)??null)}}var gh=class n{constructor(t,e,r,i){this.companyService=t;this.dipendentiService=e;this.authService=r;this.router=i}dipendenti=[];dipendentiFiltrati=[];currentUser=null;isLoading=!1;showInvitiModal=!1;aziendaCorrente=null;filtroTesto="";filtroRuolo="";filtroStato="";ngOnInit(){this.isLoading=!0,this.authService.currentUser$.pipe(Et(1),Ve(t=>(this.currentUser=t??null,t?.id?this.companyService.getAziendaByAdmin(t.id):$(null)))).subscribe({next:t=>{this.aziendaCorrente=t,this.aziendaCorrente?.id&&this.caricaDipendenti(this.aziendaCorrente.id),this.isLoading=!1},error:t=>{console.error("Errore caricamento azienda corrente",t),this.isLoading=!1}})}caricaDipendenti(t){this.isLoading=!0,this.dipendentiService.getDipendenti(t).subscribe({next:e=>{let r=(e||[]).filter(i=>{let o=this.currentUser?.id&&i.id===this.currentUser.id,s=i.role==="admin";return!o&&!s});this.dipendenti=r,this.applicaFiltri(),this.isLoading=!1},error:e=>{console.error("Errore nel caricamento dei dipendenti (Dipendenti service):",e),this.isLoading=!1}})}applicaFiltri(){let t=this.dipendenti;if(this.filtroTesto){let e=this.filtroTesto.toLowerCase();t=t.filter(r=>r.first_name.toLowerCase().includes(e)||r.last_name.toLowerCase().includes(e)||r.email.toLowerCase().includes(e))}if(this.filtroRuolo&&(t=t.filter(e=>e.role===this.filtroRuolo)),this.filtroStato){let e=this.filtroStato==="attivo";t=t.filter(r=>r.is_active===e)}this.dipendentiFiltrati=t}hasRole(t){return this.authService.hasRole(t)}openInvitiModal(){if(!this.aziendaCorrente||!this.aziendaCorrente.id){alert("Nessuna azienda associata. Assicurati che l'utente sia amministratore di una azienda.");return}this.showInvitiModal=!0}closeInvitiModal(){this.showInvitiModal=!1}modificaDipendente(t){this.router.navigate(["/modifica-dipendente",t.id])}cambiaStatoDipendente(t){let e=!t.is_active;confirm(`Sei sicuro di voler ${e?"attivare":"disattivare"} il dipendente ${t.first_name} ${t.last_name}?`)&&console.log("Cambio stato dipendente:",t.id,e)}eliminaDipendente(t){confirm(`Sei sicuro di voler eliminare il dipendente ${t.first_name} ${t.last_name}? Questa azione non pu\xF2 essere annullata.`)&&console.log("Eliminazione dipendente:",t.id)}trackById(t,e){return e?.id??t}apriDettaglio(t,e){if(e&&(e.preventDefault(),e.stopPropagation()),!t){console.warn("apriDettaglio chiamato senza id");return}this.router.navigate(["dipendenti",t])}static \u0275fac=function(e){return new(e||n)(C(jt),C(Pn),C(me),C(xe))};static \u0275cmp=fe({type:n,selectors:[["app-lista-dipendenti"]],decls:65,vars:11,consts:[[1,"page-container"],[4,"ngIf"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"filters-section"],[1,"filters-container"],[1,"filter-group"],[1,"form-label"],["type","text","placeholder","Nome, cognome, email...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],["value","admin"],["value","manager"],["value","employee"],["value","attivo"],["value","inattivo"],[1,"actions-container"],["class","promethea-button",3,"click",4,"ngIf"],[1,"table-section"],[1,"table-container"],[1,"crm-table"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","empty-state",4,"ngIf"],["class","pagination-container",4,"ngIf"],[3,"companyId","closeModal",4,"ngIf"],[1,"promethea-button",3,"click"],[1,"user-info-compact"],[1,"user-avatar-small"],[1,"user-details-compact"],["href","#","title","Apri dettaglio",1,"link",3,"click"],[3,"ngClass"],[1,"action-buttons"],["title","Modifica",1,"icon-button",3,"click"],[1,"icon-button",3,"click","title"],["class","icon-button","title","Elimina",3,"click",4,"ngIf"],["title","Elimina",1,"icon-button",3,"click"],[1,"empty-state"],[2,"margin-bottom","var(--gutter-lg)"],[1,"pagination-container"],[1,"pagination-info"],[3,"closeModal","companyId"]],template:function(e,r){e&1&&(u(0,"div",0),x(1,W2,1,0,"app-loading-spinner",1),u(2,"div",2)(3,"div",3)(4,"span",4),d(5,"people"),c()(),u(6,"div",5)(7,"h1",6),d(8,"Lista Dipendenti"),c(),u(9,"p",7),d(10,"Gestisci i dipendenti dell'azienda"),c()()(),u(11,"div",8)(12,"div",9)(13,"div",10)(14,"label",11),d(15,"Cerca"),c(),u(16,"input",12),ue("ngModelChange",function(o){return he(r.filtroTesto,o)||(r.filtroTesto=o),o}),T("input",function(){return r.applicaFiltri()}),c()(),u(17,"div",10)(18,"label",11),d(19,"Ruolo"),c(),u(20,"select",13),ue("ngModelChange",function(o){return he(r.filtroRuolo,o)||(r.filtroRuolo=o),o}),T("change",function(){return r.applicaFiltri()}),u(21,"option",14),d(22,"Tutti"),c(),u(23,"option",15),d(24,"Admin"),c(),u(25,"option",16),d(26,"Manager"),c(),u(27,"option",17),d(28,"Dipendente"),c()()(),u(29,"div",10)(30,"label",11),d(31,"Stato"),c(),u(32,"select",13),ue("ngModelChange",function(o){return he(r.filtroStato,o)||(r.filtroStato=o),o}),T("change",function(){return r.applicaFiltri()}),u(33,"option",14),d(34,"Tutti"),c(),u(35,"option",18),d(36,"Attivo"),c(),u(37,"option",19),d(38,"Inattivo"),c()()()(),u(39,"div",20),x(40,q2,4,0,"button",21),c()(),u(41,"div",22)(42,"div",23)(43,"table",24)(44,"thead")(45,"tr")(46,"th"),d(47,"Nome"),c(),u(48,"th"),d(49,"Email"),c(),u(50,"th"),d(51,"Ruolo"),c(),u(52,"th"),d(53,"Stato"),c(),u(54,"th"),d(55,"Telefono"),c(),u(56,"th"),d(57,"Data Assunzione"),c(),u(58,"th"),d(59,"Azioni"),c()()(),u(60,"tbody"),x(61,K2,31,19,"tr",25),c()()(),x(62,Q2,8,1,"div",26),c(),x(63,J2,3,2,"div",27),c(),x(64,X2,1,1,"app-inviti-dipendenti",28)),e&2&&(p(),_("ngIf",r.isLoading),p(15),ce("ngModel",r.filtroTesto),p(4),ce("ngModel",r.filtroRuolo),p(12),ce("ngModel",r.filtroStato),p(8),_("ngIf",r.hasRole("admin")),p(21),_("ngForOf",r.dipendentiFiltrati||to(10,H2))("ngForTrackBy",r.trackById),p(),_("ngIf",r.dipendentiFiltrati.length===0),p(),_("ngIf",r.dipendentiFiltrati.length>0),p(),_("ngIf",r.showInvitiModal))},dependencies:[_e,av,it,Le,xt,on,nn,rn,qe,kt,Ye,qt,ea,ta,ut],styles:[".user-info-compact[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm)}.user-avatar-small[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:var(--gradiente);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:.8rem;flex-shrink:0}.user-details-compact[_ngcontent-%COMP%]{min-width:0}.user-details-compact[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chip.role-admin[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 20%,transparent);color:var(--primary)}.chip.role-manager[_ngcontent-%COMP%]{background:color-mix(in srgb,#f59e0b 20%,transparent);color:#f59e0b}.chip.role-employee[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]{background:color-mix(in srgb,#10b981 20%,transparent);color:#10b981}.chip.inactive[_ngcontent-%COMP%]{background:color-mix(in srgb,#ef4444 20%,transparent);color:#ef4444}@media (max-width: 768px){.user-info-compact[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:0}.user-avatar-small[_ngcontent-%COMP%]{margin-bottom:4px}}"]})};var eL=(n,t)=>t.id,tL=(n,t)=>t.giorno;function nL(n,t){if(n&1){let e=se();u(0,"div",8)(1,"button",21),T("click",function(){F(e);let i=b();return L(i.modificaDipendente())}),u(2,"span",3),d(3,"edit"),c(),d(4," Modifica "),c(),u(5,"button",29),T("click",function(){F(e);let i=b();return L(i.generaReport())}),u(6,"span",3),d(7,"download"),c(),d(8," Report "),c()()}}function rL(n,t){if(n&1&&(d(0),H(1,"date")),n&2){let e=b();M(" ",Y(1,1,e.dipendente==null?null:e.dipendente.birth_date,"dd/MM/yyyy")," ")}}function iL(n,t){n&1&&d(0," Non specificata ")}function oL(n,t){if(n&1&&(u(0,"span",18),d(1),c()),n&2){let e=b();p(),R(e.dipendente==null?null:e.dipendente.birth_place)}}function sL(n,t){if(n&1&&(d(0),H(1,"date")),n&2){let e=b();M(" ",Y(1,1,e.dipendente==null?null:e.dipendente.created_at,"dd/MM/yyyy")," ")}}function aL(n,t){n&1&&d(0," Non specificata ")}function lL(n,t){n&1&&(u(0,"th"),d(1,"Azioni"),c())}function cL(n,t){if(n&1){let e=se();u(0,"td")(1,"div",31)(2,"button",32),T("click",function(){F(e);let i=b().$implicit,o=b();return L(o.modificaTimbratura(i))}),u(3,"span",3),d(4,"edit"),c()(),u(5,"button",32),T("click",function(){F(e);let i=b().$implicit,o=b();return L(o.eliminaTimbratura(i))}),u(6,"span",3),d(7,"delete"),c()()()()}}function uL(n,t){if(n&1&&(u(0,"tr")(1,"td"),d(2),H(3,"date"),c(),u(4,"td"),d(5),H(6,"date"),c(),u(7,"td"),d(8),H(9,"date"),c(),u(10,"td"),d(11),H(12,"number"),c(),u(13,"td"),d(14),c(),u(15,"td",30),d(16),c(),J(17,cL,8,0,"td"),c()),n&2){let e=t.$implicit,r=b();p(2),R(Y(3,7,e.start_ts,"dd/MM/yyyy")),p(3),R(Y(6,10,e.start_ts,"HH:mm")),p(3),R(Y(9,13,e.end_ts,"HH:mm")),p(3),M("",Y(12,16,e.total_minutes/60,"1.1-1")," ore"),p(3),R(e.breaks?"S\xEC":"No"),p(2),R(e.notes||"Nessuna"),p(),X(r.hasRole("admin")||r.hasRole("manager")?17:-1)}}function dL(n,t){n&1&&(u(0,"div",24)(1,"span",3),d(2,"schedule"),c(),u(3,"h3"),d(4,"Nessuna timbratura"),c(),u(5,"p"),d(6,"Non sono state trovate timbrature recenti per questo dipendente."),c()())}function fL(n,t){if(n&1&&(u(0,"div",27)(1,"div",33),O(2,"div",34),c(),u(3,"div",35),d(4),H(5,"number"),c(),u(6,"div",36),d(7),c()()),n&2){let e=t.$implicit,r=b();p(2),ur("height",r.getAltezzaBarra(e.ore)+"%"),p(2),M("",Y(5,4,e.ore,"1.1-1"),"h"),p(3),R(e.giorno)}}function hL(n,t){n&1&&(u(0,"div",28),O(1,"div",37),u(2,"p"),d(3,"Caricamento dettaglio dipendente..."),c()())}var vh=class n{constructor(t,e,r,i){this.route=t;this.router=e;this.dipendentiService=r;this.timbratureService=i}isLoading=!0;dipendente=null;timbratureRecenti=[];statistiche={oreLavorate:0,giorniPresenti:0,mediaOreGiornaliere:0,puntualita:0};andamentoSettimanale=[];ngOnInit(){let t=this.route.snapshot.paramMap.get("id");if(!t){console.error("Dipendente non trovato: id mancante nella route");return}this.isLoading=!0,this.dipendentiService.getDipendenteById(t).subscribe({next:e=>{e?this.dipendente=e:console.error("Dipendente non trovato",t),this.isLoading=!1},error:e=>{console.error("Errore caricamento dipendente",e),this.isLoading=!1}})}caricaDipendente(t){return y(this,null,function*(){try{let e=localStorage.getItem("companyId"),r=yield Ni(this.dipendentiService.getDipendenti(e));this.dipendente=r?.find(i=>i.id===t)||null,this.dipendente||(console.error("Dipendente non trovato"),this.router.navigate(["/dipendenti"]))}catch(e){console.error("Errore nel caricamento del dipendente",e)}})}caricaTimbratureRecenti(t){return y(this,null,function*(){try{let e=yield this.timbratureService.getTimbratureUtente(t);this.timbratureRecenti=Array.isArray(e)?e.slice(0,10):[]}catch(e){console.error("Errore nel caricamento delle timbrature",e),this.timbratureRecenti=[{id:"1",start_ts:new Date("2024-01-15T08:00:00"),end_ts:new Date("2024-01-15T17:00:00"),total_minutes:540,breaks:null,notes:"Giornata regolare"}]}})}caricaStatistiche(t){return y(this,null,function*(){try{let e=yield this.timbratureService.getTimbratureUtente(t);this.calcolaStatistiche(Array.isArray(e)?e:[])}catch(e){console.error("Errore nel caricamento delle statistiche",e),this.statistiche={oreLavorate:120.5,giorniPresenti:15,mediaOreGiornaliere:8,puntualita:.85}}})}calcolaStatistiche(t){if(!t.length)return;let e=new Date,r=new Date(e.getFullYear(),e.getMonth(),1),i=t.filter(a=>a.start_ts&&new Date(a.start_ts)>=r),o=i.reduce((a,l)=>a+(l.total_minutes||0)/60,0),s=new Set(i.map(a=>a.start_ts?new Date(a.start_ts).toDateString():"")).size;this.statistiche={oreLavorate:o,giorniPresenti:s,mediaOreGiornaliere:s>0?o/s:0,puntualita:.85}}caricaAndamentoSettimanale(t){return y(this,null,function*(){try{this.andamentoSettimanale=[{giorno:"Lun",ore:7.5},{giorno:"Mar",ore:8.2},{giorno:"Mer",ore:6.8},{giorno:"Gio",ore:8.5},{giorno:"Ven",ore:7},{giorno:"Sab",ore:0},{giorno:"Dom",ore:0}]}catch(e){console.error("Errore nel caricamento dell'andamento settimanale",e)}})}getRuoloLabel(t){return t?{admin:"Amministratore",manager:"Manager",employee:"Dipendente"}[t]||t:"Dipendente"}getDifferenzaOre(){let t=this.dipendente?.monthly_hours||0;return(this.statistiche.oreLavorate||0)-t}getClasseDifferenzaOre(){return this.getDifferenzaOre()>=0?"positive":"negative"}getPercentualeCompletamento(){let t=this.dipendente?.monthly_hours||0,e=this.statistiche.oreLavorate||0;return t>0?e/t:0}getAltezzaBarra(t){let e=Math.max(...this.andamentoSettimanale.map(r=>r.ore));return e>0?t/e*100:0}modificaDipendente(){this.dipendente&&this.router.navigate(["/dipendenti",this.dipendente.id,"modifica"])}generaReport(){this.dipendente&&this.generaReportLocale()}generaReportLocale(){let t=`
      REPORT DIPENDENTE
      =================
      
      Nome: ${this.dipendente?.first_name} ${this.dipendente?.last_name}
      Email: ${this.dipendente?.email}
      Mansione: ${this.dipendente?.job_title}
      
      STATISTICHE MENSILI
      -------------------
      Ore lavorate: ${this.statistiche.oreLavorate}
      Giorni presenti: ${this.statistiche.giorniPresenti}
      Media ore/giorno: ${this.statistiche.mediaOreGiornaliere}
      Puntualit\xE0: ${(this.statistiche.puntualita*100).toFixed(1)}%
    `,e=new Blob([t],{type:"text/plain"}),r=window.URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download=`report_${this.dipendente?.first_name}_${this.dipendente?.last_name}.txt`,i.click(),window.URL.revokeObjectURL(r)}vediTutteTimbrature(){this.dipendente&&this.router.navigate(["/timbrature"],{queryParams:{dipendente:this.dipendente.id}})}modificaTimbratura(t){console.log("Modifica timbratura:",t),this.router.navigate(["/timbrature",t.id,"modifica"])}eliminaTimbratura(t){confirm("Sei sicuro di voler eliminare questa timbratura?")&&(console.log("Elimina timbratura:",t),this.timbratureRecenti=this.timbratureRecenti.filter(e=>e.id!==t.id))}hasRole(t){return!0}static \u0275fac=function(e){return new(e||n)(C(tn),C(xe),C(Pn),C(Vt))};static \u0275cmp=fe({type:n,selectors:[["app-dipendente-dettaglio"]],decls:212,vars:49,consts:[[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],["routerLink","/dipendenti",1,"link"],[1,"actions-container"],[1,"grid-cards"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-content"],[1,"info-item"],[1,"contact-info"],[1,"info-label"],[1,"info-value"],[1,"info-detail"],[1,"chip"],[1,"form-section"],[1,"promethea-button","outline",3,"click"],[1,"table-container"],[1,"crm-table"],[1,"empty-state"],[1,"chart-container"],[1,"chart-bars"],[1,"chart-bar"],[1,"loading-container"],[1,"promethea-button",3,"click"],[1,"notes-preview"],[1,"action-buttons"],[1,"icon-button",3,"click"],[1,"bar-container"],[1,"bar-fill"],[1,"bar-value"],[1,"bar-label"],[1,"loading-spinner"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d(4,"person"),c()(),u(5,"div",4)(6,"h1",5),d(7),c(),u(8,"p",6)(9,"a",7),d(10,"Dipendenti"),c(),d(11," / Dettaglio dipendente "),c()(),J(12,nL,9,0,"div",8),c(),u(13,"div",9)(14,"div",10)(15,"div",11)(16,"span",3),d(17,"badge"),c(),u(18,"h2",12),d(19,"Informazioni Personali"),c()(),u(20,"div",13)(21,"div",14)(22,"span",3),d(23,"email"),c(),u(24,"div",15)(25,"span",16),d(26,"Email"),c(),u(27,"span",17),d(28),c()()(),u(29,"div",14)(30,"span",3),d(31,"phone"),c(),u(32,"div",15)(33,"span",16),d(34,"Telefono"),c(),u(35,"span",17),d(36),c()()(),u(37,"div",14)(38,"span",3),d(39,"cake"),c(),u(40,"div",15)(41,"span",16),d(42,"Data di Nascita"),c(),u(43,"span",17),J(44,rL,2,4)(45,iL,1,0),c(),J(46,oL,2,1,"span",18),c()(),u(47,"div",14)(48,"span",3),d(49,"fingerprint"),c(),u(50,"div",15)(51,"span",16),d(52,"Codice Fiscale"),c(),u(53,"span",17),d(54),c()()()()(),u(55,"div",10)(56,"div",11)(57,"span",3),d(58,"work"),c(),u(59,"h2",12),d(60,"Informazioni Lavorative"),c()(),u(61,"div",13)(62,"div",14)(63,"span",3),d(64,"business_center"),c(),u(65,"div",15)(66,"span",16),d(67,"Mansione"),c(),u(68,"span",17),d(69),c()()(),u(70,"div",14)(71,"span",3),d(72,"admin_panel_settings"),c(),u(73,"div",15)(74,"span",16),d(75,"Ruolo"),c(),u(76,"span",19),d(77),c()()(),u(78,"div",14)(79,"span",3),d(80,"toggle_on"),c(),u(81,"div",15)(82,"span",16),d(83,"Stato"),c(),u(84,"span",19),d(85),c()()(),u(86,"div",14)(87,"span",3),d(88,"schedule"),c(),u(89,"div",15)(90,"span",16),d(91,"Tipo di Contratto"),c(),u(92,"span",17),d(93),c()()(),u(94,"div",14)(95,"span",3),d(96,"av_timer"),c(),u(97,"div",15)(98,"span",16),d(99,"Ore Mensili Previste"),c(),u(100,"span",17),d(101),c()()(),u(102,"div",14)(103,"span",3),d(104,"event_available"),c(),u(105,"div",15)(106,"span",16),d(107,"Data Assunzione"),c(),u(108,"span",17),J(109,sL,2,4)(110,aL,1,0),c()()()()(),u(111,"div",10)(112,"div",11)(113,"span",3),d(114,"insights"),c(),u(115,"h2",12),d(116,"Statistiche Mese Corrente"),c()(),u(117,"div",13)(118,"div",14)(119,"span",16),d(120,"Ore Lavorate"),c(),u(121,"span",17),d(122),H(123,"number"),c()(),u(124,"div",14)(125,"span",16),d(126,"Giorni Presenti"),c(),u(127,"span",17),d(128),c()(),u(129,"div",14)(130,"span",16),d(131,"Media Ore Giornaliere"),c(),u(132,"span",17),d(133),H(134,"number"),c()(),u(135,"div",14)(136,"span",16),d(137,"Puntualit\xE0"),c(),u(138,"span",17),d(139),H(140,"percent"),c()()()(),u(141,"div",10)(142,"div",11)(143,"span",3),d(144,"calendar_today"),c(),u(145,"h2",12),d(146,"Riepilogo Presenze"),c()(),u(147,"div",13)(148,"div",14)(149,"span",16),d(150,"Ore Previste"),c(),u(151,"span",17),d(152),c()(),u(153,"div",14)(154,"span",16),d(155,"Ore Raggiunte"),c(),u(156,"span",17),d(157),H(158,"number"),c()(),u(159,"div",14)(160,"span",16),d(161,"Differenza"),c(),u(162,"span",17),d(163),H(164,"number"),c()(),u(165,"div",14)(166,"span",16),d(167,"Progresso"),c(),u(168,"span",17),d(169),H(170,"percent"),c()()()()(),u(171,"div",20)(172,"div",1)(173,"h2",5)(174,"span",3),d(175,"schedule"),c(),d(176," Timbrature Recenti "),c(),u(177,"button",21),T("click",function(){return r.vediTutteTimbrature()}),u(178,"span",3),d(179,"list"),c(),d(180," Vedi Tutte "),c()(),u(181,"div",22)(182,"table",23)(183,"thead")(184,"tr")(185,"th"),d(186,"Data"),c(),u(187,"th"),d(188,"Ingresso"),c(),u(189,"th"),d(190,"Uscita"),c(),u(191,"th"),d(192,"Ore Totali"),c(),u(193,"th"),d(194,"Pause"),c(),u(195,"th"),d(196,"Note"),c(),J(197,lL,2,0,"th"),c()(),u(198,"tbody"),St(199,uL,18,19,"tr",null,eL),c()()(),J(201,dL,7,0,"div",24),c(),u(202,"div",20)(203,"h2",5)(204,"span",3),d(205,"bar_chart"),c(),d(206," Andamento Settimanale "),c(),u(207,"div",25)(208,"div",26),St(209,fL,8,7,"div",27,tL),c()()(),J(211,hL,4,0,"div",28),c()),e&2&&(p(7),be("",r.dipendente==null?null:r.dipendente.first_name," ",r.dipendente==null?null:r.dipendente.last_name),p(5),X(r.hasRole("admin")||r.hasRole("manager")?12:-1),p(16),R(r.dipendente==null?null:r.dipendente.email),p(8),R((r.dipendente==null?null:r.dipendente.phone)||"Non specificato"),p(8),X(r.dipendente!=null&&r.dipendente.birth_date?44:45),p(2),X(r.dipendente!=null&&r.dipendente.birth_place?46:-1),p(8),R((r.dipendente==null?null:r.dipendente.fiscal_code)||"Non specificato"),p(15),R((r.dipendente==null?null:r.dipendente.job_title)||"Non specificata"),p(7),mi("role-"+((r.dipendente==null?null:r.dipendente.role)||"employee")),p(),M(" ",r.getRuoloLabel(r.dipendente==null?null:r.dipendente.role)," "),p(7),Ie("active",r.dipendente==null?null:r.dipendente.is_active)("inactive",!(r.dipendente!=null&&r.dipendente.is_active)),p(),M(" ",r.dipendente!=null&&r.dipendente.is_active?"Attivo":"Inattivo"," "),p(8),R(r.dipendente!=null&&r.dipendente.full_time?"Full-Time":"Part-Time"),p(8),M("",(r.dipendente==null?null:r.dipendente.monthly_hours)||0," ore"),p(8),X(r.dipendente!=null&&r.dipendente.created_at?109:110),p(13),M("",Y(123,33,r.statistiche.oreLavorate,"1.1-1")," ore"),p(6),M("",r.statistiche.giorniPresenti," giorni"),p(5),M("",Y(134,36,r.statistiche.mediaOreGiornaliere,"1.1-1")," ore"),p(6),R($r(140,39,r.statistiche.puntualita)),p(13),M("",(r.dipendente==null?null:r.dipendente.monthly_hours)||0," ore"),p(5),M("",Y(158,41,r.statistiche.oreLavorate,"1.1-1")," ore"),p(5),mi(r.getClasseDifferenzaOre()),p(),M(" ",Y(164,44,r.getDifferenzaOre(),"1.1-1")," ore "),p(6),R($r(170,47,r.getPercentualeCompletamento())),p(28),X(r.hasRole("admin")||r.hasRole("manager")?197:-1),p(2),Dt(r.timbratureRecenti),p(2),X(r.timbratureRecenti.length===0?201:-1),p(8),Dt(r.andamentoSettimanale),p(2),X(r.isLoading?211:-1))},dependencies:[_e,xt,Nt,mn,sl,ut],styles:["[_ngcontent-%COMP%]:root{--dip-card-min: 500px}.grid-cards[_ngcontent-%COMP%]{gap:var(--gutter-lg);grid-template-columns:repeat(auto-fit,minmax(var(--dip-card-min),1fr));max-width:calc((var(--dip-card-min) * 2) + var(--gutter-lg));width:100%;margin-left:auto;margin-right:auto;box-sizing:border-box}.grid-cards[_ngcontent-%COMP%] > .card[_ngcontent-%COMP%]{width:100%;max-width:none;box-sizing:border-box}"]})};var yh=class n{constructor(t,e){this.http=t;this.authService=e}baseUrl="/api/reports";generaReportTimbrature(t){let e=this.authService.getAuthHeaders();return this.http.post(`${this.baseUrl}/timbrature`,t,{headers:e})}esportaPDF(t){let e=this.authService.getAuthHeaders();return this.http.post(`${this.baseUrl}/export/pdf`,t,{headers:e,responseType:"blob"})}esportaExcel(t){let e=this.authService.getAuthHeaders();return this.http.post(`${this.baseUrl}/export/excel`,t,{headers:e,responseType:"blob"})}generaReportKPI(t){return this.http.post(`${this.baseUrl}/kpi`,t,{responseType:"blob"})}static \u0275fac=function(e){return new(e||n)(V(fr),V(me))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};function mL(n,t){if(n&1&&(u(0,"option",42),d(1),c()),n&2){let e=t.$implicit;_("value",e.id),p(),be("",e.first_name," ",e.last_name)}}function gL(n,t){if(n&1&&(u(0,"div",43)(1,"div",44),O(2,"div",45),c(),u(3,"div",46),d(4),H(5,"number"),c(),u(6,"div",47),d(7),c()()),n&2){let e=t.$implicit,r=b();p(2),ur("height",r.getAltezzaBarra(e.ore)+"%"),p(2),M("",Y(5,4,e.ore,"1.0-1"),"h"),p(3),R(e.nome)}}function vL(n,t){if(n&1&&(u(0,"div",48)(1,"span",49),d(2),c(),u(3,"span",50),d(4),H(5,"percent"),c()()),n&2){let e=t.$implicit;p(2),R(e.fascia),p(2),R($r(5,2,e.percentuale))}}function yL(n,t){if(n&1&&(u(0,"tr")(1,"td")(2,"div",51)(3,"div",52),d(4),c(),u(5,"div",53)(6,"strong"),d(7),c()()()(),u(8,"td"),d(9),H(10,"number"),c(),u(11,"td"),d(12),H(13,"number"),c(),u(14,"td"),d(15),c(),u(16,"td"),d(17),H(18,"percent"),c(),u(19,"td")(20,"span",54),d(21),c()()()),n&2){let e=t.$implicit;p(4),M(" ",e.nome.charAt(0)," "),p(3),R(e.nome),p(2),M("",Y(10,12,e.oreTotali,"1.1-1"),"h"),p(3),M("",Y(13,15,e.oreMedieGiorno,"1.1-1"),"h"),p(3),be("",e.giorniPresente,"/",e.giorniTotali),p(2),R($r(18,18,e.puntualita)),p(3),Ie("active",e.attivo)("inactive",!e.attivo),p(),M(" ",e.attivo?"Attivo":"Inattivo"," ")}}function _L(n,t){if(n&1&&(u(0,"div",48)(1,"span",49),d(2),c(),u(3,"span",50),d(4),H(5,"number"),c()()),n&2){let e=t.$implicit;p(2),R(e.giorno),p(2),M("",Y(5,2,e.ore,"1.1-1"),"h")}}function bL(n,t){if(n&1&&(u(0,"div",55)(1,"span",3),d(2,"info"),c(),u(3,"div",56)(4,"span",57),d(5),c(),u(6,"span",58),d(7),c(),u(8,"span",59),d(9),H(10,"date"),c()()()),n&2){let e=t.$implicit;p(5),R(e.tipo),p(2),R(e.descrizione),p(2),be("",e.dipendente," - ",$r(10,4,e.data))}}function EL(n,t){n&1&&(u(0,"div",60)(1,"span",3),d(2,"check_circle"),c(),u(3,"h3"),d(4,"Nessuna anomalia"),c(),u(5,"p"),d(6,"Non sono state rilevate anomalie nelle timbrature"),c()())}function wL(n,t){n&1&&(u(0,"div",61),O(1,"div",62),u(2,"p"),d(3,"Caricamento metriche KPI..."),c()())}var _h=class n{constructor(t,e,r){this.timbratureService=t;this.dipendentiService=e;this.reportsService=r}isLoading=!0;filtroPeriodo="mese";filtroDipendente="tutti";filtroReparto="tutti";kpi={oreTotali:0,presenzeMedie:0,oreMediePerDipendente:0,tassoPuntualita:0};orePerDipendente=[];performanceDipendenti=[];distribuzioneOrari=[];andamentoSettimanale=[];anomalie=[];dipendenti=[];ngOnInit(){return y(this,null,function*(){yield this.caricaDipendenti(),yield this.caricaKPI()})}caricaDipendenti(){return y(this,null,function*(){try{let t=yield Jh(this.dipendentiService.getDipendenti());this.dipendenti=t??[]}catch(t){console.error("Errore nel caricamento dei dipendenti",t),this.dipendenti=[]}})}caricaKPI(){return y(this,null,function*(){this.isLoading=!0;try{yield this.simulaCaricamentoDati(),this.kpi={oreTotali:324.5,presenzeMedie:8.2,oreMediePerDipendente:7.8,tassoPuntualita:.87},this.orePerDipendente=[{nome:"Mario Rossi",ore:45.2},{nome:"Luca Bianchi",ore:42.8},{nome:"Anna Verdi",ore:38.5},{nome:"Giulia Neri",ore:41.3},{nome:"Paolo Gialli",ore:39.7}],this.performanceDipendenti=[{nome:"Mario Rossi",oreTotali:45.2,oreMedieGiorno:8.2,giorniPresente:22,giorniTotali:22,puntualita:.95,attivo:!0},{nome:"Luca Bianchi",oreTotali:42.8,oreMedieGiorno:7.8,giorniPresente:21,giorniTotali:22,puntualita:.88,attivo:!0},{nome:"Anna Verdi",oreTotali:38.5,oreMedieGiorno:7.1,giorniPresente:20,giorniTotali:22,puntualita:.92,attivo:!0}],this.distribuzioneOrari=[{fascia:"Prima delle 8:00",percentuale:.15},{fascia:"8:00 - 8:30",percentuale:.45},{fascia:"8:30 - 9:00",percentuale:.3},{fascia:"Dopo le 9:00",percentuale:.1}],this.andamentoSettimanale=[{giorno:"Luned\xEC",ore:65.2},{giorno:"Marted\xEC",ore:68.7},{giorno:"Mercoled\xEC",ore:62.4},{giorno:"Gioved\xEC",ore:70.1},{giorno:"Venerd\xEC",ore:58.9}],this.anomalie=[{tipo:"Timbratura Mancante",descrizione:"Uscita non registrata",dipendente:"Paolo Gialli",data:new Date("2024-01-15")}]}catch(t){console.error("Errore nel caricamento dei KPI",t)}finally{this.isLoading=!1}})}getAltezzaBarra(t){let e=Math.max(...this.orePerDipendente.map(r=>r.ore));return e>0?t/e*100:0}onFiltroChange(){this.caricaKPI()}aggiornaDati(){return y(this,null,function*(){yield this.caricaKPI()})}esportaReport(){return y(this,null,function*(){try{yield this.reportsService.generaReportKPI({periodo:this.filtroPeriodo,dipendente:this.filtroDipendente,reparto:this.filtroReparto}).toPromise(),alert("Report KPI esportato con successo!")}catch(t){console.error("Errore nell'esportazione del report",t),alert("Errore nell'esportazione del report")}})}simulaCaricamentoDati(){return new Promise(t=>{setTimeout(()=>t(),1500)})}static \u0275fac=function(e){return new(e||n)(C(Vt),C(Pn),C(yh))};static \u0275cmp=fe({type:n,selectors:[["app-kpi"]],decls:160,vars:26,consts:[[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"filters-section"],[1,"filters-container"],[1,"filter-group"],[1,"form-label"],[3,"ngModelChange","change","ngModel"],["value","oggi"],["value","settimana"],["value","mese"],["value","trimestre"],["value","tutti"],[3,"value",4,"ngFor","ngForOf"],["value","amministrazione"],["value","produzione"],["value","vendite"],[1,"actions-container"],[1,"promethea-button","outline",3,"click"],[1,"promethea-button",3,"click"],[1,"grid-cards"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-number"],[1,"card-content"],[1,"chart-container"],[1,"chart-bars"],["class","chart-bar",4,"ngFor","ngForOf"],[1,"hours-grid"],["class","hour-item",4,"ngFor","ngForOf"],[1,"form-section"],[1,"table-container"],[1,"crm-table"],[4,"ngFor","ngForOf"],["class","info-item",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","loading-container",4,"ngIf"],[3,"value"],[1,"chart-bar"],[1,"bar-container"],[1,"bar-fill"],[1,"bar-value"],[1,"bar-label"],[1,"hour-item"],[1,"day-label"],[1,"hour-value"],[1,"user-info-compact"],[1,"user-avatar-small"],[1,"user-details-compact"],[1,"chip"],[1,"info-item"],[1,"contact-info"],[1,"info-label"],[1,"info-value"],[1,"info-detail"],[1,"empty-state"],[1,"loading-container"],[1,"loading-spinner"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d(4,"insights"),c()(),u(5,"div",4)(6,"h1",5),d(7,"Key Performance Indicators"),c(),u(8,"p",6),d(9,"Metriche e statistiche sulle timbrature"),c()()(),u(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),d(14,"Periodo"),c(),u(15,"select",11),ue("ngModelChange",function(o){return he(r.filtroPeriodo,o)||(r.filtroPeriodo=o),o}),T("change",function(){return r.onFiltroChange()}),u(16,"option",12),d(17,"Oggi"),c(),u(18,"option",13),d(19,"Questa Settimana"),c(),u(20,"option",14),d(21,"Questo Mese"),c(),u(22,"option",15),d(23,"Questo Trimestre"),c()()(),u(24,"div",9)(25,"label",10),d(26,"Dipendente"),c(),u(27,"select",11),ue("ngModelChange",function(o){return he(r.filtroDipendente,o)||(r.filtroDipendente=o),o}),T("change",function(){return r.onFiltroChange()}),u(28,"option",16),d(29,"Tutti i dipendenti"),c(),x(30,mL,2,3,"option",17),c()(),u(31,"div",9)(32,"label",10),d(33,"Reparto"),c(),u(34,"select",11),ue("ngModelChange",function(o){return he(r.filtroReparto,o)||(r.filtroReparto=o),o}),T("change",function(){return r.onFiltroChange()}),u(35,"option",16),d(36,"Tutti i reparti"),c(),u(37,"option",18),d(38,"Amministrazione"),c(),u(39,"option",19),d(40,"Produzione"),c(),u(41,"option",20),d(42,"Vendite"),c()()()(),u(43,"div",21)(44,"button",22),T("click",function(){return r.esportaReport()}),u(45,"span",3),d(46,"download"),c(),d(47," Esporta Report "),c(),u(48,"button",23),T("click",function(){return r.aggiornaDati()}),u(49,"span",3),d(50,"refresh"),c(),d(51," Aggiorna "),c()()(),u(52,"div",24)(53,"div",25)(54,"div",26)(55,"span",3),d(56,"schedule"),c(),u(57,"h3",27),d(58,"Ore Totali Lavorate"),c()(),u(59,"div",28),d(60),H(61,"number"),c(),u(62,"p",6),d(63,"Nel periodo selezionato"),c()(),u(64,"div",25)(65,"div",26)(66,"span",3),d(67,"groups"),c(),u(68,"h3",27),d(69,"Presenze Medie"),c()(),u(70,"div",28),d(71),H(72,"number"),c(),u(73,"p",6),d(74,"Dipendenti per giorno"),c()(),u(75,"div",25)(76,"div",26)(77,"span",3),d(78,"timelapse"),c(),u(79,"h3",27),d(80,"Ore Medie per Dip."),c()(),u(81,"div",28),d(82),H(83,"number"),c(),u(84,"p",6),d(85,"Per dipendente"),c()(),u(86,"div",25)(87,"div",26)(88,"span",3),d(89,"access_time"),c(),u(90,"h3",27),d(91,"Puntualit\xE0"),c()(),u(92,"div",28),d(93),H(94,"percent"),c(),u(95,"p",6),d(96,"Ingressi in orario"),c()()(),u(97,"div",24)(98,"div",25)(99,"div",26)(100,"span",3),d(101,"bar_chart"),c(),u(102,"h3",27),d(103,"Ore per Dipendente"),c()(),u(104,"div",29)(105,"div",30)(106,"div",31),x(107,gL,8,7,"div",32),c()()()(),u(108,"div",25)(109,"div",26)(110,"span",3),d(111,"pie_chart"),c(),u(112,"h3",27),d(113,"Distribuzione Orari"),c()(),u(114,"div",29)(115,"div",33),x(116,vL,6,4,"div",34),c()()()(),u(117,"div",35)(118,"h2",5)(119,"span",3),d(120,"leaderboard"),c(),d(121," Performance Dipendenti "),c(),u(122,"div",36)(123,"table",37)(124,"thead")(125,"tr")(126,"th"),d(127,"Dipendente"),c(),u(128,"th"),d(129,"Ore Totali"),c(),u(130,"th"),d(131,"Ore Medie/Giorno"),c(),u(132,"th"),d(133,"Giorni Presente"),c(),u(134,"th"),d(135,"Puntualit\xE0"),c(),u(136,"th"),d(137,"Status"),c()()(),u(138,"tbody"),x(139,yL,22,20,"tr",38),c()()()(),u(140,"div",24)(141,"div",25)(142,"div",26)(143,"span",3),d(144,"trending_up"),c(),u(145,"h3",27),d(146,"Andamento Settimanale"),c()(),u(147,"div",29)(148,"div",33),x(149,_L,6,5,"div",34),c()()(),u(150,"div",25)(151,"div",26)(152,"span",3),d(153,"warning"),c(),u(154,"h3",27),d(155,"Anomalie Rilevate"),c()(),u(156,"div",29),x(157,bL,11,6,"div",39)(158,EL,7,0,"div",40),c()()(),x(159,wL,4,0,"div",41),c()),e&2&&(p(15),ce("ngModel",r.filtroPeriodo),p(12),ce("ngModel",r.filtroDipendente),p(3),_("ngForOf",r.dipendenti),p(4),ce("ngModel",r.filtroReparto),p(26),M("",Y(61,15,r.kpi.oreTotali,"1.0-1"),"h"),p(11),R(Y(72,18,r.kpi.presenzeMedie,"1.0-1")),p(11),M("",Y(83,21,r.kpi.oreMediePerDipendente,"1.0-1"),"h"),p(11),R($r(94,24,r.kpi.tassoPuntualita)),p(14),_("ngForOf",r.orePerDipendente),p(9),_("ngForOf",r.distribuzioneOrari),p(23),_("ngForOf",r.performanceDipendenti),p(10),_("ngForOf",r.andamentoSettimanale),p(8),_("ngForOf",r.anomalie),p(),_("ngIf",r.anomalie.length===0),p(),_("ngIf",r.isLoading))},dependencies:[on,nn,rn,kt,Ye,qt,_e,it,Le,mn,sl,ut],encapsulation:2})};var ey=()=>({standalone:!0});function CL(n,t){n&1&&(u(0,"div",47),d(1," Nome obbligatorio "),c())}function SL(n,t){n&1&&(u(0,"div",47),d(1," Cognome obbligatorio "),c())}function DL(n,t){n&1&&(u(0,"div",47),d(1," Email obbligatoria e valida "),c())}function IL(n,t){n&1&&(u(0,"span",3),d(1,"save"),c())}function xL(n,t){n&1&&O(0,"span",48)}function TL(n,t){n&1&&(u(0,"div",47),d(1," Nome azienda obbligatorio "),c())}function ML(n,t){n&1&&(u(0,"div",47),d(1," Partita IVA obbligatoria "),c())}function AL(n,t){if(n&1&&(u(0,"div",67)(1,"label",68),d(2),c(),u(3,"div",69)(4,"div",70)(5,"label",12),d(6,"Apertura"),c(),O(7,"input",71),c(),u(8,"div",70)(9,"label",12),d(10,"Chiusura"),c(),O(11,"input",72),c(),u(12,"div",73)(13,"label",26),O(14,"input",74)(15,"span",28),d(16," Chiuso "),c()()()()),n&2){let e=t.$implicit;_("formGroupName",e.key),p(2),R(e.label)}}function OL(n,t){if(n&1){let e=se();u(0,"div",75)(1,"div")(2,"strong"),d(3),c(),u(4,"div",76),d(5),c()(),u(6,"div")(7,"button",77),T("click",function(){let i=F(e).index,o=b(2);return L(o.rimuoviGiornoChiusura(i))}),u(8,"span",3),d(9,"delete"),c()()()()}if(n&2){let e=t.$implicit,r=b(2);p(3),R(r.formatClosedDay(e)),p(2),R(e.label||(e.type==="range"?"Intervallo":"Giorno singolo"))}}function RL(n,t){n&1&&(u(0,"span",3),d(1,"save"),c())}function NL(n,t){n&1&&O(0,"span",48)}function kL(n,t){if(n&1){let e=se();u(0,"div",8)(1,"h2",5)(2,"span",3),d(3,"business"),c(),d(4," Dati Azienda "),c(),u(5,"form",9),T("ngSubmit",function(){F(e);let i=b();return L(i.salvaAzienda())}),u(6,"div",10)(7,"div",11)(8,"label",12)(9,"span",3),d(10,"corporate_fare"),c(),d(11," Nome Azienda * "),c(),O(12,"input",49),x(13,TL,2,0,"div",14),c(),u(14,"div",11)(15,"label",12)(16,"span",3),d(17,"receipt"),c(),d(18," Partita IVA * "),c(),O(19,"input",50),x(20,ML,2,0,"div",14),c(),u(21,"div",11)(22,"label",12)(23,"span",3),d(24,"location_on"),c(),d(25," Indirizzo "),c(),O(26,"input",51),c(),u(27,"div",11)(28,"label",12)(29,"span",3),d(30,"location_city"),c(),d(31," Citt\xE0 "),c(),O(32,"input",52),c(),u(33,"div",11)(34,"label",12)(35,"span",3),d(36,"map"),c(),d(37," Provincia "),c(),O(38,"input",53),c(),u(39,"div",11)(40,"label",12)(41,"span",3),d(42,"web"),c(),d(43," Sito Web "),c(),O(44,"input",54),c()(),u(45,"div",55)(46,"h3",56)(47,"span",3),d(48,"schedule"),c(),d(49," Orari di Lavoro "),c(),u(50,"div",57),x(51,AL,17,2,"div",58),c()(),u(52,"div",55)(53,"h3",56)(54,"span",3),d(55,"event_busy"),c(),d(56," Giorni di Chiusura (festivit\xE0 / chiusure) "),c(),u(57,"div",59),x(58,OL,10,2,"div",60),c(),u(59,"div",61)(60,"div",62)(61,"input",63),ue("ngModelChange",function(i){F(e);let o=b();return he(o.newDate,i)||(o.newDate=i),L(i)}),c(),u(62,"button",64),T("click",function(){F(e);let i=b();return L(i.aggiungiGiornoSingolo())}),d(63,"Aggiungi Giorno"),c()(),u(64,"div",62)(65,"input",63),ue("ngModelChange",function(i){F(e);let o=b();return he(o.rangeStart,i)||(o.rangeStart=i),L(i)}),c(),u(66,"input",63),ue("ngModelChange",function(i){F(e);let o=b();return he(o.rangeEnd,i)||(o.rangeEnd=i),L(i)}),c(),u(67,"button",64),T("click",function(){F(e);let i=b();return L(i.aggiungiIntervallo())}),d(68,"Aggiungi Intervallo"),c()(),u(69,"div",65)(70,"button",66),T("click",function(){F(e);let i=b();return L(i.ripristinaFestivita())}),d(71,"Ripristina Festivit\xE0"),c()()()(),u(72,"div",31)(73,"button",32),x(74,RL,2,0,"span",33)(75,NL,1,0,"span",34),d(76),c()()()()}if(n&2){let e,r,i=b();p(5),_("formGroup",i.aziendaForm),p(8),_("ngIf",((e=i.aziendaForm.get("name"))==null?null:e.invalid)&&((e=i.aziendaForm.get("name"))==null?null:e.touched)),p(7),_("ngIf",((r=i.aziendaForm.get("vat"))==null?null:r.invalid)&&((r=i.aziendaForm.get("vat"))==null?null:r.touched)),p(30),_("formGroup",i.openingHoursGroup),p(),_("ngForOf",i.giorniSettimana),p(7),_("ngForOf",i.giorniChiusura),p(3),ce("ngModel",i.newDate),_("ngModelOptions",to(16,ey)),p(4),ce("ngModel",i.rangeStart),_("ngModelOptions",to(17,ey)),p(),ce("ngModel",i.rangeEnd),_("ngModelOptions",to(18,ey)),p(7),_("disabled",i.aziendaForm.invalid||i.salvataggioAzienda),p(),_("ngIf",!i.salvataggioAzienda),p(),_("ngIf",i.salvataggioAzienda),p(),M(" ",i.salvataggioAzienda?"Salvando...":"Salva Azienda"," ")}}function PL(n,t){if(n&1&&(u(0,"option",80),d(1),c()),n&2){let e=t.$implicit;_("ngValue",e.id),p(),hd("",e.first_name," ",e.last_name," (",e.email,")")}}function FL(n,t){if(n&1){let e=se();u(0,"label",26)(1,"input",91),T("change",function(i){let o=F(e).$implicit,s=b(4);return L(s.toggleManagerUser(o.id,i))}),c(),d(2),c()}if(n&2){let e=t.$implicit,r=b(4);p(),_("value",e.id)("checked",r.managerConfig.user_ids.includes(e.id)),p(),be(" ",e.first_name," ",e.last_name," ")}}function LL(n,t){if(n&1&&(u(0,"div",11)(1,"label",12),d(2,"Seleziona Utenti"),c(),u(3,"div",89),x(4,FL,3,4,"label",90),c()()),n&2){let e=b(3);p(4),_("ngForOf",e.companyEmployees)}}function jL(n,t){if(n&1){let e=se();u(0,"label",26)(1,"input",91),T("change",function(i){let o=F(e).$implicit,s=b(4);return L(s.toggleManagerRole(o,i))}),c(),d(2),c()}if(n&2){let e=t.$implicit,r=b(4);p(),_("value",e)("checked",r.managerConfig.roles.includes(e)),p(),M(" ",e," ")}}function VL(n,t){if(n&1&&(u(0,"div",11)(1,"label",12),d(2,"Seleziona Ruoli"),c(),u(3,"div",92),x(4,jL,3,3,"label",90),c()()),n&2){let e=b(3);p(4),_("ngForOf",e.availableRoles)}}function UL(n,t){if(n&1){let e=se();u(0,"div",83)(1,"div",11)(2,"label",12),d(3,"Modalit\xE0 di visibilit\xE0"),c(),u(4,"div")(5,"label",84)(6,"input",85),ue("ngModelChange",function(i){F(e);let o=b(2);return he(o.managerConfig.mode,i)||(o.managerConfig.mode=i),L(i)}),c(),d(7," Solo proprie timbrature"),c(),u(8,"label",84)(9,"input",86),ue("ngModelChange",function(i){F(e);let o=b(2);return he(o.managerConfig.mode,i)||(o.managerConfig.mode=i),L(i)}),c(),d(10," Lista utenti selezionati"),c(),u(11,"label",84)(12,"input",87),ue("ngModelChange",function(i){F(e);let o=b(2);return he(o.managerConfig.mode,i)||(o.managerConfig.mode=i),L(i)}),c(),d(13," Per ruolo"),c()()(),x(14,LL,5,1,"div",88)(15,VL,5,1,"div",88),u(16,"div",31)(17,"button",44),T("click",function(){F(e);let i=b(2);return L(i.salvaManagerVisibility())}),d(18," Salva Visibilit\xE0 "),c()()()}if(n&2){let e=b(2);p(6),ce("ngModel",e.managerConfig.mode),p(3),ce("ngModel",e.managerConfig.mode),p(3),ce("ngModel",e.managerConfig.mode),p(2),_("ngIf",e.managerConfig.mode==="selected_users"),p(),_("ngIf",e.managerConfig.mode==="roles"),p(2),_("disabled",e.salvataggioAzienda)}}function BL(n,t){if(n&1){let e=se();u(0,"div",8)(1,"h2",5)(2,"span",3),d(3,"visibility"),c(),d(4," Visibilit\xE0 Responsabili "),c(),u(5,"div",78)(6,"div",11)(7,"label",12),d(8,"Seleziona Responsabile"),c(),u(9,"select",79),ue("ngModelChange",function(i){F(e);let o=b();return he(o.selectedManagerId,i)||(o.selectedManagerId=i),L(i)}),T("change",function(){F(e);let i=b();return L(i.onManagerSelected())}),u(10,"option",80),d(11,"-- Seleziona --"),c(),x(12,PL,2,4,"option",81),c()(),x(13,UL,19,6,"div",82),c()()}if(n&2){let e=b();p(9),ce("ngModel",e.selectedManagerId),p(),_("ngValue",null),p(2),_("ngForOf",e.companyEmployees),p(),_("ngIf",e.selectedManagerId)}}function $L(n,t){n&1&&(u(0,"span",3),d(1,"lock"),c())}function zL(n,t){n&1&&O(0,"span",48)}function HL(n,t){if(n&1){let e=se();u(0,"label",40)(1,"input",41),ue("ngModelChange",function(i){F(e);let o=b();return he(o.impostazioniNotifiche.notificheAmministratore,i)||(o.impostazioniNotifiche.notificheAmministratore=i),L(i)}),c(),O(2,"span",28),u(3,"div",42)(4,"strong"),d(5,"Notifiche Amministratore"),c(),u(6,"span"),d(7,"Ricevi notifiche per le attivit\xE0 aziendali"),c()()()}if(n&2){let e=b();p(),ce("ngModel",e.impostazioniNotifiche.notificheAmministratore)}}function GL(n,t){n&1&&(u(0,"span",3),d(1,"save"),c())}function WL(n,t){n&1&&O(0,"span",48)}function qL(n,t){if(n&1&&(u(0,"div",93)(1,"span",3),d(2,"check_circle"),c(),d(3),c()),n&2){let e=b();p(3),M(" ",e.messaggioSuccesso," ")}}function YL(n,t){if(n&1&&(u(0,"div",94)(1,"span",3),d(2,"error"),c(),d(3),c()),n&2){let e=b();p(3),M(" ",e.messaggioErrore," ")}}var bh=class n{constructor(t,e,r,i){this.fb=t;this.authService=e;this.companyService=r;this.dipendentiService=i;this.profiloForm=this.creaProfiloForm(),this.aziendaForm=this.creaAziendaForm(),this.sicurezzaForm=this.creaSicurezzaForm()}profiloForm;aziendaForm;sicurezzaForm;giorniChiusura=[];newDate=null;rangeStart=null;rangeEnd=null;currentYear=new Date().getFullYear();companyEmployees=[];availableRoles=[];selectedManagerId=null;managerConfig={mode:"self",user_ids:[],roles:[]};managerVisibilityMap={};currentUser=null;aziendaCorrente=null;impostazioniNotifiche={emailNotifiche:!0,riepilogoGiornaliero:!1,notificheAmministratore:!0};closedDays=[];salvataggioProfilo=!1;salvataggioAzienda=!1;salvataggioPassword=!1;salvataggioNotifiche=!1;messaggioSuccesso="";messaggioErrore="";giorniSettimana=[{key:"monday",label:"Luned\xEC"},{key:"tuesday",label:"Marted\xEC"},{key:"wednesday",label:"Mercoled\xEC"},{key:"thursday",label:"Gioved\xEC"},{key:"friday",label:"Venerd\xEC"},{key:"saturday",label:"Sabato"},{key:"sunday",label:"Domenica"}];ngOnInit(){this.authService.currentUser$.subscribe(t=>{console.log("[Impostazioni] currentUser$",t),this.currentUser=t,t&&(this.caricaDatiProfilo(),this.companyService.getAziendaForUser(t.id,t.company_id).subscribe({next:e=>{e?(this.aziendaCorrente=e,this.managerVisibilityMap=e.manager_visibility??{},this.loadManagerVisibilityData(),this.patchAziendaForm(e),console.log("[Impostazioni] azienda caricata",e)):console.warn("[Impostazioni] nessuna azienda trovata per utente",t.id)},error:e=>{console.error("[Impostazioni] errore getAziendaForUser",e)}}))},t=>console.error("[Impostazioni] currentUser$ error",t))}creaProfiloForm(){return this.fb.group({first_name:["",z.required],last_name:["",z.required],email:["",[z.required,z.email]],phone:[""],hire_date:[""],birth_date:[""],birth_place:[""],fiscal_code:[""],job_title:[""],monthly_hours:[null],full_time:[!1],timezone:["Europe/Rome"]})}creaAziendaForm(){let t=this.fb.group({});return this.giorniSettimana.forEach(e=>{t.addControl(e.key,this.fb.group({open:[""],close:[""],closed:[!1]}))}),this.fb.group({name:["",z.required],vat:["",z.required],address:[""],city:[""],province:[""],website:[""],opening_hours:t})}get openingHoursGroup(){return this.aziendaForm.get("opening_hours")}patchAziendaForm(t){let e=A({},t);t.opening_hours&&(e.opening_hours=t.opening_hours),this.aziendaForm.patchValue(e);let r=t.closed_days;r&&Array.isArray(r)&&r.length>0?this.giorniChiusura=r.map(s=>{if(typeof s!="string")return null;if(s.includes("/")){let[a,l]=s.split("/");return{type:"range",start:a,end:l,label:`Chiusura ${this.formatDateDisplay(a)}`}}else{let a=this.festivitaMap()[s];return{type:"single",start:s,label:a??"Festa"}}}).filter(Boolean):this.giorniChiusura=this.getFestivitaItalianeDetailed(this.currentYear);let i=this.openingHoursGroup,o=t.opening_hours;o&&Object.keys(o).forEach(s=>{let a=i.get(s);a&&(a.get("open")?.setValue(o?.[s]?.open??""),a.get("close")?.setValue(o?.[s]?.close??""),a.get("closed")?.setValue(!!o?.[s]?.closed))})}aggiungiGiornoSingolo(){if(!this.newDate)return;this.giorniChiusura.some(e=>e.type==="single"&&e.start===this.newDate)||(this.giorniChiusura.push({type:"single",start:this.newDate,label:"Festa personalizzata"}),this.newDate=null)}aggiungiIntervallo(){if(!this.rangeStart||!this.rangeEnd)return;if(this.rangeEnd<this.rangeStart){let e=this.rangeStart;this.rangeStart=this.rangeEnd,this.rangeEnd=e}this.giorniChiusura.some(e=>e.type==="range"&&e.start===this.rangeStart&&e.end===this.rangeEnd)||(this.giorniChiusura.push({type:"range",start:this.rangeStart,end:this.rangeEnd,label:"Intervallo personalizzato"}),this.rangeStart=null,this.rangeEnd=null)}rimuoviGiornoChiusura(t){this.giorniChiusura.splice(t,1)}ripristinaFestivita(){this.giorniChiusura=this.getFestivitaItalianeDetailed(this.currentYear)}closedDaysToPayload(){return this.giorniChiusura.map(t=>t.type==="range"?`${t.start}/${t.end}`:t.start)}creaSicurezzaForm(){return this.fb.group({currentPassword:[""],newPassword:[""],confirmPassword:[""]})}caricaDatiProfilo(){this.currentUser&&(this.profiloForm.patchValue({first_name:this.currentUser.first_name,last_name:this.currentUser.last_name,email:this.currentUser.email,phone:this.currentUser.phone||"",hire_date:this.currentUser.hire_date??"",birth_date:this.currentUser.birth_date??"",birth_place:this.currentUser.birth_place??"",fiscal_code:this.currentUser.fiscal_code??"",job_title:this.currentUser.job_title??"",monthly_hours:this.currentUser.monthly_hours??null,full_time:this.currentUser.full_time??!1,timezone:this.currentUser.timezone??"Europe/Rome"}),this.currentUser.notifications_preferences&&(this.impostazioniNotifiche=A(A({},this.impostazioniNotifiche),this.currentUser.notifications_preferences)),this.hasRole("admin")?this.profiloForm.get("hire_date")?.enable():this.profiloForm.get("hire_date")?.disable())}caricaDatiAzienda(t){t&&this.companyService.getAzienda(t).subscribe({next:e=>{if(!e){console.warn("Nessuna azienda trovata per id",t);return}this.aziendaCorrente=e;let r=A({},e);e.opening_hours&&(r.opening_hours=e.opening_hours),this.aziendaForm.patchValue(r);let i=e.closed_days;i&&Array.isArray(i)&&i.length>0?this.giorniChiusura=i.map(s=>{if(typeof s!="string")return null;if(s.includes("/")){let[a,l]=s.split("/");return{type:"range",start:a,end:l,label:`Chiusura ${this.formatDateDisplay(a)}`}}else{let a=this.festivitaMap()[s];return{type:"single",start:s,label:a??"Festa"}}}).filter(Boolean):this.giorniChiusura=this.getFestivitaItalianeDetailed(this.currentYear);let o=this.openingHoursGroup;e.opening_hours&&Object.keys(e.opening_hours).forEach(s=>{let a=o.get(s);a&&(a.get("open")?.setValue(e.opening_hours?.[s]?.open??""),a.get("close")?.setValue(e.opening_hours?.[s]?.close??""),a.get("closed")?.setValue(!!e.opening_hours?.[s]?.closed))})},error:e=>{console.error("Errore nel caricamento dati azienda:",e)}})}hasRole(t){return this.authService.hasRole(t)}salvaProfilo(){return y(this,null,function*(){if(this.profiloForm.invalid||!this.currentUser){this.profiloForm.markAllAsTouched();return}this.salvataggioProfilo=!0,this.messaggioErrore="";try{let t=this.profiloForm.getRawValue(),e={first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone||null,birth_date:t.birth_date?t.birth_date:null,birth_place:t.birth_place||null,fiscal_code:t.fiscal_code||null,job_title:t.job_title||null,monthly_hours:t.monthly_hours!==""&&t.monthly_hours!=null?Number(t.monthly_hours):null,full_time:!!t.full_time,timezone:t.timezone||null};this.hasRole("admin")&&(e.hire_date=t.hire_date?t.hire_date:null),e.notifications_preferences=this.impostazioniNotifiche;let r=yield this.authService.updateUserProfile(this.currentUser.id,e);this.currentUser=r??this.currentUser,this.messaggioSuccesso="Profilo aggiornato con successo!",this.nascondiMessaggioDopoTimeout(),this.showSystemNotification("Aggiornato il profilo con successo")}catch(t){console.error("[Impostazioni] errore salvaProfilo",t),this.messaggioErrore="Errore durante il salvataggio del profilo"}finally{this.salvataggioProfilo=!1}})}salvaAzienda(){if(this.aziendaForm.invalid){this.aziendaForm.markAllAsTouched();return}this.salvataggioAzienda=!0,this.messaggioErrore="";let t=this.aziendaForm.value,e={},r=this.aziendaForm.get("opening_hours");this.giorniSettimana.forEach(o=>{let s=r.get(o.key);e[o.key]={open:s.get("open")?.value||null,close:s.get("close")?.value||null,closed:!!s.get("closed")?.value}});let i=Q(A({},t),{opening_hours:e,closed_days:this.closedDaysToPayload()});this.companyService.aggiornaAzienda(this.aziendaCorrente.id,i).subscribe({next:()=>{this.salvataggioAzienda=!1,this.messaggioSuccesso="Dati azienda aggiornati con successo!",this.nascondiMessaggioDopoTimeout()},error:o=>{this.salvataggioAzienda=!1,this.messaggioErrore="Errore durante il salvataggio dei dati azienda",console.error("Errore aggiornamento azienda:",o)}})}showSystemNotification(t,e=!1){return y(this,null,function*(){if(!("Notification"in window)){console.debug("[Impostazioni] Notification API non disponibile");return}if(!(location.protocol==="https:"||location.hostname==="localhost"||location.hostname==="127.0.0.1")){console.debug("[Impostazioni] Notification API richiede HTTPS o localhost");return}try{if(Notification.permission==="granted"){new Notification(t,{silent:!1});return}if(Notification.permission!=="denied"){let i=yield Notification.requestPermission();i==="granted"?new Notification(t,{silent:!1}):console.debug("[Impostazioni] Notification permission non concessa:",i)}else console.debug("[Impostazioni] Notification permission \xE8 denied")}catch(i){console.warn("[Impostazioni] errore Notification API",i)}})}cambiaPassword(){if(this.sicurezzaForm.invalid){this.sicurezzaForm.markAllAsTouched();return}this.salvataggioPassword=!0,this.messaggioErrore="",setTimeout(()=>{this.salvataggioPassword=!1,this.sicurezzaForm.reset(),this.messaggioSuccesso="Password cambiata con successo!",this.nascondiMessaggioDopoTimeout()},1e3)}salvaNotifiche(){return y(this,null,function*(){if(!this.currentUser){console.debug("[Impostazioni] salvaNotifiche: utente non autenticato");return}this.salvataggioNotifiche=!0,this.messaggioErrore="";let t=null;try{"Notification"in window?location.protocol==="https:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"?(t=yield Notification.requestPermission(),console.debug("[Impostazioni] Notification.requestPermission =>",t)):console.debug("[Impostazioni] Notification API richiede HTTPS o localhost"):console.debug("[Impostazioni] Notification API non disponibile")}catch(r){console.warn("[Impostazioni] errore requestPermission",r)}let e={notifications_preferences:this.impostazioniNotifiche};console.debug("[Impostazioni] salvaNotifiche payload:",e);try{let r=yield this.authService.updateUserProfile(this.currentUser.id,e);if(console.debug("[Impostazioni] updateUserProfile response:",r),this.currentUser=r??this.currentUser,this.salvataggioNotifiche=!1,this.messaggioSuccesso="Preferenze notifiche salvate!",this.nascondiMessaggioDopoTimeout(),t==="granted")try{new Notification("Aggiornato il profilo con successo")}catch(i){console.warn("[Impostazioni] errore creazione Notification",i)}else console.debug("[Impostazioni] permesso notifiche non concesso, nessuna notifica di sistema mostrata")}catch(r){let i=r&&(r.message||r.error||JSON.stringify(r))||"Errore sconosciuto";if(console.error("[Impostazioni] errore salvaNotifiche",r),this.salvataggioNotifiche=!1,this.messaggioErrore="Errore durante il salvataggio delle preferenze: "+i,t==="granted")try{new Notification("Salvataggio preferenze fallito")}catch{}}})}toggleGiornoChiusura(t){let e=t.target,r=e.value;r&&(e.checked?this.giorniChiusura.some(o=>o.type==="single"&&o.start===r)||this.giorniChiusura.push({type:"single",start:r,label:"Festa personalizzata"}):this.giorniChiusura=this.giorniChiusura.filter(i=>!(i.type==="single"&&i.start===r)))}formatDateDisplay(t){if(!t)return"";let e=t.split("-");if(e.length!==3)return t;let[r,i,o]=e;return`${o}/${i}/${r}`}formatClosedDay(t){return t?t.type==="range"?`${this.formatDateDisplay(t.start)} \u2192 ${this.formatDateDisplay(t.end??"")}`:this.formatDateDisplay(t.start):""}nascondiMessaggioDopoTimeout(){setTimeout(()=>{this.messaggioSuccesso="",this.messaggioErrore=""},5e3)}getFestivitaItalianeDetailed(t){let e=h=>h.toString().padStart(2,"0"),r=h=>`${h.getFullYear()}-${e(h.getMonth()+1)}-${e(h.getDate())}`,i={[r(new Date(t,0,1))]:"Capodanno",[r(new Date(t,0,6))]:"Epifania",[r(new Date(t,3,25))]:"Festa della Liberazione",[r(new Date(t,4,1))]:"Festa del Lavoro",[r(new Date(t,5,2))]:"Festa della Repubblica",[r(new Date(t,7,15))]:"Ferragosto",[r(new Date(t,10,1))]:"Ognissanti",[r(new Date(t,11,8))]:"Immacolata Concezione",[r(new Date(t,11,25))]:"Natale",[r(new Date(t,11,26))]:"Santo Stefano"},o=this.calculateEasterDate(t),s=r(o),a=new Date(o);a.setDate(a.getDate()+1);let l=r(a),f=[];return Object.keys(i).forEach(h=>f.push({type:"single",start:h,label:i[h]})),f.push({type:"single",start:s,label:"Pasqua"}),f.push({type:"single",start:l,label:"Pasquetta"}),f.sort((h,m)=>h.start>m.start?1:h.start<m.start?-1:0),f}festivitaMap(){let t=this.getFestivitaItalianeDetailed(this.currentYear),e={};return t.forEach(r=>{e[r.start]=r.label??"Festa"}),e}calculateEasterDate(t){let e=t%19,r=Math.floor(t/100),i=t%100,o=Math.floor(r/4),s=r%4,a=Math.floor((r+8)/25),l=Math.floor((r-a+1)/3),f=(19*e+r-o-l+15)%30,h=Math.floor(i/4),m=i%4,v=(32+2*s+2*h-f-m)%7,g=Math.floor((e+11*f+22*v)/451),E=Math.floor((f+v-7*g+114)/31),S=(f+v-7*g+114)%31+1;return new Date(t,E-1,S)}loadManagerVisibilityData(){!this.aziendaCorrente||!this.aziendaCorrente.id||this.dipendentiService.getDipendenti(this.aziendaCorrente.id).subscribe({next:t=>{this.companyEmployees=t||[];let e=new Set;(this.companyEmployees||[]).forEach(r=>{r.role&&e.add(r.role)}),this.availableRoles=Array.from(e)},error:t=>{console.error("[Impostazioni] errore loadManagerVisibilityData",t)}})}onManagerSelected(){if(!this.selectedManagerId){this.managerConfig={mode:"self",user_ids:[],roles:[]};return}let t=this.managerVisibilityMap[this.selectedManagerId]??{mode:"self",user_ids:[],roles:[]};this.managerConfig={mode:t.mode??"self",user_ids:Array.isArray(t.user_ids)?t.user_ids:[],roles:Array.isArray(t.roles)?t.roles:[]}}toggleManagerUser(t,e){e.target.checked?this.managerConfig.user_ids.includes(t)||this.managerConfig.user_ids.push(t):this.managerConfig.user_ids=this.managerConfig.user_ids.filter(i=>i!==t)}toggleManagerRole(t,e){e.target.checked?this.managerConfig.roles.includes(t)||this.managerConfig.roles.push(t):this.managerConfig.roles=this.managerConfig.roles.filter(i=>i!==t)}salvaManagerVisibility(){if(!this.aziendaCorrente||!this.aziendaCorrente.id||!this.selectedManagerId)return;this.managerVisibilityMap[this.selectedManagerId]=A({},this.managerConfig);let t={manager_visibility:this.managerVisibilityMap};this.salvataggioAzienda=!0,this.companyService.aggiornaAzienda(this.aziendaCorrente.id,t).subscribe({next:e=>{this.salvataggioAzienda=!1,this.messaggioSuccesso="Visibilit\xE0 responsabile salvata",this.nascondiMessaggioDopoTimeout()},error:e=>{this.salvataggioAzienda=!1,this.messaggioErrore="Errore salvataggio visibilit\xE0 responsabile",console.error("[Impostazioni] salvaManagerVisibility error",e)}})}static \u0275fac=function(e){return new(e||n)(C(Er),C(me),C(jt),C(Pn))};static \u0275cmp=fe({type:n,selectors:[["app-impostazioni"]],decls:173,vars:27,consts:[[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"settings-grid"],[1,"form-section"],[1,"generic-form",3,"ngSubmit","formGroup"],[1,"grid-form"],[1,"form-group"],[1,"form-label"],["type","text","formControlName","first_name",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","last_name",1,"form-control"],["type","email","formControlName","email",1,"form-control"],["type","tel","formControlName","phone",1,"form-control"],["type","date","formControlName","hire_date",1,"form-control",3,"disabled"],[1,"info","small"],["type","date","formControlName","birth_date",1,"form-control"],["type","text","formControlName","birth_place",1,"form-control"],["type","text","formControlName","fiscal_code",1,"form-control"],["type","text","formControlName","job_title",1,"form-control"],["type","number","min","0","formControlName","monthly_hours",1,"form-control"],[1,"form-group","checkbox-inline"],[1,"checkbox-label"],["type","checkbox","formControlName","full_time"],[1,"checkmark"],["type","text","formControlName","timezone","placeholder","Europe/Rome",1,"form-control"],["type","text","disabled","",1,"form-control",3,"value"],[1,"form-actions"],["type","submit",1,"promethea-button",3,"disabled"],["class","material-icons",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["class","form-section",4,"ngIf"],["type","password","formControlName","currentPassword",1,"form-control"],["type","password","formControlName","newPassword",1,"form-control"],["type","password","formControlName","confirmPassword",1,"form-control"],[1,"notifications-grid"],[1,"checkbox-label","large"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"notification-info"],["class","checkbox-label large",4,"ngIf"],["type","button",1,"promethea-button",3,"click","disabled"],["class","status-message info",4,"ngIf"],["class","status-message error",4,"ngIf"],[1,"error"],[1,"loading-spinner"],["type","text","formControlName","name",1,"form-control"],["type","text","formControlName","vat",1,"form-control"],["type","text","formControlName","address",1,"form-control"],["type","text","formControlName","city",1,"form-control"],["type","text","formControlName","province",1,"form-control"],["type","url","formControlName","website",1,"form-control"],[1,"form-subsection"],[1,"subsection-title"],["formGroupName","opening_hours",1,"opening-hours-grid",3,"formGroup"],["class","day-row",3,"formGroupName",4,"ngFor","ngForOf"],[1,"closed-days-grid"],["class","day-row feste",4,"ngFor","ngForOf"],[1,"closed-days-actions"],[1,"action-group"],["type","date",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["type","button",1,"promethea-button",3,"click"],[1,"actions-right"],["type","button",1,"promethea-button","ghost",3,"click"],[1,"day-row",3,"formGroupName"],[1,"form-label","day-label"],[1,"day-controls"],[1,"form-group","small"],["type","time","formControlName","open",1,"form-control"],["type","time","formControlName","close",1,"form-control"],[1,"form-group","small","checkbox-inline"],["type","checkbox","formControlName","closed"],[1,"day-row","feste"],[1,"info-detail"],["type","button","title","Rimuovi",1,"icon-button",3,"click"],[1,"generic-form"],["name","selectedManager",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","manager-config",4,"ngIf"],[1,"manager-config"],[1,"radio-label"],["type","radio","name","mode","value","self",3,"ngModelChange","ngModel"],["type","radio","name","mode","value","selected_users",3,"ngModelChange","ngModel"],["type","radio","name","mode","value","roles",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"users-list"],["class","checkbox-label",4,"ngFor","ngForOf"],["type","checkbox",3,"change","value","checked"],[1,"roles-list"],[1,"status-message","info"],[1,"status-message","error"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d(4,"settings"),c()(),u(5,"div",4)(6,"h1",5),d(7,"Impostazioni"),c(),u(8,"p",6),d(9,"Gestisci il tuo profilo e le impostazioni aziendali"),c()()(),u(10,"div",7)(11,"div",8)(12,"h2",5)(13,"span",3),d(14,"person"),c(),d(15," Profilo Utente "),c(),u(16,"form",9),T("ngSubmit",function(){return r.salvaProfilo()}),u(17,"div",10)(18,"div",11)(19,"label",12)(20,"span",3),d(21,"badge"),c(),d(22," Nome * "),c(),O(23,"input",13),x(24,CL,2,0,"div",14),c(),u(25,"div",11)(26,"label",12)(27,"span",3),d(28,"badge"),c(),d(29," Cognome * "),c(),O(30,"input",15),x(31,SL,2,0,"div",14),c(),u(32,"div",11)(33,"label",12)(34,"span",3),d(35,"email"),c(),d(36," Email * "),c(),O(37,"input",16),x(38,DL,2,0,"div",14),c(),u(39,"div",11)(40,"label",12)(41,"span",3),d(42,"phone"),c(),d(43," Telefono "),c(),O(44,"input",17),c(),u(45,"div",11)(46,"label",12)(47,"span",3),d(48,"event_available"),c(),d(49," Data di Assunzione "),c(),O(50,"input",18),u(51,"div",19),d(52,"Modificabile solo dall'amministratore"),c()(),u(53,"div",11)(54,"label",12)(55,"span",3),d(56,"cake"),c(),d(57," Data di Nascita "),c(),O(58,"input",20),c(),u(59,"div",11)(60,"label",12)(61,"span",3),d(62,"place"),c(),d(63," Luogo di Nascita "),c(),O(64,"input",21),c(),u(65,"div",11)(66,"label",12)(67,"span",3),d(68,"badge"),c(),d(69," Codice Fiscale "),c(),O(70,"input",22),c(),u(71,"div",11)(72,"label",12)(73,"span",3),d(74,"work_outline"),c(),d(75," Job Title "),c(),O(76,"input",23),c(),u(77,"div",11)(78,"label",12)(79,"span",3),d(80,"schedule"),c(),d(81," Ore Mensili "),c(),O(82,"input",24),c(),u(83,"div",25)(84,"label",26),O(85,"input",27)(86,"span",28),d(87," Full time "),c()(),u(88,"div",11)(89,"label",12)(90,"span",3),d(91,"public"),c(),d(92," Timezone "),c(),O(93,"input",29),c(),u(94,"div",11)(95,"label",12)(96,"span",3),d(97,"work"),c(),d(98," Ruolo "),c(),O(99,"input",30),c(),u(100,"div",11)(101,"label",12)(102,"span",3),d(103,"business"),c(),d(104," Azienda "),c(),O(105,"input",30),c()(),u(106,"div",31)(107,"button",32),x(108,IL,2,0,"span",33)(109,xL,1,0,"span",34),d(110),c()()()(),x(111,kL,77,19,"div",35)(112,BL,14,4,"div",35),u(113,"div",8)(114,"h2",5)(115,"span",3),d(116,"security"),c(),d(117," Sicurezza "),c(),u(118,"form",9),T("ngSubmit",function(){return r.cambiaPassword()}),u(119,"div",10)(120,"div",11)(121,"label",12)(122,"span",3),d(123,"lock"),c(),d(124," Password Attuale "),c(),O(125,"input",36),c(),u(126,"div",11)(127,"label",12)(128,"span",3),d(129,"lock_reset"),c(),d(130," Nuova Password "),c(),O(131,"input",37),c(),u(132,"div",11)(133,"label",12)(134,"span",3),d(135,"lock_reset"),c(),d(136," Conferma Password "),c(),O(137,"input",38),c()(),u(138,"div",31)(139,"button",32),x(140,$L,2,0,"span",33)(141,zL,1,0,"span",34),d(142),c()()()(),u(143,"div",8)(144,"h2",5)(145,"span",3),d(146,"notifications"),c(),d(147," Notifiche "),c(),u(148,"div",39)(149,"label",40)(150,"input",41),ue("ngModelChange",function(o){return he(r.impostazioniNotifiche.emailNotifiche,o)||(r.impostazioniNotifiche.emailNotifiche=o),o}),c(),O(151,"span",28),u(152,"div",42)(153,"strong"),d(154,"Notifiche Email"),c(),u(155,"span"),d(156,"Ricevi notifiche via email per le tue timbrature"),c()()(),u(157,"label",40)(158,"input",41),ue("ngModelChange",function(o){return he(r.impostazioniNotifiche.riepilogoGiornaliero,o)||(r.impostazioniNotifiche.riepilogoGiornaliero=o),o}),c(),O(159,"span",28),u(160,"div",42)(161,"strong"),d(162,"Riepilogo Giornaliero"),c(),u(163,"span"),d(164,"Ricevi un riepilogo giornaliero delle tue ore"),c()()(),x(165,HL,8,1,"label",43),c(),u(166,"div",31)(167,"button",44),T("click",function(){return r.salvaNotifiche()}),x(168,GL,2,0,"span",33)(169,WL,1,0,"span",34),d(170),c()()()(),x(171,qL,4,1,"div",45)(172,YL,4,1,"div",46),c()),e&2){let i,o,s;p(16),_("formGroup",r.profiloForm),p(8),_("ngIf",((i=r.profiloForm.get("first_name"))==null?null:i.invalid)&&((i=r.profiloForm.get("first_name"))==null?null:i.touched)),p(7),_("ngIf",((o=r.profiloForm.get("last_name"))==null?null:o.invalid)&&((o=r.profiloForm.get("last_name"))==null?null:o.touched)),p(7),_("ngIf",((s=r.profiloForm.get("email"))==null?null:s.invalid)&&((s=r.profiloForm.get("email"))==null?null:s.touched)),p(12),_("disabled",!r.hasRole("admin")),p(49),_("value",r.currentUser==null?null:r.currentUser.role),p(6),_("value",(r.aziendaCorrente==null?null:r.aziendaCorrente.name)||"N/A"),p(2),_("disabled",r.profiloForm.invalid||r.salvataggioProfilo),p(),_("ngIf",!r.salvataggioProfilo),p(),_("ngIf",r.salvataggioProfilo),p(),M(" ",r.salvataggioProfilo?"Salvando...":"Salva Profilo"," "),p(),_("ngIf",r.hasRole("admin")),p(),_("ngIf",r.hasRole("admin")),p(6),_("formGroup",r.sicurezzaForm),p(21),_("disabled",r.sicurezzaForm.invalid||r.salvataggioPassword),p(),_("ngIf",!r.salvataggioPassword),p(),_("ngIf",r.salvataggioPassword),p(),M(" ",r.salvataggioPassword?"Salvando...":"Cambia Password"," "),p(8),ce("ngModel",r.impostazioniNotifiche.emailNotifiche),p(8),ce("ngModel",r.impostazioniNotifiche.riepilogoGiornaliero),p(7),_("ngIf",r.hasRole("admin")),p(2),_("disabled",r.salvataggioNotifiche),p(),_("ngIf",!r.salvataggioNotifiche),p(),_("ngIf",r.salvataggioNotifiche),p(),M(" ",r.salvataggioNotifiche?"Salvando...":"Salva Notifiche"," "),p(),_("ngIf",r.messaggioSuccesso),p(),_("ngIf",r.messaggioErrore)}},dependencies:[_e,it,Le,wr,br,nn,rn,qe,u0,Vl,kt,d0,Ye,_r,p0,An,Zn,js,on,qt],styles:[".closed-days-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--gutter-sm)}.closed-days-grid[_ngcontent-%COMP%]   .day-row.feste[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:var(--gutter-sm);justify-content:flex-start}.closed-days-grid[_ngcontent-%COMP%]   .day-row.feste[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{flex:1 1 auto;min-width:0;overflow:hidden}.closed-days-grid[_ngcontent-%COMP%]   .day-row.feste[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;overflow:hidden;text-overflow:ellipsis}.closed-days-grid[_ngcontent-%COMP%]   .day-row.feste[_ngcontent-%COMP%]   .info-detail[_ngcontent-%COMP%]{font-size:.85rem;color:color-mix(in srgb,var(--text-color) 60%,transparent);margin-top:4px;overflow:hidden}.closed-days-grid[_ngcontent-%COMP%]   .day-row.feste[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, .closed-days-grid[_ngcontent-%COMP%]   .day-row.feste[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{flex:0 0 auto;margin-left:8px}.closed-days-actions[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm, 12px);margin-top:var(--space-sm, 12px);align-items:center}.closed-days-actions[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.closed-days-actions[_ngcontent-%COMP%]   .actions-right[_ngcontent-%COMP%]{margin-left:auto}.closed-days-actions[_ngcontent-%COMP%]   .form-control[type=date][_ngcontent-%COMP%]{max-width:220px}@media (max-width: 600px){.closed-days-actions[_ngcontent-%COMP%]{flex-wrap:wrap;gap:10px}.closed-days-actions[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%], .closed-days-actions[_ngcontent-%COMP%]   .actions-right[_ngcontent-%COMP%]{flex:1 1 100%;display:flex;justify-content:flex-start}.closed-days-actions[_ngcontent-%COMP%]   .actions-right[_ngcontent-%COMP%]{justify-content:flex-end}}"]})};function KL(n,t){if(n&1&&(u(0,"option",32),d(1),c()),n&2){let e=t.$implicit;_("value",e.id),p(),be(" ",e.first_name," ",e.last_name," ")}}function ZL(n,t){if(n&1){let e=se();u(0,"select",29),ue("ngModelChange",function(i){F(e);let o=b();return he(o.dipendenteSelezionato,i)||(o.dipendenteSelezionato=i),L(i)}),u(1,"option",30),d(2,"Tutti i dipendenti"),c(),x(3,KL,2,3,"option",31),c()}if(n&2){let e=b();ce("ngModel",e.dipendenteSelezionato),p(3),_("ngForOf",e.dipendenti)}}function QL(n,t){if(n&1&&O(0,"input",33),n&2){let e=b();_("value",(e.currentUser==null?null:e.currentUser.first_name)+" "+(e.currentUser==null?null:e.currentUser.last_name))}}function JL(n,t){n&1&&(u(0,"span",3),d(1,"refresh"),c())}function XL(n,t){n&1&&O(0,"span",34)}function ej(n,t){if(n&1&&(u(0,"div",35)(1,"h2",5)(2,"span",3),d(3,"insights"),c(),d(4," Statistiche "),c(),u(5,"div",36)(6,"div",37)(7,"h3",38),d(8,"Ore Totali"),c(),u(9,"div",39),d(10),H(11,"number"),c(),u(12,"p",6),d(13,"Periodo selezionato"),c()(),u(14,"div",37)(15,"h3",38),d(16,"Media Giornaliera"),c(),u(17,"div",39),d(18),H(19,"number"),c(),u(20,"p",6),d(21,"Per giorno lavorativo"),c()(),u(22,"div",37)(23,"h3",38),d(24,"Giorni Lavorati"),c(),u(25,"div",39),d(26),c(),u(27,"p",6),d(28),c()(),u(29,"div",37)(30,"h3",38),d(31,"Ore di Pause"),c(),u(32,"div",39),d(33),H(34,"number"),c(),u(35,"p",6),d(36,"Totale pause"),c()()()()),n&2){let e=b();p(10),M("",Y(11,5,e.datiReport.oreTotali,"1.1-1"),"h"),p(8),M("",Y(19,8,e.datiReport.mediaGiornaliera,"1.1-1"),"h"),p(8),R(e.datiReport.giorniLavorati),p(2),M("Su ",e.datiReport.giorniTotali," giorni"),p(5),M("",Y(34,11,e.datiReport.orePause,"1.1-1"),"h")}}function tj(n,t){if(n&1&&(u(0,"span",46),d(1),c()),n&2){let e=b().$implicit,r=b(2);_("title",e.note),p(),M(" ",r.troncaTesto(e.note,20)," ")}}function nj(n,t){n&1&&(u(0,"span"),d(1,"-"),c())}function rj(n,t){if(n&1&&(u(0,"tr")(1,"td"),d(2),H(3,"date"),c(),u(4,"td"),d(5),c(),u(6,"td"),d(7),c(),u(8,"td"),d(9),c(),u(10,"td"),d(11),H(12,"number"),c(),u(13,"td"),d(14),H(15,"number"),c(),u(16,"td"),d(17),H(18,"number"),c(),u(19,"td"),x(20,tj,2,2,"span",44)(21,nj,2,0,"span",45),c()()),n&2){let e=t.$implicit;p(2),R(Y(3,9,e.data,"dd/MM/yyyy")),p(3),R(e.dipendente),p(2),R(e.oraInizio),p(2),R(e.oraFine),p(2),M("",Y(12,12,e.oreLavorate,"1.1-1"),"h"),p(3),M("",Y(15,15,e.pause,"1.1-1"),"h"),p(3),M("",Y(18,18,e.oreEffettive,"1.1-1"),"h"),p(3),_("ngIf",e.note),p(),_("ngIf",!e.note)}}function ij(n,t){if(n&1&&(u(0,"div",40)(1,"h2",5)(2,"span",3),d(3,"view_list"),c(),d(4," Dettaglio Timbrature "),c(),u(5,"div",41)(6,"table",42)(7,"thead")(8,"tr")(9,"th"),d(10,"Data"),c(),u(11,"th"),d(12,"Dipendente"),c(),u(13,"th"),d(14,"Ora Inizio"),c(),u(15,"th"),d(16,"Ora Fine"),c(),u(17,"th"),d(18,"Ore Lavorate"),c(),u(19,"th"),d(20,"Pause"),c(),u(21,"th"),d(22,"Ore Effettive"),c(),u(23,"th"),d(24,"Note"),c()()(),u(25,"tbody"),x(26,rj,22,21,"tr",43),c()()()()),n&2){let e=b();p(26),_("ngForOf",e.datiReport.dettaglio)}}function oj(n,t){if(n&1&&(u(0,"div",51)(1,"div",52),d(2),c(),u(3,"div",53),O(4,"div",54),c(),u(5,"div",55),d(6),H(7,"number"),c()()),n&2){let e=t.$implicit,r=b(2);p(2),R(e.giorno),p(2),ur("height",e.ore/r.datiReport.maxOreGiornaliere*100+"%"),p(2),M("",Y(7,4,e.ore,"1.1-1"),"h")}}function sj(n,t){if(n&1&&(u(0,"div",7)(1,"h2",5)(2,"span",3),d(3,"bar_chart"),c(),d(4," Andamento Ore Lavorative "),c(),u(5,"div",47)(6,"div",48)(7,"p",6),d(8,"Grafico delle ore lavorative per giorno"),c(),u(9,"div",49),x(10,oj,8,7,"div",50),c()()()()),n&2){let e=b();p(10),_("ngForOf",e.datiReport.graficoOre)}}function aj(n,t){n&1&&(u(0,"div",56)(1,"span",3),d(2,"analytics"),c(),u(3,"h3"),d(4,"Nessun report generato"),c(),u(5,"p"),d(6,"Seleziona i filtri e genera un report per visualizzare i dati."),c()())}var Eh=class n{constructor(t,e,r){this.authService=t;this.companyService=e;this.timbratureService=r}tipoReport="settimanale";dataInizio="";dataFine="";dipendenteSelezionato="tutti";currentUser=null;dipendenti=[];datiReport=null;isLoading=!1;ngOnInit(){this.authService.currentUser$.subscribe(t=>{this.currentUser=t,t&&(this.impostaDatePredefinite(),(this.hasRole("admin")||this.hasRole("manager"))&&this.caricaDipendenti(t.company_id))})}impostaDatePredefinite(){let t=new Date;switch(this.tipoReport){case"settimanale":let e=new Date(t);e.setDate(t.getDate()-t.getDay()+1),this.dataInizio=e.toISOString().split("T")[0],this.dataFine=t.toISOString().split("T")[0];break;case"mensile":let r=new Date(t.getFullYear(),t.getMonth(),1);this.dataInizio=r.toISOString().split("T")[0],this.dataFine=t.toISOString().split("T")[0];break;case"annuale":let i=new Date(t.getFullYear(),0,1);this.dataInizio=i.toISOString().split("T")[0],this.dataFine=t.toISOString().split("T")[0];break;case"personalizzato":break}}onTipoReportChange(){this.impostaDatePredefinite()}caricaDipendenti(t){this.companyService.getDipendenti(t).subscribe({next:e=>{this.dipendenti=e},error:e=>{console.error("Errore nel caricamento dipendenti:",e)}})}hasRole(t){return this.authService.hasRole(t)}generaReport(){if(!this.dataInizio||!this.dataFine){alert("Seleziona le date di inizio e fine");return}this.isLoading=!0,this.datiReport=null,setTimeout(()=>{this.datiReport=this.generaReportMock(),this.isLoading=!1},1500)}generaReportMock(){let t=[{data:new Date("2024-01-15"),dipendente:"Mario Rossi",oraInizio:"08:00",oraFine:"17:00",oreLavorate:9,pause:1,oreEffettive:8,note:"Giornata standard"},{data:new Date("2024-01-16"),dipendente:"Mario Rossi",oraInizio:"09:00",oraFine:"18:00",oreLavorate:9,pause:1,oreEffettive:8,note:"Riunione mattutina"},{data:new Date("2024-01-17"),dipendente:"Mario Rossi",oraInizio:"08:30",oraFine:"17:30",oreLavorate:9,pause:.5,oreEffettive:8.5}],e=[{giorno:"Lun",ore:8},{giorno:"Mar",ore:8},{giorno:"Mer",ore:8.5},{giorno:"Gio",ore:7.5},{giorno:"Ven",ore:8},{giorno:"Sab",ore:4},{giorno:"Dom",ore:0}],r=t.reduce((s,a)=>s+a.oreEffettive,0),i=t.reduce((s,a)=>s+a.pause,0),o=Math.max(...e.map(s=>s.ore));return{oreTotali:r,mediaGiornaliera:r/t.length,giorniLavorati:t.length,giorniTotali:7,orePause:i,maxOreGiornaliere:o,dettaglio:t,graficoOre:e}}esportaPDF(){console.log("Esportazione PDF con dati:",this.datiReport),alert("Esportazione PDF simulata! Nella versione reale verrebbe generato un PDF.")}esportaExcel(){console.log("Esportazione Excel con dati:",this.datiReport),alert("Esportazione Excel simulata! Nella versione reale verrebbe generato un file Excel.")}troncaTesto(t,e){return t?t.length<=e?t:t.substring(0,e)+"...":""}static \u0275fac=function(e){return new(e||n)(C(me),C(jt),C(Vt))};static \u0275cmp=fe({type:n,selectors:[["app-report"]],decls:58,vars:15,consts:[[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"form-section"],[1,"grid-form"],[1,"form-group"],[1,"form-label"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value","settimanale"],["value","mensile"],["value","annuale"],["value","personalizzato"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["class","form-control",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","class","form-control","disabled","",3,"value",4,"ngIf"],[1,"form-actions"],[1,"promethea-button",3,"click","disabled"],["class","material-icons",4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"promethea-button","outline",3,"click","disabled"],[1,"promethea-button","secondary",3,"click","disabled"],["class","kpi-section",4,"ngIf"],["class","table-section",4,"ngIf"],["class","form-section",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"form-control",3,"ngModelChange","ngModel"],["value","tutti"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","disabled","",1,"form-control",3,"value"],[1,"loading-spinner"],[1,"kpi-section"],[1,"grid-cards"],[1,"card"],[1,"card-title"],[1,"card-number"],[1,"table-section"],[1,"table-container"],[1,"crm-table"],[4,"ngFor","ngForOf"],["class","notes-preview",3,"title",4,"ngIf"],[4,"ngIf"],[1,"notes-preview",3,"title"],[1,"chart-placeholder"],[1,"chart-container"],[1,"chart-bars"],["class","chart-bar",4,"ngFor","ngForOf"],[1,"chart-bar"],[1,"bar-label"],[1,"bar-container"],[1,"bar-fill"],[1,"bar-value"],[1,"empty-state"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d(4,"assessment"),c()(),u(5,"div",4)(6,"h1",5),d(7,"Report Timbrature"),c(),u(8,"p",6),d(9,"Analizza e esporta i dati delle timbrature"),c()()(),u(10,"div",7)(11,"h2",5)(12,"span",3),d(13,"filter_alt"),c(),d(14," Filtri Report "),c(),u(15,"div",8)(16,"div",9)(17,"label",10),d(18,"Tipo Report"),c(),u(19,"select",11),ue("ngModelChange",function(o){return he(r.tipoReport,o)||(r.tipoReport=o),o}),T("change",function(){return r.onTipoReportChange()}),u(20,"option",12),d(21,"Settimanale"),c(),u(22,"option",13),d(23,"Mensile"),c(),u(24,"option",14),d(25,"Annuale"),c(),u(26,"option",15),d(27,"Personalizzato"),c()()(),u(28,"div",9)(29,"label",10),d(30,"Data Inizio"),c(),u(31,"input",16),ue("ngModelChange",function(o){return he(r.dataInizio,o)||(r.dataInizio=o),o}),c()(),u(32,"div",9)(33,"label",10),d(34,"Data Fine"),c(),u(35,"input",16),ue("ngModelChange",function(o){return he(r.dataFine,o)||(r.dataFine=o),o}),c()(),u(36,"div",9)(37,"label",10),d(38,"Dipendente"),c(),x(39,ZL,4,2,"select",17)(40,QL,1,1,"input",18),c()(),u(41,"div",19)(42,"button",20),T("click",function(){return r.generaReport()}),x(43,JL,2,0,"span",21)(44,XL,1,0,"span",22),d(45),c(),u(46,"button",23),T("click",function(){return r.esportaPDF()}),u(47,"span",3),d(48,"picture_as_pdf"),c(),d(49," Esporta PDF "),c(),u(50,"button",24),T("click",function(){return r.esportaExcel()}),u(51,"span",3),d(52,"table_chart"),c(),d(53," Esporta Excel "),c()()(),x(54,ej,37,14,"div",25)(55,ij,27,1,"div",26)(56,sj,11,1,"div",27)(57,aj,7,0,"div",28),c()),e&2&&(p(19),ce("ngModel",r.tipoReport),p(12),ce("ngModel",r.dataInizio),p(4),ce("ngModel",r.dataFine),p(4),_("ngIf",r.hasRole("admin")||r.hasRole("manager")),p(),_("ngIf",!r.hasRole("admin")&&!r.hasRole("manager")),p(2),_("disabled",r.isLoading),p(),_("ngIf",!r.isLoading),p(),_("ngIf",r.isLoading),p(),M(" ",r.isLoading?"Generando...":"Genera Report"," "),p(),_("disabled",!r.datiReport),p(4),_("disabled",!r.datiReport),p(4),_("ngIf",r.datiReport),p(),_("ngIf",r.datiReport),p(),_("ngIf",r.datiReport),p(),_("ngIf",!r.datiReport&&!r.isLoading))},dependencies:[_e,it,Le,on,nn,rn,qe,kt,Ye,qt,mn,ut],styles:[".kpi-section[_ngcontent-%COMP%]{margin-bottom:var(--gutter-lg)}.chart-placeholder[_ngcontent-%COMP%]{background:var(--background);border:1px solid var(--smoke-color-1);border-radius:16px;padding:var(--gutter-lg);margin-top:var(--gutter-md)}.chart-container[_ngcontent-%COMP%]{text-align:center}.chart-bars[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;gap:var(--gutter-sm);height:200px;margin-top:var(--gutter-lg);padding:0 var(--gutter-md)}.chart-bar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1;gap:var(--gutter-sm)}.bar-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-color);opacity:.7}.bar-container[_ngcontent-%COMP%]{height:120px;width:30px;background:color-mix(in srgb,var(--smoke-color-1) 50%,transparent);border-radius:4px 4px 0 0;position:relative;display:flex;align-items:flex-end}.bar-fill[_ngcontent-%COMP%]{width:100%;background:var(--gradiente);border-radius:4px 4px 0 0;transition:height .3s ease;min-height:4px}.bar-value[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:var(--text-color)}@media (max-width: 768px){.chart-bars[_ngcontent-%COMP%]{gap:4px;padding:0 var(--gutter-sm)}.bar-container[_ngcontent-%COMP%]{width:20px}.bar-label[_ngcontent-%COMP%], .bar-value[_ngcontent-%COMP%]{font-size:.7rem}}@media (max-width: 480px){.chart-bars[_ngcontent-%COMP%]{flex-wrap:wrap;height:auto;gap:var(--gutter-md)}.chart-bar[_ngcontent-%COMP%]{flex:0 0 calc(33.333% - var(--gutter-md))}}"]})};var wh=class n{constructor(t){this.supabaseService=t}BUCKET_NAME="buste-paga";getBustePagaAzienda(t){let r=this.supabaseService.getClient().from("payroll_files").select(`
        *,
        users:user_id (first_name, last_name, email)
      `).eq("company_id",t).order("period",{ascending:!1}).then(i=>{if(i.error)throw i.error;return i.data});return Z(r)}getBustePagaDipendente(t){let r=this.supabaseService.getClient().from("payroll_files").select("*").eq("user_id",t).eq("visible_to_user",!0).order("period",{ascending:!1}).then(i=>{if(i.error)throw i.error;return i.data});return Z(r)}uploadBustaPaga(t,e,r,i,o){return y(this,null,function*(){let s=this.supabaseService.getClient(),a=t.name.split(".").pop(),l=`${e}_${i}_${Date.now()}.${a}`,f=`${r}/${l}`,{error:h}=yield s.storage.from(this.BUCKET_NAME).upload(f,t);if(h)throw h;let{error:m}=yield s.from("payroll_files").insert({user_id:e,company_id:r,filename:l,original_name:t.name,file_size_bytes:t.size,mime_type:t.type,storage_path:f,period:i,uploaded_by:o,visible_to_user:!0});if(m)throw m;return{success:!0,fileName:l}})}downloadBustaPaga(t,e){let i=this.supabaseService.getClient().storage.from(this.BUCKET_NAME).download(t).then(o=>{if(o.error)throw o.error;let s=URL.createObjectURL(o.data),a=document.createElement("a");return a.href=s,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),{success:!0}});return Z(i)}eliminaBustaPaga(t,e){let r=this.supabaseService.getClient(),i=Promise.all([r.from("payroll_files").delete().eq("id",t),r.storage.from(this.BUCKET_NAME).remove([e])]).then(([o,s])=>{if(o.error)throw o.error;if(s.error)throw s.error;return{success:!0}});return Z(i)}static \u0275fac=function(e){return new(e||n)(V(an))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var ty=(n,t)=>t.id;function cj(n,t){if(n&1){let e=se();u(0,"div",8)(1,"button",16),T("click",function(){F(e);let i=b();return L(i.mostraUpload=!i.mostraUpload)}),u(2,"span",4),d(3,"upload"),c(),d(4," Carica Buste Paga "),c()()}}function uj(n,t){if(n&1&&(u(0,"option",21),d(1),c()),n&2){let e=t.$implicit;_("value",e.id),p(),be("",e.first_name," ",e.last_name)}}function dj(n,t){if(n&1){let e=se();u(0,"div",32)(1,"span",4),d(2,"cloud_upload"),c(),u(3,"h3"),d(4,"Trascina i file PDF qui"),c(),u(5,"p",33),d(6,"oppure"),c(),u(7,"button",34),T("click",function(){F(e);let i=eo(12);return L(i.click())}),u(8,"span",4),d(9,"attach_file"),c(),d(10," Seleziona File "),c(),u(11,"input",35,0),T("change",function(i){F(e);let o=b(2);return L(o.onFileSelected(i))}),c()()}}function fj(n,t){if(n&1){let e=se();u(0,"div",38)(1,"span",4),d(2,"picture_as_pdf"),c(),u(3,"div",39)(4,"span",40),d(5),c(),u(6,"span",41),d(7),c()(),u(8,"button",42),T("click",function(){let i=F(e).index,o=b(3);return L(o.rimuoviFile(i))}),u(9,"span",4),d(10,"close"),c()()()}if(n&2){let e=t.$implicit;p(5),R(e.name),p(2),M("",(e.size/1024/1024).toFixed(2)," MB")}}function hj(n,t){if(n&1&&(u(0,"div",36)(1,"h4"),d(2),c(),x(3,fj,11,2,"div",37),c()),n&2){let e=b(2);p(2),M("File selezionati (",e.selectedFiles.length,")"),p(),_("ngForOf",e.selectedFiles)}}function pj(n,t){if(n&1&&(u(0,"div",26)(1,"span",4),d(2,"error"),c(),d(3),c()),n&2){let e=b(2);p(3),M(" ",e.errorMessage," ")}}function mj(n,t){if(n&1&&(u(0,"div",27)(1,"span",4),d(2,"check_circle"),c(),d(3),c()),n&2){let e=b(2);p(3),M(" ",e.successMessage," ")}}function gj(n,t){n&1&&(u(0,"span",4),d(1,"upload"),c())}function vj(n,t){n&1&&O(0,"span",31)}function yj(n,t){if(n&1){let e=se();u(0,"div",9)(1,"h2",6)(2,"span",4),d(3,"cloud_upload"),c(),d(4," Carica Nuove Buste Paga "),c(),u(5,"div",17)(6,"div",12)(7,"label",18)(8,"span",4),d(9,"person"),c(),d(10," Dipendente * "),c(),u(11,"select",19),ue("ngModelChange",function(i){F(e);let o=b();return he(o.selectedUserId,i)||(o.selectedUserId=i),L(i)}),u(12,"option",20),d(13,"Seleziona dipendente"),c(),St(14,uj,2,3,"option",21,ty),c()(),u(16,"div",12)(17,"label",18)(18,"span",4),d(19,"event"),c(),d(20," Periodo * "),c(),u(21,"input",22),ue("ngModelChange",function(i){F(e);let o=b();return he(o.selectedPeriod,i)||(o.selectedPeriod=i),L(i)}),c()()(),u(22,"div",23),T("drop",function(i){F(e);let o=b();return L(o.onDrop(i))})("dragover",function(i){F(e);let o=b();return L(o.onDragOver(i))})("dragleave",function(i){F(e);let o=b();return L(o.onDragLeave(i))}),x(23,dj,13,0,"div",24)(24,hj,4,2,"div",25),c(),J(25,pj,4,1,"div",26),J(26,mj,4,1,"div",27),u(27,"div",28)(28,"button",29),T("click",function(){F(e);let i=b();return L(i.resetUpload())}),d(29," Annulla "),c(),u(30,"button",30),T("click",function(){F(e);let i=b();return L(i.onUpload())}),J(31,gj,2,0,"span",4),J(32,vj,1,0,"span",31),d(33),c()()()}if(n&2){let e=b();p(11),ce("ngModel",e.selectedUserId),_("disabled",e.isLoading),p(3),Dt(e.dipendenti),p(7),ce("ngModel",e.selectedPeriod),_("disabled",e.isLoading),p(),Ie("drag-over",e.isDragOver)("has-files",e.selectedFiles.length>0),p(),_("ngIf",e.selectedFiles.length===0),p(),_("ngIf",e.selectedFiles.length>0),p(),X(e.errorMessage?25:-1),p(),X(e.successMessage?26:-1),p(2),_("disabled",e.isLoading),p(2),_("disabled",!e.canUpload()||e.isLoading),p(),X(e.isLoading?-1:31),p(),X(e.isLoading?32:-1),p(),M(" ",e.isLoading?"Caricamento...":"Carica Buste Paga"," ")}}function _j(n,t){if(n&1&&(u(0,"div",10)(1,"div",43)(2,"h3",44),d(3,"Buste Paga Totali"),c(),u(4,"div",45),d(5),c()(),u(6,"div",43)(7,"h3",44),d(8,"Ultima Busta Paga"),c(),u(9,"div",45),d(10),c()()()),n&2){let e=b();p(5),R(e.bustePaga.length),p(5),M(" ",(e.ultimaBustaPaga==null?null:e.ultimaBustaPaga.period)||"N/A"," ")}}function bj(n,t){if(n&1&&(u(0,"option",21),d(1),c()),n&2){let e=t.$implicit;_("value",e),p(),R(e)}}function Ej(n,t){if(n&1&&(u(0,"option",21),d(1),c()),n&2){let e=t.$implicit;_("value",e.id),p(),be("",e.first_name," ",e.last_name)}}function wj(n,t){if(n&1){let e=se();u(0,"div",12)(1,"label",18),d(2,"Filtra per periodo"),c(),u(3,"select",46),ue("ngModelChange",function(i){F(e);let o=b();return he(o.filtroPeriodo,i)||(o.filtroPeriodo=i),L(i)}),T("change",function(){F(e);let i=b();return L(i.applicaFiltri())}),u(4,"option",20),d(5,"Tutti i periodi"),c(),St(6,bj,2,2,"option",21,pi),c()(),u(8,"div",12)(9,"label",18),d(10,"Filtra per dipendente"),c(),u(11,"select",46),ue("ngModelChange",function(i){F(e);let o=b();return he(o.filtroDipendente,i)||(o.filtroDipendente=i),L(i)}),T("change",function(){F(e);let i=b();return L(i.applicaFiltri())}),u(12,"option",20),d(13,"Tutti i dipendenti"),c(),St(14,Ej,2,3,"option",21,ty),c()()}if(n&2){let e=b();p(3),ce("ngModel",e.filtroPeriodo),p(3),Dt(e.periodiUnici),p(5),ce("ngModel",e.filtroDipendente),p(3),Dt(e.dipendenti)}}function Cj(n,t){if(n&1&&(u(0,"option",21),d(1),c()),n&2){let e=t.$implicit;_("value",e),p(),R(e)}}function Sj(n,t){if(n&1){let e=se();u(0,"div",12)(1,"label",18),d(2,"Anno"),c(),u(3,"select",46),ue("ngModelChange",function(i){F(e);let o=b();return he(o.filtroAnno,i)||(o.filtroAnno=i),L(i)}),T("change",function(){F(e);let i=b();return L(i.applicaFiltri())}),u(4,"option",20),d(5,"Tutti gli anni"),c(),St(6,Cj,2,2,"option",21,pi),c()()}if(n&2){let e=b();p(3),ce("ngModel",e.filtroAnno),p(3),Dt(e.anniDisponibili)}}function Dj(n,t){n&1&&(u(0,"th"),d(1,"Dipendente"),c())}function Ij(n,t){if(n&1&&(u(0,"td")(1,"div",50)(2,"div",51),d(3),c(),u(4,"div",52)(5,"strong"),d(6),c(),u(7,"span",7),d(8),c()()()()),n&2){let e=b().$implicit;p(3),be(" ",e.user==null||e.user.first_name==null?null:e.user.first_name.charAt(0),"",e.user==null||e.user.last_name==null?null:e.user.last_name.charAt(0)," "),p(3),be("",e.user==null?null:e.user.first_name," ",e.user==null?null:e.user.last_name),p(2),R(e.user==null?null:e.user.email)}}function xj(n,t){if(n&1){let e=se();u(0,"button",48),T("click",function(){F(e);let i=b().$implicit,o=b();return L(o.eliminaBustaPaga(i))}),u(1,"span",4),d(2,"delete"),c()()}}function Tj(n,t){if(n&1){let e=se();u(0,"tr"),J(1,Ij,9,5,"td"),u(2,"td"),d(3),c(),u(4,"td")(5,"div",39)(6,"span",4),d(7,"picture_as_pdf"),c(),d(8),c()(),u(9,"td"),d(10),H(11,"date"),c(),u(12,"td"),d(13),c(),u(14,"td")(15,"div",47)(16,"button",48),T("click",function(){let i=F(e).$implicit,o=b();return L(o.downloadBustaPaga(i))}),u(17,"span",4),d(18,"download"),c()(),J(19,xj,3,0,"button",49),c()()()}if(n&2){let e=t.$implicit,r=b();p(),X(r.isAdmin?1:-1),p(2),R(e.period),p(5),M(" ",e.original_name," "),p(2),R(Y(11,6,e.uploaded_at,"dd/MM/yyyy")),p(3),M("",(e.file_size_bytes/1024/1024).toFixed(2)," MB"),p(6),X(r.isAdmin?19:-1)}}function Mj(n,t){if(n&1&&(u(0,"div",15)(1,"span",4),d(2,"description"),c(),u(3,"h3"),d(4,"Nessuna busta paga"),c(),u(5,"p"),d(6),c()()),n&2){let e=b();p(6),M(" ",e.isAdmin?"Non sono state caricate buste paga per i filtri selezionati.":"Non sono presenti buste paga per i filtri selezionati."," ")}}var Ch=class n{constructor(t,e,r){this.bustePagaService=t;this.dipendentiService=e;this.authService=r}destroy$=new Ue;isAdmin=!1;isLoading=!1;bustePaga=[];bustePagaFiltrate=[];mostraUpload=!1;selectedFiles=[];isDragOver=!1;selectedUserId="";selectedPeriod="";filtroPeriodo="";filtroDipendente="";filtroAnno="";dipendenti=[];periodiUnici=[];anniDisponibili=[];errorMessage="";successMessage="";ngOnInit(){return y(this,null,function*(){this.verificaRuolo(),yield this.caricaDati()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}verificaRuolo(){return y(this,null,function*(){try{let t=yield Ni(this.authService.currentUser$);this.isAdmin=t?.role==="admin"||t?.role==="manager",console.log("Ruolo utente:",this.isAdmin?"Admin":"Dipendente")}catch(t){console.error("Errore nel verificare il ruolo:",t),this.isAdmin=!1}})}caricaDati(){return y(this,null,function*(){this.isLoading=!0;try{let t=localStorage.getItem("companyId");if(!t)throw new Error("Company ID non trovato");if(this.isAdmin)yield Promise.all([this.caricaBustePagaAzienda(t),this.caricaDipendenti(t)]);else{let e=yield this.getCurrentUserId();yield this.caricaBustePagaDipendente(e)}this.inizializzaFiltri()}catch(t){console.error("Errore nel caricamento dei dati:",t),this.errorMessage="Errore nel caricamento dei dati"}finally{this.isLoading=!1}})}caricaBustePagaAzienda(t){return new Promise((e,r)=>{this.bustePagaService.getBustePagaAzienda(t).pipe(Ln(this.destroy$)).subscribe({next:i=>{this.bustePaga=i,this.bustePagaFiltrate=i,e()},error:i=>{console.error("Errore nel caricamento buste paga azienda:",i),r(i)}})})}caricaBustePagaDipendente(t){return new Promise((e,r)=>{this.bustePagaService.getBustePagaDipendente(t).pipe(Ln(this.destroy$)).subscribe({next:i=>{this.bustePaga=i,this.bustePagaFiltrate=i,e()},error:i=>{console.error("Errore nel caricamento buste paga dipendente:",i),r(i)}})})}caricaDipendenti(t){return new Promise((e,r)=>{this.dipendentiService.getDipendenti(t).pipe(Ln(this.destroy$)).subscribe({next:i=>{this.dipendenti=i,e()},error:i=>{console.error("Errore nel caricamento dipendenti:",i),r(i)}})})}inizializzaFiltri(){this.isAdmin?this.periodiUnici=[...new Set(this.bustePaga.map(t=>t.period))].sort().reverse():this.anniDisponibili=[...new Set(this.bustePaga.map(t=>t.period.split("-")[0]))].sort().reverse()}getCurrentUserId(){return y(this,null,function*(){return(yield Ni(this.authService.currentUser$))?.id||""})}applicaFiltri(){let t=this.bustePaga;this.isAdmin?(this.filtroPeriodo&&(t=t.filter(e=>e.period===this.filtroPeriodo)),this.filtroDipendente&&(t=t.filter(e=>e.user_id===this.filtroDipendente))):this.filtroAnno&&(t=t.filter(e=>e.period.startsWith(this.filtroAnno))),this.bustePagaFiltrate=t}onDragOver(t){t.preventDefault(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),this.isDragOver=!1}onDrop(t){t.preventDefault(),this.isDragOver=!1;let e=t.dataTransfer?.files;e&&this.processFiles(e)}onFileSelected(t){let e=t.target;e.files&&this.processFiles(e.files)}processFiles(t){let e=Array.from(t).filter(r=>r.type==="application/pdf");if(e.length===0){this.errorMessage="Seleziona solo file PDF";return}this.selectedFiles=[...this.selectedFiles,...e],this.errorMessage=""}rimuoviFile(t){this.selectedFiles.splice(t,1)}canUpload(){return!!this.selectedUserId&&!!this.selectedPeriod&&this.selectedFiles.length>0}onUpload(){return y(this,null,function*(){if(this.canUpload()){this.isLoading=!0,this.errorMessage="",this.successMessage="";try{let t=localStorage.getItem("companyId");if(!t)throw new Error("Company ID non trovato");let e=yield Ni(this.authService.currentUser$);if(!e?.id)throw new Error("Utente non autenticato");let r=e.id;for(let i of this.selectedFiles)yield this.bustePagaService.uploadBustaPaga(i,this.selectedUserId,t,this.selectedPeriod,r);this.successMessage=`Caricamento completato! ${this.selectedFiles.length} file caricati.`,this.resetUpload(),yield this.caricaDati()}catch(t){console.error("Errore durante l'upload:",t),this.errorMessage=t.message||"Errore durante l'upload"}finally{this.isLoading=!1}}})}resetUpload(){this.selectedFiles=[],this.selectedUserId="",this.selectedPeriod="",this.mostraUpload=!1}downloadBustaPaga(t){this.bustePagaService.downloadBustaPaga(t.storage_path,t.original_name).pipe(Ln(this.destroy$)).subscribe({error:e=>{console.error("Errore nel download:",e),this.errorMessage="Errore durante il download"}})}eliminaBustaPaga(t){confirm("Sei sicuro di voler eliminare questa busta paga?")&&this.bustePagaService.eliminaBustaPaga(t.id,t.storage_path).pipe(Ln(this.destroy$)).subscribe({next:()=>{this.successMessage="Busta paga eliminata con successo",this.caricaDati()},error:e=>{console.error("Errore nell'eliminazione:",e),this.errorMessage="Errore durante l'eliminazione"}})}get ultimaBustaPaga(){return this.bustePaga.length>0?this.bustePaga[0]:null}static \u0275fac=function(e){return new(e||n)(C(wh),C(Pn),C(me))};static \u0275cmp=fe({type:n,selectors:[["app-buste-paga"]],decls:41,vars:9,consts:[["fileInput",""],[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"actions-container"],[1,"form-section"],[1,"grid-cards"],[1,"filters-container"],[1,"filter-group"],[1,"table-container"],[1,"crm-table"],[1,"empty-state"],[1,"promethea-button",3,"click"],[1,"grid-form",2,"margin-bottom","var(--gutter-lg)"],[1,"form-label"],[3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value"],["type","month",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"drop-zone",3,"drop","dragover","dragleave"],["class","drop-content",4,"ngIf"],["class","files-list",4,"ngIf"],[1,"status-message","error"],[1,"status-message","info"],[1,"form-actions"],["type","button",1,"promethea-button","ghost",3,"click","disabled"],["type","button",1,"promethea-button",3,"click","disabled"],[1,"loading-spinner"],[1,"drop-content"],[1,"text-muted",2,"margin-bottom","var(--gutter-lg)"],["type","button",1,"promethea-button","outline",3,"click"],["type","file","accept",".pdf","multiple","","hidden","",3,"change"],[1,"files-list"],["class","file-item",4,"ngFor","ngForOf"],[1,"file-item"],[1,"file-info"],[1,"file-name"],[1,"file-size"],["type","button",1,"icon-button",3,"click"],[1,"card"],[1,"card-title"],[1,"card-number"],[3,"ngModelChange","change","ngModel"],[1,"action-buttons"],[1,"icon-button",3,"click"],[1,"icon-button"],[1,"user-info-compact"],[1,"user-avatar-small"],[1,"user-details-compact"]],template:function(e,r){e&1&&(u(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),d(4,"payments"),c()(),u(5,"div",5)(6,"h1",6),d(7),c(),u(8,"p",7),d(9),c()(),J(10,cj,5,0,"div",8),c(),J(11,yj,34,17,"div",9),J(12,_j,11,2,"div",10),u(13,"div",9)(14,"div",2)(15,"h2",6)(16,"span",4),d(17,"list_alt"),c(),d(18),c(),u(19,"div",11),J(20,wj,16,2)(21,Sj,8,1,"div",12),c()(),u(22,"div",13)(23,"table",14)(24,"thead")(25,"tr"),J(26,Dj,2,0,"th"),u(27,"th"),d(28,"Periodo"),c(),u(29,"th"),d(30,"File"),c(),u(31,"th"),d(32,"Data Caricamento"),c(),u(33,"th"),d(34,"Dimensione"),c(),u(35,"th"),d(36,"Azioni"),c()()(),u(37,"tbody"),St(38,Tj,20,9,"tr",null,ty),c()()(),J(40,Mj,7,1,"div",15),c()()),e&2&&(p(7),M(" ",r.isAdmin?"Gestione Buste Paga":"Le mie Buste Paga"," "),p(2),M(" ",r.isAdmin?"Carica e gestisci le buste paga dei dipendenti":"Consulta e scarica le tue buste paga"," "),p(),X(r.isAdmin?10:-1),p(),X(r.isAdmin&&r.mostraUpload?11:-1),p(),X(r.isAdmin?-1:12),p(6),M(" ",r.isAdmin?"Buste Paga Caricate":"Storico Buste Paga"," "),p(2),X(r.isAdmin?20:21),p(6),X(r.isAdmin?26:-1),p(12),Dt(r.bustePagaFiltrate),p(2),X(r.bustePagaFiltrate.length===0?40:-1))},dependencies:[_e,it,Le,on,nn,rn,qe,kt,Ye,qt,xt,ut],styles:[".drop-zone[_ngcontent-%COMP%]{border:2px dashed var(--smoke-color-1);border-radius:16px;padding:var(--gutter-xl);text-align:center;transition:all .3s ease;background:color-mix(in srgb,var(--background) 95%,transparent)}.drop-zone.drag-over[_ngcontent-%COMP%]{border-color:var(--primary);background:color-mix(in srgb,var(--primary) 5%,transparent)}.drop-zone.has-files[_ngcontent-%COMP%]{border-style:solid;border-color:var(--primary);background:color-mix(in srgb,var(--primary) 2%,transparent)}.drop-content[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--smoke-color-1)}.drop-zone.drag-over[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--primary)}.files-list[_ngcontent-%COMP%]{text-align:left}.file-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-sm);border:1px solid var(--smoke-color-1);border-radius:8px;margin-bottom:var(--gutter-sm);background:var(--background)}.file-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.file-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.file-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color)}.file-size[_ngcontent-%COMP%]{font-size:.8rem;color:color-mix(in srgb,var(--text-color) 60%,transparent)}@media (max-width: 768px){.drop-zone[_ngcontent-%COMP%]{padding:var(--gutter-lg)}.file-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--gutter-sm)}.action-buttons[_ngcontent-%COMP%]{align-self:flex-end}}"]})};var Aj=Math.pow(10,8)*24*60*60*1e3,rne=-Aj,Sh=6048e5,x1=864e5;var Oj=3600;var T1=Oj*24,ine=T1*7,Rj=T1*365.2425,Nj=Rj/12,one=Nj*3,ny=Symbol.for("constructDateFrom");function ht(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&ny in n?n[ny](t):n instanceof Date?new n.constructor(t):new Date(t)}function Se(n,t){return ht(t||n,n)}function Dh(n,t,e){let r=Se(n,e?.in);if(isNaN(t))return ht(e?.in||n,NaN);if(!t)return r;let i=r.getDate(),o=ht(e?.in||n,r.getTime());o.setMonth(r.getMonth()+t+1,0);let s=o.getDate();return i>=s?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}var kj={};function Dr(){return kj}function Jn(n,t){let e=Dr(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,i=Se(n,t?.in),o=i.getDay(),s=(o<r?7:0)+o-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function To(n,t){return Jn(n,Q(A({},t),{weekStartsOn:1}))}function Ih(n,t){let e=Se(n,t?.in),r=e.getFullYear(),i=ht(e,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);let o=To(i),s=ht(e,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);let a=To(s);return e.getTime()>=o.getTime()?r+1:e.getTime()>=a.getTime()?r:r-1}function ry(n){let t=Se(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function xi(n,...t){let e=ht.bind(null,n||t.find(r=>typeof r=="object"));return t.map(e)}function na(n,t){let e=Se(n,t?.in);return e.setHours(0,0,0,0),e}function M1(n,t,e){let[r,i]=xi(e?.in,n,t),o=na(r),s=na(i),a=+o-ry(o),l=+s-ry(s);return Math.round((a-l)/x1)}function A1(n,t){let e=Ih(n,t),r=ht(t?.in||n,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),To(r)}function iy(n,t,e){let[r,i]=xi(e?.in,n,t);return+na(r)==+na(i)}function O1(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function R1(n){return!(!O1(n)&&typeof n!="number"||isNaN(+Se(n)))}function N1(n,t){let e=Se(n,t?.in),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function k1(n,t){let[e,r]=xi(n,t.start,t.end);return{start:e,end:r}}function P1(n,t){let{start:e,end:r}=k1(t?.in,n),i=+e>+r,o=i?+e:+r,s=i?r:e;s.setHours(0,0,0,0);let a=t?.step??1;if(!a)return[];a<0&&(a=-a,i=!i);let l=[];for(;+s<=o;)l.push(ht(e,s)),s.setDate(s.getDate()+a),s.setHours(0,0,0,0);return i?l.reverse():l}function F1(n,t){let e=Se(n,t?.in);return e.setDate(1),e.setHours(0,0,0,0),e}function L1(n,t){let e=Se(n,t?.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function j1(n,t){let e=Dr(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,i=Se(n,t?.in),o=i.getDay(),s=(o<r?-7:0)+6-(o-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}var Pj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},V1=(n,t,e)=>{let r,i=Pj[n];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function xh(n){return(t={})=>{let e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}var Fj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Lj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},jj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},U1={date:xh({formats:Fj,defaultWidth:"full"}),time:xh({formats:Lj,defaultWidth:"full"}),dateTime:xh({formats:jj,defaultWidth:"full"})};var Vj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},B1=(n,t,e,r)=>Vj[n];function ra(n){return(t,e)=>{let r=e?.context?String(e.context):"standalone",i;if(r==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=e?.width?String(e.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=e?.width?String(e.width):n.defaultWidth;i=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(t):t;return i[o]}}var Uj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Bj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$j={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Hj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Gj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wj=(n,t)=>{let e=Number(n),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},$1={ordinalNumber:Wj,era:ra({values:Uj,defaultWidth:"wide"}),quarter:ra({values:Bj,defaultWidth:"wide",argumentCallback:n=>n-1}),month:ra({values:$j,defaultWidth:"wide"}),day:ra({values:zj,defaultWidth:"wide"}),dayPeriod:ra({values:Hj,defaultWidth:"wide",formattingValues:Gj,defaultFormattingWidth:"wide"})};function ia(n){return(t,e={})=>{let r=e.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=t.match(i);if(!o)return null;let s=o[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?Yj(a,m=>m.test(s)):qj(a,m=>m.test(s)),f;f=n.valueCallback?n.valueCallback(l):l,f=e.valueCallback?e.valueCallback(f):f;let h=t.slice(s.length);return{value:f,rest:h}}}function qj(n,t){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function Yj(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function z1(n){return(t,e={})=>{let r=t.match(n.matchPattern);if(!r)return null;let i=r[0],o=t.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=e.valueCallback?e.valueCallback(s):s;let a=t.slice(i.length);return{value:s,rest:a}}}var Kj=/^(\d+)(th|st|nd|rd)?/i,Zj=/\d+/i,Qj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Jj={any:[/^b/i,/^(a|c)/i]},Xj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eV={any:[/1/i,/2/i,/3/i,/4/i]},tV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},iV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},oV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},H1={ordinalNumber:z1({matchPattern:Kj,parsePattern:Zj,valueCallback:n=>parseInt(n,10)}),era:ia({matchPatterns:Qj,defaultMatchWidth:"wide",parsePatterns:Jj,defaultParseWidth:"any"}),quarter:ia({matchPatterns:Xj,defaultMatchWidth:"wide",parsePatterns:eV,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ia({matchPatterns:tV,defaultMatchWidth:"wide",parsePatterns:nV,defaultParseWidth:"any"}),day:ia({matchPatterns:rV,defaultMatchWidth:"wide",parsePatterns:iV,defaultParseWidth:"any"}),dayPeriod:ia({matchPatterns:oV,defaultMatchWidth:"any",parsePatterns:sV,defaultParseWidth:"any"})};var oy={code:"en-US",formatDistance:V1,formatLong:U1,formatRelative:B1,localize:$1,match:H1,options:{weekStartsOn:0,firstWeekContainsDate:1}};function G1(n,t){let e=Se(n,t?.in);return M1(e,L1(e))+1}function W1(n,t){let e=Se(n,t?.in),r=+To(e)-+A1(e);return Math.round(r/Sh)+1}function Th(n,t){let e=Se(n,t?.in),r=e.getFullYear(),i=Dr(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=ht(t?.in||n,0);s.setFullYear(r+1,0,o),s.setHours(0,0,0,0);let a=Jn(s,t),l=ht(t?.in||n,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);let f=Jn(l,t);return+e>=+a?r+1:+e>=+f?r:r-1}function q1(n,t){let e=Dr(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,i=Th(n,t),o=ht(t?.in||n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Jn(o,t)}function Y1(n,t){let e=Se(n,t?.in),r=+Jn(e,t)-+q1(e,t);return Math.round(r/Sh)+1}function we(n,t){let e=n<0?"-":"",r=Math.abs(n).toString().padStart(t,"0");return e+r}var Jr={y(n,t){let e=n.getFullYear(),r=e>0?e:1-e;return we(t==="yy"?r%100:r,t.length)},M(n,t){let e=n.getMonth();return t==="M"?String(e+1):we(e+1,2)},d(n,t){return we(n.getDate(),t.length)},a(n,t){let e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return we(n.getHours()%12||12,t.length)},H(n,t){return we(n.getHours(),t.length)},m(n,t){return we(n.getMinutes(),t.length)},s(n,t){return we(n.getSeconds(),t.length)},S(n,t){let e=t.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,e-3));return we(i,t.length)}};var oa={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},sy={G:function(n,t,e){let r=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){let r=n.getFullYear(),i=r>0?r:1-r;return e.ordinalNumber(i,{unit:"year"})}return Jr.y(n,t)},Y:function(n,t,e,r){let i=Th(n,r),o=i>0?i:1-i;if(t==="YY"){let s=o%100;return we(s,2)}return t==="Yo"?e.ordinalNumber(o,{unit:"year"}):we(o,t.length)},R:function(n,t){let e=Ih(n);return we(e,t.length)},u:function(n,t){let e=n.getFullYear();return we(e,t.length)},Q:function(n,t,e){let r=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return we(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,t,e){let r=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return we(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,t,e){let r=n.getMonth();switch(t){case"M":case"MM":return Jr.M(n,t);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(n,t,e){let r=n.getMonth();switch(t){case"L":return String(r+1);case"LL":return we(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(n,t,e,r){let i=Y1(n,r);return t==="wo"?e.ordinalNumber(i,{unit:"week"}):we(i,t.length)},I:function(n,t,e){let r=W1(n);return t==="Io"?e.ordinalNumber(r,{unit:"week"}):we(r,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):Jr.d(n,t)},D:function(n,t,e){let r=G1(n);return t==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):we(r,t.length)},E:function(n,t,e){let r=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(n,t,e,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return we(o,2);case"eo":return e.ordinalNumber(o,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(n,t,e,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return we(o,t.length);case"co":return e.ordinalNumber(o,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(n,t,e){let r=n.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return we(i,t.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(n,t,e){let i=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,t,e){let r=n.getHours(),i;switch(r===12?i=oa.noon:r===0?i=oa.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,t,e){let r=n.getHours(),i;switch(r>=17?i=oa.evening:r>=12?i=oa.afternoon:r>=4?i=oa.morning:i=oa.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let r=n.getHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return Jr.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):Jr.H(n,t)},K:function(n,t,e){let r=n.getHours()%12;return t==="Ko"?e.ordinalNumber(r,{unit:"hour"}):we(r,t.length)},k:function(n,t,e){let r=n.getHours();return r===0&&(r=24),t==="ko"?e.ordinalNumber(r,{unit:"hour"}):we(r,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):Jr.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):Jr.s(n,t)},S:function(n,t){return Jr.S(n,t)},X:function(n,t,e){let r=n.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Z1(r);case"XXXX":case"XX":return Mo(r);case"XXXXX":case"XXX":default:return Mo(r,":")}},x:function(n,t,e){let r=n.getTimezoneOffset();switch(t){case"x":return Z1(r);case"xxxx":case"xx":return Mo(r);case"xxxxx":case"xxx":default:return Mo(r,":")}},O:function(n,t,e){let r=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+K1(r,":");case"OOOO":default:return"GMT"+Mo(r,":")}},z:function(n,t,e){let r=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+K1(r,":");case"zzzz":default:return"GMT"+Mo(r,":")}},t:function(n,t,e){let r=Math.trunc(+n/1e3);return we(r,t.length)},T:function(n,t,e){return we(+n,t.length)}};function K1(n,t=""){let e=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?e+String(i):e+String(i)+t+we(o,2)}function Z1(n,t){return n%60===0?(n>0?"-":"+")+we(Math.abs(n)/60,2):Mo(n,t)}function Mo(n,t=""){let e=n>0?"-":"+",r=Math.abs(n),i=we(Math.trunc(r/60),2),o=we(r%60,2);return e+i+t+o}var Q1=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},J1=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},aV=(n,t)=>{let e=n.match(/(P+)(p+)?/)||[],r=e[1],i=e[2];if(!i)return Q1(n,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Q1(r,t)).replace("{{time}}",J1(i,t))},X1={p:J1,P:aV};var lV=/^D+$/,cV=/^Y+$/,uV=["D","DD","YY","YYYY"];function eI(n){return lV.test(n)}function tI(n){return cV.test(n)}function nI(n,t,e){let r=dV(n,t,e);if(console.warn(r),uV.includes(n))throw new RangeError(r)}function dV(n,t,e){let r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var fV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pV=/^'([^]*?)'?$/,mV=/''/g,gV=/[a-zA-Z]/;function ay(n,t,e){let r=Dr(),i=e?.locale??r.locale??oy,o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Se(n,e?.in);if(!R1(a))throw new RangeError("Invalid time value");let l=t.match(hV).map(h=>{let m=h[0];if(m==="p"||m==="P"){let v=X1[m];return v(h,i.formatLong)}return h}).join("").match(fV).map(h=>{if(h==="''")return{isToken:!1,value:"'"};let m=h[0];if(m==="'")return{isToken:!1,value:vV(h)};if(sy[m])return{isToken:!0,value:h};if(m.match(gV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:h}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));let f={firstWeekContainsDate:o,weekStartsOn:s,locale:i};return l.map(h=>{if(!h.isToken)return h.value;let m=h.value;(!e?.useAdditionalWeekYearTokens&&tI(m)||!e?.useAdditionalDayOfYearTokens&&eI(m))&&nI(m,t,String(n));let v=sy[m[0]];return v(a,m,i.localize,f)}).join("")}function vV(n){let t=n.match(pV);return t?t[1].replace(mV,"'"):n}function rI(n,t,e){let[r,i]=xi(e?.in,n,t);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function iI(n,t,e){return Dh(n,-t,e)}var yV=(n,t)=>t.id;function _V(n,t){n&1&&(Ae(0,"div",10),hs(1,"div",20),Ae(2,"p"),d(3,"Caricamento timbrature..."),Ge()())}function bV(n,t){if(n&1&&(Ae(0,"div",13),d(1),Ge()),n&2){let e=t.$implicit;p(),M(" ",e," ")}}function EV(n,t){if(n&1&&d(0),n&2){let e=b().$implicit,r=b(3);M(" - ",r.formattaOrario(e.data.end_ts)," ")}}function wV(n,t){n&1&&d(0," (in corso) ")}function CV(n,t){if(n&1&&(Ae(0,"span",28),d(1),Ge()),n&2){let e=b().$implicit;p(),M(" ",e.data.user.first_name," ")}}function SV(n,t){if(n&1&&(Ae(0,"div",26)(1,"span",27),d(2),J(3,EV,1,1)(4,wV,1,0),Ge(),J(5,CV,2,1,"span",28),Ge()),n&2){let e=t.$implicit,r=b(3);ur("background",e.color),fd("title",e.title),p(2),M(" ",r.formattaOrario(e.data.start_ts)," "),p(),X(e.data.end_ts?3:4),p(2),X(r.getRuoloCorrente()!=="employee"&&e.data.user?5:-1)}}function DV(n,t){if(n&1){let e=se();Ae(0,"div",22),Xi("click",function(){let i=F(e).$implicit,o=b(2);return L(o.onDayClick(i))}),Ae(1,"div",23),d(2),Ge(),Ae(3,"div",24),St(4,SV,6,6,"div",25,yV),Ge()()}if(n&2){let e=t.$implicit,r=b(2);Ie("current-month",r.isCurrentMonth(e))("other-month",!r.isCurrentMonth(e))("today",r.isToday(e)),p(2),M(" ",e.getDate()," "),p(2),Dt(r.getEventsForDay(e))}}function IV(n,t){if(n&1&&(Ae(0,"div",15),St(1,DV,6,7,"div",21,pi),Ge()),n&2){let e=t.$implicit;p(),Dt(e)}}var Mh=class n{timbratureService=I(Vt);authService=I(me);currentDate=ct(new Date);weeks=ct([]);events=ct([]);timbrature=ct([]);isLoading=ct(!0);daysOfWeek=["Lun","Mar","Mer","Gio","Ven","Sab","Dom"];ngOnInit(){return y(this,null,function*(){yield this.caricaTimbrature(),this.generateCalendar()})}caricaTimbrature(){return y(this,null,function*(){this.isLoading.set(!0);try{let t=yield this.timbratureService.getTimbraturePerCalendario();this.timbrature.set(t),this.creaEventiDaTimbrature(t)}catch(t){console.error("Errore nel caricamento timbrature:",t)}finally{this.isLoading.set(!1)}})}creaEventiDaTimbrature(t){let e=t.map(r=>{let i=new Date(r.start_ts),o=this.authService.currentUserSubject.value,s="";return o?.role==="employee"?s=this.timbratureService.formattaOrarioTimbratura(r):s=`${r.user?`${r.user.first_name} ${r.user.last_name}`:"Utente"}: ${this.timbratureService.formattaOrarioTimbratura(r)}`,{id:r.id||`timbratura-${Date.now()}`,title:s,date:i,color:this.timbratureService.getColoreTimbratura(r),type:"timbratura",data:r}});this.events.set(e)}formattaOrario(t){return t?new Date(t).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",hour12:!1}):""}generateCalendar(){let t=Jn(F1(this.currentDate()),{weekStartsOn:1}),e=j1(N1(this.currentDate()),{weekStartsOn:1}),r=P1({start:t,end:e}),i=[];for(let o=0;o<r.length;o+=7)i.push(r.slice(o,o+7));this.weeks.set(i)}getEventsForDay(t){return this.events().filter(e=>iy(e.date,t))}isCurrentMonth(t){return rI(t,this.currentDate())}isToday(t){return iy(t,new Date)}previousMonth(){return y(this,null,function*(){this.currentDate.set(iI(this.currentDate(),1)),this.generateCalendar(),yield this.caricaTimbrature()})}nextMonth(){return y(this,null,function*(){this.currentDate.set(Dh(this.currentDate(),1)),this.generateCalendar(),yield this.caricaTimbrature()})}goToToday(){return y(this,null,function*(){this.currentDate.set(new Date),this.generateCalendar(),yield this.caricaTimbrature()})}onDayClick(t){console.log("Giorno cliccato:",t);let e=this.timbratureService.getTimbraturePerGiorno(t,this.timbrature());console.log("Timbrature del giorno:",e)}getMonthYearTitle(){let t=this.currentDate(),e=ay(t,"MMMM"),r=ay(t,"yyyy");return`${e.charAt(0).toUpperCase()+e.slice(1)} ${r}`}getRuoloCorrente(){return this.authService.currentUserSubject.value?.role||"employee"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=fe({type:n,selectors:[["app-calendario"]],decls:35,vars:2,consts:[[1,"card"],[1,"card-header"],[1,"material-icons"],[1,"card-title"],[1,"calendar-controls"],["title","Mese precedente",1,"icon-button",3,"click"],[1,"promethea-button","ghost",3,"click"],[1,"calendar-month-title"],["title","Mese successivo",1,"icon-button",3,"click"],[1,"card-content"],[1,"loading-container"],[1,"calendar-container"],[1,"calendar-header"],[1,"calendar-day-header"],[1,"calendar-grid"],[1,"calendar-week"],[1,"calendar-legend"],[1,"legend-item"],[1,"legend-color",2,"background","var(--primary)"],[1,"legend-color",2,"background","#ef4444"],[1,"loading-spinner"],[1,"calendar-day",3,"current-month","other-month","today"],[1,"calendar-day",3,"click"],[1,"day-number"],[1,"day-events"],[1,"calendar-event","timbratura-event",3,"background","title"],[1,"calendar-event","timbratura-event",3,"title"],[1,"event-time"],[1,"event-user"]],template:function(e,r){e&1&&(Ae(0,"div",0)(1,"div",1)(2,"span",2),d(3,"calendar_today"),Ge(),Ae(4,"h2",3),d(5,"Calendario Timbrature"),Ge(),Ae(6,"div",4)(7,"button",5),Xi("click",function(){return r.previousMonth()}),Ae(8,"span",2),d(9,"chevron_left"),Ge()(),Ae(10,"button",6),Xi("click",function(){return r.goToToday()}),d(11," Oggi "),Ge(),Ae(12,"h3",7),d(13),Ge(),Ae(14,"button",8),Xi("click",function(){return r.nextMonth()}),Ae(15,"span",2),d(16,"chevron_right"),Ge()()()(),Ae(17,"div",9),J(18,_V,4,0,"div",10),Ae(19,"div",11)(20,"div",12),St(21,bV,2,1,"div",13,pi),Ge(),Ae(23,"div",14),St(24,IV,3,0,"div",15,pi),Ge()(),Ae(26,"div",16)(27,"div",17),hs(28,"div",18),Ae(29,"span"),d(30,"Timbratura completata"),Ge()(),Ae(31,"div",17),hs(32,"div",19),Ae(33,"span"),d(34,"Timbratura in corso"),Ge()()()()()),e&2&&(p(13),M(" ",r.getMonthYearTitle()," "),p(5),X(r.isLoading()?18:-1),p(3),Dt(r.daysOfWeek),p(3),Dt(r.weeks()))},styles:[".day-events[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.calendar-event[_ngcontent-%COMP%]{padding:2px 6px;border-radius:4px;font-size:.7rem;color:#fff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;transition:all .2s ease}.calendar-event[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 2px 4px var(--shadow)}@media (max-width: 768px){.calendar-controls[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.calendar-month-title[_ngcontent-%COMP%]{min-width:150px;order:-1;width:100%;text-align:center}.calendar-week[_ngcontent-%COMP%]{min-height:80px}.calendar-day[_ngcontent-%COMP%]{padding:4px}.day-number[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:2px}.calendar-event[_ngcontent-%COMP%]{font-size:.6rem;padding:1px 3px}}@media (max-width: 480px){.calendar-day-header[_ngcontent-%COMP%]{padding:var(--gutter-sm);font-size:.7rem}.days-of-week[_ngcontent-%COMP%]{font-size:.7rem}}.timbratura-event[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;padding:4px 6px;border-radius:6px;font-size:.7rem;color:#fff;cursor:pointer;transition:all .2s ease;border-left:3px solid color-mix(in srgb,currentColor 30%,transparent)}.timbratura-event[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px var(--shadow)}.event-time[_ngcontent-%COMP%]{font-weight:600;font-size:.65rem}.event-user[_ngcontent-%COMP%]{font-size:.6rem;opacity:.9;font-style:italic}.calendar-legend[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-lg);margin-top:var(--gutter-lg);padding-top:var(--gutter-md);border-top:1px solid var(--smoke-color-1);flex-wrap:wrap}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);font-size:.8rem;color:var(--text-color)}.legend-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:4px;border:1px solid var(--smoke-color-1)}@media (max-width: 768px){.timbratura-event[_ngcontent-%COMP%]{padding:2px 4px;font-size:.6rem}.event-time[_ngcontent-%COMP%]{font-size:.55rem}.event-user[_ngcontent-%COMP%]{font-size:.5rem}.calendar-legend[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm)}}.calendar-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-md);margin-left:auto}.calendar-month-title[_ngcontent-%COMP%]{margin:0;font-size:var(--fs-md);font-weight:600;color:var(--text-color);min-width:200px;text-align:center}.calendar-container[_ngcontent-%COMP%]{background:var(--background);border-radius:16px;overflow:hidden}.calendar-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);background:var(--smoke-color-2);border-bottom:1px solid var(--smoke-color-1)}.calendar-day-header[_ngcontent-%COMP%]{padding:var(--gutter-md);text-align:center;font-weight:600;color:var(--text-color);font-size:var(--fs-sm);border-right:1px solid var(--smoke-color-1)}.calendar-day-header[_ngcontent-%COMP%]:last-child{border-right:none}.calendar-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column}.calendar-week[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);min-height:120px}.calendar-day[_ngcontent-%COMP%]{padding:var(--gutter-sm);border-right:1px solid var(--smoke-color-1);border-bottom:1px solid var(--smoke-color-1);cursor:pointer;transition:all .2s ease;background:var(--background);position:relative}.calendar-day[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--primary) 5%,transparent);transform:translateY(-1px)}.calendar-day.other-month[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--background) 60%,transparent);color:color-mix(in srgb,var(--text-color) 40%,transparent)}.calendar-day.other-month[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--primary) 3%,transparent)}.calendar-day.today[_ngcontent-%COMP%]{background:var(--gradiente-light);border:2px solid var(--primary)}.calendar-day.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{font-weight:800;color:var(--primary)}.day-number[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:600;margin-bottom:var(--gutter-sm);text-align:center;color:var(--text-color)}.other-month[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:color-mix(in srgb,var(--text-color) 40%,transparent);font-weight:400}.day-events[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;max-height:80px;overflow-y:auto}.day-events[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.day-events[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--smoke-color-1);border-radius:2px}@media (max-width: 768px){.calendar-controls[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.calendar-month-title[_ngcontent-%COMP%]{min-width:150px;order:-1;width:100%;text-align:center}.calendar-week[_ngcontent-%COMP%]{min-height:100px}.calendar-day[_ngcontent-%COMP%]{padding:4px}.day-number[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:2px}}@media (max-width: 480px){.calendar-day-header[_ngcontent-%COMP%]{padding:var(--gutter-sm);font-size:.7rem}}"]})};var oI=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:ch},{path:"register",component:uh},{path:"forgot-password",component:dh},{path:"home",component:fh},{path:"timbrature",component:hh},{path:"crea-timbratura",component:ph},{path:"profilo-aziendale",component:mh},{path:"calendario",component:Mh},{path:"dipendenti",component:gh},{path:"dipendenti/:id",component:vh},{path:"inviti-dipendenti",component:ta},{path:"report",component:Eh},{path:"buste-paga",component:Ch},{path:"kpi",component:_h},{path:"impostazioni",component:bh},{path:"loading-spinner",component:ea},{path:"**",redirectTo:"/home"}];var ly={providers:[em(),wv(),Ug({eventCoalescing:!0}),Qv(oI)]};var xV=["sidebar"];function TV(n,t){n&1&&(u(0,"span",36),d(1,"TimbratureApp"),c())}function MV(n,t){if(n&1){let e=se();u(0,"button",37),T("click",function(){F(e);let i=b(2);return L(i.toggleSidebar())}),u(1,"span",15),d(2,"chevron_left"),c()()}}function AV(n,t){n&1&&(u(0,"div",38),d(1,"Dashboard"),c())}function OV(n,t){n&1&&(u(0,"div",38),d(1,"Gestione"),c())}function RV(n,t){if(n&1){let e=se();u(0,"div",12),x(1,OV,2,0,"div",13),u(2,"a",39),T("click",function(){F(e);let i=b(2);return L(i.onNavItemClicked())}),u(3,"span",15),d(4,"people"),c(),u(5,"span",16),d(6,"Dipendenti"),c()(),u(7,"a",40),T("click",function(){F(e);let i=b(2);return L(i.onNavItemClicked())}),u(8,"span",15),d(9,"business"),c(),u(10,"span",16),d(11,"Azienda"),c()()()}if(n&2){let e=b(2);p(),_("ngIf",!e.isSidebarCollapsed)}}function NV(n,t){n&1&&(u(0,"div",38),d(1,"Timbrature"),c())}function kV(n,t){n&1&&(u(0,"div",38),d(1,"Report"),c())}function PV(n,t){if(n&1){let e=se();u(0,"div",12),x(1,kV,2,0,"div",13),u(2,"a",41),T("click",function(){F(e);let i=b(2);return L(i.onNavItemClicked())}),u(3,"span",15),d(4,"assessment"),c(),u(5,"span",16),d(6,"Report"),c()()()}if(n&2){let e=b(2);p(),_("ngIf",!e.isSidebarCollapsed)}}function FV(n,t){n&1&&(u(0,"div",38),d(1,"Analisi"),c())}function LV(n,t){if(n&1&&(u(0,"div",42)(1,"div",43)(2,"div",44),d(3),c(),u(4,"div",45),d(5),c()()()),n&2){let e=b(2);p(3),be("",e.currentUser==null?null:e.currentUser.first_name," ",e.currentUser==null?null:e.currentUser.last_name),p(2),R(e.currentUser==null?null:e.currentUser.role)}}function jV(n,t){if(n&1){let e=se();ud(0),u(1,"div",3)(2,"aside",4,1)(4,"div",5)(5,"div",6),O(6,"img",7)(7,"img",8),x(8,TV,2,0,"span",9),c(),x(9,MV,3,0,"button",10),c(),u(10,"nav",11)(11,"div",12),x(12,AV,2,0,"div",13),u(13,"a",14),T("click",function(){F(e);let i=b();return L(i.onNavItemClicked())}),u(14,"span",15),d(15,"dashboard"),c(),u(16,"span",16),d(17,"Dashboard"),c()()(),x(18,RV,12,1,"div",17),u(19,"div",12),x(20,NV,2,0,"div",13),u(21,"a",18),T("click",function(){F(e);let i=b();return L(i.onNavItemClicked())}),u(22,"span",15),d(23,"schedule"),c(),u(24,"span",16),d(25,"Timbrature"),c()(),u(26,"a",19),T("click",function(){F(e);let i=b();return L(i.onNavItemClicked())}),u(27,"span",15),d(28,"add_circle"),c(),u(29,"span",16),d(30,"Nuova Timbratura"),c()()(),x(31,PV,7,1,"div",17),u(32,"div",12),x(33,FV,2,0,"div",13),u(34,"a",20),T("click",function(){F(e);let i=b();return L(i.onNavItemClicked())}),u(35,"span",15),d(36,"insights"),c(),u(37,"span",16),d(38,"KPI"),c()()()(),u(39,"div",21)(40,"div",22)(41,"div",23),d(42),c(),x(43,LV,6,3,"div",24),u(44,"div",25)(45,"a",26),T("click",function(){F(e);let i=b();return L(i.onNavItemClicked())}),u(46,"span",15),d(47,"settings"),c()(),u(48,"button",27),T("click",function(){F(e);let i=b();return L(i.logout())}),u(49,"span",15),d(50,"logout"),c()()()()()(),u(51,"main",28)(52,"header",29)(53,"button",30),T("click",function(){F(e);let i=b();return L(i.toggleSidebar())}),u(54,"span",15),d(55,"menu"),c()(),u(56,"div",31)(57,"div",32),d(58),H(59,"date"),c(),u(60,"div",33),d(61),H(62,"date"),c()()(),u(63,"div",34),O(64,"router-outlet"),c()(),u(65,"div",35),T("click",function(){F(e);let i=b();return L(i.closeSidebar())}),c()(),dd()}if(n&2){let e=b();p(),Ie("sidebar-collapsed",e.isSidebarCollapsed),p(),Ie("hidden",e.isSidebarCollapsed)("collapsed",e.isSidebarCollapsed&&!e.isMobileSidebarOpen),p(6),_("ngIf",!e.isSidebarCollapsed),p(),_("ngIf",!e.isSidebarCollapsed),p(3),_("ngIf",!e.isSidebarCollapsed),p(6),_("ngIf",e.hasRole("admin")||e.hasRole("manager")),p(2),_("ngIf",!e.isSidebarCollapsed),p(11),_("ngIf",e.hasRole("admin")||e.hasRole("manager")),p(2),_("ngIf",!e.isSidebarCollapsed),p(9),be(" ",e.currentUser==null||e.currentUser.first_name==null?null:e.currentUser.first_name.charAt(0),"",e.currentUser==null||e.currentUser.last_name==null?null:e.currentUser.last_name.charAt(0)," "),p(),_("ngIf",!e.isSidebarCollapsed),p(2),_("title","Impostazioni"),p(3),_("title","Logout"),p(10),R(Y(59,22,e.currentTime,"HH:mm")),p(3),R(Y(62,25,e.currentTime,"EEEE, d MMMM yyyy")),p(4),Ie("active",e.isMobileSidebarOpen)}}function VV(n,t){n&1&&(u(0,"div",46),O(1,"router-outlet"),c())}var Ah=class n{constructor(t,e){this.authService=t;this.router=e}sidebarRef;isSidebarCollapsed=!1;isMobileSidebarOpen=!1;currentTime=new Date;currentUser=null;isAuthRoute=!1;timeInterval;userSub;routeSub;authRoutes=["/login","/register","/forgot-password"];ngOnInit(){this.timeInterval=setInterval(()=>{this.currentTime=new Date},1e3),this.userSub=this.authService.currentUser$.subscribe(e=>{this.currentUser=e});let t=this.router.url.split("?")[0];this.isAuthRoute=this.authRoutes.includes(t),this.routeSub=this.router.events.pipe(at(e=>e instanceof Wt)).subscribe(e=>{let r=e.urlAfterRedirects.split("?")[0];this.isAuthRoute=this.authRoutes.includes(r),this.isAuthRoute&&(this.isSidebarCollapsed=!0,this.isMobileSidebarOpen=!1)}),this.checkScreenSize()}onResize(){this.checkScreenSize()}checkScreenSize(){window.innerWidth<768?(this.isSidebarCollapsed=!0,this.isMobileSidebarOpen=!1):this.isMobileSidebarOpen=!1}toggleSidebar(){window.innerWidth<768?(this.isMobileSidebarOpen=!this.isMobileSidebarOpen,this.isSidebarCollapsed=!this.isMobileSidebarOpen):this.isSidebarCollapsed=!this.isSidebarCollapsed}closeSidebar(){window.innerWidth<768?(this.isMobileSidebarOpen=!1,this.isSidebarCollapsed=!0):this.isSidebarCollapsed=!0}onNavItemClicked(){setTimeout(()=>this.closeSidebar(),50)}handleDocumentClick(t){let e=t.target;e&&(e.closest(".sidebar")||e.closest(".sidebar-toggle")||e.closest(".sidebar-hamburger")||(this.isMobileSidebarOpen||!this.isSidebarCollapsed&&window.innerWidth>=768)&&this.closeSidebar())}hasRole(t){return this.authService.hasRole(t)}logout(){this.authService.logout(),this.router.navigate(["/login"])}ngOnDestroy(){this.timeInterval&&clearInterval(this.timeInterval),this.userSub?.unsubscribe(),this.routeSub?.unsubscribe()}static \u0275fac=function(e){return new(e||n)(C(me),C(xe))};static \u0275cmp=fe({type:n,selectors:[["app-root"]],viewQuery:function(e,r){if(e&1&&Pg(xV,7),e&2){let i;Ya(i=Ka())&&(r.sidebarRef=i.first)}},hostBindings:function(e,r){e&1&&T("resize",function(){return r.onResize()},ng)("click",function(o){return r.handleDocumentClick(o)},rg)},decls:3,vars:2,consts:[["authLayout",""],["sidebar",""],[4,"ngIf","ngIfElse"],[1,"app-container"],[1,"sidebar"],[1,"sidebar-header"],[1,"logo-container"],["src","/assets/logo-light.png","alt","Logo",1,"logo-light"],["src","/assets/logo-dark.png","alt","Logo",1,"logo-dark"],["class","app-name",4,"ngIf"],["class","sidebar-toggle",3,"click",4,"ngIf"],[1,"sidebar-nav"],[1,"nav-section"],["class","nav-label",4,"ngIf"],["routerLink","/home","routerLinkActive","active",1,"nav-item",3,"click"],[1,"material-icons"],[1,"nav-text"],["class","nav-section",4,"ngIf"],["routerLink","/timbrature","routerLinkActive","active",1,"nav-item",3,"click"],["routerLink","/crea-timbratura","routerLinkActive","active",1,"nav-item",3,"click"],["routerLink","/kpi","routerLinkActive","active",1,"nav-item",3,"click"],[1,"sidebar-footer"],[1,"user-section"],[1,"user-avatar"],["class","user-info",4,"ngIf"],[1,"user-actions"],["routerLink","/impostazioni","routerLinkActive","active",1,"nav-item","compact",3,"click","title"],[1,"nav-item","compact","logout-btn",3,"click","title"],[1,"main-content"],[1,"top-header"],[1,"sidebar-hamburger",3,"click"],[1,"header-actions"],[1,"current-time"],[1,"current-date"],[1,"page-content"],[1,"mobile-overlay",3,"click"],[1,"app-name"],[1,"sidebar-toggle",3,"click"],[1,"nav-label"],["routerLink","/dipendenti","routerLinkActive","active",1,"nav-item",3,"click"],["routerLink","/profilo-aziendale","routerLinkActive","active",1,"nav-item",3,"click"],["routerLink","/report","routerLinkActive","active",1,"nav-item",3,"click"],[1,"user-info"],[1,"user-details"],[1,"user-name"],[1,"user-role","chip"],[1,"auth-layout"]],template:function(e,r){if(e&1&&x(0,jV,66,28,"ng-container",2)(1,VV,2,0,"ng-template",null,0,Qa),e&2){let i=eo(2);_("ngIf",!r.isAuthRoute)("ngIfElse",i)}},dependencies:[_e,Le,Tl,xt,Nt,Zv,ut],styles:[".app-container[_ngcontent-%COMP%]{display:block;min-height:100vh;background:var(--background)}.app-container.sidebar-collapsed[_ngcontent-%COMP%]{grid-template-columns:0px 1fr}.sidebar[_ngcontent-%COMP%]{background:var(--background);border-right:1px solid var(--smoke-color-1);display:flex;flex-direction:column;width:var(--grandezzasidebar);transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:4px 0 20px var(--shadow);overflow:hidden;position:fixed;top:0;left:0;height:100vh;overflow-y:auto;z-index:1000}.sidebar.hidden[_ngcontent-%COMP%]{width:0;border-right:none;box-shadow:none}.sidebar.collapsed[_ngcontent-%COMP%]:not(.hidden){width:60px}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:var(--gutter-lg);border-bottom:1px solid var(--smoke-color-1);min-height:70px;flex-shrink:0}.logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);overflow:hidden}.app-name[_ngcontent-%COMP%]{font-weight:700;font-size:var(--fs-md);color:var(--primary);white-space:nowrap;opacity:1;padding:var(--gutter-sm);transition:opacity .3s ease}.sidebar.collapsed[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{opacity:0;width:0}.sidebar-toggle[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-color);cursor:pointer;padding:var(--gutter-sm);border-radius:8px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.sidebar-toggle[_ngcontent-%COMP%]:hover{background:var(--smoke-color-1)}.sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:var(--gutter-lg) 0;overflow-y:auto}.nav-section[_ngcontent-%COMP%]{margin-bottom:var(--gutter-lg)}.nav-label[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:600;color:var(--text-color);opacity:.6;padding:0 var(--gutter-lg) var(--gutter-sm) var(--gutter-lg);text-transform:uppercase;letter-spacing:.5px;transition:opacity .3s ease}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{opacity:0;height:0;padding:0;margin:0}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-sm) var(--gutter-lg);color:var(--text-color);text-decoration:none;transition:all .2s ease;border-left:3px solid transparent;margin:2px var(--gutter-sm);border-radius:8px;white-space:nowrap;overflow:hidden}.nav-item[_ngcontent-%COMP%]:hover{background:var(--smoke-color-1);border-left-color:var(--primary)}.nav-item.active[_ngcontent-%COMP%]{background:var(--smoke-color-2);border-left-color:var(--primary);color:var(--primary);font-weight:600}.nav-item.compact[_ngcontent-%COMP%]{padding:var(--gutter-sm);justify-content:center;margin:0}.nav-text[_ngcontent-%COMP%]{transition:opacity .3s ease;opacity:1}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{opacity:0;width:0}.nav-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px;min-width:24px;text-align:center}.sidebar-footer[_ngcontent-%COMP%]{border-top:1px solid var(--smoke-color-1);padding:var(--gutter-sm);flex-shrink:0}.user-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);transition:all .3s ease}.user-avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:var(--gradiente);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:var(--fs-sm);flex-shrink:0}.user-info[_ngcontent-%COMP%]{flex:1;overflow:hidden;transition:opacity .3s ease;opacity:1}.sidebar.collapsed[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{opacity:0;width:0;margin:0}.user-details[_ngcontent-%COMP%]{min-width:0}.user-name[_ngcontent-%COMP%]{font-weight:600;font-size:var(--fs-sm);margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-role.chip[_ngcontent-%COMP%]{font-size:.7rem;padding:2px 8px}.user-actions[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm);margin-left:auto}.logout-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;text-align:left;font-family:inherit}.main-content[_ngcontent-%COMP%]{background:var(--background);display:flex;flex-direction:column;width:calc(100% - var(--grandezzasidebar));min-height:100vh;margin-left:var(--grandezzasidebar);transition:margin-left .3s cubic-bezier(.4,0,.2,1),width .3s ease;box-sizing:border-box;max-width:100%}.top-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:var(--gutter-md);background:var(--background);border-bottom:1px solid var(--smoke-color-1);position:sticky;top:0;z-index:100;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.sidebar-hamburger[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-color);cursor:pointer;padding:var(--gutter-sm);border-radius:8px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.sidebar-hamburger[_ngcontent-%COMP%]:hover{background:var(--smoke-color-1)}.sidebar-hamburger[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-md)}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-lg)}.current-time[_ngcontent-%COMP%]{font-size:var(--fs-md);font-weight:700;color:var(--primary)}.current-date[_ngcontent-%COMP%]{font-size:var(--fs-sm);color:var(--text-color);opacity:.7}.page-content[_ngcontent-%COMP%]{flex:1;padding:0;overflow-y:auto}.mobile-overlay[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:999;opacity:0;visibility:hidden;transition:all .3s ease}.mobile-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}@media (max-width: 768px){.app-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:0;height:100vh;width:280px;transform:translate(-100%);z-index:1000}.sidebar[_ngcontent-%COMP%]:not(.hidden){transform:translate(0)}.mobile-overlay[_ngcontent-%COMP%]{display:block}.header-actions[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm);align-items:flex-end}.current-time[_ngcontent-%COMP%]{font-size:var(--fs-sm)}.current-date[_ngcontent-%COMP%]{font-size:.8rem}}@media (max-width: 480px){.page-content[_ngcontent-%COMP%]{padding:var(--gutter-md)}.sidebar[_ngcontent-%COMP%]{width:100%}}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb);border-radius:var(--scrollbar-radius)}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-thumb-hover)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(-100%)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.app-container.sidebar-collapsed[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{width:100%;margin-left:0;max-width:100%;box-sizing:border-box}"]})};_v(Ah,Q(A({},ly),{providers:[...ly.providers??[],{provide:pn,useClass:ol}]})).catch(n=>console.error(n));
